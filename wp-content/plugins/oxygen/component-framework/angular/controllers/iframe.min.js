!function($){$?($.Unslider=function(t,n){var e=this;return e._="unslider",e.defaults={autoplay:!1,delay:3e3,speed:750,easing:"swing",keys:{prev:37,next:39},nav:!0,arrows:{prev:'<a class="'+e._+'-arrow prev">Prev</a>',next:'<a class="'+e._+'-arrow next">Next</a>'},animation:"horizontal",selectors:{container:"ul:first",slides:"li"},animateHeight:!1,activeClass:e._+"-active",swipe:!0,swipeThreshold:.2},e.$context=t,e.options={},e.$parent=null,e.$container=null,e.$slides=null,e.$nav=null,e.$arrows=[],e.total=0,e.current=0,e.prefix=e._+"-",e.eventSuffix="."+e.prefix+~~(2e3*Math.random()),e.interval=null,e.init=function(t){return e.options=$.extend({},e.defaults,t),e.$container=e.$context.find(e.options.selectors.container).addClass(e.prefix+"wrap"),e.$slides=e.$container.children(e.options.selectors.slides),e.setup(),$.each(["nav","arrows","keys","infinite"],function(t,n){e.options[n]&&e["init"+$._ucfirst(n)]()}),jQuery.event.special.swipe&&e.options.swipe&&e.initSwipe(),e.options.autoplay&&e.start(),e.calculateSlides(),e.$context.trigger(e._+".ready"),e.animate(e.options.index||e.current,"init")},e.setup=function(){e.$context.addClass(e.prefix+e.options.animation).wrap('<div class="'+e._+'" />'),e.$parent=e.$context.parent("."+e._),"static"===e.$context.css("position")&&e.$context.css("position","relative"),e.$context.css("overflow","hidden")},e.calculateSlides=function(){if(e.total=e.$slides.length,"fade"!==e.options.animation){var t="width";"vertical"===e.options.animation&&(t="height"),e.$container.css(t,100*e.total+"%").addClass(e.prefix+"carousel"),e.$slides.css(t,100/e.total+"%")}},e.start=function(){return e.interval=setTimeout(function(){e.next()},e.options.delay),e},e.stop=function(){return clearTimeout(e.interval),e},e.initNav=function(){var t=$('<nav class="'+e.prefix+'nav"><ol /></nav>');e.$slides.each(function(n){var i=this.getAttribute("data-nav")||n+1;$.isFunction(e.options.nav)&&(i=e.options.nav.call(e.$slides.eq(n),n,i)),t.children("ol").append('<li data-slide="'+n+'">'+i+"</li>")}),e.$nav=t.insertAfter(e.$context),e.$nav.find("li").on("click"+e.eventSuffix,function(){var t=$(this).addClass(e.options.activeClass);t.siblings().removeClass(e.options.activeClass),e.animate(t.attr("data-slide"))})},e.initArrows=function(){!0===e.options.arrows&&(e.options.arrows=e.defaults.arrows),$.each(e.options.arrows,function(t,n){e.$arrows.push($(n).insertAfter(e.$context).on("click"+e.eventSuffix,e[t]))})},e.initKeys=function(){!0===e.options.keys&&(e.options.keys=e.defaults.keys),$(document).on("keyup"+e.eventSuffix,function(t){$.each(e.options.keys,function(n,i){t.which===i&&$.isFunction(e[n])&&e[n].call(e)})})},e.initSwipe=function(){var t=e.$slides.width();"fade"!==e.options.animation&&e.$container.on({movestart:function(t){return t.distX>t.distY&&t.distX<-t.distY||t.distX<t.distY&&t.distX>-t.distY?!!t.preventDefault():void e.$container.css("position","relative")},move:function(n){e.$container.css("left",-100*e.current+100*n.distX/t+"%")},moveend:function(n){Math.abs(n.distX)/t>e.options.swipeThreshold?e[n.distX<0?"next":"prev"]():e.$container.animate({left:-100*e.current+"%"},e.options.speed/2)}})},e.initInfinite=function(){var t=["first","last"];$.each(t,function(n,i){e.$slides.push.apply(e.$slides,e.$slides.filter(':not(".'+e._+'-clone")')[i]().clone().addClass(e._+"-clone")["insert"+(0===n?"After":"Before")](e.$slides[t[~~!n]]()))})},e.destroyArrows=function(){$.each(e.$arrows,function(t,n){n.remove()})},e.destroySwipe=function(){e.$container.off("movestart move moveend")},e.destroyKeys=function(){$(document).off("keyup"+e.eventSuffix)},e.setIndex=function(t){return t<0&&(t=e.total-1),e.current=Math.min(Math.max(0,t),e.total-1),e.options.nav&&e.$nav.find('[data-slide="'+e.current+'"]')._active(e.options.activeClass),e.$slides.eq(e.current)._active(e.options.activeClass),e},e.animate=function(t,n){if("first"===t&&(t=0),"last"===t&&(t=e.total),isNaN(t))return e;e.options.autoplay&&e.stop().start(),e.setIndex(t),e.$context.trigger(e._+".change",[t,e.$slides.eq(t)]);var i="animate"+$._ucfirst(e.options.animation);return $.isFunction(e[i])&&e[i](e.current,n),e},e.next=function(){var t=e.current+1;return t>=e.total&&(t=0),e.animate(t,"next")},e.prev=function(){return e.animate(e.current-1,"prev")},e.animateHorizontal=function(t){var n="left";return"rtl"===e.$context.attr("dir")&&(n="right"),e.options.infinite&&e.$container.css("margin-"+n,"-100%"),e.slide(n,t)},e.animateVertical=function(t){return e.options.animateHeight=!0,e.options.infinite&&e.$container.css("margin-top",-e.$slides.outerHeight()),e.slide("top",t)},e.slide=function(t,n){var i;(e.options.animateHeight&&e._move(e.$context,{height:e.$slides.eq(n).outerHeight()},!1),e.options.infinite)&&(n===e.total-1&&(i=e.total-3,n=-1),n===e.total-2&&(i=0,n=e.total-2),"number"==typeof i&&(e.setIndex(i),e.$context.on(e._+".moved",function(){e.current===i&&e.$container.css(t,-100*i+"%").off(e._+".moved")})));var o={};return o[t]=-100*n+"%",e._move(e.$container,o)},e.animateFade=function(t){var n=e.$slides.eq(t).addClass(e.options.activeClass);e._move(n.siblings().removeClass(e.options.activeClass),{opacity:0}),e._move(n,{opacity:1},!1)},e._move=function(t,n,i,o){return!1!==i&&(i=function(){e.$context.trigger(e._+".moved")}),t._move(n,o||e.options.speed,e.options.easing,i)},e.init(n)},$.fn._active=function(t){return this.addClass(t).siblings().removeClass(t)},$._ucfirst=function(t){return(t+"").toLowerCase().replace(/^./,function(t){return t.toUpperCase()})},$.fn._move=function(){return this.stop(!0,!0),$.fn[$.fn.velocity?"velocity":"animate"].apply(this,arguments)},$.fn.unslider=function(t){return this.each(function(){var n=$(this);if("string"==typeof t&&n.data("unslider")){t=t.split(":");var e=n.data("unslider")[t[0]];if($.isFunction(e))return e.apply(n,t[1]?t[1].split(","):null)}return n.data("unslider",new $.Unslider(n,t))})}):console.warn("Unslider needs jQuery")}(window.jQuery),function(fn){"function"==typeof define&&define.amd?define([],fn):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=fn:fn()}(function(){var assign=Object.assign||window.jQuery&&jQuery.extend,threshold=8,requestFrame=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(fn,element){return window.setTimeout(function(){fn()},25)},ignoreTags={textarea:!0,input:!0,select:!0,button:!0},mouseevents={move:"mousemove",cancel:"mouseup dragstart",end:"mouseup"},touchevents={move:"touchmove",cancel:"touchend",end:"touchend"},rspaces=/\s+/,eventOptions={bubbles:!0,cancelable:!0},eventsSymbol=Symbol("events");function getEvents(node){return node[eventsSymbol]||(node[eventsSymbol]={})}function on(node,types,fn,data,selector){types=types.split(rspaces);var type,events=getEvents(node),i=types.length;function handler(e){fn(e,data)}for(;i--;)(events[type=types[i]]||(events[type]=[])).push([fn,handler]),node.addEventListener(type,handler)}function off(node,types,fn,selector){types=types.split(rspaces);var type,handlers,k,events=getEvents(node),i=types.length;if(events)for(;i--;)if(handlers=events[type=types[i]])for(k=handlers.length;k--;)handlers[k][0]===fn&&(node.removeEventListener(type,handlers[k][1]),handlers.splice(k,1))}function trigger(node,type,properties){var event=function(type){return new CustomEvent(type,eventOptions)}(type);properties&&assign(event,properties),node.dispatchEvent(event)}function Timer(fn){var callback=fn,active=!1,running=!1;function trigger(time){active?(callback(),requestFrame(trigger),active=!(running=!0)):running=!1}this.kick=function(fn){active=!0,running||trigger()},this.end=function(fn){var cb=callback;fn&&(running?(callback=active?function(){cb(),fn()}:fn,active=!0):fn())}}function noop(){}function preventDefault(e){e.preventDefault()}function identifiedTouch(touchList,id){var i,l;if(touchList.identifiedTouch)return touchList.identifiedTouch(id);for(i=-1,l=touchList.length;++i<l;)if(touchList[i].identifier===id)return touchList[i]}function changedTouch(e,data){var touch=identifiedTouch(e.changedTouches,data.identifier);if(touch&&(touch.pageX!==data.pageX||touch.pageY!==data.pageY))return touch}function mousemove(e,data){checkThreshold(e,data,e,removeMouse)}function mouseend(e,data){removeMouse()}function removeMouse(){off(document,mouseevents.move,mousemove),off(document,mouseevents.cancel,mouseend)}function removeTouch(data){off(document,touchevents.move,data.touchmove),off(document,touchevents.cancel,data.touchend)}function checkThreshold(e,data,touch,fn){var distX=touch.pageX-data.pageX,distY=touch.pageY-data.pageY;distX*distX+distY*distY<threshold*threshold||function(e,data,touch,distX,distY,fn){var touches=e.targetTouches,time=e.timeStamp-data.timeStamp,template={altKey:e.altKey,ctrlKey:e.ctrlKey,shiftKey:e.shiftKey,startX:data.pageX,startY:data.pageY,distX:distX,distY:distY,deltaX:distX,deltaY:distY,pageX:touch.pageX,pageY:touch.pageY,velocityX:distX/time,velocityY:distY/time,identifier:data.identifier,targetTouches:touches,finger:touches?touches.length:1,enableMove:function(){this.moveEnabled=!0,this.enableMove=noop,e.preventDefault()}};trigger(data.target,"movestart",template),fn(data)}(e,data,touch,distX,distY,fn)}function activeMousemove(e,data){var timer=data.timer;data.touch=e,data.timeStamp=e.timeStamp,timer.kick()}function activeMouseend(e,data){var target=data.target,event=data.event,timer=data.timer;off(document,mouseevents.move,activeMousemove),off(document,mouseevents.end,activeMouseend),endEvent(target,event,timer,function(){setTimeout(function(){off(target,"click",preventDefault)},0)})}function activeTouchend(e,data){var target=data.target,event=data.event,timer=data.timer;identifiedTouch(e.changedTouches,event.identifier)&&(!function(data){off(document,touchevents.move,data.activeTouchmove),off(document,touchevents.end,data.activeTouchend)}(data),endEvent(target,event,timer))}function endEvent(target,event,timer,fn){timer.end(function(){return trigger(target,"moveend",event),fn&&fn()})}if(on(document,"mousedown",function(e){(function(e){return 1===e.which&&!e.ctrlKey&&!e.altKey})(e)&&(function(e){return!!ignoreTags[e.target.tagName.toLowerCase()]}(e)||(on(document,mouseevents.move,mousemove,e),on(document,mouseevents.cancel,mouseend,e)))}),on(document,"touchstart",function(e){if(!ignoreTags[e.target.tagName.toLowerCase()]){var touch=e.changedTouches[0],data={target:touch.target,pageX:touch.pageX,pageY:touch.pageY,identifier:touch.identifier,touchmove:function(e,data){!function(e,data){var touch=changedTouch(e,data);touch&&checkThreshold(e,data,touch,removeTouch)}(e,data)},touchend:function(e,data){!function(e,data){identifiedTouch(e.changedTouches,data.identifier)&&removeTouch(data)}(e,data)}};on(document,touchevents.move,data.touchmove,data),on(document,touchevents.cancel,data.touchend,data)}}),on(document,"movestart",function(e){if(!e.defaultPrevented&&e.moveEnabled){var event={startX:e.startX,startY:e.startY,pageX:e.pageX,pageY:e.pageY,distX:e.distX,distY:e.distY,deltaX:e.deltaX,deltaY:e.deltaY,velocityX:e.velocityX,velocityY:e.velocityY,identifier:e.identifier,targetTouches:e.targetTouches,finger:e.finger},data={target:e.target,event:event,timer:new Timer(function(time){(function(event,touch,timeStamp){var time=timeStamp-event.timeStamp;event.distX=touch.pageX-event.startX,event.distY=touch.pageY-event.startY,event.deltaX=touch.pageX-event.pageX,event.deltaY=touch.pageY-event.pageY,event.velocityX=.3*event.velocityX+.7*event.deltaX/time,event.velocityY=.3*event.velocityY+.7*event.deltaY/time,event.pageX=touch.pageX,event.pageY=touch.pageY})(event,data.touch,data.timeStamp),trigger(data.target,"move",event)}),touch:void 0,timeStamp:e.timeStamp};void 0===e.identifier?(on(e.target,"click",preventDefault),on(document,mouseevents.move,activeMousemove,data),on(document,mouseevents.end,activeMouseend,data)):(data.activeTouchmove=function(e,data){!function(e,data){var event=data.event,timer=data.timer,touch=changedTouch(e,event);touch&&(e.preventDefault(),event.targetTouches=e.targetTouches,data.touch=touch,data.timeStamp=e.timeStamp,timer.kick())}(e,data)},data.activeTouchend=function(e,data){activeTouchend(e,data)},on(document,touchevents.move,data.activeTouchmove,data),on(document,touchevents.end,data.activeTouchend,data))}}),window.jQuery){var properties="startX startY pageX pageY distX distY deltaX deltaY velocityX velocityY".split(" ");jQuery.event.special.movestart={setup:function(){return on(this,"movestart",enableMove1),!1},teardown:function(){return off(this,"movestart",enableMove1),!1},add:add},jQuery.event.special.move={setup:function(){return on(this,"movestart",enableMove2),!1},teardown:function(){return off(this,"movestart",enableMove2),!1},add:add},jQuery.event.special.moveend={setup:function(){return on(this,"movestart",enableMove3),!1},teardown:function(){return off(this,"movestart",enableMove3),!1},add:add}}function enableMove1(e){e.enableMove()}function enableMove2(e){e.enableMove()}function enableMove3(e){e.enableMove()}function add(handleObj){var handler=handleObj.handler;handleObj.handler=function(e){for(var property,i=properties.length;i--;)e[property=properties[i]]=e.originalEvent[property];handler.apply(this,arguments)}}}),function(thisModule){"function"==typeof define&&define.amd?define(["jquery",void 0,"jquery.event.move"],thisModule):"undefined"!=typeof module&&null!==module&&module.exports?module.exports=thisModule:thisModule(jQuery)}(function(jQuery,undefined){var add=jQuery.event.add,remove=jQuery.event.remove,trigger=function(node,type,data){jQuery.event.trigger(type,data,node)},settings={threshold:.4,sensitivity:6};function moveend(e){var w,h,event;w=e.currentTarget.offsetWidth,h=e.currentTarget.offsetHeight,event={distX:e.distX,distY:e.distY,velocityX:e.velocityX,velocityY:e.velocityY,finger:e.finger},e.distX>e.distY?e.distX>-e.distY?(e.distX/w>settings.threshold||1<e.velocityX*e.distX/w*settings.sensitivity)&&(event.type="swiperight",trigger(e.currentTarget,event)):(-e.distY/h>settings.threshold||1<e.velocityY*e.distY/w*settings.sensitivity)&&(event.type="swipeup",trigger(e.currentTarget,event)):e.distX>-e.distY?(e.distY/h>settings.threshold||1<e.velocityY*e.distY/w*settings.sensitivity)&&(event.type="swipedown",trigger(e.currentTarget,event)):(-e.distX/w>settings.threshold||1<e.velocityX*e.distX/w*settings.sensitivity)&&(event.type="swipeleft",trigger(e.currentTarget,event))}function getData(node){var data=jQuery.data(node,"event_swipe");return data||(data={count:0},jQuery.data(node,"event_swipe",data)),data}jQuery.event.special.swipe=jQuery.event.special.swipeleft=jQuery.event.special.swiperight=jQuery.event.special.swipeup=jQuery.event.special.swipedown={setup:function(data,namespaces,eventHandle){if(!(0<getData(this).count++))return add(this,"moveend",moveend),!0},teardown:function(){if(!(0<--getData(this).count))return remove(this,"moveend",moveend),!0},settings:settings}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){var b=function(){if(a&&a.fn&&a.fn.select2&&a.fn.select2.amd)var b=a.fn.select2.amd;var c;return function(){var a,c,d;b&&b.requirejs||(b?c=b:b={},function(b){function e(a,b){return u.call(a,b)}function f(a,b){var c,d,e,f,g,h,i,j,k,l,m,n=b&&b.split("/"),o=s.map,p=o&&o["*"]||{};if(a&&"."===a.charAt(0))if(b){for(g=(a=a.split("/")).length-1,s.nodeIdCompat&&w.test(a[g])&&(a[g]=a[g].replace(w,"")),a=n.slice(0,n.length-1).concat(a),k=0;k<a.length;k+=1)if("."===(m=a[k]))a.splice(k,1),k-=1;else if(".."===m){if(1===k&&(".."===a[2]||".."===a[0]))break;0<k&&(a.splice(k-1,2),k-=2)}a=a.join("/")}else 0===a.indexOf("./")&&(a=a.substring(2));if((n||p)&&o){for(k=(c=a.split("/")).length;0<k;k-=1){if(d=c.slice(0,k).join("/"),n)for(l=n.length;0<l;l-=1)if((e=o[n.slice(0,l).join("/")])&&(e=e[d])){f=e,h=k;break}if(f)break;!i&&p&&p[d]&&(i=p[d],j=k)}!f&&i&&(f=i,h=j),f&&(c.splice(0,h,f),a=c.join("/"))}return a}function g(a,c){return function(){var d=v.call(arguments,0);return"string"!=typeof d[0]&&1===d.length&&d.push(null),n.apply(b,d.concat([a,c]))}}function i(a){return function(b){q[a]=b}}function j(a){if(e(r,a)){var c=r[a];delete r[a],t[a]=!0,m.apply(b,c)}if(!e(q,a)&&!e(t,a))throw new Error("No "+a);return q[a]}function k(a){var b,c=a?a.indexOf("!"):-1;return-1<c&&(b=a.substring(0,c),a=a.substring(c+1,a.length)),[b,a]}var m,n,o,p,q={},r={},s={},t={},u=Object.prototype.hasOwnProperty,v=[].slice,w=/\.js$/;o=function(a,b){var c,d=k(a),e=d[0];return a=d[1],e&&(c=j(e=f(e,b))),e?a=c&&c.normalize?c.normalize(a,function(a){return function(b){return f(b,a)}}(b)):f(a,b):(e=(d=k(a=f(a,b)))[0],a=d[1],e&&(c=j(e))),{f:e?e+"!"+a:a,n:a,pr:e,p:c}},p={require:function(a){return g(a)},exports:function(a){var b=q[a];return void 0!==b?b:q[a]={}},module:function(a){return{id:a,uri:"",exports:q[a],config:function(a){return function(){return s&&s.config&&s.config[a]||{}}}(a)}}},m=function(a,c,d,f){var h,k,l,m,n,s,u=[],v=typeof d;if(f=f||a,"undefined"===v||"function"===v){for(c=!c.length&&d.length?["require","exports","module"]:c,n=0;n<c.length;n+=1)if("require"===(k=(m=o(c[n],f)).f))u[n]=p.require(a);else if("exports"===k)u[n]=p.exports(a),s=!0;else if("module"===k)h=u[n]=p.module(a);else if(e(q,k)||e(r,k)||e(t,k))u[n]=j(k);else{if(!m.p)throw new Error(a+" missing "+k);m.p.load(m.n,g(f,!0),i(k),{}),u[n]=q[k]}l=d?d.apply(q[a],u):void 0,a&&(h&&h.exports!==b&&h.exports!==q[a]?q[a]=h.exports:l===b&&s||(q[a]=l))}else a&&(q[a]=d)},a=c=n=function(a,c,d,e,f){if("string"==typeof a)return p[a]?p[a](c):j(o(a,c).f);if(!a.splice){if((s=a).deps&&n(s.deps,s.callback),!c)return;c.splice?(a=c,c=d,d=null):a=b}return c=c||function(){},"function"==typeof d&&(d=e,e=f),e?m(b,a,c,d):setTimeout(function(){m(b,a,c,d)},4),n},n.config=function(a){return n(a)},a._defined=q,(d=function(a,b,c){if("string"!=typeof a)throw new Error("See almond README: incorrect module build, no module name");b.splice||(c=b,b=[]),e(q,a)||e(r,a)||(r[a]=[a,b,c])}).amd={jQuery:!0}}(),b.requirejs=a,b.require=c,b.define=d)}(),b.define("almond",function(){}),b.define("jquery",[],function(){var b=a||$;return null==b&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),b}),b.define("select2/utils",["jquery"],function(a){function b(a){var b=a.prototype,c=[];for(var d in b){"function"==typeof b[d]&&"constructor"!==d&&c.push(d)}return c}var c={Extend:function(a,b){function c(){this.constructor=a}var d={}.hasOwnProperty;for(var e in b)d.call(b,e)&&(a[e]=b[e]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a},Decorate:function(a,c){function d(){var b=Array.prototype.unshift,d=c.prototype.constructor.length,e=a.prototype.constructor;0<d&&(b.call(arguments,a.prototype.constructor),e=c.prototype.constructor),e.apply(this,arguments)}var f=b(c),g=b(a);c.displayName=a.displayName,d.prototype=new function(){this.constructor=d};for(var h=0;h<g.length;h++){var i=g[h];d.prototype[i]=a.prototype[i]}for(var j=function(a){var b=function(){};a in d.prototype&&(b=d.prototype[a]);var e=c.prototype[a];return function(){return Array.prototype.unshift.call(arguments,b),e.apply(this,arguments)}},k=0;k<f.length;k++){var l=f[k];d.prototype[l]=j(l)}return d}},d=function(){this.listeners={}};return d.prototype.on=function(a,b){this.listeners=this.listeners||{},a in this.listeners?this.listeners[a].push(b):this.listeners[a]=[b]},d.prototype.trigger=function(a){var b=Array.prototype.slice,c=b.call(arguments,1);this.listeners=this.listeners||{},null==c&&(c=[]),0===c.length&&c.push({}),(c[0]._type=a)in this.listeners&&this.invoke(this.listeners[a],b.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},d.prototype.invoke=function(a,b){for(var c=0,d=a.length;c<d;c++)a[c].apply(this,b)},c.Observable=d,c.generateChars=function(a){for(var b="",c=0;c<a;c++){b+=Math.floor(36*Math.random()).toString(36)}return b},c.bind=function(a,b){return function(){a.apply(b,arguments)}},c._convertData=function(a){for(var b in a){var c=b.split("-"),d=a;if(1!==c.length){for(var e=0;e<c.length;e++){var f=c[e];(f=f.substring(0,1).toLowerCase()+f.substring(1))in d||(d[f]={}),e==c.length-1&&(d[f]=a[b]),d=d[f]}delete a[b]}}return a},c.hasScroll=function(b,c){var d=a(c),e=c.style.overflowX,f=c.style.overflowY;return(e!==f||"hidden"!==f&&"visible"!==f)&&("scroll"===e||"scroll"===f||(d.innerHeight()<c.scrollHeight||d.innerWidth()<c.scrollWidth))},c.escapeMarkup=function(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof a?a:String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})},c.appendMany=function(b,c){if("1.7"===a.fn.jquery.substr(0,3)){var d=a();a.map(c,function(a){d=d.add(a)}),c=d}b.append(c)},c}),b.define("select2/results",["jquery","./utils"],function(a,b){function c(a,b,d){this.$element=a,this.data=d,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&b.attr("aria-multiselectable","true"),this.$results=b},c.prototype.clear=function(){this.$results.empty()},c.prototype.displayMessage=function(b){var c=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var d=a('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),e=this.options.get("translations").get(b.message);d.append(c(e(b.args))),d[0].className+=" select2-results__message",this.$results.append(d)},c.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},c.prototype.append=function(a){this.hideLoading();var b=[];if(null!=a.results&&0!==a.results.length){a.results=this.sort(a.results);for(var c=0;c<a.results.length;c++){var d=a.results[c],e=this.option(d);b.push(e)}this.$results.append(b)}else 0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"})},c.prototype.position=function(a,b){b.find(".select2-results").append(a)},c.prototype.sort=function(a){return this.options.get("sorter")(a)},c.prototype.highlightFirstItem=function(){var a=this.$results.find(".select2-results__option[aria-selected]"),b=a.filter("[aria-selected=true]");0<b.length?b.first().trigger("mouseenter"):a.first().trigger("mouseenter"),this.ensureHighlightVisible()},c.prototype.setClasses=function(){var b=this;this.data.current(function(c){var d=a.map(c,function(a){return a.id.toString()});b.$results.find(".select2-results__option[aria-selected]").each(function(){var b=a(this),c=a.data(this,"data"),e=""+c.id;null!=c.element&&c.element.selected||null==c.element&&-1<a.inArray(e,d)?b.attr("aria-selected","true"):b.attr("aria-selected","false")})})},c.prototype.showLoading=function(a){this.hideLoading();var c={disabled:!0,loading:!0,text:this.options.get("translations").get("searching")(a)},d=this.option(c);d.className+=" loading-results",this.$results.prepend(d)},c.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},c.prototype.option=function(b){var c=document.createElement("li");c.className="select2-results__option";var d={role:"treeitem","aria-selected":"false"};for(var e in b.disabled&&(delete d["aria-selected"],d["aria-disabled"]="true"),null==b.id&&delete d["aria-selected"],null!=b._resultId&&(c.id=b._resultId),b.title&&(c.title=b.title),b.children&&(d.role="group",d["aria-label"]=b.text,delete d["aria-selected"]),d){var f=d[e];c.setAttribute(e,f)}if(b.children){var g=a(c),h=document.createElement("strong");h.className="select2-results__group",a(h),this.template(b,h);for(var i=[],j=0;j<b.children.length;j++){var k=b.children[j],l=this.option(k);i.push(l)}var m=a("<ul></ul>",{class:"select2-results__options select2-results__options--nested"});m.append(i),g.append(h),g.append(m)}else this.template(b,c);return a.data(c,"data",b),c},c.prototype.bind=function(b,c){var d=this,e=b.id+"-results";this.$results.attr("id",e),b.on("results:all",function(a){d.clear(),d.append(a.data),b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("results:append",function(a){d.append(a.data),b.isOpen()&&d.setClasses()}),b.on("query",function(a){d.hideMessages(),d.showLoading(a)}),b.on("select",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("unselect",function(){b.isOpen()&&(d.setClasses(),d.highlightFirstItem())}),b.on("open",function(){d.$results.attr("aria-expanded","true"),d.$results.attr("aria-hidden","false"),d.setClasses(),d.ensureHighlightVisible()}),b.on("close",function(){d.$results.attr("aria-expanded","false"),d.$results.attr("aria-hidden","true"),d.$results.removeAttr("aria-activedescendant")}),b.on("results:toggle",function(){var a=d.getHighlightedResults();0!==a.length&&a.trigger("mouseup")}),b.on("results:select",function(){var a=d.getHighlightedResults();if(0!==a.length){var b=a.data("data");"true"==a.attr("aria-selected")?d.trigger("close",{}):d.trigger("select",{data:b})}}),b.on("results:previous",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),c=b.index(a);if(0!==c){var e=c-1;0===a.length&&(e=0);var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top,h=f.offset().top,i=d.$results.scrollTop()+(h-g);0===e?d.$results.scrollTop(0):h-g<0&&d.$results.scrollTop(i)}}),b.on("results:next",function(){var a=d.getHighlightedResults(),b=d.$results.find("[aria-selected]"),e=b.index(a)+1;if(!(e>=b.length)){var f=b.eq(e);f.trigger("mouseenter");var g=d.$results.offset().top+d.$results.outerHeight(!1),h=f.offset().top+f.outerHeight(!1),i=d.$results.scrollTop()+h-g;0===e?d.$results.scrollTop(0):g<h&&d.$results.scrollTop(i)}}),b.on("results:focus",function(a){a.element.addClass("select2-results__option--highlighted")}),b.on("results:message",function(a){d.displayMessage(a)}),a.fn.mousewheel&&this.$results.on("mousewheel",function(a){var b=d.$results.scrollTop(),c=d.$results.get(0).scrollHeight-b+a.deltaY,e=0<a.deltaY&&b-a.deltaY<=0,f=a.deltaY<0&&c<=d.$results.height();e?(d.$results.scrollTop(0),a.preventDefault(),a.stopPropagation()):f&&(d.$results.scrollTop(d.$results.get(0).scrollHeight-d.$results.height()),a.preventDefault(),a.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(b){var c=a(this),e=c.data("data");return"true"===c.attr("aria-selected")?void(d.options.get("multiple")?d.trigger("unselect",{originalEvent:b,data:e}):d.trigger("close",{})):void d.trigger("select",{originalEvent:b,data:e})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(b){var c=a(this).data("data");d.getHighlightedResults().removeClass("select2-results__option--highlighted"),d.trigger("results:focus",{data:c,element:a(this)})})},c.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},c.prototype.destroy=function(){this.$results.remove()},c.prototype.ensureHighlightVisible=function(){var a=this.getHighlightedResults();if(0!==a.length){var c=this.$results.find("[aria-selected]").index(a),d=this.$results.offset().top,e=a.offset().top,f=this.$results.scrollTop()+(e-d),g=e-d;f-=2*a.outerHeight(!1),c<=2?this.$results.scrollTop(0):(g>this.$results.outerHeight()||g<0)&&this.$results.scrollTop(f)}},c.prototype.template=function(b,c){var d=this.options.get("templateResult"),e=this.options.get("escapeMarkup"),f=d(b,c);null==f?c.style.display="none":"string"==typeof f?c.innerHTML=e(f):a(c).append(f)},c}),b.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),b.define("select2/selection/base",["jquery","../utils","../keys"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,b.Observable),d.prototype.render=function(){var b=a('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),b.attr("title",this.$element.attr("title")),b.attr("tabindex",this._tabindex),this.$selection=b},d.prototype.bind=function(a,b){var d=this,e=(a.id,a.id+"-results");this.container=a,this.$selection.on("focus",function(a){d.trigger("focus",a)}),this.$selection.on("blur",function(a){d._handleBlur(a)}),this.$selection.on("keydown",function(a){d.trigger("keypress",a),a.which===c.SPACE&&a.preventDefault()}),a.on("results:focus",function(a){d.$selection.attr("aria-activedescendant",a.data._resultId)}),a.on("selection:update",function(a){d.update(a.data)}),a.on("open",function(){d.$selection.attr("aria-expanded","true"),d.$selection.attr("aria-owns",e),d._attachCloseHandler(a)}),a.on("close",function(){d.$selection.attr("aria-expanded","false"),d.$selection.removeAttr("aria-activedescendant"),d.$selection.removeAttr("aria-owns"),d.$selection.focus(),d._detachCloseHandler(a)}),a.on("enable",function(){d.$selection.attr("tabindex",d._tabindex)}),a.on("disable",function(){d.$selection.attr("tabindex","-1")})},d.prototype._handleBlur=function(b){var c=this;window.setTimeout(function(){document.activeElement==c.$selection[0]||a.contains(c.$selection[0],document.activeElement)||c.trigger("blur",b)},1)},d.prototype._attachCloseHandler=function(b){a(document.body).on("mousedown.select2."+b.id,function(b){var d=a(b.target).closest(".select2");a(".select2.select2-container--open").each(function(){var b=a(this);this!=d[0]&&b.data("element").select2("close")})})},d.prototype._detachCloseHandler=function(b){a(document.body).off("mousedown.select2."+b.id)},d.prototype.position=function(a,b){b.find(".selection").append(a)},d.prototype.destroy=function(){this._detachCloseHandler(this.container)},d.prototype.update=function(a){throw new Error("The `update` method must be defined in child classes.")},d}),b.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(a,b,c,d){function e(){e.__super__.constructor.apply(this,arguments)}return c.Extend(e,b),e.prototype.render=function(){var a=e.__super__.render.call(this);return a.addClass("select2-selection--single"),a.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),a},e.prototype.bind=function(a,b){var c=this;e.__super__.bind.apply(this,arguments);var d=a.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",d),this.$selection.attr("aria-labelledby",d),this.$selection.on("mousedown",function(a){1===a.which&&c.trigger("toggle",{originalEvent:a})}),this.$selection.on("focus",function(a){}),this.$selection.on("blur",function(a){}),a.on("focus",function(b){a.isOpen()||c.$selection.focus()}),a.on("selection:update",function(a){c.update(a.data)})},e.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},e.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},e.prototype.selectionContainer=function(){return a("<span></span>")},e.prototype.update=function(a){if(0!==a.length){var b=a[0],c=this.$selection.find(".select2-selection__rendered"),d=this.display(b,c);c.empty().append(d),c.prop("title",b.title||b.text)}else this.clear()},e}),b.define("select2/selection/multiple",["jquery","./base","../utils"],function(a,b,c){function d(a,b){d.__super__.constructor.apply(this,arguments)}return c.Extend(d,b),d.prototype.render=function(){var a=d.__super__.render.call(this);return a.addClass("select2-selection--multiple"),a.html('<ul class="select2-selection__rendered"></ul>'),a},d.prototype.bind=function(b,c){var e=this;d.__super__.bind.apply(this,arguments),this.$selection.on("click",function(a){e.trigger("toggle",{originalEvent:a})}),this.$selection.on("click",".select2-selection__choice__remove",function(b){if(!e.options.get("disabled")){var f=a(this).parent().data("data");e.trigger("unselect",{originalEvent:b,data:f})}})},d.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},d.prototype.display=function(a,b){var c=this.options.get("templateSelection");return this.options.get("escapeMarkup")(c(a,b))},d.prototype.selectionContainer=function(){return a('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},d.prototype.update=function(a){if(this.clear(),0!==a.length){for(var b=[],d=0;d<a.length;d++){var e=a[d],f=this.selectionContainer(),g=this.display(e,f);f.append(g),f.prop("title",e.title||e.text),f.data("data",e),b.push(f)}var h=this.$selection.find(".select2-selection__rendered");c.appendMany(h,b)}},d}),b.define("select2/selection/placeholder",["../utils"],function(a){function b(a,b,c){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c)}return b.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},b.prototype.createPlaceholder=function(a,b){var c=this.selectionContainer();return c.html(this.display(b)),c.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),c},b.prototype.update=function(a,b){var c=1==b.length&&b[0].id!=this.placeholder.id;if(1<b.length||c)return a.call(this,b);this.clear();var e=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(e)},b}),b.define("select2/selection/allowClear",["jquery","../keys"],function(a,b){function c(){}return c.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(a){d._handleClear(a)}),b.on("keypress",function(a){d._handleKeyboardClear(a,b)})},c.prototype._handleClear=function(a,b){if(!this.options.get("disabled")){var c=this.$selection.find(".select2-selection__clear");if(0!==c.length){b.stopPropagation();for(var d=c.data("data"),e=0;e<d.length;e++){var f={data:d[e]};if(this.trigger("unselect",f),f.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},c.prototype._handleKeyboardClear=function(a,c,d){d.isOpen()||(c.which==b.DELETE||c.which==b.BACKSPACE)&&this._handleClear(c)},c.prototype.update=function(b,c){if(b.call(this,c),!(0<this.$selection.find(".select2-selection__placeholder").length||0===c.length)){var d=a('<span class="select2-selection__clear">&times;</span>');d.data("data",c),this.$selection.find(".select2-selection__rendered").prepend(d)}},c}),b.define("select2/selection/search",["jquery","../utils","../keys"],function(a,b,c){function d(a,b,c){a.call(this,b,c)}return d.prototype.render=function(b){var c=a('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=c,this.$search=c.find("input");var d=b.call(this);return this._transferTabIndex(),d},d.prototype.bind=function(a,b,d){var e=this;a.call(this,b,d),b.on("open",function(){e.$search.trigger("focus")}),b.on("close",function(){e.$search.val(""),e.$search.removeAttr("aria-activedescendant"),e.$search.trigger("focus")}),b.on("enable",function(){e.$search.prop("disabled",!1),e._transferTabIndex()}),b.on("disable",function(){e.$search.prop("disabled",!0)}),b.on("focus",function(a){e.$search.trigger("focus")}),b.on("results:focus",function(a){e.$search.attr("aria-activedescendant",a.id)}),this.$selection.on("focusin",".select2-search--inline",function(a){e.trigger("focus",a)}),this.$selection.on("focusout",".select2-search--inline",function(a){e._handleBlur(a)}),this.$selection.on("keydown",".select2-search--inline",function(a){if(a.stopPropagation(),e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented(),a.which===c.BACKSPACE&&""===e.$search.val()){var d=e.$searchContainer.prev(".select2-selection__choice");if(0<d.length){var f=d.data("data");e.searchRemoveChoice(f),a.preventDefault()}}});var f=document.documentMode,g=f&&f<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(a){return g?void e.$selection.off("input.search input.searchcheck"):void e.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(a){if(g&&"input"===a.type)e.$selection.off("input.search input.searchcheck");else{var b=a.which;b!=c.SHIFT&&b!=c.CTRL&&b!=c.ALT&&b!=c.TAB&&e.handleSearch(a)}})},d.prototype._transferTabIndex=function(a){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},d.prototype.createPlaceholder=function(a,b){this.$search.attr("placeholder",b.text)},d.prototype.update=function(a,b){var c=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),a.call(this,b),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),c&&this.$search.focus()},d.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var a=this.$search.val();this.trigger("query",{term:a})}this._keyUpPrevented=!1},d.prototype.searchRemoveChoice=function(a,b){this.trigger("unselect",{data:b}),this.$search.val(b.text),this.handleSearch()},d.prototype.resizeSearch=function(){this.$search.css("width","25px");var a="";""!==this.$search.attr("placeholder")?a=this.$selection.find(".select2-selection__rendered").innerWidth():a=.75*(this.$search.val().length+1)+"em";this.$search.css("width",a)},d}),b.define("select2/selection/eventRelay",["jquery"],function(a){function b(){}return b.prototype.bind=function(b,c,d){var e=this,f=["open","opening","close","closing","select","selecting","unselect","unselecting"],g=["opening","closing","selecting","unselecting"];b.call(this,c,d),c.on("*",function(b,c){if(-1!==a.inArray(b,f)){c=c||{};var d=a.Event("select2:"+b,{params:c});e.$element.trigger(d),-1!==a.inArray(b,g)&&(c.prevented=d.isDefaultPrevented())}})},b}),b.define("select2/translation",["jquery","require"],function(a,b){function c(a){this.dict=a||{}}return c.prototype.all=function(){return this.dict},c.prototype.get=function(a){return this.dict[a]},c.prototype.extend=function(b){this.dict=a.extend({},b.all(),this.dict)},c._cache={},c.loadPath=function(a){if(!(a in c._cache)){var d=b(a);c._cache[a]=d}return new c(c._cache[a])},c}),b.define("select2/diacritics",[],function(){return{"Ⓐ":"A","Ａ":"A","À":"A","Á":"A","Â":"A","Ầ":"A","Ấ":"A","Ẫ":"A","Ẩ":"A","Ã":"A","Ā":"A","Ă":"A","Ằ":"A","Ắ":"A","Ẵ":"A","Ẳ":"A","Ȧ":"A","Ǡ":"A","Ä":"A","Ǟ":"A","Ả":"A","Å":"A","Ǻ":"A","Ǎ":"A","Ȁ":"A","Ȃ":"A","Ạ":"A","Ậ":"A","Ặ":"A","Ḁ":"A","Ą":"A","Ⱥ":"A","Ɐ":"A","Ꜳ":"AA","Æ":"AE","Ǽ":"AE","Ǣ":"AE","Ꜵ":"AO","Ꜷ":"AU","Ꜹ":"AV","Ꜻ":"AV","Ꜽ":"AY","Ⓑ":"B","Ｂ":"B","Ḃ":"B","Ḅ":"B","Ḇ":"B","Ƀ":"B","Ƃ":"B","Ɓ":"B","Ⓒ":"C","Ｃ":"C","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","Ç":"C","Ḉ":"C","Ƈ":"C","Ȼ":"C","Ꜿ":"C","Ⓓ":"D","Ｄ":"D","Ḋ":"D","Ď":"D","Ḍ":"D","Ḑ":"D","Ḓ":"D","Ḏ":"D","Đ":"D","Ƌ":"D","Ɗ":"D","Ɖ":"D","Ꝺ":"D","Ǳ":"DZ","Ǆ":"DZ","ǲ":"Dz","ǅ":"Dz","Ⓔ":"E","Ｅ":"E","È":"E","É":"E","Ê":"E","Ề":"E","Ế":"E","Ễ":"E","Ể":"E","Ẽ":"E","Ē":"E","Ḕ":"E","Ḗ":"E","Ĕ":"E","Ė":"E","Ë":"E","Ẻ":"E","Ě":"E","Ȅ":"E","Ȇ":"E","Ẹ":"E","Ệ":"E","Ȩ":"E","Ḝ":"E","Ę":"E","Ḙ":"E","Ḛ":"E","Ɛ":"E","Ǝ":"E","Ⓕ":"F","Ｆ":"F","Ḟ":"F","Ƒ":"F","Ꝼ":"F","Ⓖ":"G","Ｇ":"G","Ǵ":"G","Ĝ":"G","Ḡ":"G","Ğ":"G","Ġ":"G","Ǧ":"G","Ģ":"G","Ǥ":"G","Ɠ":"G","Ꞡ":"G","Ᵹ":"G","Ꝿ":"G","Ⓗ":"H","Ｈ":"H","Ĥ":"H","Ḣ":"H","Ḧ":"H","Ȟ":"H","Ḥ":"H","Ḩ":"H","Ḫ":"H","Ħ":"H","Ⱨ":"H","Ⱶ":"H","Ɥ":"H","Ⓘ":"I","Ｉ":"I","Ì":"I","Í":"I","Î":"I","Ĩ":"I","Ī":"I","Ĭ":"I","İ":"I","Ï":"I","Ḯ":"I","Ỉ":"I","Ǐ":"I","Ȉ":"I","Ȋ":"I","Ị":"I","Į":"I","Ḭ":"I","Ɨ":"I","Ⓙ":"J","Ｊ":"J","Ĵ":"J","Ɉ":"J","Ⓚ":"K","Ｋ":"K","Ḱ":"K","Ǩ":"K","Ḳ":"K","Ķ":"K","Ḵ":"K","Ƙ":"K","Ⱪ":"K","Ꝁ":"K","Ꝃ":"K","Ꝅ":"K","Ꞣ":"K","Ⓛ":"L","Ｌ":"L","Ŀ":"L","Ĺ":"L","Ľ":"L","Ḷ":"L","Ḹ":"L","Ļ":"L","Ḽ":"L","Ḻ":"L","Ł":"L","Ƚ":"L","Ɫ":"L","Ⱡ":"L","Ꝉ":"L","Ꝇ":"L","Ꞁ":"L","Ǉ":"LJ","ǈ":"Lj","Ⓜ":"M","Ｍ":"M","Ḿ":"M","Ṁ":"M","Ṃ":"M","Ɱ":"M","Ɯ":"M","Ⓝ":"N","Ｎ":"N","Ǹ":"N","Ń":"N","Ñ":"N","Ṅ":"N","Ň":"N","Ṇ":"N","Ņ":"N","Ṋ":"N","Ṉ":"N","Ƞ":"N","Ɲ":"N","Ꞑ":"N","Ꞥ":"N","Ǌ":"NJ","ǋ":"Nj","Ⓞ":"O","Ｏ":"O","Ò":"O","Ó":"O","Ô":"O","Ồ":"O","Ố":"O","Ỗ":"O","Ổ":"O","Õ":"O","Ṍ":"O","Ȭ":"O","Ṏ":"O","Ō":"O","Ṑ":"O","Ṓ":"O","Ŏ":"O","Ȯ":"O","Ȱ":"O","Ö":"O","Ȫ":"O","Ỏ":"O","Ő":"O","Ǒ":"O","Ȍ":"O","Ȏ":"O","Ơ":"O","Ờ":"O","Ớ":"O","Ỡ":"O","Ở":"O","Ợ":"O","Ọ":"O","Ộ":"O","Ǫ":"O","Ǭ":"O","Ø":"O","Ǿ":"O","Ɔ":"O","Ɵ":"O","Ꝋ":"O","Ꝍ":"O","Ƣ":"OI","Ꝏ":"OO","Ȣ":"OU","Ⓟ":"P","Ｐ":"P","Ṕ":"P","Ṗ":"P","Ƥ":"P","Ᵽ":"P","Ꝑ":"P","Ꝓ":"P","Ꝕ":"P","Ⓠ":"Q","Ｑ":"Q","Ꝗ":"Q","Ꝙ":"Q","Ɋ":"Q","Ⓡ":"R","Ｒ":"R","Ŕ":"R","Ṙ":"R","Ř":"R","Ȑ":"R","Ȓ":"R","Ṛ":"R","Ṝ":"R","Ŗ":"R","Ṟ":"R","Ɍ":"R","Ɽ":"R","Ꝛ":"R","Ꞧ":"R","Ꞃ":"R","Ⓢ":"S","Ｓ":"S","ẞ":"S","Ś":"S","Ṥ":"S","Ŝ":"S","Ṡ":"S","Š":"S","Ṧ":"S","Ṣ":"S","Ṩ":"S","Ș":"S","Ş":"S","Ȿ":"S","Ꞩ":"S","Ꞅ":"S","Ⓣ":"T","Ｔ":"T","Ṫ":"T","Ť":"T","Ṭ":"T","Ț":"T","Ţ":"T","Ṱ":"T","Ṯ":"T","Ŧ":"T","Ƭ":"T","Ʈ":"T","Ⱦ":"T","Ꞇ":"T","Ꜩ":"TZ","Ⓤ":"U","Ｕ":"U","Ù":"U","Ú":"U","Û":"U","Ũ":"U","Ṹ":"U","Ū":"U","Ṻ":"U","Ŭ":"U","Ü":"U","Ǜ":"U","Ǘ":"U","Ǖ":"U","Ǚ":"U","Ủ":"U","Ů":"U","Ű":"U","Ǔ":"U","Ȕ":"U","Ȗ":"U","Ư":"U","Ừ":"U","Ứ":"U","Ữ":"U","Ử":"U","Ự":"U","Ụ":"U","Ṳ":"U","Ų":"U","Ṷ":"U","Ṵ":"U","Ʉ":"U","Ⓥ":"V","Ｖ":"V","Ṽ":"V","Ṿ":"V","Ʋ":"V","Ꝟ":"V","Ʌ":"V","Ꝡ":"VY","Ⓦ":"W","Ｗ":"W","Ẁ":"W","Ẃ":"W","Ŵ":"W","Ẇ":"W","Ẅ":"W","Ẉ":"W","Ⱳ":"W","Ⓧ":"X","Ｘ":"X","Ẋ":"X","Ẍ":"X","Ⓨ":"Y","Ｙ":"Y","Ỳ":"Y","Ý":"Y","Ŷ":"Y","Ỹ":"Y","Ȳ":"Y","Ẏ":"Y","Ÿ":"Y","Ỷ":"Y","Ỵ":"Y","Ƴ":"Y","Ɏ":"Y","Ỿ":"Y","Ⓩ":"Z","Ｚ":"Z","Ź":"Z","Ẑ":"Z","Ż":"Z","Ž":"Z","Ẓ":"Z","Ẕ":"Z","Ƶ":"Z","Ȥ":"Z","Ɀ":"Z","Ⱬ":"Z","Ꝣ":"Z","ⓐ":"a","ａ":"a","ẚ":"a","à":"a","á":"a","â":"a","ầ":"a","ấ":"a","ẫ":"a","ẩ":"a","ã":"a","ā":"a","ă":"a","ằ":"a","ắ":"a","ẵ":"a","ẳ":"a","ȧ":"a","ǡ":"a","ä":"a","ǟ":"a","ả":"a","å":"a","ǻ":"a","ǎ":"a","ȁ":"a","ȃ":"a","ạ":"a","ậ":"a","ặ":"a","ḁ":"a","ą":"a","ⱥ":"a","ɐ":"a","ꜳ":"aa","æ":"ae","ǽ":"ae","ǣ":"ae","ꜵ":"ao","ꜷ":"au","ꜹ":"av","ꜻ":"av","ꜽ":"ay","ⓑ":"b","ｂ":"b","ḃ":"b","ḅ":"b","ḇ":"b","ƀ":"b","ƃ":"b","ɓ":"b","ⓒ":"c","ｃ":"c","ć":"c","ĉ":"c","ċ":"c","č":"c","ç":"c","ḉ":"c","ƈ":"c","ȼ":"c","ꜿ":"c","ↄ":"c","ⓓ":"d","ｄ":"d","ḋ":"d","ď":"d","ḍ":"d","ḑ":"d","ḓ":"d","ḏ":"d","đ":"d","ƌ":"d","ɖ":"d","ɗ":"d","ꝺ":"d","ǳ":"dz","ǆ":"dz","ⓔ":"e","ｅ":"e","è":"e","é":"e","ê":"e","ề":"e","ế":"e","ễ":"e","ể":"e","ẽ":"e","ē":"e","ḕ":"e","ḗ":"e","ĕ":"e","ė":"e","ë":"e","ẻ":"e","ě":"e","ȅ":"e","ȇ":"e","ẹ":"e","ệ":"e","ȩ":"e","ḝ":"e","ę":"e","ḙ":"e","ḛ":"e","ɇ":"e","ɛ":"e","ǝ":"e","ⓕ":"f","ｆ":"f","ḟ":"f","ƒ":"f","ꝼ":"f","ⓖ":"g","ｇ":"g","ǵ":"g","ĝ":"g","ḡ":"g","ğ":"g","ġ":"g","ǧ":"g","ģ":"g","ǥ":"g","ɠ":"g","ꞡ":"g","ᵹ":"g","ꝿ":"g","ⓗ":"h","ｈ":"h","ĥ":"h","ḣ":"h","ḧ":"h","ȟ":"h","ḥ":"h","ḩ":"h","ḫ":"h","ẖ":"h","ħ":"h","ⱨ":"h","ⱶ":"h","ɥ":"h","ƕ":"hv","ⓘ":"i","ｉ":"i","ì":"i","í":"i","î":"i","ĩ":"i","ī":"i","ĭ":"i","ï":"i","ḯ":"i","ỉ":"i","ǐ":"i","ȉ":"i","ȋ":"i","ị":"i","į":"i","ḭ":"i","ɨ":"i","ı":"i","ⓙ":"j","ｊ":"j","ĵ":"j","ǰ":"j","ɉ":"j","ⓚ":"k","ｋ":"k","ḱ":"k","ǩ":"k","ḳ":"k","ķ":"k","ḵ":"k","ƙ":"k","ⱪ":"k","ꝁ":"k","ꝃ":"k","ꝅ":"k","ꞣ":"k","ⓛ":"l","ｌ":"l","ŀ":"l","ĺ":"l","ľ":"l","ḷ":"l","ḹ":"l","ļ":"l","ḽ":"l","ḻ":"l","ſ":"l","ł":"l","ƚ":"l","ɫ":"l","ⱡ":"l","ꝉ":"l","ꞁ":"l","ꝇ":"l","ǉ":"lj","ⓜ":"m","ｍ":"m","ḿ":"m","ṁ":"m","ṃ":"m","ɱ":"m","ɯ":"m","ⓝ":"n","ｎ":"n","ǹ":"n","ń":"n","ñ":"n","ṅ":"n","ň":"n","ṇ":"n","ņ":"n","ṋ":"n","ṉ":"n","ƞ":"n","ɲ":"n","ŉ":"n","ꞑ":"n","ꞥ":"n","ǌ":"nj","ⓞ":"o","ｏ":"o","ò":"o","ó":"o","ô":"o","ồ":"o","ố":"o","ỗ":"o","ổ":"o","õ":"o","ṍ":"o","ȭ":"o","ṏ":"o","ō":"o","ṑ":"o","ṓ":"o","ŏ":"o","ȯ":"o","ȱ":"o","ö":"o","ȫ":"o","ỏ":"o","ő":"o","ǒ":"o","ȍ":"o","ȏ":"o","ơ":"o","ờ":"o","ớ":"o","ỡ":"o","ở":"o","ợ":"o","ọ":"o","ộ":"o","ǫ":"o","ǭ":"o","ø":"o","ǿ":"o","ɔ":"o","ꝋ":"o","ꝍ":"o","ɵ":"o","ƣ":"oi","ȣ":"ou","ꝏ":"oo","ⓟ":"p","ｐ":"p","ṕ":"p","ṗ":"p","ƥ":"p","ᵽ":"p","ꝑ":"p","ꝓ":"p","ꝕ":"p","ⓠ":"q","ｑ":"q","ɋ":"q","ꝗ":"q","ꝙ":"q","ⓡ":"r","ｒ":"r","ŕ":"r","ṙ":"r","ř":"r","ȑ":"r","ȓ":"r","ṛ":"r","ṝ":"r","ŗ":"r","ṟ":"r","ɍ":"r","ɽ":"r","ꝛ":"r","ꞧ":"r","ꞃ":"r","ⓢ":"s","ｓ":"s","ß":"s","ś":"s","ṥ":"s","ŝ":"s","ṡ":"s","š":"s","ṧ":"s","ṣ":"s","ṩ":"s","ș":"s","ş":"s","ȿ":"s","ꞩ":"s","ꞅ":"s","ẛ":"s","ⓣ":"t","ｔ":"t","ṫ":"t","ẗ":"t","ť":"t","ṭ":"t","ț":"t","ţ":"t","ṱ":"t","ṯ":"t","ŧ":"t","ƭ":"t","ʈ":"t","ⱦ":"t","ꞇ":"t","ꜩ":"tz","ⓤ":"u","ｕ":"u","ù":"u","ú":"u","û":"u","ũ":"u","ṹ":"u","ū":"u","ṻ":"u","ŭ":"u","ü":"u","ǜ":"u","ǘ":"u","ǖ":"u","ǚ":"u","ủ":"u","ů":"u","ű":"u","ǔ":"u","ȕ":"u","ȗ":"u","ư":"u","ừ":"u","ứ":"u","ữ":"u","ử":"u","ự":"u","ụ":"u","ṳ":"u","ų":"u","ṷ":"u","ṵ":"u","ʉ":"u","ⓥ":"v","ｖ":"v","ṽ":"v","ṿ":"v","ʋ":"v","ꝟ":"v","ʌ":"v","ꝡ":"vy","ⓦ":"w","ｗ":"w","ẁ":"w","ẃ":"w","ŵ":"w","ẇ":"w","ẅ":"w","ẘ":"w","ẉ":"w","ⱳ":"w","ⓧ":"x","ｘ":"x","ẋ":"x","ẍ":"x","ⓨ":"y","ｙ":"y","ỳ":"y","ý":"y","ŷ":"y","ỹ":"y","ȳ":"y","ẏ":"y","ÿ":"y","ỷ":"y","ẙ":"y","ỵ":"y","ƴ":"y","ɏ":"y","ỿ":"y","ⓩ":"z","ｚ":"z","ź":"z","ẑ":"z","ż":"z","ž":"z","ẓ":"z","ẕ":"z","ƶ":"z","ȥ":"z","ɀ":"z","ⱬ":"z","ꝣ":"z","Ά":"Α","Έ":"Ε","Ή":"Η","Ί":"Ι","Ϊ":"Ι","Ό":"Ο","Ύ":"Υ","Ϋ":"Υ","Ώ":"Ω","ά":"α","έ":"ε","ή":"η","ί":"ι","ϊ":"ι","ΐ":"ι","ό":"ο","ύ":"υ","ϋ":"υ","ΰ":"υ","ω":"ω","ς":"σ"}}),b.define("select2/data/base",["../utils"],function(a){function b(a,c){b.__super__.constructor.call(this)}return a.Extend(b,a.Observable),b.prototype.current=function(a){throw new Error("The `current` method must be defined in child classes.")},b.prototype.query=function(a,b){throw new Error("The `query` method must be defined in child classes.")},b.prototype.bind=function(a,b){},b.prototype.destroy=function(){},b.prototype.generateResultId=function(b,c){var d=b.id+"-result-";return(d+=a.generateChars(4))+(null!=c.id?"-"+c.id.toString():"-"+a.generateChars(4))},b}),b.define("select2/data/select",["./base","../utils","jquery"],function(a,b,c){function d(a,b){this.$element=a,this.options=b,d.__super__.constructor.call(this)}return b.Extend(d,a),d.prototype.current=function(a){var b=[],d=this;this.$element.find(":selected").each(function(){var a=c(this),e=d.item(a);b.push(e)}),a(b)},d.prototype.select=function(a){var b=this;if(a.selected=!0,c(a.element).is("option"))return a.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(d){var e=[];(a=[a]).push.apply(a,d);for(var f=0;f<a.length;f++){var g=a[f].id;-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")});else{var d=a.id;this.$element.val(d),this.$element.trigger("change")}},d.prototype.unselect=function(a){var b=this;if(this.$element.prop("multiple"))return a.selected=!1,c(a.element).is("option")?(a.element.selected=!1,void this.$element.trigger("change")):void this.current(function(d){for(var e=[],f=0;f<d.length;f++){var g=d[f].id;g!==a.id&&-1===c.inArray(g,e)&&e.push(g)}b.$element.val(e),b.$element.trigger("change")})},d.prototype.bind=function(a,b){var c=this;(this.container=a).on("select",function(a){c.select(a.data)}),a.on("unselect",function(a){c.unselect(a.data)})},d.prototype.destroy=function(){this.$element.find("*").each(function(){c.removeData(this,"data")})},d.prototype.query=function(a,b){var d=[],e=this;this.$element.children().each(function(){var b=c(this);if(b.is("option")||b.is("optgroup")){var f=e.item(b),g=e.matches(a,f);null!==g&&d.push(g)}}),b({results:d})},d.prototype.addOptions=function(a){b.appendMany(this.$element,a)},d.prototype.option=function(a){var b;a.children?(b=document.createElement("optgroup")).label=a.text:void 0!==(b=document.createElement("option")).textContent?b.textContent=a.text:b.innerText=a.text,a.id&&(b.value=a.id),a.disabled&&(b.disabled=!0),a.selected&&(b.selected=!0),a.title&&(b.title=a.title);var d=c(b),e=this._normalizeItem(a);return e.element=b,c.data(b,"data",e),d},d.prototype.item=function(a){var b={};if(null!=(b=c.data(a[0],"data")))return b;if(a.is("option"))b={id:a.val(),text:a.text(),disabled:a.prop("disabled"),selected:a.prop("selected"),title:a.prop("title")};else if(a.is("optgroup")){b={text:a.prop("label"),children:[],title:a.prop("title")};for(var d=a.children("option"),e=[],f=0;f<d.length;f++){var g=c(d[f]),h=this.item(g);e.push(h)}b.children=e}return(b=this._normalizeItem(b)).element=a[0],c.data(a[0],"data",b),b},d.prototype._normalizeItem=function(a){c.isPlainObject(a)||(a={id:a,text:a});return null!=(a=c.extend({},{text:""},a)).id&&(a.id=a.id.toString()),null!=a.text&&(a.text=a.text.toString()),null==a._resultId&&a.id&&null!=this.container&&(a._resultId=this.generateResultId(this.container,a)),c.extend({},{selected:!1,disabled:!1},a)},d.prototype.matches=function(a,b){return this.options.get("matcher")(a,b)},d}),b.define("select2/data/array",["./select","../utils","jquery"],function(a,b,c){function d(a,b){var c=b.get("data")||[];d.__super__.constructor.call(this,a,b),this.addOptions(this.convertToOptions(c))}return b.Extend(d,a),d.prototype.select=function(a){var b=this.$element.find("option").filter(function(b,c){return c.value==a.id.toString()});0===b.length&&(b=this.option(a),this.addOptions(b)),d.__super__.select.call(this,a)},d.prototype.convertToOptions=function(a){function d(a){return function(){return c(this).val()==a.id}}for(var e=this,f=this.$element.find("option"),g=f.map(function(){return e.item(c(this)).id}).get(),h=[],i=0;i<a.length;i++){var j=this._normalizeItem(a[i]);if(0<=c.inArray(j.id,g)){var k=f.filter(d(j)),l=this.item(k),m=c.extend(!0,{},j,l),n=this.option(m);k.replaceWith(n)}else{var o=this.option(j);if(j.children){var p=this.convertToOptions(j.children);b.appendMany(o,p)}h.push(o)}}return h},d}),b.define("select2/data/ajax",["./array","../utils","jquery"],function(a,b,c){function d(a,b){this.ajaxOptions=this._applyDefaults(b.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),d.__super__.constructor.call(this,a,b)}return b.Extend(d,a),d.prototype._applyDefaults=function(a){var b={data:function(a){return c.extend({},a,{q:a.term})},transport:function(a,b,d){var e=c.ajax(a);return e.then(b),e.fail(d),e}};return c.extend({},b,a,!0)},d.prototype.processResults=function(a){return a},d.prototype.query=function(a,b){function d(){var d=f.transport(f,function(d){var f=e.processResults(d,a);e.options.get("debug")&&window.console&&console.error&&(f&&f.results&&c.isArray(f.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),b(f)},function(){d.status&&"0"===d.status||e.trigger("results:message",{message:"errorLoading"})});e._request=d}var e=this;null!=this._request&&(c.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var f=c.extend({type:"GET"},this.ajaxOptions);"function"==typeof f.url&&(f.url=f.url.call(this.$element,a)),"function"==typeof f.data&&(f.data=f.data.call(this.$element,a)),this.ajaxOptions.delay&&null!=a.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(d,this.ajaxOptions.delay)):d()},d}),b.define("select2/data/tags",["jquery"],function(a){function b(b,c,d){var e=d.get("tags"),f=d.get("createTag");void 0!==f&&(this.createTag=f);var g=d.get("insertTag");if(void 0!==g&&(this.insertTag=g),b.call(this,c,d),a.isArray(e))for(var h=0;h<e.length;h++){var i=e[h],j=this._normalizeItem(i),k=this.option(j);this.$element.append(k)}}return b.prototype.query=function(a,b,c){var e=this;return this._removeOldTags(),null==b.term||null!=b.page?void a.call(this,b,c):void a.call(this,b,function d(a,f){for(var g=a.results,h=0;h<g.length;h++){var i=g[h],j=null!=i.children&&!d({results:i.children},!0);if(i.text===b.term||j)return!f&&(a.data=g,void c(a))}if(f)return!0;var l=e.createTag(b);if(null!=l){var m=e.option(l);m.attr("data-select2-tag",!0),e.addOptions([m]),e.insertTag(g,l)}a.results=g,c(a)})},b.prototype.createTag=function(b,c){var d=a.trim(c.term);return""===d?null:{id:d,text:d}},b.prototype.insertTag=function(a,b,c){b.unshift(c)},b.prototype._removeOldTags=function(b){(this._lastTag,this.$element.find("option[data-select2-tag]")).each(function(){this.selected||a(this).remove()})},b}),b.define("select2/data/tokenizer",["jquery"],function(a){function b(a,b,c){var d=c.get("tokenizer");void 0!==d&&(this.tokenizer=d),a.call(this,b,c)}return b.prototype.bind=function(a,b,c){a.call(this,b,c),this.$search=b.dropdown.$search||b.selection.$search||c.find(".select2-search__field")},b.prototype.query=function(b,c,d){var g=this;c.term=c.term||"";var h=this.tokenizer(c,this.options,function(b){var c=g._normalizeItem(b);if(!g.$element.find("option").filter(function(){return a(this).val()===c.id}).length){var e=g.option(c);e.attr("data-select2-tag",!0),g._removeOldTags(),g.addOptions([e])}!function(a){g.trigger("select",{data:a})}(c)});h.term!==c.term&&(this.$search.length&&(this.$search.val(h.term),this.$search.focus()),c.term=h.term),b.call(this,c,d)},b.prototype.tokenizer=function(b,c,d,e){for(var f=d.get("tokenSeparators")||[],g=c.term,h=0,i=this.createTag||function(a){return{id:a.term,text:a.term}};h<g.length;){var j=g[h];if(-1!==a.inArray(j,f)){var k=g.substr(0,h),m=i(a.extend({},c,{term:k}));null!=m?(e(m),g=g.substr(h+1)||"",h=0):h++}else h++}return{term:g}},b}),b.define("select2/data/minimumInputLength",[],function(){function a(a,b,c){this.minimumInputLength=c.get("minimumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",b.term.length<this.minimumInputLength?void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumInputLength",[],function(){function a(a,b,c){this.maximumInputLength=c.get("maximumInputLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){return b.term=b.term||"",0<this.maximumInputLength&&b.term.length>this.maximumInputLength?void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:b.term,params:b}}):void a.call(this,b,c)},a}),b.define("select2/data/maximumSelectionLength",[],function(){function a(a,b,c){this.maximumSelectionLength=c.get("maximumSelectionLength"),a.call(this,b,c)}return a.prototype.query=function(a,b,c){var d=this;this.current(function(e){var f=null!=e?e.length:0;return 0<d.maximumSelectionLength&&f>=d.maximumSelectionLength?void d.trigger("results:message",{message:"maximumSelected",args:{maximum:d.maximumSelectionLength}}):void a.call(d,b,c)})},a}),b.define("select2/dropdown",["jquery","./utils"],function(a,b){function c(a,b){this.$element=a,this.options=b,c.__super__.constructor.call(this)}return b.Extend(c,b.Observable),c.prototype.render=function(){var b=a('<span class="select2-dropdown"><span class="select2-results"></span></span>');return b.attr("dir",this.options.get("dir")),this.$dropdown=b},c.prototype.bind=function(){},c.prototype.position=function(a,b){},c.prototype.destroy=function(){this.$dropdown.remove()},c}),b.define("select2/dropdown/search",["jquery","../utils"],function(a,b){function c(){}return c.prototype.render=function(b){var c=b.call(this),d=a('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=d,this.$search=d.find("input"),c.prepend(d),c},c.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),this.$search.on("keydown",function(a){e.trigger("keypress",a),e._keyUpPrevented=a.isDefaultPrevented()}),this.$search.on("input",function(b){a(this).off("keyup")}),this.$search.on("keyup input",function(a){e.handleSearch(a)}),c.on("open",function(){e.$search.attr("tabindex",0),e.$search.focus(),window.setTimeout(function(){e.$search.focus()},0)}),c.on("close",function(){e.$search.attr("tabindex",-1),e.$search.val("")}),c.on("focus",function(){c.isOpen()&&e.$search.focus()}),c.on("results:all",function(a){null!=a.query.term&&""!==a.query.term||(e.showSearch(a)?e.$searchContainer.removeClass("select2-search--hide"):e.$searchContainer.addClass("select2-search--hide"))})},c.prototype.handleSearch=function(a){if(!this._keyUpPrevented){var b=this.$search.val();this.trigger("query",{term:b})}this._keyUpPrevented=!1},c.prototype.showSearch=function(a,b){return!0},c}),b.define("select2/dropdown/hidePlaceholder",[],function(){function a(a,b,c,d){this.placeholder=this.normalizePlaceholder(c.get("placeholder")),a.call(this,b,c,d)}return a.prototype.append=function(a,b){b.results=this.removePlaceholder(b.results),a.call(this,b)},a.prototype.normalizePlaceholder=function(a,b){return"string"==typeof b&&(b={id:"",text:b}),b},a.prototype.removePlaceholder=function(a,b){for(var c=b.slice(0),d=b.length-1;0<=d;d--){var e=b[d];this.placeholder.id===e.id&&c.splice(d,1)}return c},a}),b.define("select2/dropdown/infiniteScroll",["jquery"],function(a){function b(a,b,c,d){this.lastParams={},a.call(this,b,c,d),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return b.prototype.append=function(a,b){this.$loadingMore.remove(),this.loading=!1,a.call(this,b),this.showLoadingMore(b)&&this.$results.append(this.$loadingMore)},b.prototype.bind=function(b,c,d){var e=this;b.call(this,c,d),c.on("query",function(a){e.lastParams=a,e.loading=!0}),c.on("query:append",function(a){e.lastParams=a,e.loading=!0}),this.$results.on("scroll",function(){var b=a.contains(document.documentElement,e.$loadingMore[0]);if(!e.loading&&b){var c=e.$results.offset().top+e.$results.outerHeight(!1);e.$loadingMore.offset().top+e.$loadingMore.outerHeight(!1)<=c+50&&e.loadMore()}})},b.prototype.loadMore=function(){this.loading=!0;var b=a.extend({},{page:1},this.lastParams);b.page++,this.trigger("query:append",b)},b.prototype.showLoadingMore=function(a,b){return b.pagination&&b.pagination.more},b.prototype.createLoadingMore=function(){var b=a('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),c=this.options.get("translations").get("loadingMore");return b.html(c(this.lastParams)),b},b}),b.define("select2/dropdown/attachBody",["jquery","../utils"],function(a,b){function c(b,c,d){this.$dropdownParent=d.get("dropdownParent")||a(document.body),b.call(this,c,d)}return c.prototype.bind=function(a,b,c){var d=this,e=!1;a.call(this,b,c),b.on("open",function(){d._showDropdown(),d._attachPositioningHandler(b),e||(e=!0,b.on("results:all",function(){d._positionDropdown(),d._resizeDropdown()}),b.on("results:append",function(){d._positionDropdown(),d._resizeDropdown()}))}),b.on("close",function(){d._hideDropdown(),d._detachPositioningHandler(b)}),this.$dropdownContainer.on("mousedown",function(a){a.stopPropagation()})},c.prototype.destroy=function(a){a.call(this),this.$dropdownContainer.remove()},c.prototype.position=function(a,b,c){b.attr("class",c.attr("class")),b.removeClass("select2"),b.addClass("select2-container--open"),b.css({position:"absolute",top:-999999}),this.$container=c},c.prototype.render=function(b){var c=a("<span></span>"),d=b.call(this);return c.append(d),this.$dropdownContainer=c},c.prototype._hideDropdown=function(a){this.$dropdownContainer.detach()},c.prototype._attachPositioningHandler=function(c,d){var e=this,f="scroll.select2."+d.id,g="resize.select2."+d.id,h="orientationchange.select2."+d.id,i=this.$container.parents().filter(b.hasScroll);i.each(function(){a(this).data("select2-scroll-position",{x:a(this).scrollLeft(),y:a(this).scrollTop()})}),i.on(f,function(b){var c=a(this).data("select2-scroll-position");a(this).scrollTop(c.y)}),a(window).on(f+" "+g+" "+h,function(a){e._positionDropdown(),e._resizeDropdown()})},c.prototype._detachPositioningHandler=function(c,d){var e="scroll.select2."+d.id,f="resize.select2."+d.id,g="orientationchange.select2."+d.id;this.$container.parents().filter(b.hasScroll).off(e),a(window).off(e+" "+f+" "+g)},c.prototype._positionDropdown=function(){var b=a(window),c=this.$dropdown.hasClass("select2-dropdown--above"),d=this.$dropdown.hasClass("select2-dropdown--below"),e=null,f=this.$container.offset();f.bottom=f.top+this.$container.outerHeight(!1);var g={height:this.$container.outerHeight(!1)};g.top=f.top,g.bottom=f.top+g.height;var h_height=this.$dropdown.outerHeight(!1),i_top=b.scrollTop(),i_bottom=b.scrollTop()+b.height(),j=i_top<f.top-h_height,k=i_bottom>f.bottom+h_height,l={left:f.left,top:g.bottom},m=this.$dropdownParent;"static"===m.css("position")&&(m=m.offsetParent());var n=m.offset();l.top-=n.top,l.left-=n.left,c||d||(e="below"),k||!j||c?!j&&k&&c&&(e="below"):e="above",("above"==e||c&&"below"!==e)&&(l.top=g.top-n.top-h_height),null!=e&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+e),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+e)),this.$dropdownContainer.css(l)},c.prototype._resizeDropdown=function(){var a={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(a.minWidth=a.width,a.position="relative",a.width="auto"),this.$dropdown.css(a)},c.prototype._showDropdown=function(a){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},c}),b.define("select2/dropdown/minimumResultsForSearch",[],function(){function b(a,b,c,d){this.minimumResultsForSearch=c.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=1/0),a.call(this,b,c,d)}return b.prototype.showSearch=function(b,c){return!(function a(b){for(var c=0,d=0;d<b.length;d++){var e=b[d];e.children?c+=a(e.children):c++}return c}(c.data.results)<this.minimumResultsForSearch)&&b.call(this,c)},b}),b.define("select2/dropdown/selectOnClose",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("close",function(a){d._handleSelectOnClose(a)})},a.prototype._handleSelectOnClose=function(a,b){if(b&&null!=b.originalSelect2Event){var c=b.originalSelect2Event;if("select"===c._type||"unselect"===c._type)return}var d=this.getHighlightedResults();if(!(d.length<1)){var e=d.data("data");null!=e.element&&e.element.selected||null==e.element&&e.selected||this.trigger("select",{data:e})}},a}),b.define("select2/dropdown/closeOnSelect",[],function(){function a(){}return a.prototype.bind=function(a,b,c){var d=this;a.call(this,b,c),b.on("select",function(a){d._selectTriggered(a)}),b.on("unselect",function(a){d._selectTriggered(a)})},a.prototype._selectTriggered=function(a,b){var c=b.originalEvent;c&&c.ctrlKey||this.trigger("close",{originalEvent:c,originalSelect2Event:b})},a}),b.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(a){var b=a.input.length-a.maximum,c="Please delete "+b+" character";return 1!=b&&(c+="s"),c},inputTooShort:function(a){return"Please enter "+(a.minimum-a.input.length)+" or more characters"},loadingMore:function(){return"Loading more results…"},maximumSelected:function(a){var b="You can only select "+a.maximum+" item";return 1!=a.maximum&&(b+="s"),b},noResults:function(){return"No results found"},searching:function(){return"Searching…"}}}),b.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C){function D(){this.reset()}return D.prototype.apply=function(l){if(null==(l=a.extend(!0,{},this.defaults,l)).dataAdapter){if(null!=l.ajax?l.dataAdapter=o:null!=l.data?l.dataAdapter=n:l.dataAdapter=m,0<l.minimumInputLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,r)),0<l.maximumInputLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,s)),0<l.maximumSelectionLength&&(l.dataAdapter=j.Decorate(l.dataAdapter,t)),l.tags&&(l.dataAdapter=j.Decorate(l.dataAdapter,p)),(null!=l.tokenSeparators||null!=l.tokenizer)&&(l.dataAdapter=j.Decorate(l.dataAdapter,q)),null!=l.query){var C=b(l.amdBase+"compat/query");l.dataAdapter=j.Decorate(l.dataAdapter,C)}if(null!=l.initSelection){var D=b(l.amdBase+"compat/initSelection");l.dataAdapter=j.Decorate(l.dataAdapter,D)}}if(null==l.resultsAdapter&&(l.resultsAdapter=c,null!=l.ajax&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,x)),null!=l.placeholder&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,w)),l.selectOnClose&&(l.resultsAdapter=j.Decorate(l.resultsAdapter,A))),null==l.dropdownAdapter){if(l.multiple)l.dropdownAdapter=u;else{var E=j.Decorate(u,v);l.dropdownAdapter=E}if(0!==l.minimumResultsForSearch&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,z)),l.closeOnSelect&&(l.dropdownAdapter=j.Decorate(l.dropdownAdapter,B)),null!=l.dropdownCssClass||null!=l.dropdownCss||null!=l.adaptDropdownCssClass){var F=b(l.amdBase+"compat/dropdownCss");l.dropdownAdapter=j.Decorate(l.dropdownAdapter,F)}l.dropdownAdapter=j.Decorate(l.dropdownAdapter,y)}if(null==l.selectionAdapter){if(l.multiple?l.selectionAdapter=e:l.selectionAdapter=d,null!=l.placeholder&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,f)),l.allowClear&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,g)),l.multiple&&(l.selectionAdapter=j.Decorate(l.selectionAdapter,h)),null!=l.containerCssClass||null!=l.containerCss||null!=l.adaptContainerCssClass){var G=b(l.amdBase+"compat/containerCss");l.selectionAdapter=j.Decorate(l.selectionAdapter,G)}l.selectionAdapter=j.Decorate(l.selectionAdapter,i)}if("string"==typeof l.language)if(0<l.language.indexOf("-")){var I=l.language.split("-")[0];l.language=[l.language,I]}else l.language=[l.language];if(a.isArray(l.language)){var J=new k;l.language.push("en");for(var K=l.language,L=0;L<K.length;L++){var M=K[L],N={};try{N=k.loadPath(M)}catch(O){try{M=this.defaults.amdLanguageBase+M,N=k.loadPath(M)}catch(P){l.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}J.extend(N)}l.translations=J}else{var Q=k.loadPath(this.defaults.amdLanguageBase+"en"),R=new k(l.language);R.extend(Q),l.translations=R}return l},D.prototype.reset=function(){function b(a){return a.replace(/[^\u0000-\u007E]/g,function(a){return l[a]||a})}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:j.escapeMarkup,language:C,matcher:function c(d,e){if(""===a.trim(d.term))return e;if(e.children&&0<e.children.length){for(var f=a.extend(!0,{},e),g=e.children.length-1;0<=g;g--)null==c(d,e.children[g])&&f.children.splice(g,1);return 0<f.children.length?f:c(d,f)}var j=b(e.text).toUpperCase(),k=b(d.term).toUpperCase();return-1<j.indexOf(k)?e:null},minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(a){return a},templateResult:function(a){return a.text},templateSelection:function(a){return a.text},theme:"default",width:"resolve"}},D.prototype.set=function(b,c){var e={};e[a.camelCase(b)]=c;var f=j._convertData(e);a.extend(this.defaults,f)},new D}),b.define("select2/options",["require","jquery","./defaults","./utils"],function(a,b,c,d){function e(b,e){if(this.options=b,null!=e&&this.fromElement(e),this.options=c.apply(this.options),e&&e.is("input")){var f=a(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=d.Decorate(this.options.dataAdapter,f)}}return e.prototype.fromElement=function(a){var c=["select2"];null==this.options.multiple&&(this.options.multiple=a.prop("multiple")),null==this.options.disabled&&(this.options.disabled=a.prop("disabled")),null==this.options.language&&(a.prop("lang")?this.options.language=a.prop("lang").toLowerCase():a.closest("[lang]").prop("lang")&&(this.options.language=a.closest("[lang]").prop("lang"))),null==this.options.dir&&(a.prop("dir")?this.options.dir=a.prop("dir"):a.closest("[dir]").prop("dir")?this.options.dir=a.closest("[dir]").prop("dir"):this.options.dir="ltr"),a.prop("disabled",this.options.disabled),a.prop("multiple",this.options.multiple),a.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),a.data("data",a.data("select2Tags")),a.data("tags",!0)),a.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),a.attr("ajax--url",a.data("ajaxUrl")),a.data("ajax--url",a.data("ajaxUrl")));var e;e=b.fn.jquery&&"1."==b.fn.jquery.substr(0,2)&&a[0].dataset?b.extend(!0,{},a[0].dataset,a.data()):a.data();var f=b.extend(!0,{},e);for(var g in f=d._convertData(f))-1<b.inArray(g,c)||(b.isPlainObject(this.options[g])?b.extend(this.options[g],f[g]):this.options[g]=f[g]);return this},e.prototype.get=function(a){return this.options[a]},e.prototype.set=function(a,b){this.options[a]=b},e}),b.define("select2/core",["jquery","./options","./utils","./keys"],function(a,b,c,d){var e=function(a,c){null!=a.data("select2")&&a.data("select2").destroy(),this.$element=a,this.id=this._generateId(a),c=c||{},this.options=new b(c,a),e.__super__.constructor.call(this);var d=a.attr("tabindex")||0;a.data("old-tabindex",d),a.attr("tabindex","-1");var f=this.options.get("dataAdapter");this.dataAdapter=new f(a,this.options);var g=this.render();this._placeContainer(g);var h=this.options.get("selectionAdapter");this.selection=new h(a,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,g);var i=this.options.get("dropdownAdapter");this.dropdown=new i(a,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,g);var j=this.options.get("resultsAdapter");this.results=new j(a,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var k=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(a){k.trigger("selection:update",{data:a})}),a.addClass("select2-hidden-accessible"),a.attr("aria-hidden","true"),this._syncAttributes(),a.data("select2",this)};return c.Extend(e,c.Observable),e.prototype._generateId=function(a){return"select2-"+(null!=a.attr("id")?a.attr("id"):null!=a.attr("name")?a.attr("name")+"-"+c.generateChars(2):c.generateChars(4)).replace(/(:|\.|\[|\]|,)/g,"")},e.prototype._placeContainer=function(a){a.insertAfter(this.$element);var b=this._resolveWidth(this.$element,this.options.get("width"));null!=b&&a.css("width",b)},e.prototype._resolveWidth=function(a,b){var c=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==b){var d=this._resolveWidth(a,"style");return null!=d?d:this._resolveWidth(a,"element")}if("element"==b){var e=a.outerWidth(!1);return e<=0?"auto":e+"px"}if("style"!=b)return b;var f=a.attr("style");if("string"!=typeof f)return null;for(var g=f.split(";"),h=0,i=g.length;h<i;h+=1){var k=g[h].replace(/\s/g,"").match(c);if(null!==k&&1<=k.length)return k[1]}return null},e.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},e.prototype._registerDomEvents=function(){var b=this;this.$element.on("change.select2",function(){b.dataAdapter.current(function(a){b.trigger("selection:update",{data:a})})}),this.$element.on("focus.select2",function(a){b.trigger("focus",a)}),this._syncA=c.bind(this._syncAttributes,this),this._syncS=c.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=d?(this._observer=new d(function(c){a.each(c,b._syncA),a.each(c,b._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",b._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",b._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",b._syncS,!1))},e.prototype._registerDataEvents=function(){var a=this;this.dataAdapter.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerSelectionEvents=function(){var b=this,c=["toggle","focus"];this.selection.on("toggle",function(){b.toggleDropdown()}),this.selection.on("focus",function(a){b.focus(a)}),this.selection.on("*",function(d,e){-1===a.inArray(d,c)&&b.trigger(d,e)})},e.prototype._registerDropdownEvents=function(){var a=this;this.dropdown.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerResultsEvents=function(){var a=this;this.results.on("*",function(b,c){a.trigger(b,c)})},e.prototype._registerEvents=function(){var a=this;this.on("open",function(){a.$container.addClass("select2-container--open")}),this.on("close",function(){a.$container.removeClass("select2-container--open")}),this.on("enable",function(){a.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){a.$container.addClass("select2-container--disabled")}),this.on("blur",function(){a.$container.removeClass("select2-container--focus")}),this.on("query",function(b){a.isOpen()||a.trigger("open",{}),this.dataAdapter.query(b,function(c){a.trigger("results:all",{data:c,query:b})})}),this.on("query:append",function(b){this.dataAdapter.query(b,function(c){a.trigger("results:append",{data:c,query:b})})}),this.on("keypress",function(b){var c=b.which;a.isOpen()?c===d.ESC||c===d.TAB||c===d.UP&&b.altKey?(a.close(),b.preventDefault()):c===d.ENTER?(a.trigger("results:select",{}),b.preventDefault()):c===d.SPACE&&b.ctrlKey?(a.trigger("results:toggle",{}),b.preventDefault()):c===d.UP?(a.trigger("results:previous",{}),b.preventDefault()):c===d.DOWN&&(a.trigger("results:next",{}),b.preventDefault()):(c===d.ENTER||c===d.SPACE||c===d.DOWN&&b.altKey)&&(a.open(),b.preventDefault())})},e.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},e.prototype._syncSubtree=function(a,b){var c=!1,d=this;if(!a||!a.target||"OPTION"===a.target.nodeName||"OPTGROUP"===a.target.nodeName){if(b)if(b.addedNodes&&0<b.addedNodes.length)for(var e=0;e<b.addedNodes.length;e++){b.addedNodes[e].selected&&(c=!0)}else b.removedNodes&&0<b.removedNodes.length&&(c=!0);else c=!0;c&&this.dataAdapter.current(function(a){d.trigger("selection:update",{data:a})})}},e.prototype.trigger=function(a,b){var c=e.__super__.trigger,d={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(void 0===b&&(b={}),a in d){var f=d[a],g={prevented:!1,name:a,args:b};if(c.call(this,f,g),g.prevented)return void(b.prevented=!0)}c.call(this,a,b)},e.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},e.prototype.open=function(){this.isOpen()||this.trigger("query",{})},e.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},e.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},e.prototype.hasFocus=function(){return this.$container.hasClass("select2-container--focus")},e.prototype.focus=function(a){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},e.prototype.enable=function(a){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),(null==a||0===a.length)&&(a=[!0]);var b=!a[0];this.$element.prop("disabled",b)},e.prototype.data=function(){this.options.get("debug")&&0<arguments.length&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var a=[];return this.dataAdapter.current(function(b){a=b}),a},e.prototype.val=function(b){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==b||0===b.length)return this.$element.val();var c=b[0];a.isArray(c)&&(c=a.map(c,function(a){return a.toString()})),this.$element.val(c).trigger("change")},e.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},e.prototype.render=function(){var b=a('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return b.attr("dir",this.options.get("dir")),this.$container=b,this.$container.addClass("select2-container--"+this.options.get("theme")),b.data("element",this.$element),b},e}),b.define("select2/compat/utils",["jquery"],function(a){return{syncCssClasses:function(b,c,d){var e,f,g=[];(e=a.trim(b.attr("class")))&&a((e=""+e).split(/\s+/)).each(function(){0===this.indexOf("select2-")&&g.push(this)}),(e=a.trim(c.attr("class")))&&a((e=""+e).split(/\s+/)).each(function(){0!==this.indexOf("select2-")&&null!=(f=d(this))&&g.push(f)}),b.attr("class",g.join(" "))}}}),b.define("select2/compat/containerCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("containerCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptContainerCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("containerCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/dropdownCss",["jquery","./utils"],function(a,b){function c(a){return null}function d(){}return d.prototype.render=function(d){var e=d.call(this),f=this.options.get("dropdownCssClass")||"";a.isFunction(f)&&(f=f(this.$element));var g=this.options.get("adaptDropdownCssClass");if(g=g||c,-1!==f.indexOf(":all:")){f=f.replace(":all:","");var h=g;g=function(a){var b=h(a);return null!=b?b+" "+a:a}}var i=this.options.get("dropdownCss")||{};return a.isFunction(i)&&(i=i(this.$element)),b.syncCssClasses(e,this.$element,g),e.css(i),e.addClass(f),e},d}),b.define("select2/compat/initSelection",["jquery"],function(a){function b(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `initSelection` option has been deprecated in favor of a custom data adapter that overrides the `current` method. This method is now called multiple times instead of a single time when the instance is initialized. Support will be removed for the `initSelection` option in future versions of Select2"),this.initSelection=c.get("initSelection"),this._isInitialized=!1,a.call(this,b,c)}return b.prototype.current=function(b,c){var d=this;return this._isInitialized?void b.call(this,c):void this.initSelection.call(null,this.$element,function(b){d._isInitialized=!0,a.isArray(b)||(b=[b]),c(b)})},b}),b.define("select2/compat/inputData",["jquery"],function(a){function b(a,b,c){this._currentData=[],this._valueSeparator=c.get("valueSeparator")||",","hidden"===b.prop("type")&&c.get("debug")&&console&&console.warn&&console.warn("Select2: Using a hidden input with Select2 is no longer supported and may stop working in the future. It is recommended to use a `<select>` element instead."),a.call(this,b,c)}return b.prototype.current=function(b,c){function d(b,c){var e=[];return b.selected||-1!==a.inArray(b.id,c)?(b.selected=!0,e.push(b)):b.selected=!1,b.children&&e.push.apply(e,d(b.children,c)),e}for(var e=[],f=0;f<this._currentData.length;f++){var g=this._currentData[f];e.push.apply(e,d(g,this.$element.val().split(this._valueSeparator)))}c(e)},b.prototype.select=function(b,c){if(this.options.get("multiple")){var d=this.$element.val();d+=this._valueSeparator+c.id,this.$element.val(d),this.$element.trigger("change")}else this.current(function(b){a.map(b,function(a){a.selected=!1})}),this.$element.val(c.id),this.$element.trigger("change")},b.prototype.unselect=function(a,b){var c=this;b.selected=!1,this.current(function(a){for(var d=[],e=0;e<a.length;e++){var f=a[e];b.id!=f.id&&d.push(f.id)}c.$element.val(d.join(c._valueSeparator)),c.$element.trigger("change")})},b.prototype.query=function(a,b,c){for(var d=[],e=0;e<this._currentData.length;e++){var f=this._currentData[e],g=this.matches(b,f);null!==g&&d.push(g)}c({results:d})},b.prototype.addOptions=function(b,c){var d=a.map(c,function(b){return a.data(b[0],"data")});this._currentData.push.apply(this._currentData,d)},b}),b.define("select2/compat/matcher",["jquery"],function(a){return function(b){return function(c,d){var e=a.extend(!0,{},d);if(null==c.term||""===a.trim(c.term))return e;if(d.children){for(var f=d.children.length-1;0<=f;f--){var g=d.children[f];b(c.term,g.text,g)||e.children.splice(f,1)}if(0<e.children.length)return e}return b(c.term,d.text,d)?e:null}}}),b.define("select2/compat/query",[],function(){function a(a,b,c){c.get("debug")&&window.console&&console.warn&&console.warn("Select2: The `query` option has been deprecated in favor of a custom data adapter that overrides the `query` method. Support will be removed for the `query` option in future versions of Select2."),a.call(this,b,c)}return a.prototype.query=function(a,b,c){b.callback=c,this.options.get("query").call(null,b)},a}),b.define("select2/dropdown/attachContainer",[],function(){function a(a,b,c){a.call(this,b,c)}return a.prototype.position=function(a,b,c){c.find(".dropdown-wrapper").append(b),b.addClass("select2-dropdown--below"),c.addClass("select2-container--below")},a}),b.define("select2/dropdown/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);this.$dropdown.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(a){a.stopPropagation()})},a}),b.define("select2/selection/stopPropagation",[],function(){function a(){}return a.prototype.bind=function(a,b,c){a.call(this,b,c);this.$selection.on(["blur","change","click","dblclick","focus","focusin","focusout","input","keydown","keyup","keypress","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseup","search","touchend","touchstart"].join(" "),function(a){a.stopPropagation()})},a}),c=function(a){function b(b){var g=b||window.event,h=i.call(arguments,1),j=0,l=0,m=0,n=0,o=0,p=0;if((b=a.event.fix(g)).type="mousewheel","detail"in g&&(m=-1*g.detail),"wheelDelta"in g&&(m=g.wheelDelta),"wheelDeltaY"in g&&(m=g.wheelDeltaY),"wheelDeltaX"in g&&(l=-1*g.wheelDeltaX),"axis"in g&&g.axis===g.HORIZONTAL_AXIS&&(l=-1*m,m=0),j=0===m?l:m,"deltaY"in g&&(j=m=-1*g.deltaY),"deltaX"in g&&(l=g.deltaX,0===m&&(j=-1*l)),0!==m||0!==l){if(1===g.deltaMode){var q=a.data(this,"mousewheel-line-height");j*=q,m*=q,l*=q}else if(2===g.deltaMode){var r=a.data(this,"mousewheel-page-height");j*=r,m*=r,l*=r}if(n=Math.max(Math.abs(m),Math.abs(l)),(!f||n<f)&&(d(g,f=n)&&(f/=40)),d(g,n)&&(j/=40,l/=40,m/=40),j=Math[1<=j?"floor":"ceil"](j/f),l=Math[1<=l?"floor":"ceil"](l/f),m=Math[1<=m?"floor":"ceil"](m/f),k.settings.normalizeOffset&&this.getBoundingClientRect){var s=this.getBoundingClientRect();o=b.clientX-s.left,p=b.clientY-s.top}return b.deltaX=l,b.deltaY=m,b.deltaFactor=f,b.offsetX=o,b.offsetY=p,b.deltaMode=0,h.unshift(b,j,l,m),e&&clearTimeout(e),e=setTimeout(c,200),(a.event.dispatch||a.event.handle).apply(this,h)}}function c(){f=null}function d(a,b){return k.settings.adjustOldDeltas&&"mousewheel"===a.type&&b%120==0}var e,f,g=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],h="onwheel"in document||9<=document.documentMode?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],i=Array.prototype.slice;if(a.event.fixHooks)for(var j=g.length;j;)a.event.fixHooks[g[--j]]=a.event.mouseHooks;var k=a.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var c=h.length;c;)this.addEventListener(h[--c],b,!1);else this.onmousewheel=b;a.data(this,"mousewheel-line-height",k.getLineHeight(this)),a.data(this,"mousewheel-page-height",k.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var c=h.length;c;)this.removeEventListener(h[--c],b,!1);else this.onmousewheel=null;a.removeData(this,"mousewheel-line-height"),a.removeData(this,"mousewheel-page-height")},getLineHeight:function(b){var c=a(b),d=c["offsetParent"in a.fn?"offsetParent":"parent"]();return d.length||(d=a("body")),parseInt(d.css("fontSize"),10)||parseInt(c.css("fontSize"),10)||16},getPageHeight:function(b){return a(b).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};a.fn.extend({mousewheel:function(a){return a?this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}})},"function"==typeof b.define&&b.define.amd?b.define("jquery-mousewheel",["jquery"],c):"object"==typeof exports?module.exports=c:c(a),b.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(a,b,c,d){if(null==a.fn.select2){var e=["open","close","destroy"];a.fn.select2=function(b){if("object"==typeof(b=b||{}))return this.each(function(){var d=a.extend(!0,{},b);new c(a(this),d)}),this;if("string"!=typeof b)throw new Error("Invalid arguments for Select2: "+b);var d,f=Array.prototype.slice.call(arguments,1);return this.each(function(){var c=a(this).data("select2");null==c&&window.console&&console.error&&console.error("The select2('"+b+"') method was called on an element that is not using Select2."),d=c[b].apply(c,f)}),-1<a.inArray(b,e)?this:d}}return null==a.fn.select2.defaults&&(a.fn.select2.defaults=d),c}),{define:b.define,require:b.require}}(),c=b.require("jquery.select2");return a.fn.select2.amd=b,c}),function(mod){if("object"==typeof exports&&"object"==typeof module)module.exports=mod();else{if("function"==typeof define&&define.amd)return define([],mod);(this||window).CodeMirror=mod()}}(function(){"use strict";var userAgent=navigator.userAgent,platform=navigator.platform,gecko=/gecko\/\d/i.test(userAgent),ie_upto10=/MSIE \d/.test(userAgent),ie_11up=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(userAgent),ie=ie_upto10||ie_11up,ie_version=ie&&(ie_upto10?document.documentMode||6:ie_11up[1]),webkit=/WebKit\//.test(userAgent),qtwebkit=webkit&&/Qt\/\d+\.\d+/.test(userAgent),chrome=/Chrome\//.test(userAgent),presto=/Opera\//.test(userAgent),safari=/Apple Computer/.test(navigator.vendor),mac_geMountainLion=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(userAgent),phantom=/PhantomJS/.test(userAgent),ios=/AppleWebKit/.test(userAgent)&&/Mobile\/\w+/.test(userAgent),mobile=ios||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(userAgent),mac=ios||/Mac/.test(platform),windows=/win/i.test(platform),presto_version=presto&&userAgent.match(/Version\/(\d*\.\d*)/);presto_version&&(presto_version=Number(presto_version[1])),presto_version&&15<=presto_version&&(webkit=!(presto=!1));var flipCtrlCmd=mac&&(qtwebkit||presto&&(null==presto_version||presto_version<12.11)),captureRightClick=gecko||ie&&9<=ie_version,sawReadOnlySpans=!1,sawCollapsedSpans=!1;function CodeMirror(place,options){if(!(this instanceof CodeMirror))return new CodeMirror(place,options);this.options=options=options?copyObj(options):{},copyObj(defaults,options,!1),setGuttersForLineNumbers(options);var doc=options.value;"string"==typeof doc&&(doc=new Doc(doc,options.mode,null,options.lineSeparator)),this.doc=doc;var input=new CodeMirror.inputStyles[options.inputStyle](this),display=this.display=new Display(place,doc,input);updateGutters(display.wrapper.CodeMirror=this),themeChanged(this),options.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap"),options.autofocus&&!mobile&&display.input.focus(),initScrollbars(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,delayingBlurEvent:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,cutIncoming:!1,selectingText:!1,draggingText:!1,highlight:new Delayed,keySeq:null,specialChars:null};var cm=this;for(var opt in ie&&ie_version<11&&setTimeout(function(){cm.display.input.reset(!0)},20),function(cm){var d=cm.display;on(d.scroller,"mousedown",operation(cm,onMouseDown)),on(d.scroller,"dblclick",ie&&ie_version<11?operation(cm,function(e){if(!signalDOMEvent(cm,e)){var pos=posFromMouse(cm,e);if(pos&&!clickInGutter(cm,e)&&!eventInWidget(cm.display,e)){e_preventDefault(e);var word=cm.findWordAt(pos);extendSelection(cm.doc,word.anchor,word.head)}}}):function(e){signalDOMEvent(cm,e)||e_preventDefault(e)});captureRightClick||on(d.scroller,"contextmenu",function(e){onContextMenu(cm,e)});var touchFinished,prevTouch={end:0};function finishTouch(){d.activeTouch&&(touchFinished=setTimeout(function(){d.activeTouch=null},1e3),(prevTouch=d.activeTouch).end=+new Date)}function farAway(touch,other){if(null==other.left)return!0;var dx=other.left-touch.left,dy=other.top-touch.top;return 400<dx*dx+dy*dy}on(d.scroller,"touchstart",function(e){if(!function(e){if(1!=e.touches.length)return!1;var touch=e.touches[0];return touch.radiusX<=1&&touch.radiusY<=1}(e)){clearTimeout(touchFinished);var now=+new Date;d.activeTouch={start:now,moved:!1,prev:now-prevTouch.end<=300?prevTouch:null},1==e.touches.length&&(d.activeTouch.left=e.touches[0].pageX,d.activeTouch.top=e.touches[0].pageY)}}),on(d.scroller,"touchmove",function(){d.activeTouch&&(d.activeTouch.moved=!0)}),on(d.scroller,"touchend",function(e){var touch=d.activeTouch;if(touch&&!eventInWidget(d,e)&&null!=touch.left&&!touch.moved&&new Date-touch.start<300){var range,pos=cm.coordsChar(d.activeTouch,"page");range=!touch.prev||farAway(touch,touch.prev)?new Range(pos,pos):!touch.prev.prev||farAway(touch,touch.prev.prev)?cm.findWordAt(pos):new Range(Pos(pos.line,0),clipPos(cm.doc,Pos(pos.line+1,0))),cm.setSelection(range.anchor,range.head),cm.focus(),e_preventDefault(e)}finishTouch()}),on(d.scroller,"touchcancel",finishTouch),on(d.scroller,"scroll",function(){d.scroller.clientHeight&&(setScrollTop(cm,d.scroller.scrollTop),setScrollLeft(cm,d.scroller.scrollLeft,!0),signal(cm,"scroll",cm))}),on(d.scroller,"mousewheel",function(e){onScrollWheel(cm,e)}),on(d.scroller,"DOMMouseScroll",function(e){onScrollWheel(cm,e)}),on(d.wrapper,"scroll",function(){d.wrapper.scrollTop=d.wrapper.scrollLeft=0}),d.dragFunctions={enter:function(e){signalDOMEvent(cm,e)||e_stop(e)},over:function(e){signalDOMEvent(cm,e)||(!function(cm,e){var pos=posFromMouse(cm,e);if(!pos)return;var frag=document.createDocumentFragment();drawSelectionCursor(cm,pos,frag),cm.display.dragCursor||(cm.display.dragCursor=elt("div",null,"CodeMirror-cursors CodeMirror-dragcursors"),cm.display.lineSpace.insertBefore(cm.display.dragCursor,cm.display.cursorDiv));removeChildrenAndAdd(cm.display.dragCursor,frag)}(cm,e),e_stop(e))},start:function(e){!function(cm,e){if(ie&&(!cm.state.draggingText||+new Date-lastDrop<100))return e_stop(e);if(signalDOMEvent(cm,e)||eventInWidget(cm.display,e))return;if(e.dataTransfer.setData("Text",cm.getSelection()),e.dataTransfer.setDragImage&&!safari){var img=elt("img",null,null,"position: fixed; left: 0; top: 0;");img.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",presto&&(img.width=img.height=1,cm.display.wrapper.appendChild(img),img._top=img.offsetTop),e.dataTransfer.setDragImage(img,0,0),presto&&img.parentNode.removeChild(img)}}(cm,e)},drop:operation(cm,onDrop),leave:function(){clearDragCursor(cm)}};var inp=d.input.getField();on(inp,"keyup",function(e){onKeyUp.call(cm,e)}),on(inp,"keydown",operation(cm,onKeyDown)),on(inp,"keypress",operation(cm,onKeyPress)),on(inp,"focus",bind(onFocus,cm)),on(inp,"blur",bind(onBlur,cm))}(this),function(){if(globalsRegistered)return;on(window,"resize",function(){null==resizeTimer&&(resizeTimer=setTimeout(function(){resizeTimer=null,forEachCodeMirror(onResize)},100))}),on(window,"blur",function(){forEachCodeMirror(onBlur)}),globalsRegistered=!0;var resizeTimer}(),startOperation(this),this.curOp.forceUpdate=!0,attachDoc(this,doc),options.autofocus&&!mobile||cm.hasFocus()?setTimeout(bind(onFocus,this),20):onBlur(this),optionHandlers)optionHandlers.hasOwnProperty(opt)&&optionHandlers[opt](this,options[opt],Init);maybeUpdateLineNumberWidth(this),options.finishInit&&options.finishInit(this);for(var i=0;i<initHooks.length;++i)initHooks[i](this);endOperation(this),webkit&&options.lineWrapping&&"optimizelegibility"==getComputedStyle(display.lineDiv).textRendering&&(display.lineDiv.style.textRendering="auto")}function Display(place,doc,input){var d=this;this.input=input,d.scrollbarFiller=elt("div",null,"CodeMirror-scrollbar-filler"),d.scrollbarFiller.setAttribute("cm-not-content","true"),d.gutterFiller=elt("div",null,"CodeMirror-gutter-filler"),d.gutterFiller.setAttribute("cm-not-content","true"),d.lineDiv=elt("div",null,"CodeMirror-code"),d.selectionDiv=elt("div",null,null,"position: relative; z-index: 1"),d.cursorDiv=elt("div",null,"CodeMirror-cursors"),d.measure=elt("div",null,"CodeMirror-measure"),d.lineMeasure=elt("div",null,"CodeMirror-measure"),d.lineSpace=elt("div",[d.measure,d.lineMeasure,d.selectionDiv,d.cursorDiv,d.lineDiv],null,"position: relative; outline: none"),d.mover=elt("div",[elt("div",[d.lineSpace],"CodeMirror-lines")],null,"position: relative"),d.sizer=elt("div",[d.mover],"CodeMirror-sizer"),d.sizerWidth=null,d.heightForcer=elt("div",null,null,"position: absolute; height: "+scrollerGap+"px; width: 1px;"),d.gutters=elt("div",null,"CodeMirror-gutters"),d.lineGutter=null,d.scroller=elt("div",[d.sizer,d.heightForcer,d.gutters],"CodeMirror-scroll"),d.scroller.setAttribute("tabIndex","-1"),d.wrapper=elt("div",[d.scrollbarFiller,d.gutterFiller,d.scroller],"CodeMirror"),ie&&ie_version<8&&(d.gutters.style.zIndex=-1,d.scroller.style.paddingRight=0),webkit||gecko&&mobile||(d.scroller.draggable=!0),place&&(place.appendChild?place.appendChild(d.wrapper):place(d.wrapper)),d.viewFrom=d.viewTo=doc.first,d.reportedViewFrom=d.reportedViewTo=doc.first,d.view=[],d.renderedView=null,d.externalMeasured=null,d.viewOffset=0,d.lastWrapHeight=d.lastWrapWidth=0,d.updateLineNumbers=null,d.nativeBarWidth=d.barHeight=d.barWidth=0,d.scrollbarsClipped=!1,d.lineNumWidth=d.lineNumInnerWidth=d.lineNumChars=null,d.alignWidgets=!1,d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.maxLine=null,d.maxLineLength=0,d.maxLineChanged=!1,d.wheelDX=d.wheelDY=d.wheelStartX=d.wheelStartY=null,d.shift=!1,d.selForContextMenu=null,d.activeTouch=null,input.init(d)}function loadMode(cm){cm.doc.mode=CodeMirror.getMode(cm.options,cm.doc.modeOption),resetModeState(cm)}function resetModeState(cm){cm.doc.iter(function(line){line.stateAfter&&(line.stateAfter=null),line.styles&&(line.styles=null)}),cm.doc.frontier=cm.doc.first,startWorker(cm,100),cm.state.modeGen++,cm.curOp&&regChange(cm)}function estimateHeight(cm){var th=textHeight(cm.display),wrapping=cm.options.lineWrapping,perLine=wrapping&&Math.max(5,cm.display.scroller.clientWidth/charWidth(cm.display)-3);return function(line){if(lineIsHidden(cm.doc,line))return 0;var widgetsHeight=0;if(line.widgets)for(var i=0;i<line.widgets.length;i++)line.widgets[i].height&&(widgetsHeight+=line.widgets[i].height);return wrapping?widgetsHeight+(Math.ceil(line.text.length/perLine)||1)*th:widgetsHeight+th}}function estimateLineHeights(cm){var doc=cm.doc,est=estimateHeight(cm);doc.iter(function(line){var estHeight=est(line);estHeight!=line.height&&updateLineHeight(line,estHeight)})}function themeChanged(cm){cm.display.wrapper.className=cm.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+cm.options.theme.replace(/(^|\s)\s*/g," cm-s-"),clearCaches(cm)}function guttersChanged(cm){updateGutters(cm),regChange(cm),setTimeout(function(){alignHorizontally(cm)},20)}function updateGutters(cm){var gutters=cm.display.gutters,specs=cm.options.gutters;removeChildren(gutters);for(var i=0;i<specs.length;++i){var gutterClass=specs[i],gElt=gutters.appendChild(elt("div",null,"CodeMirror-gutter "+gutterClass));"CodeMirror-linenumbers"==gutterClass&&((cm.display.lineGutter=gElt).style.width=(cm.display.lineNumWidth||1)+"px")}gutters.style.display=i?"":"none",updateGutterSpace(cm)}function updateGutterSpace(cm){var width=cm.display.gutters.offsetWidth;cm.display.sizer.style.marginLeft=width+"px"}function lineLength(line){if(0==line.height)return 0;for(var merged,len=line.text.length,cur=line;merged=collapsedSpanAtStart(cur);){cur=(found=merged.find(0,!0)).from.line,len+=found.from.ch-found.to.ch}for(cur=line;merged=collapsedSpanAtEnd(cur);){var found=merged.find(0,!0);len-=cur.text.length-found.from.ch,len+=(cur=found.to.line).text.length-found.to.ch}return len}function findMaxLine(cm){var d=cm.display,doc=cm.doc;d.maxLine=getLine(doc,doc.first),d.maxLineLength=lineLength(d.maxLine),d.maxLineChanged=!0,doc.iter(function(line){var len=lineLength(line);len>d.maxLineLength&&(d.maxLineLength=len,d.maxLine=line)})}function setGuttersForLineNumbers(options){var found=indexOf(options.gutters,"CodeMirror-linenumbers");-1==found&&options.lineNumbers?options.gutters=options.gutters.concat(["CodeMirror-linenumbers"]):-1<found&&!options.lineNumbers&&(options.gutters=options.gutters.slice(0),options.gutters.splice(found,1))}function measureForScrollbars(cm){var d=cm.display,gutterW=d.gutters.offsetWidth,docH=Math.round(cm.doc.height+paddingVert(cm.display));return{clientHeight:d.scroller.clientHeight,viewHeight:d.wrapper.clientHeight,scrollWidth:d.scroller.scrollWidth,clientWidth:d.scroller.clientWidth,viewWidth:d.wrapper.clientWidth,barLeft:cm.options.fixedGutter?gutterW:0,docHeight:docH,scrollHeight:docH+scrollGap(cm)+d.barHeight,nativeBarWidth:d.nativeBarWidth,gutterWidth:gutterW}}function NativeScrollbars(place,scroll,cm){this.cm=cm;var vert=this.vert=elt("div",[elt("div",null,null,"min-width: 1px")],"CodeMirror-vscrollbar"),horiz=this.horiz=elt("div",[elt("div",null,null,"height: 100%; min-height: 1px")],"CodeMirror-hscrollbar");place(vert),place(horiz),on(vert,"scroll",function(){vert.clientHeight&&scroll(vert.scrollTop,"vertical")}),on(horiz,"scroll",function(){horiz.clientWidth&&scroll(horiz.scrollLeft,"horizontal")}),this.checkedZeroWidth=!1,ie&&ie_version<8&&(this.horiz.style.minHeight=this.vert.style.minWidth="18px")}function NullScrollbars(){}function initScrollbars(cm){cm.display.scrollbars&&(cm.display.scrollbars.clear(),cm.display.scrollbars.addClass&&rmClass(cm.display.wrapper,cm.display.scrollbars.addClass)),cm.display.scrollbars=new CodeMirror.scrollbarModel[cm.options.scrollbarStyle](function(node){cm.display.wrapper.insertBefore(node,cm.display.scrollbarFiller),on(node,"mousedown",function(){cm.state.focused&&setTimeout(function(){cm.display.input.focus()},0)}),node.setAttribute("cm-not-content","true")},function(pos,axis){"horizontal"==axis?setScrollLeft(cm,pos):setScrollTop(cm,pos)},cm),cm.display.scrollbars.addClass&&addClass(cm.display.wrapper,cm.display.scrollbars.addClass)}function updateScrollbars(cm,measure){measure||(measure=measureForScrollbars(cm));var startWidth=cm.display.barWidth,startHeight=cm.display.barHeight;updateScrollbarsInner(cm,measure);for(var i=0;i<4&&startWidth!=cm.display.barWidth||startHeight!=cm.display.barHeight;i++)startWidth!=cm.display.barWidth&&cm.options.lineWrapping&&updateHeightsInViewport(cm),updateScrollbarsInner(cm,measureForScrollbars(cm)),startWidth=cm.display.barWidth,startHeight=cm.display.barHeight}function updateScrollbarsInner(cm,measure){var d=cm.display,sizes=d.scrollbars.update(measure);d.sizer.style.paddingRight=(d.barWidth=sizes.right)+"px",d.sizer.style.paddingBottom=(d.barHeight=sizes.bottom)+"px",sizes.right&&sizes.bottom?(d.scrollbarFiller.style.display="block",d.scrollbarFiller.style.height=sizes.bottom+"px",d.scrollbarFiller.style.width=sizes.right+"px"):d.scrollbarFiller.style.display="",sizes.bottom&&cm.options.coverGutterNextToScrollbar&&cm.options.fixedGutter?(d.gutterFiller.style.display="block",d.gutterFiller.style.height=sizes.bottom+"px",d.gutterFiller.style.width=measure.gutterWidth+"px"):d.gutterFiller.style.display=""}function visibleLines(display,doc,viewport){var top=viewport&&null!=viewport.top?Math.max(0,viewport.top):display.scroller.scrollTop;top=Math.floor(top-paddingTop(display));var bottom=viewport&&null!=viewport.bottom?viewport.bottom:top+display.wrapper.clientHeight,from=lineAtHeight(doc,top),to=lineAtHeight(doc,bottom);if(viewport&&viewport.ensure){var ensureFrom=viewport.ensure.from.line,ensureTo=viewport.ensure.to.line;ensureFrom<from?to=lineAtHeight(doc,heightAtLine(getLine(doc,from=ensureFrom))+display.wrapper.clientHeight):Math.min(ensureTo,doc.lastLine())>=to&&(from=lineAtHeight(doc,heightAtLine(getLine(doc,ensureTo))-display.wrapper.clientHeight),to=ensureTo)}return{from:from,to:Math.max(to,from+1)}}function alignHorizontally(cm){var display=cm.display,view=display.view;if(display.alignWidgets||display.gutters.firstChild&&cm.options.fixedGutter){for(var comp=compensateForHScroll(display)-display.scroller.scrollLeft+cm.doc.scrollLeft,gutterW=display.gutters.offsetWidth,left=comp+"px",i=0;i<view.length;i++)if(!view[i].hidden){cm.options.fixedGutter&&view[i].gutter&&(view[i].gutter.style.left=left);var align=view[i].alignable;if(align)for(var j=0;j<align.length;j++)align[j].style.left=left}cm.options.fixedGutter&&(display.gutters.style.left=comp+gutterW+"px")}}function maybeUpdateLineNumberWidth(cm){if(!cm.options.lineNumbers)return!1;var doc=cm.doc,last=lineNumberFor(cm.options,doc.first+doc.size-1),display=cm.display;if(last.length==display.lineNumChars)return!1;var test=display.measure.appendChild(elt("div",[elt("div",last)],"CodeMirror-linenumber CodeMirror-gutter-elt")),innerW=test.firstChild.offsetWidth,padding=test.offsetWidth-innerW;return display.lineGutter.style.width="",display.lineNumInnerWidth=Math.max(innerW,display.lineGutter.offsetWidth-padding)+1,display.lineNumWidth=display.lineNumInnerWidth+padding,display.lineNumChars=display.lineNumInnerWidth?last.length:-1,display.lineGutter.style.width=display.lineNumWidth+"px",updateGutterSpace(cm),!0}function lineNumberFor(options,i){return String(options.lineNumberFormatter(i+options.firstLineNumber))}function compensateForHScroll(display){return display.scroller.getBoundingClientRect().left-display.sizer.getBoundingClientRect().left}function DisplayUpdate(cm,viewport,force){var display=cm.display;this.viewport=viewport,this.visible=visibleLines(display,cm.doc,viewport),this.editorIsHidden=!display.wrapper.offsetWidth,this.wrapperHeight=display.wrapper.clientHeight,this.wrapperWidth=display.wrapper.clientWidth,this.oldDisplayWidth=displayWidth(cm),this.force=force,this.dims=getDimensions(cm),this.events=[]}function updateDisplayIfNeeded(cm,update){var display=cm.display,doc=cm.doc;if(update.editorIsHidden)return resetView(cm),!1;if(!update.force&&update.visible.from>=display.viewFrom&&update.visible.to<=display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo)&&display.renderedView==display.view&&0==countDirtyView(cm))return!1;maybeUpdateLineNumberWidth(cm)&&(resetView(cm),update.dims=getDimensions(cm));var end=doc.first+doc.size,from=Math.max(update.visible.from-cm.options.viewportMargin,doc.first),to=Math.min(end,update.visible.to+cm.options.viewportMargin);display.viewFrom<from&&from-display.viewFrom<20&&(from=Math.max(doc.first,display.viewFrom)),display.viewTo>to&&display.viewTo-to<20&&(to=Math.min(end,display.viewTo)),sawCollapsedSpans&&(from=visualLineNo(cm.doc,from),to=visualLineEndNo(cm.doc,to));var different=from!=display.viewFrom||to!=display.viewTo||display.lastWrapHeight!=update.wrapperHeight||display.lastWrapWidth!=update.wrapperWidth;!function(cm,from,to){var display=cm.display;0==display.view.length||from>=display.viewTo||to<=display.viewFrom?(display.view=buildViewArray(cm,from,to),display.viewFrom=from):(display.viewFrom>from?display.view=buildViewArray(cm,from,display.viewFrom).concat(display.view):display.viewFrom<from&&(display.view=display.view.slice(findViewIndex(cm,from))),display.viewFrom=from,display.viewTo<to?display.view=display.view.concat(buildViewArray(cm,display.viewTo,to)):display.viewTo>to&&(display.view=display.view.slice(0,findViewIndex(cm,to))));display.viewTo=to}(cm,from,to),display.viewOffset=heightAtLine(getLine(cm.doc,display.viewFrom)),cm.display.mover.style.top=display.viewOffset+"px";var toUpdate=countDirtyView(cm);if(!different&&0==toUpdate&&!update.force&&display.renderedView==display.view&&(null==display.updateLineNumbers||display.updateLineNumbers>=display.viewTo))return!1;var focused=activeElt();return 4<toUpdate&&(display.lineDiv.style.display="none"),function(cm,updateNumbersFrom,dims){var display=cm.display,lineNumbers=cm.options.lineNumbers,container=display.lineDiv,cur=container.firstChild;function rm(node){var next=node.nextSibling;return webkit&&mac&&cm.display.currentWheelTarget==node?node.style.display="none":node.parentNode.removeChild(node),next}for(var view=display.view,lineN=display.viewFrom,i=0;i<view.length;i++){var lineView=view[i];if(lineView.hidden);else if(lineView.node&&lineView.node.parentNode==container){for(;cur!=lineView.node;)cur=rm(cur);var updateNumber=lineNumbers&&null!=updateNumbersFrom&&updateNumbersFrom<=lineN&&lineView.lineNumber;lineView.changes&&(-1<indexOf(lineView.changes,"gutter")&&(updateNumber=!1),updateLineForChanges(cm,lineView,lineN,dims)),updateNumber&&(removeChildren(lineView.lineNumber),lineView.lineNumber.appendChild(document.createTextNode(lineNumberFor(cm.options,lineN)))),cur=lineView.node.nextSibling}else{var node=buildLineElement(cm,lineView,lineN,dims);container.insertBefore(node,cur)}lineN+=lineView.size}for(;cur;)cur=rm(cur)}(cm,display.updateLineNumbers,update.dims),4<toUpdate&&(display.lineDiv.style.display=""),display.renderedView=display.view,focused&&activeElt()!=focused&&focused.offsetHeight&&focused.focus(),removeChildren(display.cursorDiv),removeChildren(display.selectionDiv),display.gutters.style.height=display.sizer.style.minHeight=0,different&&(display.lastWrapHeight=update.wrapperHeight,display.lastWrapWidth=update.wrapperWidth,startWorker(cm,400)),!(display.updateLineNumbers=null)}function postUpdateDisplay(cm,update){for(var viewport=update.viewport,first=!0;(first&&cm.options.lineWrapping&&update.oldDisplayWidth!=displayWidth(cm)||(viewport&&null!=viewport.top&&(viewport={top:Math.min(cm.doc.height+paddingVert(cm.display)-displayHeight(cm),viewport.top)}),update.visible=visibleLines(cm.display,cm.doc,viewport),!(update.visible.from>=cm.display.viewFrom&&update.visible.to<=cm.display.viewTo)))&&updateDisplayIfNeeded(cm,update);first=!1){updateHeightsInViewport(cm);var barMeasure=measureForScrollbars(cm);updateSelection(cm),setDocumentHeight(cm,barMeasure),updateScrollbars(cm,barMeasure)}update.signal(cm,"update",cm),cm.display.viewFrom==cm.display.reportedViewFrom&&cm.display.viewTo==cm.display.reportedViewTo||(update.signal(cm,"viewportChange",cm,cm.display.viewFrom,cm.display.viewTo),cm.display.reportedViewFrom=cm.display.viewFrom,cm.display.reportedViewTo=cm.display.viewTo)}function updateDisplaySimple(cm,viewport){var update=new DisplayUpdate(cm,viewport);if(updateDisplayIfNeeded(cm,update)){updateHeightsInViewport(cm),postUpdateDisplay(cm,update);var barMeasure=measureForScrollbars(cm);updateSelection(cm),setDocumentHeight(cm,barMeasure),updateScrollbars(cm,barMeasure),update.finish()}}function setDocumentHeight(cm,measure){cm.display.sizer.style.minHeight=measure.docHeight+"px";var total=measure.docHeight+cm.display.barHeight;cm.display.heightForcer.style.top=total+"px",cm.display.gutters.style.height=Math.max(total+scrollGap(cm),measure.clientHeight)+"px"}function updateHeightsInViewport(cm){for(var display=cm.display,prevBottom=display.lineDiv.offsetTop,i=0;i<display.view.length;i++){var height,cur=display.view[i];if(!cur.hidden){if(ie&&ie_version<8){var bot=cur.node.offsetTop+cur.node.offsetHeight;height=bot-prevBottom,prevBottom=bot}else{var box=cur.node.getBoundingClientRect();height=box.bottom-box.top}var diff=cur.line.height-height;if(height<2&&(height=textHeight(display)),(.001<diff||diff<-.001)&&(updateLineHeight(cur.line,height),updateWidgetHeight(cur.line),cur.rest))for(var j=0;j<cur.rest.length;j++)updateWidgetHeight(cur.rest[j])}}}function updateWidgetHeight(line){if(line.widgets)for(var i=0;i<line.widgets.length;++i)line.widgets[i].height=line.widgets[i].node.parentNode.offsetHeight}function getDimensions(cm){for(var d=cm.display,left={},width={},gutterLeft=d.gutters.clientLeft,n=d.gutters.firstChild,i=0;n;n=n.nextSibling,++i)left[cm.options.gutters[i]]=n.offsetLeft+n.clientLeft+gutterLeft,width[cm.options.gutters[i]]=n.clientWidth;return{fixedPos:compensateForHScroll(d),gutterTotalWidth:d.gutters.offsetWidth,gutterLeft:left,gutterWidth:width,wrapperWidth:d.wrapper.clientWidth}}function updateLineForChanges(cm,lineView,lineN,dims){for(var j=0;j<lineView.changes.length;j++){var type=lineView.changes[j];"text"==type?updateLineText(cm,lineView):"gutter"==type?updateLineGutter(cm,lineView,lineN,dims):"class"==type?updateLineClasses(lineView):"widget"==type&&updateLineWidgets(cm,lineView,dims)}lineView.changes=null}function ensureLineWrapped(lineView){return lineView.node==lineView.text&&(lineView.node=elt("div",null,null,"position: relative"),lineView.text.parentNode&&lineView.text.parentNode.replaceChild(lineView.node,lineView.text),lineView.node.appendChild(lineView.text),ie&&ie_version<8&&(lineView.node.style.zIndex=2)),lineView.node}function getLineContent(cm,lineView){var ext=cm.display.externalMeasured;return ext&&ext.line==lineView.line?(cm.display.externalMeasured=null,lineView.measure=ext.measure,ext.built):buildLineContent(cm,lineView)}function updateLineText(cm,lineView){var cls=lineView.text.className,built=getLineContent(cm,lineView);lineView.text==lineView.node&&(lineView.node=built.pre),lineView.text.parentNode.replaceChild(built.pre,lineView.text),lineView.text=built.pre,built.bgClass!=lineView.bgClass||built.textClass!=lineView.textClass?(lineView.bgClass=built.bgClass,lineView.textClass=built.textClass,updateLineClasses(lineView)):cls&&(lineView.text.className=cls)}function updateLineClasses(lineView){!function(lineView){var cls=lineView.bgClass?lineView.bgClass+" "+(lineView.line.bgClass||""):lineView.line.bgClass;if(cls&&(cls+=" CodeMirror-linebackground"),lineView.background)cls?lineView.background.className=cls:(lineView.background.parentNode.removeChild(lineView.background),lineView.background=null);else if(cls){var wrap=ensureLineWrapped(lineView);lineView.background=wrap.insertBefore(elt("div",null,cls),wrap.firstChild)}}(lineView),lineView.line.wrapClass?ensureLineWrapped(lineView).className=lineView.line.wrapClass:lineView.node!=lineView.text&&(lineView.node.className="");var textClass=lineView.textClass?lineView.textClass+" "+(lineView.line.textClass||""):lineView.line.textClass;lineView.text.className=textClass||""}function updateLineGutter(cm,lineView,lineN,dims){if(lineView.gutter&&(lineView.node.removeChild(lineView.gutter),lineView.gutter=null),lineView.gutterBackground&&(lineView.node.removeChild(lineView.gutterBackground),lineView.gutterBackground=null),lineView.line.gutterClass){var wrap=ensureLineWrapped(lineView);lineView.gutterBackground=elt("div",null,"CodeMirror-gutter-background "+lineView.line.gutterClass,"left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px; width: "+dims.gutterTotalWidth+"px"),wrap.insertBefore(lineView.gutterBackground,lineView.text)}var markers=lineView.line.gutterMarkers;if(cm.options.lineNumbers||markers){wrap=ensureLineWrapped(lineView);var gutterWrap=lineView.gutter=elt("div",null,"CodeMirror-gutter-wrapper","left: "+(cm.options.fixedGutter?dims.fixedPos:-dims.gutterTotalWidth)+"px");if(cm.display.input.setUneditable(gutterWrap),wrap.insertBefore(gutterWrap,lineView.text),lineView.line.gutterClass&&(gutterWrap.className+=" "+lineView.line.gutterClass),!cm.options.lineNumbers||markers&&markers["CodeMirror-linenumbers"]||(lineView.lineNumber=gutterWrap.appendChild(elt("div",lineNumberFor(cm.options,lineN),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+dims.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+cm.display.lineNumInnerWidth+"px"))),markers)for(var k=0;k<cm.options.gutters.length;++k){var id=cm.options.gutters[k],found=markers.hasOwnProperty(id)&&markers[id];found&&gutterWrap.appendChild(elt("div",[found],"CodeMirror-gutter-elt","left: "+dims.gutterLeft[id]+"px; width: "+dims.gutterWidth[id]+"px"))}}}function updateLineWidgets(cm,lineView,dims){lineView.alignable&&(lineView.alignable=null);for(var node=lineView.node.firstChild;node;node=next){var next=node.nextSibling;"CodeMirror-linewidget"==node.className&&lineView.node.removeChild(node)}insertLineWidgets(cm,lineView,dims)}function buildLineElement(cm,lineView,lineN,dims){var built=getLineContent(cm,lineView);return lineView.text=lineView.node=built.pre,built.bgClass&&(lineView.bgClass=built.bgClass),built.textClass&&(lineView.textClass=built.textClass),updateLineClasses(lineView),updateLineGutter(cm,lineView,lineN,dims),insertLineWidgets(cm,lineView,dims),lineView.node}function insertLineWidgets(cm,lineView,dims){if(insertLineWidgetsFor(cm,lineView.line,lineView,dims,!0),lineView.rest)for(var i=0;i<lineView.rest.length;i++)insertLineWidgetsFor(cm,lineView.rest[i],lineView,dims,!1)}function insertLineWidgetsFor(cm,line,lineView,dims,allowAbove){if(line.widgets)for(var wrap=ensureLineWrapped(lineView),i=0,ws=line.widgets;i<ws.length;++i){var widget=ws[i],node=elt("div",[widget.node],"CodeMirror-linewidget");widget.handleMouseEvents||node.setAttribute("cm-ignore-events","true"),positionLineWidget(widget,node,lineView,dims),cm.display.input.setUneditable(node),allowAbove&&widget.above?wrap.insertBefore(node,lineView.gutter||lineView.text):wrap.appendChild(node),signalLater(widget,"redraw")}}function positionLineWidget(widget,node,lineView,dims){if(widget.noHScroll){(lineView.alignable||(lineView.alignable=[])).push(node);var width=dims.wrapperWidth;node.style.left=dims.fixedPos+"px",widget.coverGutter||(width-=dims.gutterTotalWidth,node.style.paddingLeft=dims.gutterTotalWidth+"px"),node.style.width=width+"px"}widget.coverGutter&&(node.style.zIndex=5,node.style.position="relative",widget.noHScroll||(node.style.marginLeft=-dims.gutterTotalWidth+"px"))}NativeScrollbars.prototype=copyObj({update:function(measure){var needsH=measure.scrollWidth>measure.clientWidth+1,needsV=measure.scrollHeight>measure.clientHeight+1,sWidth=measure.nativeBarWidth;if(needsV){this.vert.style.display="block",this.vert.style.bottom=needsH?sWidth+"px":"0";var totalHeight=measure.viewHeight-(needsH?sWidth:0);this.vert.firstChild.style.height=Math.max(0,measure.scrollHeight-measure.clientHeight+totalHeight)+"px"}else this.vert.style.display="",this.vert.firstChild.style.height="0";if(needsH){this.horiz.style.display="block",this.horiz.style.right=needsV?sWidth+"px":"0",this.horiz.style.left=measure.barLeft+"px";var totalWidth=measure.viewWidth-measure.barLeft-(needsV?sWidth:0);this.horiz.firstChild.style.width=measure.scrollWidth-measure.clientWidth+totalWidth+"px"}else this.horiz.style.display="",this.horiz.firstChild.style.width="0";return!this.checkedZeroWidth&&0<measure.clientHeight&&(0==sWidth&&this.zeroWidthHack(),this.checkedZeroWidth=!0),{right:needsV?sWidth:0,bottom:needsH?sWidth:0}},setScrollLeft:function(pos){this.horiz.scrollLeft!=pos&&(this.horiz.scrollLeft=pos),this.disableHoriz&&this.enableZeroWidthBar(this.horiz,this.disableHoriz)},setScrollTop:function(pos){this.vert.scrollTop!=pos&&(this.vert.scrollTop=pos),this.disableVert&&this.enableZeroWidthBar(this.vert,this.disableVert)},zeroWidthHack:function(){var w=mac&&!mac_geMountainLion?"12px":"18px";this.horiz.style.height=this.vert.style.width=w,this.horiz.style.pointerEvents=this.vert.style.pointerEvents="none",this.disableHoriz=new Delayed,this.disableVert=new Delayed},enableZeroWidthBar:function(bar,delay){bar.style.pointerEvents="auto",delay.set(1e3,function maybeDisable(){var box=bar.getBoundingClientRect();document.elementFromPoint(box.left+1,box.bottom-1)!=bar?bar.style.pointerEvents="none":delay.set(1e3,maybeDisable)})},clear:function(){var parent=this.horiz.parentNode;parent.removeChild(this.horiz),parent.removeChild(this.vert)}},NativeScrollbars.prototype),NullScrollbars.prototype=copyObj({update:function(){return{bottom:0,right:0}},setScrollLeft:function(){},setScrollTop:function(){},clear:function(){}},NullScrollbars.prototype),CodeMirror.scrollbarModel={native:NativeScrollbars,null:NullScrollbars},DisplayUpdate.prototype.signal=function(emitter,type){hasHandler(emitter,type)&&this.events.push(arguments)},DisplayUpdate.prototype.finish=function(){for(var i=0;i<this.events.length;i++)signal.apply(null,this.events[i])};var Pos=CodeMirror.Pos=function(line,ch){if(!(this instanceof Pos))return new Pos(line,ch);this.line=line,this.ch=ch},cmp=CodeMirror.cmpPos=function(a,b){return a.line-b.line||a.ch-b.ch};function copyPos(x){return Pos(x.line,x.ch)}function maxPos(a,b){return cmp(a,b)<0?b:a}function minPos(a,b){return cmp(a,b)<0?a:b}function ensureFocus(cm){cm.state.focused||(cm.display.input.focus(),onFocus(cm))}var lastCopied=null;function applyTextInput(cm,inserted,deleted,sel,origin){var doc=cm.doc;cm.display.shift=!1,sel||(sel=doc.sel);var paste=cm.state.pasteIncoming||"paste"==origin,textLines=doc.splitLines(inserted),multiPaste=null;if(paste&&1<sel.ranges.length)if(lastCopied&&lastCopied.join("\n")==inserted){if(sel.ranges.length%lastCopied.length==0){multiPaste=[];for(var i=0;i<lastCopied.length;i++)multiPaste.push(doc.splitLines(lastCopied[i]))}}else textLines.length==sel.ranges.length&&(multiPaste=map(textLines,function(l){return[l]}));for(i=sel.ranges.length-1;0<=i;i--){var range=sel.ranges[i],from=range.from(),to=range.to();range.empty()&&(deleted&&0<deleted?from=Pos(from.line,from.ch-deleted):cm.state.overwrite&&!paste&&(to=Pos(to.line,Math.min(getLine(doc,to.line).text.length,to.ch+lst(textLines).length))));var updateInput=cm.curOp.updateInput,changeEvent={from:from,to:to,text:multiPaste?multiPaste[i%multiPaste.length]:textLines,origin:origin||(paste?"paste":cm.state.cutIncoming?"cut":"+input")};makeChange(cm.doc,changeEvent),signalLater(cm,"inputRead",cm,changeEvent)}inserted&&!paste&&triggerElectric(cm,inserted),ensureCursorVisible(cm),cm.curOp.updateInput=updateInput,cm.curOp.typing=!0,cm.state.pasteIncoming=cm.state.cutIncoming=!1}function handlePaste(e,cm){var pasted=e.clipboardData&&e.clipboardData.getData("text/plain");if(pasted)return e.preventDefault(),cm.isReadOnly()||cm.options.disableInput||runInOp(cm,function(){applyTextInput(cm,pasted,0,null,"paste")}),!0}function triggerElectric(cm,inserted){if(cm.options.electricChars&&cm.options.smartIndent)for(var sel=cm.doc.sel,i=sel.ranges.length-1;0<=i;i--){var range=sel.ranges[i];if(!(100<range.head.ch||i&&sel.ranges[i-1].head.line==range.head.line)){var mode=cm.getModeAt(range.head),indented=!1;if(mode.electricChars){for(var j=0;j<mode.electricChars.length;j++)if(-1<inserted.indexOf(mode.electricChars.charAt(j))){indented=indentLine(cm,range.head.line,"smart");break}}else mode.electricInput&&mode.electricInput.test(getLine(cm.doc,range.head.line).text.slice(0,range.head.ch))&&(indented=indentLine(cm,range.head.line,"smart"));indented&&signalLater(cm,"electricInput",cm,range.head.line)}}}function copyableRanges(cm){for(var text=[],ranges=[],i=0;i<cm.doc.sel.ranges.length;i++){var line=cm.doc.sel.ranges[i].head.line,lineRange={anchor:Pos(line,0),head:Pos(line+1,0)};ranges.push(lineRange),text.push(cm.getRange(lineRange.anchor,lineRange.head))}return{text:text,ranges:ranges}}function disableBrowserMagic(field){field.setAttribute("autocorrect","off"),field.setAttribute("autocapitalize","off"),field.setAttribute("spellcheck","false")}function TextareaInput(cm){this.cm=cm,this.prevInput="",this.pollingFast=!1,this.polling=new Delayed,this.inaccurateSelection=!1,this.hasSelection=!1,this.composing=null}function hiddenTextarea(){var te=elt("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none"),div=elt("div",[te],null,"overflow: hidden; position: relative; width: 3px; height: 0px;");return webkit?te.style.width="1000px":te.setAttribute("wrap","off"),ios&&(te.style.border="1px solid black"),disableBrowserMagic(te),div}function ContentEditableInput(cm){this.cm=cm,this.lastAnchorNode=this.lastAnchorOffset=this.lastFocusNode=this.lastFocusOffset=null,this.polling=new Delayed,this.gracePeriod=!1}function posToDOM(cm,pos){var view=findViewForLine(cm,pos.line);if(!view||view.hidden)return null;var line=getLine(cm.doc,pos.line),info=mapFromLineView(view,line,pos.line),order=getOrder(line),side="left";order&&(side=getBidiPartAt(order,pos.ch)%2?"right":"left");var result=nodeAndOffsetInLineMap(info.map,pos.ch,side);return result.offset="right"==result.collapse?result.end:result.start,result}function badPos(pos,bad){return bad&&(pos.bad=!0),pos}function domToPos(cm,node,offset){var lineNode;if(node==cm.display.lineDiv){if(!(lineNode=cm.display.lineDiv.childNodes[offset]))return badPos(cm.clipPos(Pos(cm.display.viewTo-1)),!0);node=null,offset=0}else for(lineNode=node;;lineNode=lineNode.parentNode){if(!lineNode||lineNode==cm.display.lineDiv)return null;if(lineNode.parentNode&&lineNode.parentNode==cm.display.lineDiv)break}for(var i=0;i<cm.display.view.length;i++){var lineView=cm.display.view[i];if(lineView.node==lineNode)return locateNodeInLineView(lineView,node,offset)}}function locateNodeInLineView(lineView,node,offset){var wrapper=lineView.text.firstChild,bad=!1;if(!node||!contains(wrapper,node))return badPos(Pos(lineNo(lineView.line),0),!0);if(node==wrapper&&(bad=!0,node=wrapper.childNodes[offset],offset=0,!node)){var line=lineView.rest?lst(lineView.rest):lineView.line;return badPos(Pos(lineNo(line),line.text.length),bad)}var textNode=3==node.nodeType?node:null,topNode=node;for(textNode||1!=node.childNodes.length||3!=node.firstChild.nodeType||(textNode=node.firstChild,offset&&(offset=textNode.nodeValue.length));topNode.parentNode!=wrapper;)topNode=topNode.parentNode;var measure=lineView.measure,maps=measure.maps;function find(textNode,topNode,offset){for(var i=-1;i<(maps?maps.length:0);i++)for(var map=i<0?measure.map:maps[i],j=0;j<map.length;j+=3){var curNode=map[j+2];if(curNode==textNode||curNode==topNode){var line=lineNo(i<0?lineView.line:lineView.rest[i]),ch=map[j]+offset;return(offset<0||curNode!=textNode)&&(ch=map[j+(offset?1:0)]),Pos(line,ch)}}}var found=find(textNode,topNode,offset);if(found)return badPos(found,bad);for(var after=topNode.nextSibling,dist=textNode?textNode.nodeValue.length-offset:0;after;after=after.nextSibling){if(found=find(after,after.firstChild,0))return badPos(Pos(found.line,found.ch-dist),bad);dist+=after.textContent.length}var before=topNode.previousSibling;for(dist=offset;before;before=before.previousSibling){if(found=find(before,before.firstChild,-1))return badPos(Pos(found.line,found.ch+dist),bad);dist+=after.textContent.length}}function Selection(ranges,primIndex){this.ranges=ranges,this.primIndex=primIndex}function Range(anchor,head){this.anchor=anchor,this.head=head}function normalizeSelection(ranges,primIndex){var prim=ranges[primIndex];ranges.sort(function(a,b){return cmp(a.from(),b.from())}),primIndex=indexOf(ranges,prim);for(var i=1;i<ranges.length;i++){var cur=ranges[i],prev=ranges[i-1];if(0<=cmp(prev.to(),cur.from())){var from=minPos(prev.from(),cur.from()),to=maxPos(prev.to(),cur.to()),inv=prev.empty()?cur.from()==cur.head:prev.from()==prev.head;i<=primIndex&&--primIndex,ranges.splice(--i,2,new Range(inv?to:from,inv?from:to))}}return new Selection(ranges,primIndex)}function simpleSelection(anchor,head){return new Selection([new Range(anchor,head||anchor)],0)}function clipLine(doc,n){return Math.max(doc.first,Math.min(n,doc.first+doc.size-1))}function clipPos(doc,pos){if(pos.line<doc.first)return Pos(doc.first,0);var last=doc.first+doc.size-1;return pos.line>last?Pos(last,getLine(doc,last).text.length):function(pos,linelen){var ch=pos.ch;return null==ch||linelen<ch?Pos(pos.line,linelen):ch<0?Pos(pos.line,0):pos}(pos,getLine(doc,pos.line).text.length)}function isLine(doc,l){return l>=doc.first&&l<doc.first+doc.size}function clipPosArray(doc,array){for(var out=[],i=0;i<array.length;i++)out[i]=clipPos(doc,array[i]);return out}function extendRange(doc,range,head,other){if(doc.cm&&doc.cm.display.shift||doc.extend){var anchor=range.anchor;if(other){var posBefore=cmp(head,anchor)<0;posBefore!=cmp(other,anchor)<0?(anchor=head,head=other):posBefore!=cmp(head,other)<0&&(head=other)}return new Range(anchor,head)}return new Range(other||head,head)}function extendSelection(doc,head,other,options){setSelection(doc,new Selection([extendRange(doc,doc.sel.primary(),head,other)],0),options)}function extendSelections(doc,heads,options){for(var out=[],i=0;i<doc.sel.ranges.length;i++)out[i]=extendRange(doc,doc.sel.ranges[i],heads[i],null);setSelection(doc,normalizeSelection(out,doc.sel.primIndex),options)}function replaceOneSelection(doc,i,range,options){var ranges=doc.sel.ranges.slice(0);ranges[i]=range,setSelection(doc,normalizeSelection(ranges,doc.sel.primIndex),options)}function setSimpleSelection(doc,anchor,head,options){setSelection(doc,simpleSelection(anchor,head),options)}function setSelectionReplaceHistory(doc,sel,options){var done=doc.history.done,last=lst(done);last&&last.ranges?setSelectionNoUndo(doc,done[done.length-1]=sel,options):setSelection(doc,sel,options)}function setSelection(doc,sel,options){setSelectionNoUndo(doc,sel,options),function(doc,sel,opId,options){var hist=doc.history,origin=options&&options.origin;opId==hist.lastSelOp||origin&&hist.lastSelOrigin==origin&&(hist.lastModTime==hist.lastSelTime&&hist.lastOrigin==origin||function(doc,origin,prev,sel){var ch=origin.charAt(0);return"*"==ch||"+"==ch&&prev.ranges.length==sel.ranges.length&&prev.somethingSelected()==sel.somethingSelected()&&new Date-doc.history.lastSelTime<=(doc.cm?doc.cm.options.historyEventDelay:500)}(doc,origin,lst(hist.done),sel))?hist.done[hist.done.length-1]=sel:pushSelectionToHistory(sel,hist.done);hist.lastSelTime=+new Date,hist.lastSelOrigin=origin,hist.lastSelOp=opId,options&&!1!==options.clearRedo&&clearSelectionEvents(hist.undone)}(doc,doc.sel,doc.cm?doc.cm.curOp.id:NaN,options)}function setSelectionNoUndo(doc,sel,options){(hasHandler(doc,"beforeSelectionChange")||doc.cm&&hasHandler(doc.cm,"beforeSelectionChange"))&&(sel=function(doc,sel,options){var obj={ranges:sel.ranges,update:function(ranges){this.ranges=[];for(var i=0;i<ranges.length;i++)this.ranges[i]=new Range(clipPos(doc,ranges[i].anchor),clipPos(doc,ranges[i].head))},origin:options&&options.origin};return signal(doc,"beforeSelectionChange",doc,obj),doc.cm&&signal(doc.cm,"beforeSelectionChange",doc.cm,obj),obj.ranges!=sel.ranges?normalizeSelection(obj.ranges,obj.ranges.length-1):sel}(doc,sel,options)),setSelectionInner(doc,skipAtomicInSelection(doc,sel,options&&options.bias||(cmp(sel.primary().head,doc.sel.primary().head)<0?-1:1),!0)),options&&!1===options.scroll||!doc.cm||ensureCursorVisible(doc.cm)}function setSelectionInner(doc,sel){sel.equals(doc.sel)||(doc.sel=sel,doc.cm&&(doc.cm.curOp.updateInput=doc.cm.curOp.selectionChanged=!0,signalCursorActivity(doc.cm)),signalLater(doc,"cursorActivity",doc))}function reCheckSelection(doc){setSelectionInner(doc,skipAtomicInSelection(doc,doc.sel,null,!1))}function skipAtomicInSelection(doc,sel,bias,mayClear){for(var out,i=0;i<sel.ranges.length;i++){var range=sel.ranges[i],old=sel.ranges.length==doc.sel.ranges.length&&doc.sel.ranges[i],newAnchor=skipAtomic(doc,range.anchor,old&&old.anchor,bias,mayClear),newHead=skipAtomic(doc,range.head,old&&old.head,bias,mayClear);(out||newAnchor!=range.anchor||newHead!=range.head)&&(out||(out=sel.ranges.slice(0,i)),out[i]=new Range(newAnchor,newHead))}return out?normalizeSelection(out,sel.primIndex):sel}function skipAtomicInner(doc,pos,oldPos,dir,mayClear){var line=getLine(doc,pos.line);if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var sp=line.markedSpans[i],m=sp.marker;if((null==sp.from||(m.inclusiveLeft?sp.from<=pos.ch:sp.from<pos.ch))&&(null==sp.to||(m.inclusiveRight?sp.to>=pos.ch:sp.to>pos.ch))){if(mayClear&&(signal(m,"beforeCursorEnter"),m.explicitlyCleared)){if(line.markedSpans){--i;continue}break}if(!m.atomic)continue;if(oldPos){var diff,near=m.find(dir<0?1:-1);if((dir<0?m.inclusiveRight:m.inclusiveLeft)&&(near=movePos(doc,near,-dir,line)),near&&near.line==pos.line&&(diff=cmp(near,oldPos))&&(dir<0?diff<0:0<diff))return skipAtomicInner(doc,near,pos,dir,mayClear)}var far=m.find(dir<0?-1:1);return(dir<0?m.inclusiveLeft:m.inclusiveRight)&&(far=movePos(doc,far,dir,line)),far?skipAtomicInner(doc,far,pos,dir,mayClear):null}}return pos}function skipAtomic(doc,pos,oldPos,bias,mayClear){var dir=bias||1,found=skipAtomicInner(doc,pos,oldPos,dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,dir,!0)||skipAtomicInner(doc,pos,oldPos,-dir,mayClear)||!mayClear&&skipAtomicInner(doc,pos,oldPos,-dir,!0);return found||(doc.cantEdit=!0,Pos(doc.first,0))}function movePos(doc,pos,dir,line){return dir<0&&0==pos.ch?pos.line>doc.first?clipPos(doc,Pos(pos.line-1)):null:0<dir&&pos.ch==(line||getLine(doc,pos.line)).text.length?pos.line<doc.first+doc.size-1?Pos(pos.line+1,0):null:new Pos(pos.line,pos.ch+dir)}function updateSelection(cm){cm.display.input.showSelection(cm.display.input.prepareSelection())}function prepareSelection(cm,primary){for(var doc=cm.doc,result={},curFragment=result.cursors=document.createDocumentFragment(),selFragment=result.selection=document.createDocumentFragment(),i=0;i<doc.sel.ranges.length;i++)if(!1!==primary||i!=doc.sel.primIndex){var range=doc.sel.ranges[i],collapsed=range.empty();(collapsed||cm.options.showCursorWhenSelecting)&&drawSelectionCursor(cm,range.head,curFragment),collapsed||drawSelectionRange(cm,range,selFragment)}return result}function drawSelectionCursor(cm,head,output){var pos=cursorCoords(cm,head,"div",null,null,!cm.options.singleCursorHeightPerLine),cursor=output.appendChild(elt("div"," ","CodeMirror-cursor"));if(cursor.style.left=pos.left+"px",cursor.style.top=pos.top+"px",cursor.style.height=Math.max(0,pos.bottom-pos.top)*cm.options.cursorHeight+"px",pos.other){var otherCursor=output.appendChild(elt("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"));otherCursor.style.display="",otherCursor.style.left=pos.other.left+"px",otherCursor.style.top=pos.other.top+"px",otherCursor.style.height=.85*(pos.other.bottom-pos.other.top)+"px"}}function drawSelectionRange(cm,range,output){var display=cm.display,doc=cm.doc,fragment=document.createDocumentFragment(),padding=paddingH(cm.display),leftSide=padding.left,rightSide=Math.max(display.sizerWidth,displayWidth(cm)-display.sizer.offsetLeft)-padding.right;function add(left,top,width,bottom){top<0&&(top=0),top=Math.round(top),bottom=Math.round(bottom),fragment.appendChild(elt("div",null,"CodeMirror-selected","position: absolute; left: "+left+"px; top: "+top+"px; width: "+(null==width?rightSide-left:width)+"px; height: "+(bottom-top)+"px"))}function drawForLine(line,fromArg,toArg){var start,end,lineObj=getLine(doc,line),lineLen=lineObj.text.length;function coords(ch,bias){return charCoords(cm,Pos(line,ch),"div",lineObj,bias)}return function(order,from,to,f){if(!order)return f(from,to,"ltr");for(var found=!1,i=0;i<order.length;++i){var part=order[i];(part.from<to&&part.to>from||from==to&&part.to==from)&&(f(Math.max(part.from,from),Math.min(part.to,to),1==part.level?"rtl":"ltr"),found=!0)}found||f(from,to,"ltr")}(getOrder(lineObj),fromArg||0,null==toArg?lineLen:toArg,function(from,to,dir){var rightPos,left,right,leftPos=coords(from,"left");if(from==to)left=right=(rightPos=leftPos).left;else{if(rightPos=coords(to-1,"right"),"rtl"==dir){var tmp=leftPos;leftPos=rightPos,rightPos=tmp}left=leftPos.left,right=rightPos.right}null==fromArg&&0==from&&(left=leftSide),3<rightPos.top-leftPos.top&&(add(left,leftPos.top,null,leftPos.bottom),left=leftSide,leftPos.bottom<rightPos.top&&add(left,leftPos.bottom,null,rightPos.top)),null==toArg&&to==lineLen&&(right=rightSide),(!start||leftPos.top<start.top||leftPos.top==start.top&&leftPos.left<start.left)&&(start=leftPos),(!end||rightPos.bottom>end.bottom||rightPos.bottom==end.bottom&&rightPos.right>end.right)&&(end=rightPos),left<leftSide+1&&(left=leftSide),add(left,rightPos.top,right-left,rightPos.bottom)}),{start:start,end:end}}var sFrom=range.from(),sTo=range.to();if(sFrom.line==sTo.line)drawForLine(sFrom.line,sFrom.ch,sTo.ch);else{var fromLine=getLine(doc,sFrom.line),toLine=getLine(doc,sTo.line),singleVLine=visualLine(fromLine)==visualLine(toLine),leftEnd=drawForLine(sFrom.line,sFrom.ch,singleVLine?fromLine.text.length+1:null).end,rightStart=drawForLine(sTo.line,singleVLine?0:null,sTo.ch).start;singleVLine&&(leftEnd.top<rightStart.top-2?(add(leftEnd.right,leftEnd.top,null,leftEnd.bottom),add(leftSide,rightStart.top,rightStart.left,rightStart.bottom)):add(leftEnd.right,leftEnd.top,rightStart.left-leftEnd.right,leftEnd.bottom)),leftEnd.bottom<rightStart.top&&add(leftSide,leftEnd.bottom,null,rightStart.top)}output.appendChild(fragment)}function restartBlink(cm){if(cm.state.focused){var display=cm.display;clearInterval(display.blinker);var on=!0;display.cursorDiv.style.visibility="",0<cm.options.cursorBlinkRate?display.blinker=setInterval(function(){display.cursorDiv.style.visibility=(on=!on)?"":"hidden"},cm.options.cursorBlinkRate):cm.options.cursorBlinkRate<0&&(display.cursorDiv.style.visibility="hidden")}}function startWorker(cm,time){cm.doc.mode.startState&&cm.doc.frontier<cm.display.viewTo&&cm.state.highlight.set(time,bind(highlightWorker,cm))}function highlightWorker(cm){var doc=cm.doc;if(doc.frontier<doc.first&&(doc.frontier=doc.first),!(doc.frontier>=cm.display.viewTo)){var end=+new Date+cm.options.workTime,state=copyState(doc.mode,getStateBefore(cm,doc.frontier)),changedLines=[];doc.iter(doc.frontier,Math.min(doc.first+doc.size,cm.display.viewTo+500),function(line){if(doc.frontier>=cm.display.viewFrom){var oldStyles=line.styles,tooLong=line.text.length>cm.options.maxHighlightLength,highlighted=highlightLine(cm,line,tooLong?copyState(doc.mode,state):state,!0);line.styles=highlighted.styles;var oldCls=line.styleClasses,newCls=highlighted.classes;newCls?line.styleClasses=newCls:oldCls&&(line.styleClasses=null);for(var ischange=!oldStyles||oldStyles.length!=line.styles.length||oldCls!=newCls&&(!oldCls||!newCls||oldCls.bgClass!=newCls.bgClass||oldCls.textClass!=newCls.textClass),i=0;!ischange&&i<oldStyles.length;++i)ischange=oldStyles[i]!=line.styles[i];ischange&&changedLines.push(doc.frontier),line.stateAfter=tooLong?state:copyState(doc.mode,state)}else line.text.length<=cm.options.maxHighlightLength&&processLine(cm,line.text,state),line.stateAfter=doc.frontier%5==0?copyState(doc.mode,state):null;if(++doc.frontier,+new Date>end)return startWorker(cm,cm.options.workDelay),!0}),changedLines.length&&runInOp(cm,function(){for(var i=0;i<changedLines.length;i++)regLineChange(cm,changedLines[i],"text")})}}function getStateBefore(cm,n,precise){var doc=cm.doc,display=cm.display;if(!doc.mode.startState)return!0;var pos=function(cm,n,precise){for(var minindent,minline,doc=cm.doc,lim=precise?-1:n-(cm.doc.mode.innerMode?1e3:100),search=n;lim<search;--search){if(search<=doc.first)return doc.first;var line=getLine(doc,search-1);if(line.stateAfter&&(!precise||search<=doc.frontier))return search;var indented=countColumn(line.text,null,cm.options.tabSize);(null==minline||indented<minindent)&&(minline=search-1,minindent=indented)}return minline}(cm,n,precise),state=pos>doc.first&&getLine(doc,pos-1).stateAfter;return state=state?copyState(doc.mode,state):startState(doc.mode),doc.iter(pos,n,function(line){processLine(cm,line.text,state);var save=pos==n-1||pos%5==0||pos>=display.viewFrom&&pos<display.viewTo;line.stateAfter=save?copyState(doc.mode,state):null,++pos}),precise&&(doc.frontier=pos),state}function paddingTop(display){return display.lineSpace.offsetTop}function paddingVert(display){return display.mover.offsetHeight-display.lineSpace.offsetHeight}function paddingH(display){if(display.cachedPaddingH)return display.cachedPaddingH;var e=removeChildrenAndAdd(display.measure,elt("pre","x")),style=window.getComputedStyle?window.getComputedStyle(e):e.currentStyle,data={left:parseInt(style.paddingLeft),right:parseInt(style.paddingRight)};return isNaN(data.left)||isNaN(data.right)||(display.cachedPaddingH=data),data}function scrollGap(cm){return scrollerGap-cm.display.nativeBarWidth}function displayWidth(cm){return cm.display.scroller.clientWidth-scrollGap(cm)-cm.display.barWidth}function displayHeight(cm){return cm.display.scroller.clientHeight-scrollGap(cm)-cm.display.barHeight}function mapFromLineView(lineView,line,lineN){if(lineView.line==line)return{map:lineView.measure.map,cache:lineView.measure.cache};for(var i=0;i<lineView.rest.length;i++)if(lineView.rest[i]==line)return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i]};for(i=0;i<lineView.rest.length;i++)if(lineNo(lineView.rest[i])>lineN)return{map:lineView.measure.maps[i],cache:lineView.measure.caches[i],before:!0}}function measureChar(cm,line,ch,bias){return measureCharPrepared(cm,prepareMeasureForLine(cm,line),ch,bias)}function findViewForLine(cm,lineN){if(lineN>=cm.display.viewFrom&&lineN<cm.display.viewTo)return cm.display.view[findViewIndex(cm,lineN)];var ext=cm.display.externalMeasured;return ext&&lineN>=ext.lineN&&lineN<ext.lineN+ext.size?ext:void 0}function prepareMeasureForLine(cm,line){var lineN=lineNo(line),view=findViewForLine(cm,lineN);view&&!view.text?view=null:view&&view.changes&&(updateLineForChanges(cm,view,lineN,getDimensions(cm)),cm.curOp.forceUpdate=!0),view||(view=function(cm,line){var lineN=lineNo(line=visualLine(line)),view=cm.display.externalMeasured=new LineView(cm.doc,line,lineN);view.lineN=lineN;var built=view.built=buildLineContent(cm,view);return view.text=built.pre,removeChildrenAndAdd(cm.display.lineMeasure,built.pre),view}(cm,line));var info=mapFromLineView(view,line,lineN);return{line:line,view:view,rect:null,map:info.map,cache:info.cache,before:info.before,hasHeights:!1}}function measureCharPrepared(cm,prepared,ch,bias,varHeight){prepared.before&&(ch=-1);var found,key=ch+(bias||"");return prepared.cache.hasOwnProperty(key)?found=prepared.cache[key]:(prepared.rect||(prepared.rect=prepared.view.text.getBoundingClientRect()),prepared.hasHeights||(!function(cm,lineView,rect){var wrapping=cm.options.lineWrapping,curWidth=wrapping&&displayWidth(cm);if(!lineView.measure.heights||wrapping&&lineView.measure.width!=curWidth){var heights=lineView.measure.heights=[];if(wrapping){lineView.measure.width=curWidth;for(var rects=lineView.text.firstChild.getClientRects(),i=0;i<rects.length-1;i++){var cur=rects[i],next=rects[i+1];2<Math.abs(cur.bottom-next.bottom)&&heights.push((cur.bottom+next.top)/2-rect.top)}}heights.push(rect.bottom-rect.top)}}(cm,prepared.view,prepared.rect),prepared.hasHeights=!0),(found=function(cm,prepared,ch,bias){var rect,place=nodeAndOffsetInLineMap(prepared.map,ch,bias),node=place.node,start=place.start,end=place.end,collapse=place.collapse;if(3==node.nodeType){for(var i=0;i<4;i++){for(;start&&isExtendingChar(prepared.line.text.charAt(place.coverStart+start));)--start;for(;place.coverStart+end<place.coverEnd&&isExtendingChar(prepared.line.text.charAt(place.coverStart+end));)++end;if(ie&&ie_version<9&&0==start&&end==place.coverEnd-place.coverStart)rect=node.parentNode.getBoundingClientRect();else if(ie&&cm.options.lineWrapping){var rects=range(node,start,end).getClientRects();rect=rects.length?rects["right"==bias?rects.length-1:0]:nullRect}else rect=range(node,start,end).getBoundingClientRect()||nullRect;if(rect.left||rect.right||0==start)break;end=start,start-=1,collapse="right"}ie&&ie_version<11&&(rect=function(measure,rect){if(!window.screen||null==screen.logicalXDPI||screen.logicalXDPI==screen.deviceXDPI||!function(measure){if(null!=badZoomedRects)return badZoomedRects;var node=removeChildrenAndAdd(measure,elt("span","x")),normal=node.getBoundingClientRect(),fromRange=range(node,0,1).getBoundingClientRect();return badZoomedRects=1<Math.abs(normal.left-fromRange.left)}(measure))return rect;var scaleX=screen.logicalXDPI/screen.deviceXDPI,scaleY=screen.logicalYDPI/screen.deviceYDPI;return{left:rect.left*scaleX,right:rect.right*scaleX,top:rect.top*scaleY,bottom:rect.bottom*scaleY}}(cm.display.measure,rect))}else{0<start&&(collapse=bias="right"),rect=cm.options.lineWrapping&&1<(rects=node.getClientRects()).length?rects["right"==bias?rects.length-1:0]:node.getBoundingClientRect()}if(ie&&ie_version<9&&!start&&(!rect||!rect.left&&!rect.right)){var rSpan=node.parentNode.getClientRects()[0];rect=rSpan?{left:rSpan.left,right:rSpan.left+charWidth(cm.display),top:rSpan.top,bottom:rSpan.bottom}:nullRect}for(var rtop=rect.top-prepared.rect.top,rbot=rect.bottom-prepared.rect.top,mid=(rtop+rbot)/2,heights=prepared.view.measure.heights,i=0;i<heights.length-1&&!(mid<heights[i]);i++);var top=i?heights[i-1]:0,bot=heights[i],result={left:("right"==collapse?rect.right:rect.left)-prepared.rect.left,right:("left"==collapse?rect.left:rect.right)-prepared.rect.left,top:top,bottom:bot};rect.left||rect.right||(result.bogus=!0);cm.options.singleCursorHeightPerLine||(result.rtop=rtop,result.rbottom=rbot);return result}(cm,prepared,ch,bias)).bogus||(prepared.cache[key]=found)),{left:found.left,right:found.right,top:varHeight?found.rtop:found.top,bottom:varHeight?found.rbottom:found.bottom}}TextareaInput.prototype=copyObj({init:function(display){var input=this,cm=this.cm,div=this.wrapper=hiddenTextarea(),te=this.textarea=div.firstChild;function prepareCopyCut(e){if(cm.somethingSelected())lastCopied=cm.getSelections(),input.inaccurateSelection&&(input.prevInput="",input.inaccurateSelection=!1,te.value=lastCopied.join("\n"),selectInput(te));else{if(!cm.options.lineWiseCopyCut)return;var ranges=copyableRanges(cm);lastCopied=ranges.text,"cut"==e.type?cm.setSelections(ranges.ranges,null,sel_dontScroll):(input.prevInput="",te.value=ranges.text.join("\n"),selectInput(te))}"cut"==e.type&&(cm.state.cutIncoming=!0)}display.wrapper.insertBefore(div,display.wrapper.firstChild),ios&&(te.style.width="0px"),on(te,"input",function(){ie&&9<=ie_version&&input.hasSelection&&(input.hasSelection=null),input.poll()}),on(te,"paste",function(e){signalDOMEvent(cm,e)||handlePaste(e,cm)||(cm.state.pasteIncoming=!0,input.fastPoll())}),on(te,"cut",prepareCopyCut),on(te,"copy",prepareCopyCut),on(display.scroller,"paste",function(e){eventInWidget(display,e)||signalDOMEvent(cm,e)||(cm.state.pasteIncoming=!0,input.focus())}),on(display.lineSpace,"selectstart",function(e){eventInWidget(display,e)||e_preventDefault(e)}),on(te,"compositionstart",function(){var start=cm.getCursor("from");input.composing&&input.composing.range.clear(),input.composing={start:start,range:cm.markText(start,cm.getCursor("to"),{className:"CodeMirror-composing"})}}),on(te,"compositionend",function(){input.composing&&(input.poll(),input.composing.range.clear(),input.composing=null)})},prepareSelection:function(){var cm=this.cm,display=cm.display,doc=cm.doc,result=prepareSelection(cm);if(cm.options.moveInputWithCursor){var headPos=cursorCoords(cm,doc.sel.primary().head,"div"),wrapOff=display.wrapper.getBoundingClientRect(),lineOff=display.lineDiv.getBoundingClientRect();result.teTop=Math.max(0,Math.min(display.wrapper.clientHeight-10,headPos.top+lineOff.top-wrapOff.top)),result.teLeft=Math.max(0,Math.min(display.wrapper.clientWidth-10,headPos.left+lineOff.left-wrapOff.left))}return result},showSelection:function(drawn){var display=this.cm.display;removeChildrenAndAdd(display.cursorDiv,drawn.cursors),removeChildrenAndAdd(display.selectionDiv,drawn.selection),null!=drawn.teTop&&(this.wrapper.style.top=drawn.teTop+"px",this.wrapper.style.left=drawn.teLeft+"px")},reset:function(typing){if(!this.contextMenuPending){var minimal,selected,cm=this.cm,doc=cm.doc;if(cm.somethingSelected()){this.prevInput="";var range=doc.sel.primary(),content=(minimal=hasCopyEvent&&(100<range.to().line-range.from().line||1e3<(selected=cm.getSelection()).length))?"-":selected||cm.getSelection();this.textarea.value=content,cm.state.focused&&selectInput(this.textarea),ie&&9<=ie_version&&(this.hasSelection=content)}else typing||(this.prevInput=this.textarea.value="",ie&&9<=ie_version&&(this.hasSelection=null));this.inaccurateSelection=minimal}},getField:function(){return this.textarea},supportsTouch:function(){return!1},focus:function(){if("nocursor"!=this.cm.options.readOnly&&(!mobile||activeElt()!=this.textarea))try{this.textarea.focus()}catch(e){}},blur:function(){this.textarea.blur()},resetPosition:function(){this.wrapper.style.top=this.wrapper.style.left=0},receivedFocus:function(){this.slowPoll()},slowPoll:function(){var input=this;input.pollingFast||input.polling.set(this.cm.options.pollInterval,function(){input.poll(),input.cm.state.focused&&input.slowPoll()})},fastPoll:function(){var missed=!1,input=this;input.pollingFast=!0,input.polling.set(20,function p(){input.poll()||missed?(input.pollingFast=!1,input.slowPoll()):(missed=!0,input.polling.set(60,p))})},poll:function(){var cm=this.cm,input=this.textarea,prevInput=this.prevInput;if(this.contextMenuPending||!cm.state.focused||hasSelection(input)&&!prevInput&&!this.composing||cm.isReadOnly()||cm.options.disableInput||cm.state.keySeq)return!1;var text=input.value;if(text==prevInput&&!cm.somethingSelected())return!1;if(ie&&9<=ie_version&&this.hasSelection===text||mac&&/[\uf700-\uf7ff]/.test(text))return cm.display.input.reset(),!1;if(cm.doc.sel==cm.display.selForContextMenu){var first=text.charCodeAt(0);if(8203!=first||prevInput||(prevInput="​"),8666==first)return this.reset(),this.cm.execCommand("undo")}for(var same=0,l=Math.min(prevInput.length,text.length);same<l&&prevInput.charCodeAt(same)==text.charCodeAt(same);)++same;var self=this;return runInOp(cm,function(){applyTextInput(cm,text.slice(same),prevInput.length-same,null,self.composing?"*compose":null),1e3<text.length||-1<text.indexOf("\n")?input.value=self.prevInput="":self.prevInput=text,self.composing&&(self.composing.range.clear(),self.composing.range=cm.markText(self.composing.start,cm.getCursor("to"),{className:"CodeMirror-composing"}))}),!0},ensurePolled:function(){this.pollingFast&&this.poll()&&(this.pollingFast=!1)},onKeyPress:function(){ie&&9<=ie_version&&(this.hasSelection=null),this.fastPoll()},onContextMenu:function(e){var input=this,cm=input.cm,display=cm.display,te=input.textarea,pos=posFromMouse(cm,e),scrollPos=display.scroller.scrollTop;if(pos&&!presto){cm.options.resetSelectionOnContextMenu&&-1==cm.doc.sel.contains(pos)&&operation(cm,setSelection)(cm.doc,simpleSelection(pos),sel_dontScroll);var oldCSS=te.style.cssText;if(input.wrapper.style.position="absolute",te.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(e.clientY-5)+"px; left: "+(e.clientX-5)+"px; z-index: 1000; background: "+(ie?"rgba(255, 255, 255, .05)":"transparent")+"; outline: none; border-width: 0; outline: none; overflow: hidden; opacity: .05; filter: alpha(opacity=5);",webkit)var oldScrollY=window.scrollY;if(display.input.focus(),webkit&&window.scrollTo(null,oldScrollY),display.input.reset(),cm.somethingSelected()||(te.value=input.prevInput=" "),input.contextMenuPending=!0,display.selForContextMenu=cm.doc.sel,clearTimeout(display.detectingSelectAll),ie&&9<=ie_version&&prepareSelectAllHack(),captureRightClick){e_stop(e);var mouseup=function(){off(window,"mouseup",mouseup),setTimeout(rehide,20)};on(window,"mouseup",mouseup)}else setTimeout(rehide,50)}function prepareSelectAllHack(){if(null!=te.selectionStart){var selected=cm.somethingSelected(),extval="​"+(selected?te.value:"");te.value="⇚",te.value=extval,input.prevInput=selected?"":"​",te.selectionStart=1,te.selectionEnd=extval.length,display.selForContextMenu=cm.doc.sel}}function rehide(){if(input.contextMenuPending=!1,input.wrapper.style.position="relative",te.style.cssText=oldCSS,ie&&ie_version<9&&display.scrollbars.setScrollTop(display.scroller.scrollTop=scrollPos),null!=te.selectionStart){(!ie||ie&&ie_version<9)&&prepareSelectAllHack();var i=0,poll=function(){display.selForContextMenu==cm.doc.sel&&0==te.selectionStart&&0<te.selectionEnd&&"​"==input.prevInput?operation(cm,commands.selectAll)(cm):i++<10?display.detectingSelectAll=setTimeout(poll,500):display.input.reset()};display.detectingSelectAll=setTimeout(poll,200)}}},readOnlyChanged:function(val){val||this.reset()},setUneditable:nothing,needsContentAttribute:!1},TextareaInput.prototype),ContentEditableInput.prototype=copyObj({init:function(display){var input=this,cm=input.cm,div=input.div=display.lineDiv;function onCopyCut(e){if(cm.somethingSelected())lastCopied=cm.getSelections(),"cut"==e.type&&cm.replaceSelection("",null,"cut");else{if(!cm.options.lineWiseCopyCut)return;var ranges=copyableRanges(cm);lastCopied=ranges.text,"cut"==e.type&&cm.operation(function(){cm.setSelections(ranges.ranges,0,sel_dontScroll),cm.replaceSelection("",null,"cut")})}if(e.clipboardData&&!ios)e.preventDefault(),e.clipboardData.clearData(),e.clipboardData.setData("text/plain",lastCopied.join("\n"));else{var kludge=hiddenTextarea(),te=kludge.firstChild;cm.display.lineSpace.insertBefore(kludge,cm.display.lineSpace.firstChild),te.value=lastCopied.join("\n");var hadFocus=document.activeElement;selectInput(te),setTimeout(function(){cm.display.lineSpace.removeChild(kludge),hadFocus.focus()},50)}}disableBrowserMagic(div),on(div,"paste",function(e){signalDOMEvent(cm,e)||handlePaste(e,cm)}),on(div,"compositionstart",function(e){var data=e.data;if(input.composing={sel:cm.doc.sel,data:data,startData:data},data){var prim=cm.doc.sel.primary(),found=cm.getLine(prim.head.line).indexOf(data,Math.max(0,prim.head.ch-data.length));-1<found&&found<=prim.head.ch&&(input.composing.sel=simpleSelection(Pos(prim.head.line,found),Pos(prim.head.line,found+data.length)))}}),on(div,"compositionupdate",function(e){input.composing.data=e.data}),on(div,"compositionend",function(e){var ours=input.composing;ours&&(e.data==ours.startData||/\u200b/.test(e.data)||(ours.data=e.data),setTimeout(function(){ours.handled||input.applyComposition(ours),input.composing==ours&&(input.composing=null)},50))}),on(div,"touchstart",function(){input.forceCompositionEnd()}),on(div,"input",function(){input.composing||!cm.isReadOnly()&&input.pollContent()||runInOp(input.cm,function(){regChange(cm)})}),on(div,"copy",onCopyCut),on(div,"cut",onCopyCut)},prepareSelection:function(){var result=prepareSelection(this.cm,!1);return result.focus=this.cm.state.focused,result},showSelection:function(info){info&&this.cm.display.view.length&&(info.focus&&this.showPrimarySelection(),this.showMultipleSelections(info))},showPrimarySelection:function(){var sel=window.getSelection(),prim=this.cm.doc.sel.primary(),curAnchor=domToPos(this.cm,sel.anchorNode,sel.anchorOffset),curFocus=domToPos(this.cm,sel.focusNode,sel.focusOffset);if(!curAnchor||curAnchor.bad||!curFocus||curFocus.bad||0!=cmp(minPos(curAnchor,curFocus),prim.from())||0!=cmp(maxPos(curAnchor,curFocus),prim.to())){var start=posToDOM(this.cm,prim.from()),end=posToDOM(this.cm,prim.to());if(start||end){var view=this.cm.display.view,old=sel.rangeCount&&sel.getRangeAt(0);if(start){if(!end){var measure=view[view.length-1].measure,map=measure.maps?measure.maps[measure.maps.length-1]:measure.map;end={node:map[map.length-1],offset:map[map.length-2]-map[map.length-3]}}}else start={node:view[0].measure.map[2],offset:0};try{var rng=range(start.node,start.offset,end.offset,end.node)}catch(e){}rng&&(!gecko&&this.cm.state.focused?(sel.collapse(start.node,start.offset),rng.collapsed||sel.addRange(rng)):(sel.removeAllRanges(),sel.addRange(rng)),old&&null==sel.anchorNode?sel.addRange(old):gecko&&this.startGracePeriod()),this.rememberSelection()}}},startGracePeriod:function(){var input=this;clearTimeout(this.gracePeriod),this.gracePeriod=setTimeout(function(){input.gracePeriod=!1,input.selectionChanged()&&input.cm.operation(function(){input.cm.curOp.selectionChanged=!0})},20)},showMultipleSelections:function(info){removeChildrenAndAdd(this.cm.display.cursorDiv,info.cursors),removeChildrenAndAdd(this.cm.display.selectionDiv,info.selection)},rememberSelection:function(){var sel=window.getSelection();this.lastAnchorNode=sel.anchorNode,this.lastAnchorOffset=sel.anchorOffset,this.lastFocusNode=sel.focusNode,this.lastFocusOffset=sel.focusOffset},selectionInEditor:function(){var sel=window.getSelection();if(!sel.rangeCount)return!1;var node=sel.getRangeAt(0).commonAncestorContainer;return contains(this.div,node)},focus:function(){"nocursor"!=this.cm.options.readOnly&&this.div.focus()},blur:function(){this.div.blur()},getField:function(){return this.div},supportsTouch:function(){return!0},receivedFocus:function(){var input=this;this.selectionInEditor()?this.pollSelection():runInOp(this.cm,function(){input.cm.curOp.selectionChanged=!0}),this.polling.set(this.cm.options.pollInterval,function poll(){input.cm.state.focused&&(input.pollSelection(),input.polling.set(input.cm.options.pollInterval,poll))})},selectionChanged:function(){var sel=window.getSelection();return sel.anchorNode!=this.lastAnchorNode||sel.anchorOffset!=this.lastAnchorOffset||sel.focusNode!=this.lastFocusNode||sel.focusOffset!=this.lastFocusOffset},pollSelection:function(){if(!this.composing&&!this.gracePeriod&&this.selectionChanged()){var sel=window.getSelection(),cm=this.cm;this.rememberSelection();var anchor=domToPos(cm,sel.anchorNode,sel.anchorOffset),head=domToPos(cm,sel.focusNode,sel.focusOffset);anchor&&head&&runInOp(cm,function(){setSelection(cm.doc,simpleSelection(anchor,head),sel_dontScroll),(anchor.bad||head.bad)&&(cm.curOp.selectionChanged=!0)})}},pollContent:function(){var fromIndex,cm=this.cm,display=cm.display,sel=cm.doc.sel.primary(),from=sel.from(),to=sel.to();if(from.line<display.viewFrom||to.line>display.viewTo-1)return!1;if(from.line==display.viewFrom||0==(fromIndex=findViewIndex(cm,from.line)))var fromLine=lineNo(display.view[0].line),fromNode=display.view[0].node;else fromLine=lineNo(display.view[fromIndex].line),fromNode=display.view[fromIndex-1].node.nextSibling;var toIndex=findViewIndex(cm,to.line);if(toIndex==display.view.length-1)var toLine=display.viewTo-1,toNode=display.lineDiv.lastChild;else toLine=lineNo(display.view[toIndex+1].line)-1,toNode=display.view[toIndex+1].node.previousSibling;for(var newText=cm.doc.splitLines(function(cm,from,to,fromLine,toLine){var text="",closing=!1,lineSep=cm.doc.lineSeparator();function walk(node){if(1==node.nodeType){var cmText=node.getAttribute("cm-text");if(null!=cmText)return""==cmText&&(cmText=node.textContent.replace(/\u200b/g,"")),void(text+=cmText);var range,markerID=node.getAttribute("cm-marker");if(markerID){var found=cm.findMarks(Pos(fromLine,0),Pos(toLine+1,0),(id=+markerID,function(marker){return marker.id==id}));return void(found.length&&(range=found[0].find())&&(text+=getBetween(cm.doc,range.from,range.to).join(lineSep)))}if("false"==node.getAttribute("contenteditable"))return;for(var i=0;i<node.childNodes.length;i++)walk(node.childNodes[i]);/^(pre|div|p)$/i.test(node.nodeName)&&(closing=!0)}else if(3==node.nodeType){var val=node.nodeValue;if(!val)return;closing&&(text+=lineSep,closing=!1),text+=val}var id}for(;walk(from),from!=to;)from=from.nextSibling;return text}(cm,fromNode,toNode,fromLine,toLine)),oldText=getBetween(cm.doc,Pos(fromLine,0),Pos(toLine,getLine(cm.doc,toLine).text.length));1<newText.length&&1<oldText.length;)if(lst(newText)==lst(oldText))newText.pop(),oldText.pop(),toLine--;else{if(newText[0]!=oldText[0])break;newText.shift(),oldText.shift(),fromLine++}for(var cutFront=0,cutEnd=0,newTop=newText[0],oldTop=oldText[0],maxCutFront=Math.min(newTop.length,oldTop.length);cutFront<maxCutFront&&newTop.charCodeAt(cutFront)==oldTop.charCodeAt(cutFront);)++cutFront;for(var newBot=lst(newText),oldBot=lst(oldText),maxCutEnd=Math.min(newBot.length-(1==newText.length?cutFront:0),oldBot.length-(1==oldText.length?cutFront:0));cutEnd<maxCutEnd&&newBot.charCodeAt(newBot.length-cutEnd-1)==oldBot.charCodeAt(oldBot.length-cutEnd-1);)++cutEnd;newText[newText.length-1]=newBot.slice(0,newBot.length-cutEnd),newText[0]=newText[0].slice(cutFront);var chFrom=Pos(fromLine,cutFront),chTo=Pos(toLine,oldText.length?lst(oldText).length-cutEnd:0);return 1<newText.length||newText[0]||cmp(chFrom,chTo)?(replaceRange(cm.doc,newText,chFrom,chTo,"+input"),!0):void 0},ensurePolled:function(){this.forceCompositionEnd()},reset:function(){this.forceCompositionEnd()},forceCompositionEnd:function(){this.composing&&!this.composing.handled&&(this.applyComposition(this.composing),this.composing.handled=!0,this.div.blur(),this.div.focus())},applyComposition:function(composing){this.cm.isReadOnly()?operation(this.cm,regChange)(this.cm):composing.data&&composing.data!=composing.startData&&operation(this.cm,applyTextInput)(this.cm,composing.data,0,composing.sel)},setUneditable:function(node){node.contentEditable="false"},onKeyPress:function(e){e.preventDefault(),this.cm.isReadOnly()||operation(this.cm,applyTextInput)(this.cm,String.fromCharCode(null==e.charCode?e.keyCode:e.charCode),0)},readOnlyChanged:function(val){this.div.contentEditable=String("nocursor"!=val)},onContextMenu:nothing,resetPosition:nothing,needsContentAttribute:!0},ContentEditableInput.prototype),CodeMirror.inputStyles={textarea:TextareaInput,contenteditable:ContentEditableInput},Selection.prototype={primary:function(){return this.ranges[this.primIndex]},equals:function(other){if(other==this)return!0;if(other.primIndex!=this.primIndex||other.ranges.length!=this.ranges.length)return!1;for(var i=0;i<this.ranges.length;i++){var here=this.ranges[i],there=other.ranges[i];if(0!=cmp(here.anchor,there.anchor)||0!=cmp(here.head,there.head))return!1}return!0},deepCopy:function(){for(var out=[],i=0;i<this.ranges.length;i++)out[i]=new Range(copyPos(this.ranges[i].anchor),copyPos(this.ranges[i].head));return new Selection(out,this.primIndex)},somethingSelected:function(){for(var i=0;i<this.ranges.length;i++)if(!this.ranges[i].empty())return!0;return!1},contains:function(pos,end){end||(end=pos);for(var i=0;i<this.ranges.length;i++){var range=this.ranges[i];if(0<=cmp(end,range.from())&&cmp(pos,range.to())<=0)return i}return-1}},Range.prototype={from:function(){return minPos(this.anchor,this.head)},to:function(){return maxPos(this.anchor,this.head)},empty:function(){return this.head.line==this.anchor.line&&this.head.ch==this.anchor.ch}};var measureText,nullRect={left:0,right:0,top:0,bottom:0};function nodeAndOffsetInLineMap(map,ch,bias){for(var node,start,end,collapse,i=0;i<map.length;i+=3){var mStart=map[i],mEnd=map[i+1];if(ch<mStart?(start=0,end=1,collapse="left"):ch<mEnd?end=(start=ch-mStart)+1:(i==map.length-3||ch==mEnd&&map[i+3]>ch)&&(start=(end=mEnd-mStart)-1,mEnd<=ch&&(collapse="right")),null!=start){if(node=map[i+2],mStart==mEnd&&bias==(node.insertLeft?"left":"right")&&(collapse=bias),"left"==bias&&0==start)for(;i&&map[i-2]==map[i-3]&&map[i-1].insertLeft;)node=map[2+(i-=3)],collapse="left";if("right"==bias&&start==mEnd-mStart)for(;i<map.length-3&&map[i+3]==map[i+4]&&!map[i+5].insertLeft;)node=map[(i+=3)+2],collapse="right";break}}return{node:node,start:start,end:end,collapse:collapse,coverStart:mStart,coverEnd:mEnd}}function clearLineMeasurementCacheFor(lineView){if(lineView.measure&&(lineView.measure.cache={},lineView.measure.heights=null,lineView.rest))for(var i=0;i<lineView.rest.length;i++)lineView.measure.caches[i]={}}function clearLineMeasurementCache(cm){cm.display.externalMeasure=null,removeChildren(cm.display.lineMeasure);for(var i=0;i<cm.display.view.length;i++)clearLineMeasurementCacheFor(cm.display.view[i])}function clearCaches(cm){clearLineMeasurementCache(cm),cm.display.cachedCharWidth=cm.display.cachedTextHeight=cm.display.cachedPaddingH=null,cm.options.lineWrapping||(cm.display.maxLineChanged=!0),cm.display.lineNumChars=null}function pageScrollX(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function pageScrollY(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function intoCoordSystem(cm,lineObj,rect,context){if(lineObj.widgets)for(var i=0;i<lineObj.widgets.length;++i)if(lineObj.widgets[i].above){var size=widgetHeight(lineObj.widgets[i]);rect.top+=size,rect.bottom+=size}if("line"==context)return rect;context||(context="local");var yOff=heightAtLine(lineObj);if("local"==context?yOff+=paddingTop(cm.display):yOff-=cm.display.viewOffset,"page"==context||"window"==context){var lOff=cm.display.lineSpace.getBoundingClientRect();yOff+=lOff.top+("window"==context?0:pageScrollY());var xOff=lOff.left+("window"==context?0:pageScrollX());rect.left+=xOff,rect.right+=xOff}return rect.top+=yOff,rect.bottom+=yOff,rect}function fromCoordSystem(cm,coords,context){if("div"==context)return coords;var left=coords.left,top=coords.top;if("page"==context)left-=pageScrollX(),top-=pageScrollY();else if("local"==context||!context){var localBox=cm.display.sizer.getBoundingClientRect();left+=localBox.left,top+=localBox.top}var lineSpaceBox=cm.display.lineSpace.getBoundingClientRect();return{left:left-lineSpaceBox.left,top:top-lineSpaceBox.top}}function charCoords(cm,pos,context,lineObj,bias){return lineObj||(lineObj=getLine(cm.doc,pos.line)),intoCoordSystem(cm,lineObj,measureChar(cm,lineObj,pos.ch,bias),context)}function cursorCoords(cm,pos,context,lineObj,preparedMeasure,varHeight){function get(ch,right){var m=measureCharPrepared(cm,preparedMeasure,ch,right?"right":"left",varHeight);return right?m.left=m.right:m.right=m.left,intoCoordSystem(cm,lineObj,m,context)}function getBidi(ch,partPos){var part=order[partPos],right=part.level%2;return ch==bidiLeft(part)&&partPos&&part.level<order[partPos-1].level?(ch=bidiRight(part=order[--partPos])-(part.level%2?0:1),right=!0):ch==bidiRight(part)&&partPos<order.length-1&&part.level<order[partPos+1].level&&(ch=bidiLeft(part=order[++partPos])-part.level%2,right=!1),right&&ch==part.to&&ch>part.from?get(ch-1):get(ch,right)}lineObj=lineObj||getLine(cm.doc,pos.line),preparedMeasure||(preparedMeasure=prepareMeasureForLine(cm,lineObj));var order=getOrder(lineObj),ch=pos.ch;if(!order)return get(ch);var val=getBidi(ch,getBidiPartAt(order,ch));return null!=bidiOther&&(val.other=getBidi(ch,bidiOther)),val}function estimateCoords(cm,pos){var left=0;pos=clipPos(cm.doc,pos);cm.options.lineWrapping||(left=charWidth(cm.display)*pos.ch);var lineObj=getLine(cm.doc,pos.line),top=heightAtLine(lineObj)+paddingTop(cm.display);return{left:left,right:left,top:top,bottom:top+lineObj.height}}function PosWithInfo(line,ch,outside,xRel){var pos=Pos(line,ch);return pos.xRel=xRel,outside&&(pos.outside=!0),pos}function coordsChar(cm,x,y){var doc=cm.doc;if((y+=cm.display.viewOffset)<0)return PosWithInfo(doc.first,0,!0,-1);var lineN=lineAtHeight(doc,y),last=doc.first+doc.size-1;if(last<lineN)return PosWithInfo(doc.first+doc.size-1,getLine(doc,last).text.length,!0,1);x<0&&(x=0);for(var lineObj=getLine(doc,lineN);;){var found=coordsCharInner(cm,lineObj,lineN,x,y),merged=collapsedSpanAtEnd(lineObj),mergedPos=merged&&merged.find(0,!0);if(!merged||!(found.ch>mergedPos.from.ch||found.ch==mergedPos.from.ch&&0<found.xRel))return found;lineN=lineNo(lineObj=mergedPos.to.line)}}function coordsCharInner(cm,lineObj,lineNo,x,y){var innerOff=y-heightAtLine(lineObj),wrongLine=!1,adjust=2*cm.display.wrapper.clientWidth,preparedMeasure=prepareMeasureForLine(cm,lineObj);function getX(ch){var sp=cursorCoords(cm,Pos(lineNo,ch),"line",lineObj,preparedMeasure);return wrongLine=!0,innerOff>sp.bottom?sp.left-adjust:innerOff<sp.top?sp.left+adjust:(wrongLine=!1,sp.left)}var bidi=getOrder(lineObj),dist=lineObj.text.length,from=lineLeft(lineObj),to=lineRight(lineObj),fromX=getX(from),fromOutside=wrongLine,toX=getX(to),toOutside=wrongLine;if(toX<x)return PosWithInfo(lineNo,to,toOutside,1);for(;;){if(bidi?to==from||to==moveVisually(lineObj,from,1):to-from<=1){for(var ch=x<fromX||x-fromX<=toX-x?from:to,xDiff=x-(ch==from?fromX:toX);isExtendingChar(lineObj.text.charAt(ch));)++ch;return PosWithInfo(lineNo,ch,ch==from?fromOutside:toOutside,xDiff<-1?-1:1<xDiff?1:0)}var step=Math.ceil(dist/2),middle=from+step;if(bidi){middle=from;for(var i=0;i<step;++i)middle=moveVisually(lineObj,middle,1)}var middleX=getX(middle);x<middleX?(to=middle,toX=middleX,(toOutside=wrongLine)&&(toX+=1e3),dist=step):(from=middle,fromX=middleX,fromOutside=wrongLine,dist-=step)}}function textHeight(display){if(null!=display.cachedTextHeight)return display.cachedTextHeight;if(null==measureText){measureText=elt("pre");for(var i=0;i<49;++i)measureText.appendChild(document.createTextNode("x")),measureText.appendChild(elt("br"));measureText.appendChild(document.createTextNode("x"))}removeChildrenAndAdd(display.measure,measureText);var height=measureText.offsetHeight/50;return 3<height&&(display.cachedTextHeight=height),removeChildren(display.measure),height||1}function charWidth(display){if(null!=display.cachedCharWidth)return display.cachedCharWidth;var anchor=elt("span","xxxxxxxxxx"),pre=elt("pre",[anchor]);removeChildrenAndAdd(display.measure,pre);var rect=anchor.getBoundingClientRect(),width=(rect.right-rect.left)/10;return 2<width&&(display.cachedCharWidth=width),width||10}var lastClick,lastDoubleClick,operationGroup=null,nextOpId=0;function startOperation(cm){cm.curOp={cm:cm,viewChanged:!1,startHeight:cm.doc.height,forceUpdate:!1,updateInput:null,typing:!1,changeObjs:null,cursorActivityHandlers:null,cursorActivityCalled:0,selectionChanged:!1,updateMaxLine:!1,scrollLeft:null,scrollTop:null,scrollToPos:null,focus:!1,id:++nextOpId},operationGroup?operationGroup.ops.push(cm.curOp):cm.curOp.ownsGroup=operationGroup={ops:[cm.curOp],delayedCallbacks:[]}}function endOperation(cm){var group=cm.curOp.ownsGroup;if(group)try{!function(group){var callbacks=group.delayedCallbacks,i=0;do{for(;i<callbacks.length;i++)callbacks[i].call(null);for(var j=0;j<group.ops.length;j++){var op=group.ops[j];if(op.cursorActivityHandlers)for(;op.cursorActivityCalled<op.cursorActivityHandlers.length;)op.cursorActivityHandlers[op.cursorActivityCalled++].call(null,op.cm)}}while(i<callbacks.length)}(group)}finally{operationGroup=null;for(var i=0;i<group.ops.length;i++)group.ops[i].cm.curOp=null;!function(group){for(var ops=group.ops,i=0;i<ops.length;i++)endOperation_R1(ops[i]);for(var i=0;i<ops.length;i++)op=ops[i],op.updatedDisplay=op.mustUpdate&&updateDisplayIfNeeded(op.cm,op.update);var op;for(var i=0;i<ops.length;i++)endOperation_R2(ops[i]);for(var i=0;i<ops.length;i++)endOperation_W2(ops[i]);for(var i=0;i<ops.length;i++)endOperation_finish(ops[i])}(group)}}function endOperation_R1(op){var cm=op.cm,display=cm.display;!function(cm){var display=cm.display;!display.scrollbarsClipped&&display.scroller.offsetWidth&&(display.nativeBarWidth=display.scroller.offsetWidth-display.scroller.clientWidth,display.heightForcer.style.height=scrollGap(cm)+"px",display.sizer.style.marginBottom=-display.nativeBarWidth+"px",display.sizer.style.borderRightWidth=scrollGap(cm)+"px",display.scrollbarsClipped=!0)}(cm),op.updateMaxLine&&findMaxLine(cm),op.mustUpdate=op.viewChanged||op.forceUpdate||null!=op.scrollTop||op.scrollToPos&&(op.scrollToPos.from.line<display.viewFrom||op.scrollToPos.to.line>=display.viewTo)||display.maxLineChanged&&cm.options.lineWrapping,op.update=op.mustUpdate&&new DisplayUpdate(cm,op.mustUpdate&&{top:op.scrollTop,ensure:op.scrollToPos},op.forceUpdate)}function endOperation_R2(op){var cm=op.cm,display=cm.display;op.updatedDisplay&&updateHeightsInViewport(cm),op.barMeasure=measureForScrollbars(cm),display.maxLineChanged&&!cm.options.lineWrapping&&(op.adjustWidthTo=measureChar(cm,display.maxLine,display.maxLine.text.length).left+3,cm.display.sizerWidth=op.adjustWidthTo,op.barMeasure.scrollWidth=Math.max(display.scroller.clientWidth,display.sizer.offsetLeft+op.adjustWidthTo+scrollGap(cm)+cm.display.barWidth),op.maxScrollLeft=Math.max(0,display.sizer.offsetLeft+op.adjustWidthTo-displayWidth(cm))),(op.updatedDisplay||op.selectionChanged)&&(op.preparedSelection=display.input.prepareSelection())}function endOperation_W2(op){var cm=op.cm;null!=op.adjustWidthTo&&(cm.display.sizer.style.minWidth=op.adjustWidthTo+"px",op.maxScrollLeft<cm.doc.scrollLeft&&setScrollLeft(cm,Math.min(cm.display.scroller.scrollLeft,op.maxScrollLeft),!0),cm.display.maxLineChanged=!1),op.preparedSelection&&cm.display.input.showSelection(op.preparedSelection),op.updatedDisplay&&setDocumentHeight(cm,op.barMeasure),(op.updatedDisplay||op.startHeight!=cm.doc.height)&&updateScrollbars(cm,op.barMeasure),op.selectionChanged&&restartBlink(cm),cm.state.focused&&op.updateInput&&cm.display.input.reset(op.typing),!op.focus||op.focus!=activeElt()||document.hasFocus&&!document.hasFocus()||ensureFocus(op.cm)}function endOperation_finish(op){var cm=op.cm,display=cm.display,doc=cm.doc;if(op.updatedDisplay&&postUpdateDisplay(cm,op.update),null==display.wheelStartX||null==op.scrollTop&&null==op.scrollLeft&&!op.scrollToPos||(display.wheelStartX=display.wheelStartY=null),null==op.scrollTop||display.scroller.scrollTop==op.scrollTop&&!op.forceScroll||(doc.scrollTop=Math.max(0,Math.min(display.scroller.scrollHeight-display.scroller.clientHeight,op.scrollTop)),display.scrollbars.setScrollTop(doc.scrollTop),display.scroller.scrollTop=doc.scrollTop),null==op.scrollLeft||display.scroller.scrollLeft==op.scrollLeft&&!op.forceScroll||(doc.scrollLeft=Math.max(0,Math.min(display.scroller.scrollWidth-displayWidth(cm),op.scrollLeft)),display.scrollbars.setScrollLeft(doc.scrollLeft),display.scroller.scrollLeft=doc.scrollLeft,alignHorizontally(cm)),op.scrollToPos){var coords=function(cm,pos,end,margin){null==margin&&(margin=0);for(var limit=0;limit<5;limit++){var changed=!1,coords=cursorCoords(cm,pos),endCoords=end&&end!=pos?cursorCoords(cm,end):coords,scrollPos=calculateScrollPos(cm,Math.min(coords.left,endCoords.left),Math.min(coords.top,endCoords.top)-margin,Math.max(coords.left,endCoords.left),Math.max(coords.bottom,endCoords.bottom)+margin),startTop=cm.doc.scrollTop,startLeft=cm.doc.scrollLeft;if(null!=scrollPos.scrollTop&&(setScrollTop(cm,scrollPos.scrollTop),1<Math.abs(cm.doc.scrollTop-startTop)&&(changed=!0)),null!=scrollPos.scrollLeft&&(setScrollLeft(cm,scrollPos.scrollLeft),1<Math.abs(cm.doc.scrollLeft-startLeft)&&(changed=!0)),!changed)break}return coords}(cm,clipPos(doc,op.scrollToPos.from),clipPos(doc,op.scrollToPos.to),op.scrollToPos.margin);op.scrollToPos.isCursor&&cm.state.focused&&function(cm,coords){if(signalDOMEvent(cm,"scrollCursorIntoView"))return;var display=cm.display,box=display.sizer.getBoundingClientRect(),doScroll=null;coords.top+box.top<0?doScroll=!0:coords.bottom+box.top>(window.innerHeight||document.documentElement.clientHeight)&&(doScroll=!1);if(null!=doScroll&&!phantom){var scrollNode=elt("div","​",null,"position: absolute; top: "+(coords.top-display.viewOffset-paddingTop(cm.display))+"px; height: "+(coords.bottom-coords.top+scrollGap(cm)+display.barHeight)+"px; left: "+coords.left+"px; width: 2px;");cm.display.lineSpace.appendChild(scrollNode),scrollNode.scrollIntoView(doScroll),cm.display.lineSpace.removeChild(scrollNode)}}(cm,coords)}var hidden=op.maybeHiddenMarkers,unhidden=op.maybeUnhiddenMarkers;if(hidden)for(var i=0;i<hidden.length;++i)hidden[i].lines.length||signal(hidden[i],"hide");if(unhidden)for(i=0;i<unhidden.length;++i)unhidden[i].lines.length&&signal(unhidden[i],"unhide");display.wrapper.offsetHeight&&(doc.scrollTop=cm.display.scroller.scrollTop),op.changeObjs&&signal(cm,"changes",cm,op.changeObjs),op.update&&op.update.finish()}function runInOp(cm,f){if(cm.curOp)return f();startOperation(cm);try{return f()}finally{endOperation(cm)}}function operation(cm,f){return function(){if(cm.curOp)return f.apply(cm,arguments);startOperation(cm);try{return f.apply(cm,arguments)}finally{endOperation(cm)}}}function methodOp(f){return function(){if(this.curOp)return f.apply(this,arguments);startOperation(this);try{return f.apply(this,arguments)}finally{endOperation(this)}}}function docMethodOp(f){return function(){var cm=this.cm;if(!cm||cm.curOp)return f.apply(this,arguments);startOperation(cm);try{return f.apply(this,arguments)}finally{endOperation(cm)}}}function LineView(doc,line,lineN){this.line=line,this.rest=function(line){var merged,lines;for(;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line,(lines||(lines=[])).push(line);return lines}(line),this.size=this.rest?lineNo(lst(this.rest))-lineN+1:1,this.node=this.text=null,this.hidden=lineIsHidden(doc,line)}function buildViewArray(cm,from,to){for(var nextPos,array=[],pos=from;pos<to;pos=nextPos){var view=new LineView(cm.doc,getLine(cm.doc,pos),pos);nextPos=pos+view.size,array.push(view)}return array}function regChange(cm,from,to,lendiff){null==from&&(from=cm.doc.first),null==to&&(to=cm.doc.first+cm.doc.size),lendiff||(lendiff=0);var display=cm.display;if(lendiff&&to<display.viewTo&&(null==display.updateLineNumbers||display.updateLineNumbers>from)&&(display.updateLineNumbers=from),cm.curOp.viewChanged=!0,from>=display.viewTo)sawCollapsedSpans&&visualLineNo(cm.doc,from)<display.viewTo&&resetView(cm);else if(to<=display.viewFrom)sawCollapsedSpans&&visualLineEndNo(cm.doc,to+lendiff)>display.viewFrom?resetView(cm):(display.viewFrom+=lendiff,display.viewTo+=lendiff);else if(from<=display.viewFrom&&to>=display.viewTo)resetView(cm);else if(from<=display.viewFrom){(cut=viewCuttingPoint(cm,to,to+lendiff,1))?(display.view=display.view.slice(cut.index),display.viewFrom=cut.lineN,display.viewTo+=lendiff):resetView(cm)}else if(to>=display.viewTo){var cut;(cut=viewCuttingPoint(cm,from,from,-1))?(display.view=display.view.slice(0,cut.index),display.viewTo=cut.lineN):resetView(cm)}else{var cutTop=viewCuttingPoint(cm,from,from,-1),cutBot=viewCuttingPoint(cm,to,to+lendiff,1);cutTop&&cutBot?(display.view=display.view.slice(0,cutTop.index).concat(buildViewArray(cm,cutTop.lineN,cutBot.lineN)).concat(display.view.slice(cutBot.index)),display.viewTo+=lendiff):resetView(cm)}var ext=display.externalMeasured;ext&&(to<ext.lineN?ext.lineN+=lendiff:from<ext.lineN+ext.size&&(display.externalMeasured=null))}function regLineChange(cm,line,type){cm.curOp.viewChanged=!0;var display=cm.display,ext=cm.display.externalMeasured;if(ext&&line>=ext.lineN&&line<ext.lineN+ext.size&&(display.externalMeasured=null),!(line<display.viewFrom||line>=display.viewTo)){var lineView=display.view[findViewIndex(cm,line)];if(null!=lineView.node){var arr=lineView.changes||(lineView.changes=[]);-1==indexOf(arr,type)&&arr.push(type)}}}function resetView(cm){cm.display.viewFrom=cm.display.viewTo=cm.doc.first,cm.display.view=[],cm.display.viewOffset=0}function findViewIndex(cm,n){if(n>=cm.display.viewTo)return null;if((n-=cm.display.viewFrom)<0)return null;for(var view=cm.display.view,i=0;i<view.length;i++)if((n-=view[i].size)<0)return i}function viewCuttingPoint(cm,oldN,newN,dir){var diff,index=findViewIndex(cm,oldN),view=cm.display.view;if(!sawCollapsedSpans||newN==cm.doc.first+cm.doc.size)return{index:index,lineN:newN};for(var i=0,n=cm.display.viewFrom;i<index;i++)n+=view[i].size;if(n!=oldN){if(0<dir){if(index==view.length-1)return null;diff=n+view[index].size-oldN,index++}else diff=n-oldN;oldN+=diff,newN+=diff}for(;visualLineNo(cm.doc,newN)!=newN;){if(index==(dir<0?0:view.length-1))return null;newN+=dir*view[index-(dir<0?1:0)].size,index+=dir}return{index:index,lineN:newN}}function countDirtyView(cm){for(var view=cm.display.view,dirty=0,i=0;i<view.length;i++){var lineView=view[i];lineView.hidden||lineView.node&&!lineView.changes||++dirty}return dirty}function onResize(cm){var d=cm.display;d.lastWrapHeight==d.wrapper.clientHeight&&d.lastWrapWidth==d.wrapper.clientWidth||(d.cachedCharWidth=d.cachedTextHeight=d.cachedPaddingH=null,d.scrollbarsClipped=!1,cm.setSize())}function eventInWidget(display,e){for(var n=e_target(e);n!=display.wrapper;n=n.parentNode)if(!n||1==n.nodeType&&"true"==n.getAttribute("cm-ignore-events")||n.parentNode==display.sizer&&n!=display.mover)return!0}function posFromMouse(cm,e,liberal,forRect){var display=cm.display;if(!liberal&&"true"==e_target(e).getAttribute("cm-not-content"))return null;var x,y,space=display.lineSpace.getBoundingClientRect();try{x=e.clientX-space.left,y=e.clientY-space.top}catch(e){return null}var line,coords=coordsChar(cm,x,y);if(forRect&&1==coords.xRel&&(line=getLine(cm.doc,coords.line).text).length==coords.ch){var colDiff=countColumn(line,line.length,cm.options.tabSize)-line.length;coords=Pos(coords.line,Math.max(0,Math.round((x-paddingH(cm.display).left)/charWidth(cm.display))-colDiff))}return coords}function onMouseDown(e){var cm=this,display=cm.display;if(!(display.activeTouch&&display.input.supportsTouch()||signalDOMEvent(cm,e)))if(display.shift=e.shiftKey,eventInWidget(display,e))webkit||(display.scroller.draggable=!1,setTimeout(function(){display.scroller.draggable=!0},100));else if(!clickInGutter(cm,e)){var start=posFromMouse(cm,e);switch(window.focus(),e_button(e)){case 1:cm.state.selectingText?cm.state.selectingText(e):start?function(cm,e,start){ie?setTimeout(bind(ensureFocus,cm),0):cm.curOp.focus=activeElt();var type,now=+new Date;lastDoubleClick&&lastDoubleClick.time>now-400&&0==cmp(lastDoubleClick.pos,start)?type="triple":lastClick&&lastClick.time>now-400&&0==cmp(lastClick.pos,start)?(type="double",lastDoubleClick={time:now,pos:start}):(type="single",lastClick={time:now,pos:start});var contained,sel=cm.doc.sel,modifier=mac?e.metaKey:e.ctrlKey;cm.options.dragDrop&&dragAndDrop&&!cm.isReadOnly()&&"single"==type&&-1<(contained=sel.contains(start))&&(cmp((contained=sel.ranges[contained]).from(),start)<0||0<start.xRel)&&(0<cmp(contained.to(),start)||start.xRel<0)?function(cm,e,start,modifier){var display=cm.display,startTime=+new Date,dragEnd=operation(cm,function(e2){webkit&&(display.scroller.draggable=!1),cm.state.draggingText=!1,off(document,"mouseup",dragEnd),off(display.scroller,"drop",dragEnd),Math.abs(e.clientX-e2.clientX)+Math.abs(e.clientY-e2.clientY)<10&&(e_preventDefault(e2),!modifier&&+new Date-200<startTime&&extendSelection(cm.doc,start),webkit||ie&&9==ie_version?setTimeout(function(){document.body.focus(),display.input.focus()},20):display.input.focus())});webkit&&(display.scroller.draggable=!0);cm.state.draggingText=dragEnd,display.scroller.dragDrop&&display.scroller.dragDrop();on(document,"mouseup",dragEnd),on(display.scroller,"drop",dragEnd)}(cm,e,start,modifier):function(cm,e,start,type,addNew){var display=cm.display,doc=cm.doc;e_preventDefault(e);var ourRange,ourIndex,startSel=doc.sel,ranges=startSel.ranges;addNew&&!e.shiftKey?(ourIndex=doc.sel.contains(start),ourRange=-1<ourIndex?ranges[ourIndex]:new Range(start,start)):(ourRange=doc.sel.primary(),ourIndex=doc.sel.primIndex);if(e.altKey)type="rect",addNew||(ourRange=new Range(start,start)),start=posFromMouse(cm,e,!0,!0),ourIndex=-1;else if("double"==type){var word=cm.findWordAt(start);ourRange=cm.display.shift||doc.extend?extendRange(doc,ourRange,word.anchor,word.head):word}else if("triple"==type){var line=new Range(Pos(start.line,0),clipPos(doc,Pos(start.line+1,0)));ourRange=cm.display.shift||doc.extend?extendRange(doc,ourRange,line.anchor,line.head):line}else ourRange=extendRange(doc,ourRange,start);addNew?-1==ourIndex?(ourIndex=ranges.length,setSelection(doc,normalizeSelection(ranges.concat([ourRange]),ourIndex),{scroll:!1,origin:"*mouse"})):1<ranges.length&&ranges[ourIndex].empty()&&"single"==type&&!e.shiftKey?(setSelection(doc,normalizeSelection(ranges.slice(0,ourIndex).concat(ranges.slice(ourIndex+1)),0),{scroll:!1,origin:"*mouse"}),startSel=doc.sel):replaceOneSelection(doc,ourIndex,ourRange,sel_mouse):(setSelection(doc,new Selection([ourRange],ourIndex=0),sel_mouse),startSel=doc.sel);var lastPos=start;var editorSize=display.wrapper.getBoundingClientRect(),counter=0;function extend(e){var curCount=++counter,cur=posFromMouse(cm,e,!0,"rect"==type);if(cur)if(0!=cmp(cur,lastPos)){cm.curOp.focus=activeElt(),function(pos){if(0==cmp(lastPos,pos))return;if(lastPos=pos,"rect"==type){for(var ranges=[],tabSize=cm.options.tabSize,startCol=countColumn(getLine(doc,start.line).text,start.ch,tabSize),posCol=countColumn(getLine(doc,pos.line).text,pos.ch,tabSize),left=Math.min(startCol,posCol),right=Math.max(startCol,posCol),line=Math.min(start.line,pos.line),end=Math.min(cm.lastLine(),Math.max(start.line,pos.line));line<=end;line++){var text=getLine(doc,line).text,leftPos=findColumn(text,left,tabSize);left==right?ranges.push(new Range(Pos(line,leftPos),Pos(line,leftPos))):text.length>leftPos&&ranges.push(new Range(Pos(line,leftPos),Pos(line,findColumn(text,right,tabSize))))}ranges.length||ranges.push(new Range(start,start)),setSelection(doc,normalizeSelection(startSel.ranges.slice(0,ourIndex).concat(ranges),ourIndex),{origin:"*mouse",scroll:!1}),cm.scrollIntoView(pos)}else{var oldRange=ourRange,anchor=oldRange.anchor,head=pos;if("single"!=type){if("double"==type)var range=cm.findWordAt(pos);else var range=new Range(Pos(pos.line,0),clipPos(doc,Pos(pos.line+1,0)));anchor=0<cmp(range.anchor,anchor)?(head=range.head,minPos(oldRange.from(),range.anchor)):(head=range.anchor,maxPos(oldRange.to(),range.head))}var ranges=startSel.ranges.slice(0);ranges[ourIndex]=new Range(clipPos(doc,anchor),head),setSelection(doc,normalizeSelection(ranges,ourIndex),sel_mouse)}}(cur);var visible=visibleLines(display,doc);(cur.line>=visible.to||cur.line<visible.from)&&setTimeout(operation(cm,function(){counter==curCount&&extend(e)}),150)}else{var outside=e.clientY<editorSize.top?-20:e.clientY>editorSize.bottom?20:0;outside&&setTimeout(operation(cm,function(){counter==curCount&&(display.scroller.scrollTop+=outside,extend(e))}),50)}}function done(e){cm.state.selectingText=!1,counter=1/0,e_preventDefault(e),display.input.focus(),off(document,"mousemove",move),off(document,"mouseup",up),doc.history.lastSelOrigin=null}var move=operation(cm,function(e){e_button(e)?extend(e):done(e)}),up=operation(cm,done);cm.state.selectingText=up,on(document,"mousemove",move),on(document,"mouseup",up)}(cm,e,start,type,modifier)}(cm,e,start):e_target(e)==display.scroller&&e_preventDefault(e);break;case 2:webkit&&(cm.state.lastMiddleDown=+new Date),start&&extendSelection(cm.doc,start),setTimeout(function(){display.input.focus()},20),e_preventDefault(e);break;case 3:captureRightClick?onContextMenu(cm,e):function(cm){cm.state.delayingBlurEvent=!0,setTimeout(function(){cm.state.delayingBlurEvent&&(cm.state.delayingBlurEvent=!1,onBlur(cm))},100)}(cm)}}}function gutterEvent(cm,e,type,prevent){try{var mX=e.clientX,mY=e.clientY}catch(e){return!1}if(mX>=Math.floor(cm.display.gutters.getBoundingClientRect().right))return!1;prevent&&e_preventDefault(e);var display=cm.display,lineBox=display.lineDiv.getBoundingClientRect();if(mY>lineBox.bottom||!hasHandler(cm,type))return e_defaultPrevented(e);mY-=lineBox.top-display.viewOffset;for(var i=0;i<cm.options.gutters.length;++i){var g=display.gutters.childNodes[i];if(g&&g.getBoundingClientRect().right>=mX){var line=lineAtHeight(cm.doc,mY),gutter=cm.options.gutters[i];return signal(cm,type,cm,line,gutter,e),e_defaultPrevented(e)}}}function clickInGutter(cm,e){return gutterEvent(cm,e,"gutterClick",!0)}var lastDrop=0;function onDrop(e){var cm=this;if(clearDragCursor(cm),!signalDOMEvent(cm,e)&&!eventInWidget(cm.display,e)){e_preventDefault(e),ie&&(lastDrop=+new Date);var pos=posFromMouse(cm,e,!0),files=e.dataTransfer.files;if(pos&&!cm.isReadOnly())if(files&&files.length&&window.FileReader&&window.File)for(var n=files.length,text=Array(n),read=0,loadFile=function(file,i){if(!cm.options.allowDropFileTypes||-1!=indexOf(cm.options.allowDropFileTypes,file.type)){var reader=new FileReader;reader.onload=operation(cm,function(){var content=reader.result;if(/[\x00-\x08\x0e-\x1f]{2}/.test(content)&&(content=""),text[i]=content,++read==n){var change={from:pos=clipPos(cm.doc,pos),to:pos,text:cm.doc.splitLines(text.join(cm.doc.lineSeparator())),origin:"paste"};makeChange(cm.doc,change),setSelectionReplaceHistory(cm.doc,simpleSelection(pos,changeEnd(change)))}}),reader.readAsText(file)}},i=0;i<n;++i)loadFile(files[i],i);else{if(cm.state.draggingText&&-1<cm.doc.sel.contains(pos))return cm.state.draggingText(e),void setTimeout(function(){cm.display.input.focus()},20);try{if(text=e.dataTransfer.getData("Text")){if(cm.state.draggingText&&!(mac?e.altKey:e.ctrlKey))var selected=cm.listSelections();if(setSelectionNoUndo(cm.doc,simpleSelection(pos,pos)),selected)for(i=0;i<selected.length;++i)replaceRange(cm.doc,"",selected[i].anchor,selected[i].head,"drag");cm.replaceSelection(text,"around","paste"),cm.display.input.focus()}}catch(e){}}}}function clearDragCursor(cm){cm.display.dragCursor&&(cm.display.lineSpace.removeChild(cm.display.dragCursor),cm.display.dragCursor=null)}function setScrollTop(cm,val){Math.abs(cm.doc.scrollTop-val)<2||(cm.doc.scrollTop=val,gecko||updateDisplaySimple(cm,{top:val}),cm.display.scroller.scrollTop!=val&&(cm.display.scroller.scrollTop=val),cm.display.scrollbars.setScrollTop(val),gecko&&updateDisplaySimple(cm),startWorker(cm,100))}function setScrollLeft(cm,val,isScroller){(isScroller?val==cm.doc.scrollLeft:Math.abs(cm.doc.scrollLeft-val)<2)||(val=Math.min(val,cm.display.scroller.scrollWidth-cm.display.scroller.clientWidth),cm.doc.scrollLeft=val,alignHorizontally(cm),cm.display.scroller.scrollLeft!=val&&(cm.display.scroller.scrollLeft=val),cm.display.scrollbars.setScrollLeft(val))}var wheelSamples=0,wheelPixelsPerUnit=null;ie?wheelPixelsPerUnit=-.53:gecko?wheelPixelsPerUnit=15:chrome?wheelPixelsPerUnit=-.7:safari&&(wheelPixelsPerUnit=-1/3);var wheelEventDelta=function(e){var dx=e.wheelDeltaX,dy=e.wheelDeltaY;return null==dx&&e.detail&&e.axis==e.HORIZONTAL_AXIS&&(dx=e.detail),null==dy&&e.detail&&e.axis==e.VERTICAL_AXIS?dy=e.detail:null==dy&&(dy=e.wheelDelta),{x:dx,y:dy}};function onScrollWheel(cm,e){var delta=wheelEventDelta(e),dx=delta.x,dy=delta.y,display=cm.display,scroll=display.scroller,canScrollX=scroll.scrollWidth>scroll.clientWidth,canScrollY=scroll.scrollHeight>scroll.clientHeight;if(dx&&canScrollX||dy&&canScrollY){if(dy&&mac&&webkit)outer:for(var cur=e.target,view=display.view;cur!=scroll;cur=cur.parentNode)for(var i=0;i<view.length;i++)if(view[i].node==cur){cm.display.currentWheelTarget=cur;break outer}if(dx&&!gecko&&!presto&&null!=wheelPixelsPerUnit)return dy&&canScrollY&&setScrollTop(cm,Math.max(0,Math.min(scroll.scrollTop+dy*wheelPixelsPerUnit,scroll.scrollHeight-scroll.clientHeight))),setScrollLeft(cm,Math.max(0,Math.min(scroll.scrollLeft+dx*wheelPixelsPerUnit,scroll.scrollWidth-scroll.clientWidth))),(!dy||dy&&canScrollY)&&e_preventDefault(e),void(display.wheelStartX=null);if(dy&&null!=wheelPixelsPerUnit){var pixels=dy*wheelPixelsPerUnit,top=cm.doc.scrollTop,bot=top+display.wrapper.clientHeight;pixels<0?top=Math.max(0,top+pixels-50):bot=Math.min(cm.doc.height,bot+pixels+50),updateDisplaySimple(cm,{top:top,bottom:bot})}wheelSamples<20&&(null==display.wheelStartX?(display.wheelStartX=scroll.scrollLeft,display.wheelStartY=scroll.scrollTop,display.wheelDX=dx,display.wheelDY=dy,setTimeout(function(){if(null!=display.wheelStartX){var movedX=scroll.scrollLeft-display.wheelStartX,movedY=scroll.scrollTop-display.wheelStartY,sample=movedY&&display.wheelDY&&movedY/display.wheelDY||movedX&&display.wheelDX&&movedX/display.wheelDX;display.wheelStartX=display.wheelStartY=null,sample&&(wheelPixelsPerUnit=(wheelPixelsPerUnit*wheelSamples+sample)/(wheelSamples+1),++wheelSamples)}},200)):(display.wheelDX+=dx,display.wheelDY+=dy))}}function doHandleBinding(cm,bound,dropShift){if("string"==typeof bound&&!(bound=commands[bound]))return!1;cm.display.input.ensurePolled();var prevShift=cm.display.shift,done=!1;try{cm.isReadOnly()&&(cm.state.suppressEdits=!0),dropShift&&(cm.display.shift=!1),done=bound(cm)!=Pass}finally{cm.display.shift=prevShift,cm.state.suppressEdits=!1}return done}CodeMirror.wheelEventPixels=function(e){var delta=wheelEventDelta(e);return delta.x*=wheelPixelsPerUnit,delta.y*=wheelPixelsPerUnit,delta};var stopSeq=new Delayed;function dispatchKey(cm,name,e,handle){var seq=cm.state.keySeq;if(seq){if(isModifierKey(name))return"handled";stopSeq.set(50,function(){cm.state.keySeq==seq&&(cm.state.keySeq=null,cm.display.input.reset())}),name=seq+" "+name}var result=function(cm,name,handle){for(var i=0;i<cm.state.keyMaps.length;i++){var result=lookupKey(name,cm.state.keyMaps[i],handle,cm);if(result)return result}return cm.options.extraKeys&&lookupKey(name,cm.options.extraKeys,handle,cm)||lookupKey(name,cm.options.keyMap,handle,cm)}(cm,name,handle);return"multi"==result&&(cm.state.keySeq=name),"handled"==result&&signalLater(cm,"keyHandled",cm,name,e),"handled"!=result&&"multi"!=result||(e_preventDefault(e),restartBlink(cm)),seq&&!result&&/\'$/.test(name)?(e_preventDefault(e),!0):!!result}function handleKeyBinding(cm,e){var name=keyName(e,!0);return!!name&&(e.shiftKey&&!cm.state.keySeq?dispatchKey(cm,"Shift-"+name,e,function(b){return doHandleBinding(cm,b,!0)})||dispatchKey(cm,name,e,function(b){if("string"==typeof b?/^go[A-Z]/.test(b):b.motion)return doHandleBinding(cm,b)}):dispatchKey(cm,name,e,function(b){return doHandleBinding(cm,b)}))}var lastStoppedKey=null;function onKeyDown(e){var cm=this;if(cm.curOp.focus=activeElt(),!signalDOMEvent(cm,e)){ie&&ie_version<11&&27==e.keyCode&&(e.returnValue=!1);var code=e.keyCode;cm.display.shift=16==code||e.shiftKey;var handled=handleKeyBinding(cm,e);presto&&(lastStoppedKey=handled?code:null,!handled&&88==code&&!hasCopyEvent&&(mac?e.metaKey:e.ctrlKey)&&cm.replaceSelection("",null,"cut")),18!=code||/\bCodeMirror-crosshair\b/.test(cm.display.lineDiv.className)||function(cm){var lineDiv=cm.display.lineDiv;function up(e){18!=e.keyCode&&e.altKey||(rmClass(lineDiv,"CodeMirror-crosshair"),off(document,"keyup",up),off(document,"mouseover",up))}addClass(lineDiv,"CodeMirror-crosshair"),on(document,"keyup",up),on(document,"mouseover",up)}(cm)}}function onKeyUp(e){16==e.keyCode&&(this.doc.sel.shift=!1),signalDOMEvent(this,e)}function onKeyPress(e){var cm=this;if(!(eventInWidget(cm.display,e)||signalDOMEvent(cm,e)||e.ctrlKey&&!e.altKey||mac&&e.metaKey)){var keyCode=e.keyCode,charCode=e.charCode;if(presto&&keyCode==lastStoppedKey)return lastStoppedKey=null,void e_preventDefault(e);if(!presto||e.which&&!(e.which<10)||!handleKeyBinding(cm,e))(function(cm,e,ch){return dispatchKey(cm,"'"+ch+"'",e,function(b){return doHandleBinding(cm,b,!0)})})(cm,e,String.fromCharCode(null==charCode?keyCode:charCode))||cm.display.input.onKeyPress(e)}}function onFocus(cm){cm.state.delayingBlurEvent&&(cm.state.delayingBlurEvent=!1),"nocursor"!=cm.options.readOnly&&(cm.state.focused||(signal(cm,"focus",cm),cm.state.focused=!0,addClass(cm.display.wrapper,"CodeMirror-focused"),cm.curOp||cm.display.selForContextMenu==cm.doc.sel||(cm.display.input.reset(),webkit&&setTimeout(function(){cm.display.input.reset(!0)},20)),cm.display.input.receivedFocus()),restartBlink(cm))}function onBlur(cm){cm.state.delayingBlurEvent||(cm.state.focused&&(signal(cm,"blur",cm),cm.state.focused=!1,rmClass(cm.display.wrapper,"CodeMirror-focused")),clearInterval(cm.display.blinker),setTimeout(function(){cm.state.focused||(cm.display.shift=!1)},150))}function onContextMenu(cm,e){eventInWidget(cm.display,e)||function(cm,e){return!!hasHandler(cm,"gutterContextMenu")&&gutterEvent(cm,e,"gutterContextMenu",!1)}(cm,e)||signalDOMEvent(cm,e,"contextmenu")||cm.display.input.onContextMenu(e)}var changeEnd=CodeMirror.changeEnd=function(change){return change.text?Pos(change.from.line+change.text.length-1,lst(change.text).length+(1==change.text.length?change.from.ch:0)):change.to};function adjustForChange(pos,change){if(cmp(pos,change.from)<0)return pos;if(cmp(pos,change.to)<=0)return changeEnd(change);var line=pos.line+change.text.length-(change.to.line-change.from.line)-1,ch=pos.ch;return pos.line==change.to.line&&(ch+=changeEnd(change).ch-change.to.ch),Pos(line,ch)}function computeSelAfterChange(doc,change){for(var out=[],i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];out.push(new Range(adjustForChange(range.anchor,change),adjustForChange(range.head,change)))}return normalizeSelection(out,doc.sel.primIndex)}function offsetPos(pos,old,nw){return pos.line==old.line?Pos(nw.line,pos.ch-old.ch+nw.ch):Pos(nw.line+(pos.line-old.line),pos.ch)}function filterChange(doc,change,update){var obj={canceled:!1,from:change.from,to:change.to,text:change.text,origin:change.origin,cancel:function(){this.canceled=!0}};return update&&(obj.update=function(from,to,text,origin){from&&(this.from=clipPos(doc,from)),to&&(this.to=clipPos(doc,to)),text&&(this.text=text),void 0!==origin&&(this.origin=origin)}),signal(doc,"beforeChange",doc,obj),doc.cm&&signal(doc.cm,"beforeChange",doc.cm,obj),obj.canceled?null:{from:obj.from,to:obj.to,text:obj.text,origin:obj.origin}}function makeChange(doc,change,ignoreReadOnly){if(doc.cm){if(!doc.cm.curOp)return operation(doc.cm,makeChange)(doc,change,ignoreReadOnly);if(doc.cm.state.suppressEdits)return}if(!(hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange"))||(change=filterChange(doc,change,!0))){var split=sawReadOnlySpans&&!ignoreReadOnly&&function(doc,from,to){var markers=null;if(doc.iter(from.line,to.line+1,function(line){if(line.markedSpans)for(var i=0;i<line.markedSpans.length;++i){var mark=line.markedSpans[i].marker;!mark.readOnly||markers&&-1!=indexOf(markers,mark)||(markers||(markers=[])).push(mark)}}),!markers)return null;for(var parts=[{from:from,to:to}],i=0;i<markers.length;++i)for(var mk=markers[i],m=mk.find(0),j=0;j<parts.length;++j){var p=parts[j];if(!(cmp(p.to,m.from)<0||0<cmp(p.from,m.to))){var newParts=[j,1],dfrom=cmp(p.from,m.from),dto=cmp(p.to,m.to);(dfrom<0||!mk.inclusiveLeft&&!dfrom)&&newParts.push({from:p.from,to:m.from}),(0<dto||!mk.inclusiveRight&&!dto)&&newParts.push({from:m.to,to:p.to}),parts.splice.apply(parts,newParts),j+=newParts.length-1}}return parts}(doc,change.from,change.to);if(split)for(var i=split.length-1;0<=i;--i)makeChangeInner(doc,{from:split[i].from,to:split[i].to,text:i?[""]:change.text});else makeChangeInner(doc,change)}}function makeChangeInner(doc,change){if(1!=change.text.length||""!=change.text[0]||0!=cmp(change.from,change.to)){var selAfter=computeSelAfterChange(doc,change);addChangeToHistory(doc,change,selAfter,doc.cm?doc.cm.curOp.id:NaN),makeChangeSingleDoc(doc,change,selAfter,stretchSpansOverChange(doc,change));var rebased=[];linkedDocs(doc,function(doc,sharedHist){sharedHist||-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history)),makeChangeSingleDoc(doc,change,null,stretchSpansOverChange(doc,change))})}}function makeChangeFromHistory(doc,type,allowSelectionOnly){if(!doc.cm||!doc.cm.state.suppressEdits){for(var event,hist=doc.history,selAfter=doc.sel,source="undo"==type?hist.done:hist.undone,dest="undo"==type?hist.undone:hist.done,i=0;i<source.length&&(event=source[i],allowSelectionOnly?!event.ranges||event.equals(doc.sel):event.ranges);i++);if(i!=source.length){for(hist.lastOrigin=hist.lastSelOrigin=null;(event=source.pop()).ranges;){if(pushSelectionToHistory(event,dest),allowSelectionOnly&&!event.equals(doc.sel))return void setSelection(doc,event,{clearRedo:!1});selAfter=event}var antiChanges=[];pushSelectionToHistory(selAfter,dest),dest.push({changes:antiChanges,generation:hist.generation}),hist.generation=event.generation||++hist.maxGeneration;var filter=hasHandler(doc,"beforeChange")||doc.cm&&hasHandler(doc.cm,"beforeChange");for(i=event.changes.length-1;0<=i;--i){var change=event.changes[i];if(change.origin=type,filter&&!filterChange(doc,change,!1))return void(source.length=0);antiChanges.push(historyChangeFromChange(doc,change));var after=i?computeSelAfterChange(doc,change):lst(source);makeChangeSingleDoc(doc,change,after,mergeOldSpans(doc,change)),!i&&doc.cm&&doc.cm.scrollIntoView({from:change.from,to:changeEnd(change)});var rebased=[];linkedDocs(doc,function(doc,sharedHist){sharedHist||-1!=indexOf(rebased,doc.history)||(rebaseHist(doc.history,change),rebased.push(doc.history)),makeChangeSingleDoc(doc,change,null,mergeOldSpans(doc,change))})}}}}function shiftDoc(doc,distance){if(0!=distance&&(doc.first+=distance,doc.sel=new Selection(map(doc.sel.ranges,function(range){return new Range(Pos(range.anchor.line+distance,range.anchor.ch),Pos(range.head.line+distance,range.head.ch))}),doc.sel.primIndex),doc.cm)){regChange(doc.cm,doc.first,doc.first-distance,distance);for(var d=doc.cm.display,l=d.viewFrom;l<d.viewTo;l++)regLineChange(doc.cm,l,"gutter")}}function makeChangeSingleDoc(doc,change,selAfter,spans){if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,makeChangeSingleDoc)(doc,change,selAfter,spans);if(change.to.line<doc.first)shiftDoc(doc,change.text.length-1-(change.to.line-change.from.line));else if(!(change.from.line>doc.lastLine())){if(change.from.line<doc.first){var shift=change.text.length-1-(doc.first-change.from.line);shiftDoc(doc,shift),change={from:Pos(doc.first,0),to:Pos(change.to.line+shift,change.to.ch),text:[lst(change.text)],origin:change.origin}}var last=doc.lastLine();change.to.line>last&&(change={from:change.from,to:Pos(last,getLine(doc,last).text.length),text:[change.text[0]],origin:change.origin}),change.removed=getBetween(doc,change.from,change.to),selAfter||(selAfter=computeSelAfterChange(doc,change)),doc.cm?function(cm,change,spans){var doc=cm.doc,display=cm.display,from=change.from,to=change.to,recomputeMaxLength=!1,checkWidthStart=from.line;cm.options.lineWrapping||(checkWidthStart=lineNo(visualLine(getLine(doc,from.line))),doc.iter(checkWidthStart,to.line+1,function(line){if(line==display.maxLine)return recomputeMaxLength=!0}));-1<doc.sel.contains(change.from,change.to)&&signalCursorActivity(cm);updateDoc(doc,change,spans,estimateHeight(cm)),cm.options.lineWrapping||(doc.iter(checkWidthStart,from.line+change.text.length,function(line){var len=lineLength(line);len>display.maxLineLength&&(display.maxLine=line,display.maxLineLength=len,display.maxLineChanged=!0,recomputeMaxLength=!1)}),recomputeMaxLength&&(cm.curOp.updateMaxLine=!0));doc.frontier=Math.min(doc.frontier,from.line),startWorker(cm,400);var lendiff=change.text.length-(to.line-from.line)-1;change.full?regChange(cm):from.line!=to.line||1!=change.text.length||isWholeLineUpdate(cm.doc,change)?regChange(cm,from.line,to.line+1,lendiff):regLineChange(cm,from.line,"text");var changesHandler=hasHandler(cm,"changes"),changeHandler=hasHandler(cm,"change");if(changeHandler||changesHandler){var obj={from:from,to:to,text:change.text,removed:change.removed,origin:change.origin};changeHandler&&signalLater(cm,"change",cm,obj),changesHandler&&(cm.curOp.changeObjs||(cm.curOp.changeObjs=[])).push(obj)}cm.display.selForContextMenu=null}(doc.cm,change,spans):updateDoc(doc,change,spans),setSelectionNoUndo(doc,selAfter,sel_dontScroll)}}function replaceRange(doc,code,from,to,origin){if(to||(to=from),cmp(to,from)<0){var tmp=to;to=from,from=tmp}"string"==typeof code&&(code=doc.splitLines(code)),makeChange(doc,{from:from,to:to,text:code,origin:origin})}function calculateScrollPos(cm,x1,y1,x2,y2){var display=cm.display,snapMargin=textHeight(cm.display);y1<0&&(y1=0);var screentop=cm.curOp&&null!=cm.curOp.scrollTop?cm.curOp.scrollTop:display.scroller.scrollTop,screen=displayHeight(cm),result={};screen<y2-y1&&(y2=y1+screen);var docBottom=cm.doc.height+paddingVert(display),atTop=y1<snapMargin,atBottom=docBottom-snapMargin<y2;if(y1<screentop)result.scrollTop=atTop?0:y1;else if(screentop+screen<y2){var newTop=Math.min(y1,(atBottom?docBottom:y2)-screen);newTop!=screentop&&(result.scrollTop=newTop)}var screenleft=cm.curOp&&null!=cm.curOp.scrollLeft?cm.curOp.scrollLeft:display.scroller.scrollLeft,screenw=displayWidth(cm)-(cm.options.fixedGutter?display.gutters.offsetWidth:0),tooWide=screenw<x2-x1;return tooWide&&(x2=x1+screenw),x1<10?result.scrollLeft=0:x1<screenleft?result.scrollLeft=Math.max(0,x1-(tooWide?0:10)):screenw+screenleft-3<x2&&(result.scrollLeft=x2+(tooWide?0:10)-screenw),result}function addToScrollPos(cm,left,top){null==left&&null==top||resolveScrollToPos(cm),null!=left&&(cm.curOp.scrollLeft=(null==cm.curOp.scrollLeft?cm.doc.scrollLeft:cm.curOp.scrollLeft)+left),null!=top&&(cm.curOp.scrollTop=(null==cm.curOp.scrollTop?cm.doc.scrollTop:cm.curOp.scrollTop)+top)}function ensureCursorVisible(cm){resolveScrollToPos(cm);var cur=cm.getCursor(),from=cur,to=cur;cm.options.lineWrapping||(from=cur.ch?Pos(cur.line,cur.ch-1):cur,to=Pos(cur.line,cur.ch+1)),cm.curOp.scrollToPos={from:from,to:to,margin:cm.options.cursorScrollMargin,isCursor:!0}}function resolveScrollToPos(cm){var range=cm.curOp.scrollToPos;if(range){cm.curOp.scrollToPos=null;var from=estimateCoords(cm,range.from),to=estimateCoords(cm,range.to),sPos=calculateScrollPos(cm,Math.min(from.left,to.left),Math.min(from.top,to.top)-range.margin,Math.max(from.right,to.right),Math.max(from.bottom,to.bottom)+range.margin);cm.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}function indentLine(cm,n,how,aggressive){var state,doc=cm.doc;null==how&&(how="add"),"smart"==how&&(doc.mode.indent?state=getStateBefore(cm,n):how="prev");var tabSize=cm.options.tabSize,line=getLine(doc,n),curSpace=countColumn(line.text,null,tabSize);line.stateAfter&&(line.stateAfter=null);var indentation,curSpaceString=line.text.match(/^\s*/)[0];if(aggressive||/\S/.test(line.text)){if("smart"==how&&((indentation=doc.mode.indent(state,line.text.slice(curSpaceString.length),line.text))==Pass||150<indentation)){if(!aggressive)return;how="prev"}}else indentation=0,how="not";"prev"==how?indentation=n>doc.first?countColumn(getLine(doc,n-1).text,null,tabSize):0:"add"==how?indentation=curSpace+cm.options.indentUnit:"subtract"==how?indentation=curSpace-cm.options.indentUnit:"number"==typeof how&&(indentation=curSpace+how),indentation=Math.max(0,indentation);var indentString="",pos=0;if(cm.options.indentWithTabs)for(var i=Math.floor(indentation/tabSize);i;--i)pos+=tabSize,indentString+="\t";if(pos<indentation&&(indentString+=spaceStr(indentation-pos)),indentString!=curSpaceString)return replaceRange(doc,indentString,Pos(n,0),Pos(n,curSpaceString.length),"+input"),!(line.stateAfter=null);for(i=0;i<doc.sel.ranges.length;i++){var range=doc.sel.ranges[i];if(range.head.line==n&&range.head.ch<curSpaceString.length){replaceOneSelection(doc,i,new Range(pos=Pos(n,curSpaceString.length),pos));break}}}function changeLine(doc,handle,changeType,op){var no=handle,line=handle;return"number"==typeof handle?line=getLine(doc,clipLine(doc,handle)):no=lineNo(handle),null==no?null:(op(line,no)&&doc.cm&&regLineChange(doc.cm,no,changeType),line)}function deleteNearSelection(cm,compute){for(var ranges=cm.doc.sel.ranges,kill=[],i=0;i<ranges.length;i++){for(var toKill=compute(ranges[i]);kill.length&&cmp(toKill.from,lst(kill).to)<=0;){var replaced=kill.pop();if(cmp(replaced.from,toKill.from)<0){toKill.from=replaced.from;break}}kill.push(toKill)}runInOp(cm,function(){for(var i=kill.length-1;0<=i;i--)replaceRange(cm.doc,"",kill[i].from,kill[i].to,"+delete");ensureCursorVisible(cm)})}function findPosH(doc,pos,dir,unit,visually){var line=pos.line,ch=pos.ch,origDir=dir,lineObj=getLine(doc,line),possible=!0;function moveOnce(boundToLine){var l,next=(visually?moveVisually:moveLogically)(lineObj,ch,dir,!0);if(null==next){if(boundToLine||!((l=line+dir)<doc.first||l>=doc.first+doc.size?possible=!1:lineObj=getLine(doc,line=l)))return possible=!1;ch=visually?(dir<0?lineRight:lineLeft)(lineObj):dir<0?lineObj.text.length:0}else ch=next;return!0}if("char"==unit)moveOnce();else if("column"==unit)moveOnce(!0);else if("word"==unit||"group"==unit)for(var sawType=null,group="group"==unit,helper=doc.cm&&doc.cm.getHelper(pos,"wordChars"),first=!0;!(dir<0)||moveOnce(!first);first=!1){var cur=lineObj.text.charAt(ch)||"\n",type=isWordChar(cur,helper)?"w":group&&"\n"==cur?"n":!group||/\s/.test(cur)?null:"p";if(!group||first||type||(type="s"),sawType&&sawType!=type){dir<0&&(dir=1,moveOnce());break}if(type&&(sawType=type),0<dir&&!moveOnce(!first))break}var result=skipAtomic(doc,Pos(line,ch),pos,origDir,!0);return possible||(result.hitSide=!0),result}function findPosV(cm,pos,dir,unit){var y,doc=cm.doc,x=pos.left;if("page"==unit){var pageSize=Math.min(cm.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);y=pos.top+dir*(pageSize-(dir<0?1.5:.5)*textHeight(cm.display))}else"line"==unit&&(y=0<dir?pos.bottom+3:pos.top-3);for(;;){var target=coordsChar(cm,x,y);if(!target.outside)break;if(dir<0?y<=0:y>=doc.height){target.hitSide=!0;break}y+=5*dir}return target}CodeMirror.prototype={constructor:CodeMirror,focus:function(){window.focus(),this.display.input.focus()},setOption:function(option,value){var options=this.options,old=options[option];options[option]==value&&"mode"!=option||(options[option]=value,optionHandlers.hasOwnProperty(option)&&operation(this,optionHandlers[option])(this,value,old))},getOption:function(option){return this.options[option]},getDoc:function(){return this.doc},addKeyMap:function(map,bottom){this.state.keyMaps[bottom?"push":"unshift"](getKeyMap(map))},removeKeyMap:function(map){for(var maps=this.state.keyMaps,i=0;i<maps.length;++i)if(maps[i]==map||maps[i].name==map)return maps.splice(i,1),!0},addOverlay:methodOp(function(spec,options){var mode=spec.token?spec:CodeMirror.getMode(this.options,spec);if(mode.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:mode,modeSpec:spec,opaque:options&&options.opaque}),this.state.modeGen++,regChange(this)}),removeOverlay:methodOp(function(spec){for(var overlays=this.state.overlays,i=0;i<overlays.length;++i){var cur=overlays[i].modeSpec;if(cur==spec||"string"==typeof spec&&cur.name==spec)return overlays.splice(i,1),this.state.modeGen++,void regChange(this)}}),indentLine:methodOp(function(n,dir,aggressive){"string"!=typeof dir&&"number"!=typeof dir&&(dir=null==dir?this.options.smartIndent?"smart":"prev":dir?"add":"subtract"),isLine(this.doc,n)&&indentLine(this,n,dir,aggressive)}),indentSelection:methodOp(function(how){for(var ranges=this.doc.sel.ranges,end=-1,i=0;i<ranges.length;i++){var range=ranges[i];if(range.empty())range.head.line>end&&(indentLine(this,range.head.line,how,!0),end=range.head.line,i==this.doc.sel.primIndex&&ensureCursorVisible(this));else{var from=range.from(),to=range.to(),start=Math.max(end,from.line);end=Math.min(this.lastLine(),to.line-(to.ch?0:1))+1;for(var j=start;j<end;++j)indentLine(this,j,how);var newRanges=this.doc.sel.ranges;0==from.ch&&ranges.length==newRanges.length&&0<newRanges[i].from().ch&&replaceOneSelection(this.doc,i,new Range(from,newRanges[i].to()),sel_dontScroll)}}}),getTokenAt:function(pos,precise){return takeToken(this,pos,precise)},getLineTokens:function(line,precise){return takeToken(this,Pos(line),precise,!0)},getTokenTypeAt:function(pos){pos=clipPos(this.doc,pos);var type,styles=getLineStyles(this,getLine(this.doc,pos.line)),before=0,after=(styles.length-1)/2,ch=pos.ch;if(0==ch)type=styles[2];else for(;;){var mid=before+after>>1;if((mid?styles[2*mid-1]:0)>=ch)after=mid;else{if(!(styles[2*mid+1]<ch)){type=styles[2*mid+2];break}before=mid+1}}var cut=type?type.indexOf("cm-overlay "):-1;return cut<0?type:0==cut?null:type.slice(0,cut-1)},getModeAt:function(pos){var mode=this.doc.mode;return mode.innerMode?CodeMirror.innerMode(mode,this.getTokenAt(pos).state).mode:mode},getHelper:function(pos,type){return this.getHelpers(pos,type)[0]},getHelpers:function(pos,type){var found=[];if(!helpers.hasOwnProperty(type))return found;var help=helpers[type],mode=this.getModeAt(pos);if("string"==typeof mode[type])help[mode[type]]&&found.push(help[mode[type]]);else if(mode[type])for(var i=0;i<mode[type].length;i++){var val=help[mode[type][i]];val&&found.push(val)}else mode.helperType&&help[mode.helperType]?found.push(help[mode.helperType]):help[mode.name]&&found.push(help[mode.name]);for(i=0;i<help._global.length;i++){var cur=help._global[i];cur.pred(mode,this)&&-1==indexOf(found,cur.val)&&found.push(cur.val)}return found},getStateAfter:function(line,precise){var doc=this.doc;return getStateBefore(this,(line=clipLine(doc,null==line?doc.first+doc.size-1:line))+1,precise)},cursorCoords:function(start,mode){var range=this.doc.sel.primary();return cursorCoords(this,null==start?range.head:"object"==typeof start?clipPos(this.doc,start):start?range.from():range.to(),mode||"page")},charCoords:function(pos,mode){return charCoords(this,clipPos(this.doc,pos),mode||"page")},coordsChar:function(coords,mode){return coordsChar(this,(coords=fromCoordSystem(this,coords,mode||"page")).left,coords.top)},lineAtHeight:function(height,mode){return height=fromCoordSystem(this,{top:height,left:0},mode||"page").top,lineAtHeight(this.doc,height+this.display.viewOffset)},heightAtLine:function(line,mode){var lineObj,end=!1;if("number"==typeof line){var last=this.doc.first+this.doc.size-1;line<this.doc.first?line=this.doc.first:last<line&&(line=last,end=!0),lineObj=getLine(this.doc,line)}else lineObj=line;return intoCoordSystem(this,lineObj,{top:0,left:0},mode||"page").top+(end?this.doc.height-heightAtLine(lineObj):0)},defaultTextHeight:function(){return textHeight(this.display)},defaultCharWidth:function(){return charWidth(this.display)},setGutterMarker:methodOp(function(line,gutterID,value){return changeLine(this.doc,line,"gutter",function(line){var markers=line.gutterMarkers||(line.gutterMarkers={});return!(markers[gutterID]=value)&&isEmpty(markers)&&(line.gutterMarkers=null),!0})}),clearGutter:methodOp(function(gutterID){var cm=this,doc=cm.doc,i=doc.first;doc.iter(function(line){line.gutterMarkers&&line.gutterMarkers[gutterID]&&(line.gutterMarkers[gutterID]=null,regLineChange(cm,i,"gutter"),isEmpty(line.gutterMarkers)&&(line.gutterMarkers=null)),++i})}),lineInfo:function(line){if("number"==typeof line){if(!isLine(this.doc,line))return null;var n=line;if(!(line=getLine(this.doc,line)))return null}else{if(null==(n=lineNo(line)))return null}return{line:n,handle:line,text:line.text,gutterMarkers:line.gutterMarkers,textClass:line.textClass,bgClass:line.bgClass,wrapClass:line.wrapClass,widgets:line.widgets}},getViewport:function(){return{from:this.display.viewFrom,to:this.display.viewTo}},addWidget:function(pos,node,scroll,vert,horiz){var cm,x1,y1,x2,y2,scrollPos,display=this.display,top=(pos=cursorCoords(this,clipPos(this.doc,pos))).bottom,left=pos.left;if(node.style.position="absolute",node.setAttribute("cm-ignore-events","true"),this.display.input.setUneditable(node),display.sizer.appendChild(node),"over"==vert)top=pos.top;else if("above"==vert||"near"==vert){var vspace=Math.max(display.wrapper.clientHeight,this.doc.height),hspace=Math.max(display.sizer.clientWidth,display.lineSpace.clientWidth);("above"==vert||pos.bottom+node.offsetHeight>vspace)&&pos.top>node.offsetHeight?top=pos.top-node.offsetHeight:pos.bottom+node.offsetHeight<=vspace&&(top=pos.bottom),left+node.offsetWidth>hspace&&(left=hspace-node.offsetWidth)}node.style.top=top+"px",node.style.left=node.style.right="","right"==horiz?(left=display.sizer.clientWidth-node.offsetWidth,node.style.right="0px"):("left"==horiz?left=0:"middle"==horiz&&(left=(display.sizer.clientWidth-node.offsetWidth)/2),node.style.left=left+"px"),scroll&&(cm=this,y1=top,x2=(x1=left)+node.offsetWidth,y2=top+node.offsetHeight,null!=(scrollPos=calculateScrollPos(cm,x1,y1,x2,y2)).scrollTop&&setScrollTop(cm,scrollPos.scrollTop),null!=scrollPos.scrollLeft&&setScrollLeft(cm,scrollPos.scrollLeft))},triggerOnKeyDown:methodOp(onKeyDown),triggerOnKeyPress:methodOp(onKeyPress),triggerOnKeyUp:onKeyUp,execCommand:function(cmd){if(commands.hasOwnProperty(cmd))return commands[cmd].call(null,this)},triggerElectric:methodOp(function(text){triggerElectric(this,text)}),findPosH:function(from,amount,unit,visually){var dir=1;amount<0&&(dir=-1,amount=-amount);for(var i=0,cur=clipPos(this.doc,from);i<amount&&!(cur=findPosH(this.doc,cur,dir,unit,visually)).hitSide;++i);return cur},moveH:methodOp(function(dir,unit){var cm=this;cm.extendSelectionsBy(function(range){return cm.display.shift||cm.doc.extend||range.empty()?findPosH(cm.doc,range.head,dir,unit,cm.options.rtlMoveVisually):dir<0?range.from():range.to()},sel_move)}),deleteH:methodOp(function(dir,unit){var sel=this.doc.sel,doc=this.doc;sel.somethingSelected()?doc.replaceSelection("",null,"+delete"):deleteNearSelection(this,function(range){var other=findPosH(doc,range.head,dir,unit,!1);return dir<0?{from:other,to:range.head}:{from:range.head,to:other}})}),findPosV:function(from,amount,unit,goalColumn){var dir=1,x=goalColumn;amount<0&&(dir=-1,amount=-amount);for(var i=0,cur=clipPos(this.doc,from);i<amount;++i){var coords=cursorCoords(this,cur,"div");if(null==x?x=coords.left:coords.left=x,(cur=findPosV(this,coords,dir,unit)).hitSide)break}return cur},moveV:methodOp(function(dir,unit){var cm=this,doc=this.doc,goals=[],collapse=!cm.display.shift&&!doc.extend&&doc.sel.somethingSelected();if(doc.extendSelectionsBy(function(range){if(collapse)return dir<0?range.from():range.to();var headPos=cursorCoords(cm,range.head,"div");null!=range.goalColumn&&(headPos.left=range.goalColumn),goals.push(headPos.left);var pos=findPosV(cm,headPos,dir,unit);return"page"==unit&&range==doc.sel.primary()&&addToScrollPos(cm,null,charCoords(cm,pos,"div").top-headPos.top),pos},sel_move),goals.length)for(var i=0;i<doc.sel.ranges.length;i++)doc.sel.ranges[i].goalColumn=goals[i]}),findWordAt:function(pos){var line=getLine(this.doc,pos.line).text,start=pos.ch,end=pos.ch;if(line){var helper=this.getHelper(pos,"wordChars");(pos.xRel<0||end==line.length)&&start?--start:++end;for(var startChar=line.charAt(start),check=isWordChar(startChar,helper)?function(ch){return isWordChar(ch,helper)}:/\s/.test(startChar)?function(ch){return/\s/.test(ch)}:function(ch){return!/\s/.test(ch)&&!isWordChar(ch)};0<start&&check(line.charAt(start-1));)--start;for(;end<line.length&&check(line.charAt(end));)++end}return new Range(Pos(pos.line,start),Pos(pos.line,end))},toggleOverwrite:function(value){null!=value&&value==this.state.overwrite||((this.state.overwrite=!this.state.overwrite)?addClass(this.display.cursorDiv,"CodeMirror-overwrite"):rmClass(this.display.cursorDiv,"CodeMirror-overwrite"),signal(this,"overwriteToggle",this,this.state.overwrite))},hasFocus:function(){return this.display.input.getField()==activeElt()},isReadOnly:function(){return!(!this.options.readOnly&&!this.doc.cantEdit)},scrollTo:methodOp(function(x,y){null==x&&null==y||resolveScrollToPos(this),null!=x&&(this.curOp.scrollLeft=x),null!=y&&(this.curOp.scrollTop=y)}),getScrollInfo:function(){var scroller=this.display.scroller;return{left:scroller.scrollLeft,top:scroller.scrollTop,height:scroller.scrollHeight-scrollGap(this)-this.display.barHeight,width:scroller.scrollWidth-scrollGap(this)-this.display.barWidth,clientHeight:displayHeight(this),clientWidth:displayWidth(this)}},scrollIntoView:methodOp(function(range,margin){if(null==range?(range={from:this.doc.sel.primary().head,to:null},null==margin&&(margin=this.options.cursorScrollMargin)):"number"==typeof range?range={from:Pos(range,0),to:null}:null==range.from&&(range={from:range,to:null}),range.to||(range.to=range.from),range.margin=margin||0,null!=range.from.line)resolveScrollToPos(this),this.curOp.scrollToPos=range;else{var sPos=calculateScrollPos(this,Math.min(range.from.left,range.to.left),Math.min(range.from.top,range.to.top)-range.margin,Math.max(range.from.right,range.to.right),Math.max(range.from.bottom,range.to.bottom)+range.margin);this.scrollTo(sPos.scrollLeft,sPos.scrollTop)}}),setSize:methodOp(function(width,height){var cm=this;function interpret(val){return"number"==typeof val||/^\d+$/.test(String(val))?val+"px":val}null!=width&&(cm.display.wrapper.style.width=interpret(width)),null!=height&&(cm.display.wrapper.style.height=interpret(height)),cm.options.lineWrapping&&clearLineMeasurementCache(this);var lineNo=cm.display.viewFrom;cm.doc.iter(lineNo,cm.display.viewTo,function(line){if(line.widgets)for(var i=0;i<line.widgets.length;i++)if(line.widgets[i].noHScroll){regLineChange(cm,lineNo,"widget");break}++lineNo}),cm.curOp.forceUpdate=!0,signal(cm,"refresh",this)}),operation:function(f){return runInOp(this,f)},refresh:methodOp(function(){var oldHeight=this.display.cachedTextHeight;regChange(this),this.curOp.forceUpdate=!0,clearCaches(this),this.scrollTo(this.doc.scrollLeft,this.doc.scrollTop),updateGutterSpace(this),(null==oldHeight||.5<Math.abs(oldHeight-textHeight(this.display)))&&estimateLineHeights(this),signal(this,"refresh",this)}),swapDoc:methodOp(function(doc){var old=this.doc;return old.cm=null,attachDoc(this,doc),clearCaches(this),this.display.input.reset(),this.scrollTo(doc.scrollLeft,doc.scrollTop),this.curOp.forceScroll=!0,signalLater(this,"swapDoc",this,old),old}),getInputField:function(){return this.display.input.getField()},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},eventMixin(CodeMirror);var defaults=CodeMirror.defaults={},optionHandlers=CodeMirror.optionHandlers={};function option(name,deflt,handle,notOnInit){CodeMirror.defaults[name]=deflt,handle&&(optionHandlers[name]=notOnInit?function(cm,val,old){old!=Init&&handle(cm,val,old)}:handle)}var Init=CodeMirror.Init={toString:function(){return"CodeMirror.Init"}};option("value","",function(cm,val){cm.setValue(val)},!0),option("mode",null,function(cm,val){cm.doc.modeOption=val,loadMode(cm)},!0),option("indentUnit",2,loadMode,!0),option("indentWithTabs",!1),option("smartIndent",!0),option("tabSize",4,function(cm){resetModeState(cm),clearCaches(cm),regChange(cm)},!0),option("lineSeparator",null,function(cm,val){if(cm.doc.lineSep=val){var newBreaks=[],lineNo=cm.doc.first;cm.doc.iter(function(line){for(var pos=0;;){var found=line.text.indexOf(val,pos);if(-1==found)break;pos=found+val.length,newBreaks.push(Pos(lineNo,found))}lineNo++});for(var i=newBreaks.length-1;0<=i;i--)replaceRange(cm.doc,val,newBreaks[i],Pos(newBreaks[i].line,newBreaks[i].ch+val.length))}}),option("specialChars",/[\t\u0000-\u0019\u00ad\u200b-\u200f\u2028\u2029\ufeff]/g,function(cm,val,old){cm.state.specialChars=new RegExp(val.source+(val.test("\t")?"":"|\t"),"g"),old!=CodeMirror.Init&&cm.refresh()}),option("specialCharPlaceholder",function(ch){var token=elt("span","•","cm-invalidchar");return token.title="\\u"+ch.charCodeAt(0).toString(16),token.setAttribute("aria-label",token.title),token},function(cm){cm.refresh()},!0),option("electricChars",!0),option("inputStyle",mobile?"contenteditable":"textarea",function(){throw new Error("inputStyle can not (yet) be changed in a running editor")},!0),option("rtlMoveVisually",!windows),option("wholeLineUpdateBefore",!0),option("theme","default",function(cm){themeChanged(cm),guttersChanged(cm)},!0),option("keyMap","default",function(cm,val,old){var next=getKeyMap(val),prev=old!=CodeMirror.Init&&getKeyMap(old);prev&&prev.detach&&prev.detach(cm,next),next.attach&&next.attach(cm,prev||null)}),option("extraKeys",null),option("lineWrapping",!1,function(cm){cm.options.lineWrapping?(addClass(cm.display.wrapper,"CodeMirror-wrap"),cm.display.sizer.style.minWidth="",cm.display.sizerWidth=null):(rmClass(cm.display.wrapper,"CodeMirror-wrap"),findMaxLine(cm)),estimateLineHeights(cm),regChange(cm),clearCaches(cm),setTimeout(function(){updateScrollbars(cm)},100)},!0),option("gutters",[],function(cm){setGuttersForLineNumbers(cm.options),guttersChanged(cm)},!0),option("fixedGutter",!0,function(cm,val){cm.display.gutters.style.left=val?compensateForHScroll(cm.display)+"px":"0",cm.refresh()},!0),option("coverGutterNextToScrollbar",!1,function(cm){updateScrollbars(cm)},!0),option("scrollbarStyle","native",function(cm){initScrollbars(cm),updateScrollbars(cm),cm.display.scrollbars.setScrollTop(cm.doc.scrollTop),cm.display.scrollbars.setScrollLeft(cm.doc.scrollLeft)},!0),option("lineNumbers",!1,function(cm){setGuttersForLineNumbers(cm.options),guttersChanged(cm)},!0),option("firstLineNumber",1,guttersChanged,!0),option("lineNumberFormatter",function(integer){return integer},guttersChanged,!0),option("showCursorWhenSelecting",!1,updateSelection,!0),option("resetSelectionOnContextMenu",!0),option("lineWiseCopyCut",!0),option("readOnly",!1,function(cm,val){cm.display.disabled="nocursor"==val&&(onBlur(cm),cm.display.input.blur(),!0),cm.display.input.readOnlyChanged(val)}),option("disableInput",!1,function(cm,val){val||cm.display.input.reset()},!0),option("dragDrop",!0,function(cm,value,old){if(!value!=!(old&&old!=CodeMirror.Init)){var funcs=cm.display.dragFunctions,toggle=value?on:off;toggle(cm.display.scroller,"dragstart",funcs.start),toggle(cm.display.scroller,"dragenter",funcs.enter),toggle(cm.display.scroller,"dragover",funcs.over),toggle(cm.display.scroller,"dragleave",funcs.leave),toggle(cm.display.scroller,"drop",funcs.drop)}}),option("allowDropFileTypes",null),option("cursorBlinkRate",530),option("cursorScrollMargin",0),option("cursorHeight",1,updateSelection,!0),option("singleCursorHeightPerLine",!0,updateSelection,!0),option("workTime",100),option("workDelay",100),option("flattenSpans",!0,resetModeState,!0),option("addModeClass",!1,resetModeState,!0),option("pollInterval",100),option("undoDepth",200,function(cm,val){cm.doc.history.undoDepth=val}),option("historyEventDelay",1250),option("viewportMargin",10,function(cm){cm.refresh()},!0),option("maxHighlightLength",1e4,resetModeState,!0),option("moveInputWithCursor",!0,function(cm,val){val||cm.display.input.resetPosition()}),option("tabindex",null,function(cm,val){cm.display.input.getField().tabIndex=val||""}),option("autofocus",null);var modes=CodeMirror.modes={},mimeModes=CodeMirror.mimeModes={};CodeMirror.defineMode=function(name,mode){CodeMirror.defaults.mode||"null"==name||(CodeMirror.defaults.mode=name),2<arguments.length&&(mode.dependencies=Array.prototype.slice.call(arguments,2)),modes[name]=mode},CodeMirror.defineMIME=function(mime,spec){mimeModes[mime]=spec},CodeMirror.resolveMode=function(spec){if("string"==typeof spec&&mimeModes.hasOwnProperty(spec))spec=mimeModes[spec];else if(spec&&"string"==typeof spec.name&&mimeModes.hasOwnProperty(spec.name)){var found=mimeModes[spec.name];"string"==typeof found&&(found={name:found}),(spec=createObj(found,spec)).name=found.name}else if("string"==typeof spec&&/^[\w\-]+\/[\w\-]+\+xml$/.test(spec))return CodeMirror.resolveMode("application/xml");return"string"==typeof spec?{name:spec}:spec||{name:"null"}},CodeMirror.getMode=function(options,spec){spec=CodeMirror.resolveMode(spec);var mfactory=modes[spec.name];if(!mfactory)return CodeMirror.getMode(options,"text/plain");var modeObj=mfactory(options,spec);if(modeExtensions.hasOwnProperty(spec.name)){var exts=modeExtensions[spec.name];for(var prop in exts)exts.hasOwnProperty(prop)&&(modeObj.hasOwnProperty(prop)&&(modeObj["_"+prop]=modeObj[prop]),modeObj[prop]=exts[prop])}if(modeObj.name=spec.name,spec.helperType&&(modeObj.helperType=spec.helperType),spec.modeProps)for(var prop in spec.modeProps)modeObj[prop]=spec.modeProps[prop];return modeObj},CodeMirror.defineMode("null",function(){return{token:function(stream){stream.skipToEnd()}}}),CodeMirror.defineMIME("text/plain","null");var modeExtensions=CodeMirror.modeExtensions={};CodeMirror.extendMode=function(mode,properties){copyObj(properties,modeExtensions.hasOwnProperty(mode)?modeExtensions[mode]:modeExtensions[mode]={})},CodeMirror.defineExtension=function(name,func){CodeMirror.prototype[name]=func},CodeMirror.defineDocExtension=function(name,func){Doc.prototype[name]=func},CodeMirror.defineOption=option;var initHooks=[];CodeMirror.defineInitHook=function(f){initHooks.push(f)};var helpers=CodeMirror.helpers={};CodeMirror.registerHelper=function(type,name,value){helpers.hasOwnProperty(type)||(helpers[type]=CodeMirror[type]={_global:[]}),helpers[type][name]=value},CodeMirror.registerGlobalHelper=function(type,name,predicate,value){CodeMirror.registerHelper(type,name,value),helpers[type]._global.push({pred:predicate,val:value})};var copyState=CodeMirror.copyState=function(mode,state){if(!0===state)return state;if(mode.copyState)return mode.copyState(state);var nstate={};for(var n in state){var val=state[n];val instanceof Array&&(val=val.concat([])),nstate[n]=val}return nstate},startState=CodeMirror.startState=function(mode,a1,a2){return!mode.startState||mode.startState(a1,a2)};CodeMirror.innerMode=function(mode,state){for(;mode.innerMode;){var info=mode.innerMode(state);if(!info||info.mode==mode)break;state=info.state,mode=info.mode}return info||{mode:mode,state:state}};var commands=CodeMirror.commands={selectAll:function(cm){cm.setSelection(Pos(cm.firstLine(),0),Pos(cm.lastLine()),sel_dontScroll)},singleSelection:function(cm){cm.setSelection(cm.getCursor("anchor"),cm.getCursor("head"),sel_dontScroll)},killLine:function(cm){deleteNearSelection(cm,function(range){if(range.empty()){var len=getLine(cm.doc,range.head.line).text.length;return range.head.ch==len&&range.head.line<cm.lastLine()?{from:range.head,to:Pos(range.head.line+1,0)}:{from:range.head,to:Pos(range.head.line,len)}}return{from:range.from(),to:range.to()}})},deleteLine:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:clipPos(cm.doc,Pos(range.to().line+1,0))}})},delLineLeft:function(cm){deleteNearSelection(cm,function(range){return{from:Pos(range.from().line,0),to:range.from()}})},delWrappedLineLeft:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5;return{from:cm.coordsChar({left:0,top:top},"div"),to:range.from()}})},delWrappedLineRight:function(cm){deleteNearSelection(cm,function(range){var top=cm.charCoords(range.head,"div").top+5,rightPos=cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div");return{from:range.from(),to:rightPos}})},undo:function(cm){cm.undo()},redo:function(cm){cm.redo()},undoSelection:function(cm){cm.undoSelection()},redoSelection:function(cm){cm.redoSelection()},goDocStart:function(cm){cm.extendSelection(Pos(cm.firstLine(),0))},goDocEnd:function(cm){cm.extendSelection(Pos(cm.lastLine()))},goLineStart:function(cm){cm.extendSelectionsBy(function(range){return lineStart(cm,range.head.line)},{origin:"+move",bias:1})},goLineStartSmart:function(cm){cm.extendSelectionsBy(function(range){return lineStartSmart(cm,range.head)},{origin:"+move",bias:1})},goLineEnd:function(cm){cm.extendSelectionsBy(function(range){return function(cm,lineN){var merged,line=getLine(cm.doc,lineN);for(;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line,lineN=null;var order=getOrder(line),ch=order?order[0].level%2?lineLeft(line):lineRight(line):line.text.length;return Pos(null==lineN?lineNo(line):lineN,ch)}(cm,range.head.line)},{origin:"+move",bias:-1})},goLineRight:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:cm.display.lineDiv.offsetWidth+100,top:top},"div")},sel_move)},goLineLeft:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5;return cm.coordsChar({left:0,top:top},"div")},sel_move)},goLineLeftSmart:function(cm){cm.extendSelectionsBy(function(range){var top=cm.charCoords(range.head,"div").top+5,pos=cm.coordsChar({left:0,top:top},"div");return pos.ch<cm.getLine(pos.line).search(/\S/)?lineStartSmart(cm,range.head):pos},sel_move)},goLineUp:function(cm){cm.moveV(-1,"line")},goLineDown:function(cm){cm.moveV(1,"line")},goPageUp:function(cm){cm.moveV(-1,"page")},goPageDown:function(cm){cm.moveV(1,"page")},goCharLeft:function(cm){cm.moveH(-1,"char")},goCharRight:function(cm){cm.moveH(1,"char")},goColumnLeft:function(cm){cm.moveH(-1,"column")},goColumnRight:function(cm){cm.moveH(1,"column")},goWordLeft:function(cm){cm.moveH(-1,"word")},goGroupRight:function(cm){cm.moveH(1,"group")},goGroupLeft:function(cm){cm.moveH(-1,"group")},goWordRight:function(cm){cm.moveH(1,"word")},delCharBefore:function(cm){cm.deleteH(-1,"char")},delCharAfter:function(cm){cm.deleteH(1,"char")},delWordBefore:function(cm){cm.deleteH(-1,"word")},delWordAfter:function(cm){cm.deleteH(1,"word")},delGroupBefore:function(cm){cm.deleteH(-1,"group")},delGroupAfter:function(cm){cm.deleteH(1,"group")},indentAuto:function(cm){cm.indentSelection("smart")},indentMore:function(cm){cm.indentSelection("add")},indentLess:function(cm){cm.indentSelection("subtract")},insertTab:function(cm){cm.replaceSelection("\t")},insertSoftTab:function(cm){for(var spaces=[],ranges=cm.listSelections(),tabSize=cm.options.tabSize,i=0;i<ranges.length;i++){var pos=ranges[i].from(),col=countColumn(cm.getLine(pos.line),pos.ch,tabSize);spaces.push(new Array(tabSize-col%tabSize+1).join(" "))}cm.replaceSelections(spaces)},defaultTab:function(cm){cm.somethingSelected()?cm.indentSelection("add"):cm.execCommand("insertTab")},transposeChars:function(cm){runInOp(cm,function(){for(var ranges=cm.listSelections(),newSel=[],i=0;i<ranges.length;i++){var cur=ranges[i].head,line=getLine(cm.doc,cur.line).text;if(line)if(cur.ch==line.length&&(cur=new Pos(cur.line,cur.ch-1)),0<cur.ch)cur=new Pos(cur.line,cur.ch+1),cm.replaceRange(line.charAt(cur.ch-1)+line.charAt(cur.ch-2),Pos(cur.line,cur.ch-2),cur,"+transpose");else if(cur.line>cm.doc.first){var prev=getLine(cm.doc,cur.line-1).text;prev&&cm.replaceRange(line.charAt(0)+cm.doc.lineSeparator()+prev.charAt(prev.length-1),Pos(cur.line-1,prev.length-1),Pos(cur.line,1),"+transpose")}newSel.push(new Range(cur,cur))}cm.setSelections(newSel)})},newlineAndIndent:function(cm){runInOp(cm,function(){for(var len=cm.listSelections().length,i=0;i<len;i++){var range=cm.listSelections()[i];cm.replaceRange(cm.doc.lineSeparator(),range.anchor,range.head,"+input"),cm.indentLine(range.from().line+1,null,!0)}ensureCursorVisible(cm)})},toggleOverwrite:function(cm){cm.toggleOverwrite()}},keyMap=CodeMirror.keyMap={};function normalizeKeyName(name){for(var alt,ctrl,shift,cmd,parts=name.split(/-(?!$)/),i=(name=parts[parts.length-1],0);i<parts.length-1;i++){var mod=parts[i];if(/^(cmd|meta|m)$/i.test(mod))cmd=!0;else if(/^a(lt)?$/i.test(mod))alt=!0;else if(/^(c|ctrl|control)$/i.test(mod))ctrl=!0;else{if(!/^s(hift)$/i.test(mod))throw new Error("Unrecognized modifier name: "+mod);shift=!0}}return alt&&(name="Alt-"+name),ctrl&&(name="Ctrl-"+name),cmd&&(name="Cmd-"+name),shift&&(name="Shift-"+name),name}keyMap.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite",Esc:"singleSelection"},keyMap.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Up":"goLineUp","Ctrl-Down":"goLineDown","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore","Ctrl-U":"undoSelection","Shift-Ctrl-U":"redoSelection","Alt-U":"redoSelection",fallthrough:"basic"},keyMap.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},keyMap.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Home":"goDocStart","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineLeft","Cmd-Right":"goLineRight","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delWrappedLineLeft","Cmd-Delete":"delWrappedLineRight","Cmd-U":"undoSelection","Shift-Cmd-U":"redoSelection","Ctrl-Up":"goDocStart","Ctrl-Down":"goDocEnd",fallthrough:["basic","emacsy"]},keyMap.default=mac?keyMap.macDefault:keyMap.pcDefault,CodeMirror.normalizeKeyMap=function(keymap){var copy={};for(var keyname in keymap)if(keymap.hasOwnProperty(keyname)){var value=keymap[keyname];if(/^(name|fallthrough|(de|at)tach)$/.test(keyname))continue;if("..."==value){delete keymap[keyname];continue}for(var keys=map(keyname.split(" "),normalizeKeyName),i=0;i<keys.length;i++){var val,name;val=i==keys.length-1?(name=keys.join(" "),value):(name=keys.slice(0,i+1).join(" "),"...");var prev=copy[name];if(prev){if(prev!=val)throw new Error("Inconsistent bindings for "+name)}else copy[name]=val}delete keymap[keyname]}for(var prop in copy)keymap[prop]=copy[prop];return keymap};var lookupKey=CodeMirror.lookupKey=function(key,map,handle,context){var found=(map=getKeyMap(map)).call?map.call(key,context):map[key];if(!1===found)return"nothing";if("..."===found)return"multi";if(null!=found&&handle(found))return"handled";if(map.fallthrough){if("[object Array]"!=Object.prototype.toString.call(map.fallthrough))return lookupKey(key,map.fallthrough,handle,context);for(var i=0;i<map.fallthrough.length;i++){var result=lookupKey(key,map.fallthrough[i],handle,context);if(result)return result}}},isModifierKey=CodeMirror.isModifierKey=function(value){var name="string"==typeof value?value:keyNames[value.keyCode];return"Ctrl"==name||"Alt"==name||"Shift"==name||"Mod"==name},keyName=CodeMirror.keyName=function(event,noShift){if(presto&&34==event.keyCode&&event.char)return!1;var base=keyNames[event.keyCode],name=base;return null!=name&&!event.altGraphKey&&(event.altKey&&"Alt"!=base&&(name="Alt-"+name),(flipCtrlCmd?event.metaKey:event.ctrlKey)&&"Ctrl"!=base&&(name="Ctrl-"+name),(flipCtrlCmd?event.ctrlKey:event.metaKey)&&"Cmd"!=base&&(name="Cmd-"+name),!noShift&&event.shiftKey&&"Shift"!=base&&(name="Shift-"+name),name)};function getKeyMap(val){return"string"==typeof val?keyMap[val]:val}CodeMirror.fromTextArea=function(textarea,options){if((options=options?copyObj(options):{}).value=textarea.value,!options.tabindex&&textarea.tabIndex&&(options.tabindex=textarea.tabIndex),!options.placeholder&&textarea.placeholder&&(options.placeholder=textarea.placeholder),null==options.autofocus){var hasFocus=activeElt();options.autofocus=hasFocus==textarea||null!=textarea.getAttribute("autofocus")&&hasFocus==document.body}function save(){textarea.value=cm.getValue()}if(textarea.form&&(on(textarea.form,"submit",save),!options.leaveSubmitMethodAlone)){var form=textarea.form,realSubmit=form.submit;try{var wrappedSubmit=form.submit=function(){save(),form.submit=realSubmit,form.submit(),form.submit=wrappedSubmit}}catch(e){}}options.finishInit=function(cm){cm.save=save,cm.getTextArea=function(){return textarea},cm.toTextArea=function(){cm.toTextArea=isNaN,save(),textarea.parentNode.removeChild(cm.getWrapperElement()),textarea.style.display="",textarea.form&&(off(textarea.form,"submit",save),"function"==typeof textarea.form.submit&&(textarea.form.submit=realSubmit))}},textarea.style.display="none";var cm=CodeMirror(function(node){textarea.parentNode.insertBefore(node,textarea.nextSibling)},options);return cm};var StringStream=CodeMirror.StringStream=function(string,tabSize){this.pos=this.start=0,this.string=string,this.tabSize=tabSize||8,this.lastColumnPos=this.lastColumnValue=0,this.lineStart=0};StringStream.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==this.lineStart},peek:function(){return this.string.charAt(this.pos)||void 0},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(match){var ch=this.string.charAt(this.pos);if("string"==typeof match)var ok=ch==match;else ok=ch&&(match.test?match.test(ch):match(ch));if(ok)return++this.pos,ch},eatWhile:function(match){for(var start=this.pos;this.eat(match););return this.pos>start},eatSpace:function(){for(var start=this.pos;/[\s\u00a0]/.test(this.string.charAt(this.pos));)++this.pos;return this.pos>start},skipToEnd:function(){this.pos=this.string.length},skipTo:function(ch){var found=this.string.indexOf(ch,this.pos);if(-1<found)return this.pos=found,!0},backUp:function(n){this.pos-=n},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=countColumn(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},indentation:function(){return countColumn(this.string,null,this.tabSize)-(this.lineStart?countColumn(this.string,this.lineStart,this.tabSize):0)},match:function(pattern,consume,caseInsensitive){if("string"!=typeof pattern){var match=this.string.slice(this.pos).match(pattern);return match&&0<match.index?null:(match&&!1!==consume&&(this.pos+=match[0].length),match)}var cased=function(str){return caseInsensitive?str.toLowerCase():str};if(cased(this.string.substr(this.pos,pattern.length))==cased(pattern))return!1!==consume&&(this.pos+=pattern.length),!0},current:function(){return this.string.slice(this.start,this.pos)},hideFirstChars:function(n,inner){this.lineStart+=n;try{return inner()}finally{this.lineStart-=n}}};var nextMarkerId=0,TextMarker=CodeMirror.TextMarker=function(doc,type){this.lines=[],this.type=type,this.doc=doc,this.id=++nextMarkerId};eventMixin(TextMarker),TextMarker.prototype.clear=function(){if(!this.explicitlyCleared){var cm=this.doc.cm,withOp=cm&&!cm.curOp;if(withOp&&startOperation(cm),hasHandler(this,"clear")){var found=this.find();found&&signalLater(this,"clear",found.from,found.to)}for(var min=null,max=null,i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);cm&&!this.collapsed?regLineChange(cm,lineNo(line),"text"):cm&&(null!=span.to&&(max=lineNo(line)),null!=span.from&&(min=lineNo(line))),line.markedSpans=removeMarkedSpan(line.markedSpans,span),null==span.from&&this.collapsed&&!lineIsHidden(this.doc,line)&&cm&&updateLineHeight(line,textHeight(cm.display))}if(cm&&this.collapsed&&!cm.options.lineWrapping)for(i=0;i<this.lines.length;++i){var visual=visualLine(this.lines[i]),len=lineLength(visual);len>cm.display.maxLineLength&&(cm.display.maxLine=visual,cm.display.maxLineLength=len,cm.display.maxLineChanged=!0)}null!=min&&cm&&this.collapsed&&regChange(cm,min,max+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,cm&&reCheckSelection(cm.doc)),cm&&signalLater(cm,"markerCleared",cm,this),withOp&&endOperation(cm),this.parent&&this.parent.clear()}},TextMarker.prototype.find=function(side,lineObj){var from,to;null==side&&"bookmark"==this.type&&(side=1);for(var i=0;i<this.lines.length;++i){var line=this.lines[i],span=getMarkedSpanFor(line.markedSpans,this);if(null!=span.from&&(from=Pos(lineObj?line:lineNo(line),span.from),-1==side))return from;if(null!=span.to&&(to=Pos(lineObj?line:lineNo(line),span.to),1==side))return to}return from&&{from:from,to:to}},TextMarker.prototype.changed=function(){var pos=this.find(-1,!0),widget=this,cm=this.doc.cm;pos&&cm&&runInOp(cm,function(){var line=pos.line,lineN=lineNo(pos.line),view=findViewForLine(cm,lineN);if(view&&(clearLineMeasurementCacheFor(view),cm.curOp.selectionChanged=cm.curOp.forceUpdate=!0),cm.curOp.updateMaxLine=!0,!lineIsHidden(widget.doc,line)&&null!=widget.height){var oldHeight=widget.height;widget.height=null;var dHeight=widgetHeight(widget)-oldHeight;dHeight&&updateLineHeight(line,line.height+dHeight)}})},TextMarker.prototype.attachLine=function(line){if(!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;op.maybeHiddenMarkers&&-1!=indexOf(op.maybeHiddenMarkers,this)||(op.maybeUnhiddenMarkers||(op.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(line)},TextMarker.prototype.detachLine=function(line){if(this.lines.splice(indexOf(this.lines,line),1),!this.lines.length&&this.doc.cm){var op=this.doc.cm.curOp;(op.maybeHiddenMarkers||(op.maybeHiddenMarkers=[])).push(this)}};nextMarkerId=0;function markText(doc,from,to,options,type){if(options&&options.shared)return function(doc,from,to,options,type){(options=copyObj(options)).shared=!1;var markers=[markText(doc,from,to,options,type)],primary=markers[0],widget=options.widgetNode;return linkedDocs(doc,function(doc){widget&&(options.widgetNode=widget.cloneNode(!0)),markers.push(markText(doc,clipPos(doc,from),clipPos(doc,to),options,type));for(var i=0;i<doc.linked.length;++i)if(doc.linked[i].isParent)return;primary=lst(markers)}),new SharedTextMarker(markers,primary)}(doc,from,to,options,type);if(doc.cm&&!doc.cm.curOp)return operation(doc.cm,markText)(doc,from,to,options,type);var marker=new TextMarker(doc,type),diff=cmp(from,to);if(options&&copyObj(options,marker,!1),0<diff||0==diff&&!1!==marker.clearWhenEmpty)return marker;if(marker.replacedWith&&(marker.collapsed=!0,marker.widgetNode=elt("span",[marker.replacedWith],"CodeMirror-widget"),options.handleMouseEvents||marker.widgetNode.setAttribute("cm-ignore-events","true"),options.insertLeft&&(marker.widgetNode.insertLeft=!0)),marker.collapsed){if(conflictingCollapsedRange(doc,from.line,from,to,marker)||from.line!=to.line&&conflictingCollapsedRange(doc,to.line,from,to,marker))throw new Error("Inserting collapsed marker partially overlapping an existing one");sawCollapsedSpans=!0}marker.addToHistory&&addChangeToHistory(doc,{from:from,to:to,origin:"markText"},doc.sel,NaN);var updateMaxLine,curLine=from.line,cm=doc.cm;if(doc.iter(curLine,to.line+1,function(line){cm&&marker.collapsed&&!cm.options.lineWrapping&&visualLine(line)==cm.display.maxLine&&(updateMaxLine=!0),marker.collapsed&&curLine!=from.line&&updateLineHeight(line,0),function(line,span){line.markedSpans=line.markedSpans?line.markedSpans.concat([span]):[span],span.marker.attachLine(line)}(line,new MarkedSpan(marker,curLine==from.line?from.ch:null,curLine==to.line?to.ch:null)),++curLine}),marker.collapsed&&doc.iter(from.line,to.line+1,function(line){lineIsHidden(doc,line)&&updateLineHeight(line,0)}),marker.clearOnEnter&&on(marker,"beforeCursorEnter",function(){marker.clear()}),marker.readOnly&&(sawReadOnlySpans=!0,(doc.history.done.length||doc.history.undone.length)&&doc.clearHistory()),marker.collapsed&&(marker.id=++nextMarkerId,marker.atomic=!0),cm){if(updateMaxLine&&(cm.curOp.updateMaxLine=!0),marker.collapsed)regChange(cm,from.line,to.line+1);else if(marker.className||marker.title||marker.startStyle||marker.endStyle||marker.css)for(var i=from.line;i<=to.line;i++)regLineChange(cm,i,"text");marker.atomic&&reCheckSelection(cm.doc),signalLater(cm,"markerAdded",cm,marker)}return marker}var SharedTextMarker=CodeMirror.SharedTextMarker=function(markers,primary){this.markers=markers,this.primary=primary;for(var i=0;i<markers.length;++i)markers[i].parent=this};function findSharedMarkers(doc){return doc.findMarks(Pos(doc.first,0),doc.clipPos(Pos(doc.lastLine())),function(m){return m.parent})}function detachSharedMarkers(markers){for(var i=0;i<markers.length;i++){var marker=markers[i],linked=[marker.primary.doc];linkedDocs(marker.primary.doc,function(d){linked.push(d)});for(var j=0;j<marker.markers.length;j++){var subMarker=marker.markers[j];-1==indexOf(linked,subMarker.doc)&&(subMarker.parent=null,marker.markers.splice(j--,1))}}}function MarkedSpan(marker,from,to){this.marker=marker,this.from=from,this.to=to}function getMarkedSpanFor(spans,marker){if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];if(span.marker==marker)return span}}function removeMarkedSpan(spans,span){for(var r,i=0;i<spans.length;++i)spans[i]!=span&&(r||(r=[])).push(spans[i]);return r}function stretchSpansOverChange(doc,change){if(change.full)return null;var oldFirst=isLine(doc,change.from.line)&&getLine(doc,change.from.line).markedSpans,oldLast=isLine(doc,change.to.line)&&getLine(doc,change.to.line).markedSpans;if(!oldFirst&&!oldLast)return null;var startCh=change.from.ch,endCh=change.to.ch,isInsert=0==cmp(change.from,change.to),first=function(old,startCh,isInsert){if(old)for(var nw,i=0;i<old.length;++i){var span=old[i],marker=span.marker;if(null==span.from||(marker.inclusiveLeft?span.from<=startCh:span.from<startCh)||span.from==startCh&&"bookmark"==marker.type&&(!isInsert||!span.marker.insertLeft)){var endsAfter=null==span.to||(marker.inclusiveRight?span.to>=startCh:span.to>startCh);(nw||(nw=[])).push(new MarkedSpan(marker,span.from,endsAfter?null:span.to))}}return nw}(oldFirst,startCh,isInsert),last=function(old,endCh,isInsert){if(old)for(var nw,i=0;i<old.length;++i){var span=old[i],marker=span.marker;if(null==span.to||(marker.inclusiveRight?span.to>=endCh:span.to>endCh)||span.from==endCh&&"bookmark"==marker.type&&(!isInsert||span.marker.insertLeft)){var startsBefore=null==span.from||(marker.inclusiveLeft?span.from<=endCh:span.from<endCh);(nw||(nw=[])).push(new MarkedSpan(marker,startsBefore?null:span.from-endCh,null==span.to?null:span.to-endCh))}}return nw}(oldLast,endCh,isInsert),sameLine=1==change.text.length,offset=lst(change.text).length+(sameLine?startCh:0);if(first)for(var i=0;i<first.length;++i){if(null==(span=first[i]).to)(found=getMarkedSpanFor(last,span.marker))?sameLine&&(span.to=null==found.to?null:found.to+offset):span.to=startCh}if(last)for(i=0;i<last.length;++i){var span,found;if(null!=(span=last[i]).to&&(span.to+=offset),null==span.from)(found=getMarkedSpanFor(first,span.marker))||(span.from=offset,sameLine&&(first||(first=[])).push(span));else span.from+=offset,sameLine&&(first||(first=[])).push(span)}first&&(first=clearEmptySpans(first)),last&&last!=first&&(last=clearEmptySpans(last));var newMarkers=[first];if(!sameLine){var gapMarkers,gap=change.text.length-2;if(0<gap&&first)for(i=0;i<first.length;++i)null==first[i].to&&(gapMarkers||(gapMarkers=[])).push(new MarkedSpan(first[i].marker,null,null));for(i=0;i<gap;++i)newMarkers.push(gapMarkers);newMarkers.push(last)}return newMarkers}function clearEmptySpans(spans){for(var i=0;i<spans.length;++i){var span=spans[i];null!=span.from&&span.from==span.to&&!1!==span.marker.clearWhenEmpty&&spans.splice(i--,1)}return spans.length?spans:null}function mergeOldSpans(doc,change){var old=function(doc,change){var found=change["spans_"+doc.id];if(!found)return null;for(var i=0,nw=[];i<change.text.length;++i)nw.push(removeClearedSpans(found[i]));return nw}(doc,change),stretched=stretchSpansOverChange(doc,change);if(!old)return stretched;if(!stretched)return old;for(var i=0;i<old.length;++i){var oldCur=old[i],stretchCur=stretched[i];if(oldCur&&stretchCur)spans:for(var j=0;j<stretchCur.length;++j){for(var span=stretchCur[j],k=0;k<oldCur.length;++k)if(oldCur[k].marker==span.marker)continue spans;oldCur.push(span)}else stretchCur&&(old[i]=stretchCur)}return old}function detachMarkedSpans(line){var spans=line.markedSpans;if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.detachLine(line);line.markedSpans=null}}function attachMarkedSpans(line,spans){if(spans){for(var i=0;i<spans.length;++i)spans[i].marker.attachLine(line);line.markedSpans=spans}}function extraLeft(marker){return marker.inclusiveLeft?-1:0}function extraRight(marker){return marker.inclusiveRight?1:0}function compareCollapsedMarkers(a,b){var lenDiff=a.lines.length-b.lines.length;if(0!=lenDiff)return lenDiff;var aPos=a.find(),bPos=b.find(),fromCmp=cmp(aPos.from,bPos.from)||extraLeft(a)-extraLeft(b);if(fromCmp)return-fromCmp;var toCmp=cmp(aPos.to,bPos.to)||extraRight(a)-extraRight(b);return toCmp||b.id-a.id}function collapsedSpanAtSide(line,start){var found,sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i)(sp=sps[i]).marker.collapsed&&null==(start?sp.from:sp.to)&&(!found||compareCollapsedMarkers(found,sp.marker)<0)&&(found=sp.marker);return found}function collapsedSpanAtStart(line){return collapsedSpanAtSide(line,!0)}function collapsedSpanAtEnd(line){return collapsedSpanAtSide(line,!1)}function conflictingCollapsedRange(doc,lineNo,from,to,marker){var line=getLine(doc,lineNo),sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var i=0;i<sps.length;++i){var sp=sps[i];if(sp.marker.collapsed){var found=sp.marker.find(0),fromCmp=cmp(found.from,from)||extraLeft(sp.marker)-extraLeft(marker),toCmp=cmp(found.to,to)||extraRight(sp.marker)-extraRight(marker);if(!(0<=fromCmp&&toCmp<=0||fromCmp<=0&&0<=toCmp)&&(fromCmp<=0&&(0<cmp(found.to,from)||sp.marker.inclusiveRight&&marker.inclusiveLeft)||0<=fromCmp&&(cmp(found.from,to)<0||sp.marker.inclusiveLeft&&marker.inclusiveRight)))return!0}}}function visualLine(line){for(var merged;merged=collapsedSpanAtStart(line);)line=merged.find(-1,!0).line;return line}function visualLineNo(doc,lineN){var line=getLine(doc,lineN),vis=visualLine(line);return line==vis?lineN:lineNo(vis)}function visualLineEndNo(doc,lineN){if(lineN>doc.lastLine())return lineN;var merged,line=getLine(doc,lineN);if(!lineIsHidden(doc,line))return lineN;for(;merged=collapsedSpanAtEnd(line);)line=merged.find(1,!0).line;return lineNo(line)+1}function lineIsHidden(doc,line){var sps=sawCollapsedSpans&&line.markedSpans;if(sps)for(var sp,i=0;i<sps.length;++i)if((sp=sps[i]).marker.collapsed){if(null==sp.from)return!0;if(!sp.marker.widgetNode&&0==sp.from&&sp.marker.inclusiveLeft&&lineIsHiddenInner(doc,line,sp))return!0}}function lineIsHiddenInner(doc,line,span){if(null==span.to){var end=span.marker.find(1,!0);return lineIsHiddenInner(doc,end.line,getMarkedSpanFor(end.line.markedSpans,span.marker))}if(span.marker.inclusiveRight&&span.to==line.text.length)return!0;for(var sp,i=0;i<line.markedSpans.length;++i)if((sp=line.markedSpans[i]).marker.collapsed&&!sp.marker.widgetNode&&sp.from==span.to&&(null==sp.to||sp.to!=span.from)&&(sp.marker.inclusiveLeft||span.marker.inclusiveRight)&&lineIsHiddenInner(doc,line,sp))return!0}eventMixin(SharedTextMarker),SharedTextMarker.prototype.clear=function(){if(!this.explicitlyCleared){this.explicitlyCleared=!0;for(var i=0;i<this.markers.length;++i)this.markers[i].clear();signalLater(this,"clear")}},SharedTextMarker.prototype.find=function(side,lineObj){return this.primary.find(side,lineObj)};var LineWidget=CodeMirror.LineWidget=function(doc,node,options){if(options)for(var opt in options)options.hasOwnProperty(opt)&&(this[opt]=options[opt]);this.doc=doc,this.node=node};function adjustScrollWhenAboveVisible(cm,line,diff){heightAtLine(line)<(cm.curOp&&cm.curOp.scrollTop||cm.doc.scrollTop)&&addToScrollPos(cm,null,diff)}function widgetHeight(widget){if(null!=widget.height)return widget.height;var cm=widget.doc.cm;if(!cm)return 0;if(!contains(document.body,widget.node)){var parentStyle="position: relative;";widget.coverGutter&&(parentStyle+="margin-left: -"+cm.display.gutters.offsetWidth+"px;"),widget.noHScroll&&(parentStyle+="width: "+cm.display.wrapper.clientWidth+"px;"),removeChildrenAndAdd(cm.display.measure,elt("div",[widget.node],null,parentStyle))}return widget.height=widget.node.parentNode.offsetHeight}eventMixin(LineWidget),LineWidget.prototype.clear=function(){var cm=this.doc.cm,ws=this.line.widgets,line=this.line,no=lineNo(line);if(null!=no&&ws){for(var i=0;i<ws.length;++i)ws[i]==this&&ws.splice(i--,1);ws.length||(line.widgets=null);var height=widgetHeight(this);updateLineHeight(line,Math.max(0,line.height-height)),cm&&runInOp(cm,function(){adjustScrollWhenAboveVisible(cm,line,-height),regLineChange(cm,no,"widget")})}},LineWidget.prototype.changed=function(){var oldH=this.height,cm=this.doc.cm,line=this.line;this.height=null;var diff=widgetHeight(this)-oldH;diff&&(updateLineHeight(line,line.height+diff),cm&&runInOp(cm,function(){cm.curOp.forceUpdate=!0,adjustScrollWhenAboveVisible(cm,line,diff)}))};var Line=CodeMirror.Line=function(text,markedSpans,estimateHeight){this.text=text,attachMarkedSpans(this,markedSpans),this.height=estimateHeight?estimateHeight(this):1};function cleanUpLine(line){line.parent=null,detachMarkedSpans(line)}function extractLineClasses(type,output){if(type)for(;;){var lineClass=type.match(/(?:^|\s+)line-(background-)?(\S+)/);if(!lineClass)break;type=type.slice(0,lineClass.index)+type.slice(lineClass.index+lineClass[0].length);var prop=lineClass[1]?"bgClass":"textClass";null==output[prop]?output[prop]=lineClass[2]:new RegExp("(?:^|s)"+lineClass[2]+"(?:$|s)").test(output[prop])||(output[prop]+=" "+lineClass[2])}return type}function callBlankLine(mode,state){if(mode.blankLine)return mode.blankLine(state);if(mode.innerMode){var inner=CodeMirror.innerMode(mode,state);return inner.mode.blankLine?inner.mode.blankLine(inner.state):void 0}}function readToken(mode,stream,state,inner){for(var i=0;i<10;i++){inner&&(inner[0]=CodeMirror.innerMode(mode,state).mode);var style=mode.token(stream,state);if(stream.pos>stream.start)return style}throw new Error("Mode "+mode.name+" failed to advance stream.")}function takeToken(cm,pos,precise,asArray){function getObj(copy){return{start:stream.start,end:stream.pos,string:stream.current(),type:style||null,state:copy?copyState(doc.mode,state):state}}var style,doc=cm.doc,mode=doc.mode;pos=clipPos(doc,pos);var tokens,line=getLine(doc,pos.line),state=getStateBefore(cm,pos.line,precise),stream=new StringStream(line.text,cm.options.tabSize);for(asArray&&(tokens=[]);(asArray||stream.pos<pos.ch)&&!stream.eol();)stream.start=stream.pos,style=readToken(mode,stream,state),asArray&&tokens.push(getObj(!0));return asArray?tokens:getObj()}function runMode(cm,text,mode,state,f,lineClasses,forceToEnd){var flattenSpans=mode.flattenSpans;null==flattenSpans&&(flattenSpans=cm.options.flattenSpans);var style,curStart=0,curStyle=null,stream=new StringStream(text,cm.options.tabSize),inner=cm.options.addModeClass&&[null];for(""==text&&extractLineClasses(callBlankLine(mode,state),lineClasses);!stream.eol();){if(style=stream.pos>cm.options.maxHighlightLength?(flattenSpans=!1,forceToEnd&&processLine(cm,text,state,stream.pos),stream.pos=text.length,null):extractLineClasses(readToken(mode,stream,state,inner),lineClasses),inner){var mName=inner[0].name;mName&&(style="m-"+(style?mName+" "+style:mName))}if(!flattenSpans||curStyle!=style){for(;curStart<stream.start;)f(curStart=Math.min(stream.start,curStart+5e4),curStyle);curStyle=style}stream.start=stream.pos}for(;curStart<stream.pos;){var pos=Math.min(stream.pos,curStart+5e4);f(pos,curStyle),curStart=pos}}function highlightLine(cm,line,state,forceToEnd){var st=[cm.state.modeGen],lineClasses={};runMode(cm,line.text,cm.doc.mode,state,function(end,style){st.push(end,style)},lineClasses,forceToEnd);for(var o=0;o<cm.state.overlays.length;++o){var overlay=cm.state.overlays[o],i=1,at=0;runMode(cm,line.text,overlay.mode,!0,function(end,style){for(var start=i;at<end;){var i_end=st[i];end<i_end&&st.splice(i,1,end,st[i+1],i_end),i+=2,at=Math.min(end,i_end)}if(style)if(overlay.opaque)st.splice(start,i-start,end,"cm-overlay "+style),i=start+2;else for(;start<i;start+=2){var cur=st[start+1];st[start+1]=(cur?cur+" ":"")+"cm-overlay "+style}},lineClasses)}return{styles:st,classes:lineClasses.bgClass||lineClasses.textClass?lineClasses:null}}function getLineStyles(cm,line,updateFrontier){if(!line.styles||line.styles[0]!=cm.state.modeGen){var state=getStateBefore(cm,lineNo(line)),result=highlightLine(cm,line,line.text.length>cm.options.maxHighlightLength?copyState(cm.doc.mode,state):state);line.stateAfter=state,line.styles=result.styles,result.classes?line.styleClasses=result.classes:line.styleClasses&&(line.styleClasses=null),updateFrontier===cm.doc.frontier&&cm.doc.frontier++}return line.styles}function processLine(cm,text,state,startAt){var mode=cm.doc.mode,stream=new StringStream(text,cm.options.tabSize);for(stream.start=stream.pos=startAt||0,""==text&&callBlankLine(mode,state);!stream.eol();)readToken(mode,stream,state),stream.start=stream.pos}eventMixin(Line),Line.prototype.lineNo=function(){return lineNo(this)};var styleToClassCache={},styleToClassCacheWithMode={};function interpretTokenStyle(style,options){if(!style||/^\s*$/.test(style))return null;var cache=options.addModeClass?styleToClassCacheWithMode:styleToClassCache;return cache[style]||(cache[style]=style.replace(/\S+/g,"cm-$&"))}function buildLineContent(cm,lineView){var content=elt("span",null,null,webkit?"padding-right: .1px":null),builder={pre:elt("pre",[content],"CodeMirror-line"),content:content,col:0,pos:0,cm:cm,splitSpaces:(ie||webkit)&&cm.getOption("lineWrapping")};lineView.measure={};for(var i=0;i<=(lineView.rest?lineView.rest.length:0);i++){var order,line=i?lineView.rest[i-1]:lineView.line;builder.pos=0,builder.addToken=buildToken,hasBadBidiRects(cm.display.measure)&&(order=getOrder(line))&&(builder.addToken=buildTokenBadBidi(builder.addToken,order)),builder.map=[],insertLineContent(line,builder,getLineStyles(cm,line,lineView!=cm.display.externalMeasured&&lineNo(line))),line.styleClasses&&(line.styleClasses.bgClass&&(builder.bgClass=joinClasses(line.styleClasses.bgClass,builder.bgClass||"")),line.styleClasses.textClass&&(builder.textClass=joinClasses(line.styleClasses.textClass,builder.textClass||""))),0==builder.map.length&&builder.map.push(0,0,builder.content.appendChild(zeroWidthElement(cm.display.measure))),0==i?(lineView.measure.map=builder.map,lineView.measure.cache={}):((lineView.measure.maps||(lineView.measure.maps=[])).push(builder.map),(lineView.measure.caches||(lineView.measure.caches=[])).push({}))}return webkit&&/\bcm-tab\b/.test(builder.content.lastChild.className)&&(builder.content.className="cm-tab-wrap-hack"),signal(cm,"renderLine",cm,lineView.line,builder.pre),builder.pre.className&&(builder.textClass=joinClasses(builder.pre.className,builder.textClass||"")),builder}function buildToken(builder,text,style,startStyle,endStyle,title,css){if(text){var displayText=builder.splitSpaces?text.replace(/ {3,}/g,splitSpaces):text,special=builder.cm.state.specialChars,mustWrap=!1;if(special.test(text)){content=document.createDocumentFragment();for(var pos=0;;){special.lastIndex=pos;var m=special.exec(text),skipped=m?m.index-pos:text.length-pos;if(skipped){var txt=document.createTextNode(displayText.slice(pos,pos+skipped));ie&&ie_version<9?content.appendChild(elt("span",[txt])):content.appendChild(txt),builder.map.push(builder.pos,builder.pos+skipped,txt),builder.col+=skipped,builder.pos+=skipped}if(!m)break;if(pos+=skipped+1,"\t"==m[0]){var tabSize=builder.cm.options.tabSize,tabWidth=tabSize-builder.col%tabSize;(txt=content.appendChild(elt("span",spaceStr(tabWidth),"cm-tab"))).setAttribute("role","presentation"),txt.setAttribute("cm-text","\t"),builder.col+=tabWidth}else if("\r"==m[0]||"\n"==m[0]){(txt=content.appendChild(elt("span","\r"==m[0]?"␍":"␤","cm-invalidchar"))).setAttribute("cm-text",m[0]),builder.col+=1}else{(txt=builder.cm.options.specialCharPlaceholder(m[0])).setAttribute("cm-text",m[0]),ie&&ie_version<9?content.appendChild(elt("span",[txt])):content.appendChild(txt),builder.col+=1}builder.map.push(builder.pos,builder.pos+1,txt),builder.pos++}}else{builder.col+=text.length;var content=document.createTextNode(displayText);builder.map.push(builder.pos,builder.pos+text.length,content),ie&&ie_version<9&&(mustWrap=!0),builder.pos+=text.length}if(style||startStyle||endStyle||mustWrap||css){var fullStyle=style||"";startStyle&&(fullStyle+=startStyle),endStyle&&(fullStyle+=endStyle);var token=elt("span",[content],fullStyle,css);return title&&(token.title=title),builder.content.appendChild(token)}builder.content.appendChild(content)}}function splitSpaces(old){for(var out=" ",i=0;i<old.length-2;++i)out+=i%2?" ":" ";return out+=" "}function buildTokenBadBidi(inner,order){return function(builder,text,style,startStyle,endStyle,title,css){style=style?style+" cm-force-border":"cm-force-border";for(var start=builder.pos,end=start+text.length;;){for(var i=0;i<order.length;i++){var part=order[i];if(part.to>start&&part.from<=start)break}if(part.to>=end)return inner(builder,text,style,startStyle,endStyle,title,css);inner(builder,text.slice(0,part.to-start),style,startStyle,null,title,css),startStyle=null,text=text.slice(part.to-start),start=part.to}}}function buildCollapsedSpan(builder,size,marker,ignoreWidget){var widget=!ignoreWidget&&marker.widgetNode;widget&&builder.map.push(builder.pos,builder.pos+size,widget),!ignoreWidget&&builder.cm.display.input.needsContentAttribute&&(widget||(widget=builder.content.appendChild(document.createElement("span"))),widget.setAttribute("cm-marker",marker.id)),widget&&(builder.cm.display.input.setUneditable(widget),builder.content.appendChild(widget)),builder.pos+=size}function insertLineContent(line,builder,styles){var spans=line.markedSpans,allText=line.text,at=0;if(spans)for(var style,css,spanStyle,spanEndStyle,spanStartStyle,title,collapsed,len=allText.length,pos=0,text=(i=1,""),nextChange=0;;){if(nextChange==pos){spanStyle=spanEndStyle=spanStartStyle=title=css="",collapsed=null,nextChange=1/0;for(var endStyles,foundBookmarks=[],j=0;j<spans.length;++j){var sp=spans[j],m=sp.marker;"bookmark"==m.type&&sp.from==pos&&m.widgetNode?foundBookmarks.push(m):sp.from<=pos&&(null==sp.to||sp.to>pos||m.collapsed&&sp.to==pos&&sp.from==pos)?(null!=sp.to&&sp.to!=pos&&nextChange>sp.to&&(nextChange=sp.to,spanEndStyle=""),m.className&&(spanStyle+=" "+m.className),m.css&&(css=(css?css+";":"")+m.css),m.startStyle&&sp.from==pos&&(spanStartStyle+=" "+m.startStyle),m.endStyle&&sp.to==nextChange&&(endStyles||(endStyles=[])).push(m.endStyle,sp.to),m.title&&!title&&(title=m.title),m.collapsed&&(!collapsed||compareCollapsedMarkers(collapsed.marker,m)<0)&&(collapsed=sp)):sp.from>pos&&nextChange>sp.from&&(nextChange=sp.from)}if(endStyles)for(j=0;j<endStyles.length;j+=2)endStyles[j+1]==nextChange&&(spanEndStyle+=" "+endStyles[j]);if(collapsed&&(collapsed.from||0)==pos){if(buildCollapsedSpan(builder,(null==collapsed.to?len+1:collapsed.to)-pos,collapsed.marker,null==collapsed.from),null==collapsed.to)return;collapsed.to==pos&&(collapsed=!1)}if(!collapsed&&foundBookmarks.length)for(j=0;j<foundBookmarks.length;++j)buildCollapsedSpan(builder,0,foundBookmarks[j])}if(len<=pos)break;for(var upto=Math.min(len,nextChange);;){if(text){var end=pos+text.length;if(!collapsed){var tokenText=upto<end?text.slice(0,upto-pos):text;builder.addToken(builder,tokenText,style?style+spanStyle:spanStyle,spanStartStyle,pos+tokenText.length==nextChange?spanEndStyle:"",title,css)}if(upto<=end){text=text.slice(upto-pos),pos=upto;break}pos=end,spanStartStyle=""}text=allText.slice(at,at=styles[i++]),style=interpretTokenStyle(styles[i++],builder.cm.options)}}else for(var i=1;i<styles.length;i+=2)builder.addToken(builder,allText.slice(at,at=styles[i]),interpretTokenStyle(styles[i+1],builder.cm.options))}function isWholeLineUpdate(doc,change){return 0==change.from.ch&&0==change.to.ch&&""==lst(change.text)&&(!doc.cm||doc.cm.options.wholeLineUpdateBefore)}function updateDoc(doc,change,markedSpans,estimateHeight){function spansFor(n){return markedSpans?markedSpans[n]:null}function update(line,text,spans){!function(line,text,markedSpans,estimateHeight){line.text=text,line.stateAfter&&(line.stateAfter=null),line.styles&&(line.styles=null),null!=line.order&&(line.order=null),detachMarkedSpans(line),attachMarkedSpans(line,markedSpans);var estHeight=estimateHeight?estimateHeight(line):1;estHeight!=line.height&&updateLineHeight(line,estHeight)}(line,text,spans,estimateHeight),signalLater(line,"change",line,change)}function linesFor(start,end){for(var i=start,result=[];i<end;++i)result.push(new Line(text[i],spansFor(i),estimateHeight));return result}var from=change.from,to=change.to,text=change.text,firstLine=getLine(doc,from.line),lastLine=getLine(doc,to.line),lastText=lst(text),lastSpans=spansFor(text.length-1),nlines=to.line-from.line;if(change.full)doc.insert(0,linesFor(0,text.length)),doc.remove(text.length,doc.size-text.length);else if(isWholeLineUpdate(doc,change)){var added=linesFor(0,text.length-1);update(lastLine,lastLine.text,lastSpans),nlines&&doc.remove(from.line,nlines),added.length&&doc.insert(from.line,added)}else if(firstLine==lastLine){if(1==text.length)update(firstLine,firstLine.text.slice(0,from.ch)+lastText+firstLine.text.slice(to.ch),lastSpans);else(added=linesFor(1,text.length-1)).push(new Line(lastText+firstLine.text.slice(to.ch),lastSpans,estimateHeight)),update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0)),doc.insert(from.line+1,added)}else if(1==text.length)update(firstLine,firstLine.text.slice(0,from.ch)+text[0]+lastLine.text.slice(to.ch),spansFor(0)),doc.remove(from.line+1,nlines);else{update(firstLine,firstLine.text.slice(0,from.ch)+text[0],spansFor(0)),update(lastLine,lastText+lastLine.text.slice(to.ch),lastSpans);added=linesFor(1,text.length-1);1<nlines&&doc.remove(from.line+1,nlines-1),doc.insert(from.line+1,added)}signalLater(doc,"change",doc,change)}function LeafChunk(lines){this.lines=lines,this.parent=null;for(var i=0,height=0;i<lines.length;++i)lines[i].parent=this,height+=lines[i].height;this.height=height}function BranchChunk(children){this.children=children;for(var size=0,height=0,i=0;i<children.length;++i){var ch=children[i];size+=ch.chunkSize(),height+=ch.height,ch.parent=this}this.size=size,this.height=height,this.parent=null}LeafChunk.prototype={chunkSize:function(){return this.lines.length},removeInner:function(at,n){for(var i=at,e=at+n;i<e;++i){var line=this.lines[i];this.height-=line.height,cleanUpLine(line),signalLater(line,"delete")}this.lines.splice(at,n)},collapse:function(lines){lines.push.apply(lines,this.lines)},insertInner:function(at,lines,height){this.height+=height,this.lines=this.lines.slice(0,at).concat(lines).concat(this.lines.slice(at));for(var i=0;i<lines.length;++i)lines[i].parent=this},iterN:function(at,n,op){for(var e=at+n;at<e;++at)if(op(this.lines[at]))return!0}},BranchChunk.prototype={chunkSize:function(){return this.size},removeInner:function(at,n){this.size-=n;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var rm=Math.min(n,sz-at),oldHeight=child.height;if(child.removeInner(at,rm),this.height-=oldHeight-child.height,sz==rm&&(this.children.splice(i--,1),child.parent=null),0==(n-=rm))break;at=0}else at-=sz}if(this.size-n<25&&(1<this.children.length||!(this.children[0]instanceof LeafChunk))){var lines=[];this.collapse(lines),this.children=[new LeafChunk(lines)],this.children[0].parent=this}},collapse:function(lines){for(var i=0;i<this.children.length;++i)this.children[i].collapse(lines)},insertInner:function(at,lines,height){this.size+=lines.length,this.height+=height;for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<=sz){if(child.insertInner(at,lines,height),child.lines&&50<child.lines.length){for(;50<child.lines.length;){var newleaf=new LeafChunk(child.lines.splice(child.lines.length-25,25));child.height-=newleaf.height,this.children.splice(i+1,0,newleaf),newleaf.parent=this}this.maybeSpill()}break}at-=sz}},maybeSpill:function(){if(!(this.children.length<=10)){var me=this;do{var sibling=new BranchChunk(me.children.splice(me.children.length-5,5));if(me.parent){me.size-=sibling.size,me.height-=sibling.height;var myIndex=indexOf(me.parent.children,me);me.parent.children.splice(myIndex+1,0,sibling)}else{var copy=new BranchChunk(me.children);(copy.parent=me).children=[copy,sibling],me=copy}sibling.parent=me.parent}while(10<me.children.length);me.parent.maybeSpill()}},iterN:function(at,n,op){for(var i=0;i<this.children.length;++i){var child=this.children[i],sz=child.chunkSize();if(at<sz){var used=Math.min(n,sz-at);if(child.iterN(at,used,op))return!0;if(0==(n-=used))break;at=0}else at-=sz}}};var nextDocId=0,Doc=CodeMirror.Doc=function(text,mode,firstLine,lineSep){if(!(this instanceof Doc))return new Doc(text,mode,firstLine,lineSep);null==firstLine&&(firstLine=0),BranchChunk.call(this,[new LeafChunk([new Line("",null)])]),this.first=firstLine,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.cleanGeneration=1,this.frontier=firstLine;var start=Pos(firstLine,0);this.sel=simpleSelection(start),this.history=new History(null),this.id=++nextDocId,this.modeOption=mode,this.lineSep=lineSep,this.extend=!1,"string"==typeof text&&(text=this.splitLines(text)),updateDoc(this,{from:start,to:start,text:text}),setSelection(this,simpleSelection(start),sel_dontScroll)};Doc.prototype=createObj(BranchChunk.prototype,{constructor:Doc,iter:function(from,to,op){op?this.iterN(from-this.first,to-from,op):this.iterN(this.first,this.first+this.size,from)},insert:function(at,lines){for(var height=0,i=0;i<lines.length;++i)height+=lines[i].height;this.insertInner(at-this.first,lines,height)},remove:function(at,n){this.removeInner(at-this.first,n)},getValue:function(lineSep){var lines=getLines(this,this.first,this.first+this.size);return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},setValue:docMethodOp(function(code){var top=Pos(this.first,0),last=this.first+this.size-1;makeChange(this,{from:top,to:Pos(last,getLine(this,last).text.length),text:this.splitLines(code),origin:"setValue",full:!0},!0),setSelection(this,simpleSelection(top))}),replaceRange:function(code,from,to,origin){replaceRange(this,code,from=clipPos(this,from),to=to?clipPos(this,to):from,origin)},getRange:function(from,to,lineSep){var lines=getBetween(this,clipPos(this,from),clipPos(this,to));return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},getLine:function(line){var l=this.getLineHandle(line);return l&&l.text},getLineHandle:function(line){if(isLine(this,line))return getLine(this,line)},getLineNumber:function(line){return lineNo(line)},getLineHandleVisualStart:function(line){return"number"==typeof line&&(line=getLine(this,line)),visualLine(line)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(pos){return clipPos(this,pos)},getCursor:function(start){var range=this.sel.primary();return null==start||"head"==start?range.head:"anchor"==start?range.anchor:"end"==start||"to"==start||!1===start?range.to():range.from()},listSelections:function(){return this.sel.ranges},somethingSelected:function(){return this.sel.somethingSelected()},setCursor:docMethodOp(function(line,ch,options){setSimpleSelection(this,clipPos(this,"number"==typeof line?Pos(line,ch||0):line),null,options)}),setSelection:docMethodOp(function(anchor,head,options){setSimpleSelection(this,clipPos(this,anchor),clipPos(this,head||anchor),options)}),extendSelection:docMethodOp(function(head,other,options){extendSelection(this,clipPos(this,head),other&&clipPos(this,other),options)}),extendSelections:docMethodOp(function(heads,options){extendSelections(this,clipPosArray(this,heads),options)}),extendSelectionsBy:docMethodOp(function(f,options){extendSelections(this,clipPosArray(this,map(this.sel.ranges,f)),options)}),setSelections:docMethodOp(function(ranges,primary,options){if(ranges.length){for(var i=0,out=[];i<ranges.length;i++)out[i]=new Range(clipPos(this,ranges[i].anchor),clipPos(this,ranges[i].head));null==primary&&(primary=Math.min(ranges.length-1,this.sel.primIndex)),setSelection(this,normalizeSelection(out,primary),options)}}),addSelection:docMethodOp(function(anchor,head,options){var ranges=this.sel.ranges.slice(0);ranges.push(new Range(clipPos(this,anchor),clipPos(this,head||anchor))),setSelection(this,normalizeSelection(ranges,ranges.length-1),options)}),getSelection:function(lineSep){for(var lines,ranges=this.sel.ranges,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());lines=lines?lines.concat(sel):sel}return!1===lineSep?lines:lines.join(lineSep||this.lineSeparator())},getSelections:function(lineSep){for(var parts=[],ranges=this.sel.ranges,i=0;i<ranges.length;i++){var sel=getBetween(this,ranges[i].from(),ranges[i].to());!1!==lineSep&&(sel=sel.join(lineSep||this.lineSeparator())),parts[i]=sel}return parts},replaceSelection:function(code,collapse,origin){for(var dup=[],i=0;i<this.sel.ranges.length;i++)dup[i]=code;this.replaceSelections(dup,collapse,origin||"+input")},replaceSelections:docMethodOp(function(code,collapse,origin){for(var changes=[],sel=this.sel,i=0;i<sel.ranges.length;i++){var range=sel.ranges[i];changes[i]={from:range.from(),to:range.to(),text:this.splitLines(code[i]),origin:origin}}var newSel=collapse&&"end"!=collapse&&function(doc,changes,hint){for(var out=[],oldPrev=Pos(doc.first,0),newPrev=oldPrev,i=0;i<changes.length;i++){var change=changes[i],from=offsetPos(change.from,oldPrev,newPrev),to=offsetPos(changeEnd(change),oldPrev,newPrev);if(oldPrev=change.to,newPrev=to,"around"==hint){var range=doc.sel.ranges[i],inv=cmp(range.head,range.anchor)<0;out[i]=new Range(inv?to:from,inv?from:to)}else out[i]=new Range(from,from)}return new Selection(out,doc.sel.primIndex)}(this,changes,collapse);for(i=changes.length-1;0<=i;i--)makeChange(this,changes[i]);newSel?setSelectionReplaceHistory(this,newSel):this.cm&&ensureCursorVisible(this.cm)}),undo:docMethodOp(function(){makeChangeFromHistory(this,"undo")}),redo:docMethodOp(function(){makeChangeFromHistory(this,"redo")}),undoSelection:docMethodOp(function(){makeChangeFromHistory(this,"undo",!0)}),redoSelection:docMethodOp(function(){makeChangeFromHistory(this,"redo",!0)}),setExtending:function(val){this.extend=val},getExtending:function(){return this.extend},historySize:function(){for(var hist=this.history,done=0,undone=0,i=0;i<hist.done.length;i++)hist.done[i].ranges||++done;for(i=0;i<hist.undone.length;i++)hist.undone[i].ranges||++undone;return{undo:done,redo:undone}},clearHistory:function(){this.history=new History(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration(!0)},changeGeneration:function(forceSplit){return forceSplit&&(this.history.lastOp=this.history.lastSelOp=this.history.lastOrigin=null),this.history.generation},isClean:function(gen){return this.history.generation==(gen||this.cleanGeneration)},getHistory:function(){return{done:copyHistoryArray(this.history.done),undone:copyHistoryArray(this.history.undone)}},setHistory:function(histData){var hist=this.history=new History(this.history.maxGeneration);hist.done=copyHistoryArray(histData.done.slice(0),null,!0),hist.undone=copyHistoryArray(histData.undone.slice(0),null,!0)},addLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass";if(line[prop]){if(classTest(cls).test(line[prop]))return!1;line[prop]+=" "+cls}else line[prop]=cls;return!0})}),removeLineClass:docMethodOp(function(handle,where,cls){return changeLine(this,handle,"gutter"==where?"gutter":"class",function(line){var prop="text"==where?"textClass":"background"==where?"bgClass":"gutter"==where?"gutterClass":"wrapClass",cur=line[prop];if(!cur)return!1;if(null==cls)line[prop]=null;else{var found=cur.match(classTest(cls));if(!found)return!1;var end=found.index+found[0].length;line[prop]=cur.slice(0,found.index)+(found.index&&end!=cur.length?" ":"")+cur.slice(end)||null}return!0})}),addLineWidget:docMethodOp(function(handle,node,options){return function(doc,handle,node,options){var widget=new LineWidget(doc,node,options),cm=doc.cm;return cm&&widget.noHScroll&&(cm.display.alignWidgets=!0),changeLine(doc,handle,"widget",function(line){var widgets=line.widgets||(line.widgets=[]);if(null==widget.insertAt?widgets.push(widget):widgets.splice(Math.min(widgets.length-1,Math.max(0,widget.insertAt)),0,widget),widget.line=line,cm&&!lineIsHidden(doc,line)){var aboveVisible=heightAtLine(line)<doc.scrollTop;updateLineHeight(line,line.height+widgetHeight(widget)),aboveVisible&&addToScrollPos(cm,null,widget.height),cm.curOp.forceUpdate=!0}return!0}),widget}(this,handle,node,options)}),removeLineWidget:function(widget){widget.clear()},markText:function(from,to,options){return markText(this,clipPos(this,from),clipPos(this,to),options,options&&options.type||"range")},setBookmark:function(pos,options){var realOpts={replacedWith:options&&(null==options.nodeType?options.widget:options),insertLeft:options&&options.insertLeft,clearWhenEmpty:!1,shared:options&&options.shared,handleMouseEvents:options&&options.handleMouseEvents};return markText(this,pos=clipPos(this,pos),pos,realOpts,"bookmark")},findMarksAt:function(pos){var markers=[],spans=getLine(this,(pos=clipPos(this,pos)).line).markedSpans;if(spans)for(var i=0;i<spans.length;++i){var span=spans[i];(null==span.from||span.from<=pos.ch)&&(null==span.to||span.to>=pos.ch)&&markers.push(span.marker.parent||span.marker)}return markers},findMarks:function(from,to,filter){from=clipPos(this,from),to=clipPos(this,to);var found=[],lineNo=from.line;return this.iter(from.line,to.line+1,function(line){var spans=line.markedSpans;if(spans)for(var i=0;i<spans.length;i++){var span=spans[i];lineNo==from.line&&from.ch>span.to||null==span.from&&lineNo!=from.line||lineNo==to.line&&span.from>to.ch||filter&&!filter(span.marker)||found.push(span.marker.parent||span.marker)}++lineNo}),found},getAllMarks:function(){var markers=[];return this.iter(function(line){var sps=line.markedSpans;if(sps)for(var i=0;i<sps.length;++i)null!=sps[i].from&&markers.push(sps[i].marker)}),markers},posFromIndex:function(off){var ch,lineNo=this.first;return this.iter(function(line){var sz=line.text.length+1;if(off<sz)return ch=off,!0;off-=sz,++lineNo}),clipPos(this,Pos(lineNo,ch))},indexFromPos:function(coords){var index=(coords=clipPos(this,coords)).ch;return coords.line<this.first||coords.ch<0?0:(this.iter(this.first,coords.line,function(line){index+=line.text.length+1}),index)},copy:function(copyHistory){var doc=new Doc(getLines(this,this.first,this.first+this.size),this.modeOption,this.first,this.lineSep);return doc.scrollTop=this.scrollTop,doc.scrollLeft=this.scrollLeft,doc.sel=this.sel,doc.extend=!1,copyHistory&&(doc.history.undoDepth=this.history.undoDepth,doc.setHistory(this.getHistory())),doc},linkedDoc:function(options){options||(options={});var from=this.first,to=this.first+this.size;null!=options.from&&options.from>from&&(from=options.from),null!=options.to&&options.to<to&&(to=options.to);var copy=new Doc(getLines(this,from,to),options.mode||this.modeOption,from,this.lineSep);return options.sharedHist&&(copy.history=this.history),(this.linked||(this.linked=[])).push({doc:copy,sharedHist:options.sharedHist}),copy.linked=[{doc:this,isParent:!0,sharedHist:options.sharedHist}],function(doc,markers){for(var i=0;i<markers.length;i++){var marker=markers[i],pos=marker.find(),mFrom=doc.clipPos(pos.from),mTo=doc.clipPos(pos.to);if(cmp(mFrom,mTo)){var subMark=markText(doc,mFrom,mTo,marker.primary,marker.primary.type);marker.markers.push(subMark),subMark.parent=marker}}}(copy,findSharedMarkers(this)),copy},unlinkDoc:function(other){if(other instanceof CodeMirror&&(other=other.doc),this.linked)for(var i=0;i<this.linked.length;++i){if(this.linked[i].doc==other){this.linked.splice(i,1),other.unlinkDoc(this),detachSharedMarkers(findSharedMarkers(this));break}}if(other.history==this.history){var splitIds=[other.id];linkedDocs(other,function(doc){splitIds.push(doc.id)},!0),other.history=new History(null),other.history.done=copyHistoryArray(this.history.done,splitIds),other.history.undone=copyHistoryArray(this.history.undone,splitIds)}},iterLinkedDocs:function(f){linkedDocs(this,f)},getMode:function(){return this.mode},getEditor:function(){return this.cm},splitLines:function(str){return this.lineSep?str.split(this.lineSep):splitLinesAuto(str)},lineSeparator:function(){return this.lineSep||"\n"}}),Doc.prototype.eachLine=Doc.prototype.iter;var dontDelegate="iter insert remove copy getEditor constructor".split(" ");for(var prop in Doc.prototype)Doc.prototype.hasOwnProperty(prop)&&indexOf(dontDelegate,prop)<0&&(CodeMirror.prototype[prop]=function(method){return function(){return method.apply(this.doc,arguments)}}(Doc.prototype[prop]));function linkedDocs(doc,f,sharedHistOnly){!function propagate(doc,skip,sharedHist){if(doc.linked)for(var i=0;i<doc.linked.length;++i){var rel=doc.linked[i];if(rel.doc!=skip){var shared=sharedHist&&rel.sharedHist;sharedHistOnly&&!shared||(f(rel.doc,shared),propagate(rel.doc,doc,shared))}}}(doc,null,!0)}function attachDoc(cm,doc){if(doc.cm)throw new Error("This document is already in use.");estimateLineHeights((cm.doc=doc).cm=cm),loadMode(cm),cm.options.lineWrapping||findMaxLine(cm),cm.options.mode=doc.modeOption,regChange(cm)}function getLine(doc,n){if((n-=doc.first)<0||n>=doc.size)throw new Error("There is no line "+(n+doc.first)+" in the document.");for(var chunk=doc;!chunk.lines;)for(var i=0;;++i){var child=chunk.children[i],sz=child.chunkSize();if(n<sz){chunk=child;break}n-=sz}return chunk.lines[n]}function getBetween(doc,start,end){var out=[],n=start.line;return doc.iter(start.line,end.line+1,function(line){var text=line.text;n==end.line&&(text=text.slice(0,end.ch)),n==start.line&&(text=text.slice(start.ch)),out.push(text),++n}),out}function getLines(doc,from,to){var out=[];return doc.iter(from,to,function(line){out.push(line.text)}),out}function updateLineHeight(line,height){var diff=height-line.height;if(diff)for(var n=line;n;n=n.parent)n.height+=diff}function lineNo(line){if(null==line.parent)return null;for(var cur=line.parent,no=indexOf(cur.lines,line),chunk=cur.parent;chunk;chunk=(cur=chunk).parent)for(var i=0;chunk.children[i]!=cur;++i)no+=chunk.children[i].chunkSize();return no+cur.first}function lineAtHeight(chunk,h){var n=chunk.first;outer:do{for(var i=0;i<chunk.children.length;++i){var child=chunk.children[i],ch=child.height;if(h<ch){chunk=child;continue outer}h-=ch,n+=child.chunkSize()}return n}while(!chunk.lines);for(i=0;i<chunk.lines.length;++i){var lh=chunk.lines[i].height;if(h<lh)break;h-=lh}return n+i}function heightAtLine(lineObj){for(var h=0,chunk=(lineObj=visualLine(lineObj)).parent,i=0;i<chunk.lines.length;++i){var line=chunk.lines[i];if(line==lineObj)break;h+=line.height}for(var p=chunk.parent;p;p=(chunk=p).parent)for(i=0;i<p.children.length;++i){var cur=p.children[i];if(cur==chunk)break;h+=cur.height}return h}function getOrder(line){var order=line.order;return null==order&&(order=line.order=bidiOrdering(line.text)),order}function History(startGen){this.done=[],this.undone=[],this.undoDepth=1/0,this.lastModTime=this.lastSelTime=0,this.lastOp=this.lastSelOp=null,this.lastOrigin=this.lastSelOrigin=null,this.generation=this.maxGeneration=startGen||1}function historyChangeFromChange(doc,change){var histChange={from:copyPos(change.from),to:changeEnd(change),text:getBetween(doc,change.from,change.to)};return attachLocalSpans(doc,histChange,change.from.line,change.to.line+1),linkedDocs(doc,function(doc){attachLocalSpans(doc,histChange,change.from.line,change.to.line+1)},!0),histChange}function clearSelectionEvents(array){for(;array.length;){if(!lst(array).ranges)break;array.pop()}}function addChangeToHistory(doc,change,selAfter,opId){var hist=doc.history;hist.undone.length=0;var cur,time=+new Date;if((hist.lastOp==opId||hist.lastOrigin==change.origin&&change.origin&&("+"==change.origin.charAt(0)&&doc.cm&&hist.lastModTime>time-doc.cm.options.historyEventDelay||"*"==change.origin.charAt(0)))&&(cur=function(hist,force){return force?(clearSelectionEvents(hist.done),lst(hist.done)):hist.done.length&&!lst(hist.done).ranges?lst(hist.done):1<hist.done.length&&!hist.done[hist.done.length-2].ranges?(hist.done.pop(),lst(hist.done)):void 0}(hist,hist.lastOp==opId))){var last=lst(cur.changes);0==cmp(change.from,change.to)&&0==cmp(change.from,last.to)?last.to=changeEnd(change):cur.changes.push(historyChangeFromChange(doc,change))}else{var before=lst(hist.done);for(before&&before.ranges||pushSelectionToHistory(doc.sel,hist.done),cur={changes:[historyChangeFromChange(doc,change)],generation:hist.generation},hist.done.push(cur);hist.done.length>hist.undoDepth;)hist.done.shift(),hist.done[0].ranges||hist.done.shift()}hist.done.push(selAfter),hist.generation=++hist.maxGeneration,hist.lastModTime=hist.lastSelTime=time,hist.lastOp=hist.lastSelOp=opId,hist.lastOrigin=hist.lastSelOrigin=change.origin,last||signal(doc,"historyAdded")}function pushSelectionToHistory(sel,dest){var top=lst(dest);top&&top.ranges&&top.equals(sel)||dest.push(sel)}function attachLocalSpans(doc,change,from,to){var existing=change["spans_"+doc.id],n=0;doc.iter(Math.max(doc.first,from),Math.min(doc.first+doc.size,to),function(line){line.markedSpans&&((existing||(existing=change["spans_"+doc.id]={}))[n]=line.markedSpans),++n})}function removeClearedSpans(spans){if(!spans)return null;for(var out,i=0;i<spans.length;++i)spans[i].marker.explicitlyCleared?out||(out=spans.slice(0,i)):out&&out.push(spans[i]);return out?out.length?out:null:spans}function copyHistoryArray(events,newGroup,instantiateSel){for(var i=0,copy=[];i<events.length;++i){var event=events[i];if(event.ranges)copy.push(instantiateSel?Selection.prototype.deepCopy.call(event):event);else{var changes=event.changes,newChanges=[];copy.push({changes:newChanges});for(var j=0;j<changes.length;++j){var m,change=changes[j];if(newChanges.push({from:change.from,to:change.to,text:change.text}),newGroup)for(var prop in change)(m=prop.match(/^spans_(\d+)$/))&&-1<indexOf(newGroup,Number(m[1]))&&(lst(newChanges)[prop]=change[prop],delete change[prop])}}}return copy}function rebaseHistSelSingle(pos,from,to,diff){to<pos.line?pos.line+=diff:from<pos.line&&(pos.line=from,pos.ch=0)}function rebaseHistArray(array,from,to,diff){for(var i=0;i<array.length;++i){var sub=array[i],ok=!0;if(sub.ranges){sub.copied||((sub=array[i]=sub.deepCopy()).copied=!0);for(var j=0;j<sub.ranges.length;j++)rebaseHistSelSingle(sub.ranges[j].anchor,from,to,diff),rebaseHistSelSingle(sub.ranges[j].head,from,to,diff)}else{for(j=0;j<sub.changes.length;++j){var cur=sub.changes[j];if(to<cur.from.line)cur.from=Pos(cur.from.line+diff,cur.from.ch),cur.to=Pos(cur.to.line+diff,cur.to.ch);else if(from<=cur.to.line){ok=!1;break}}ok||(array.splice(0,i+1),i=0)}}}function rebaseHist(hist,change){var from=change.from.line,to=change.to.line,diff=change.text.length-(to-from)-1;rebaseHistArray(hist.done,from,to,diff),rebaseHistArray(hist.undone,from,to,diff)}eventMixin(Doc);var e_preventDefault=CodeMirror.e_preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},e_stopPropagation=CodeMirror.e_stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0};function e_defaultPrevented(e){return null!=e.defaultPrevented?e.defaultPrevented:0==e.returnValue}var e_stop=CodeMirror.e_stop=function(e){e_preventDefault(e),e_stopPropagation(e)};function e_target(e){return e.target||e.srcElement}function e_button(e){var b=e.which;return null==b&&(1&e.button?b=1:2&e.button?b=3:4&e.button&&(b=2)),mac&&e.ctrlKey&&1==b&&(b=3),b}var on=CodeMirror.on=function(emitter,type,f){if(emitter.addEventListener)emitter.addEventListener(type,f,!1);else if(emitter.attachEvent)emitter.attachEvent("on"+type,f);else{var map=emitter._handlers||(emitter._handlers={});(map[type]||(map[type]=[])).push(f)}},noHandlers=[];function getHandlers(emitter,type,copy){var arr=emitter._handlers&&emitter._handlers[type];return copy?arr&&0<arr.length?arr.slice():noHandlers:arr||noHandlers}var off=CodeMirror.off=function(emitter,type,f){if(emitter.removeEventListener)emitter.removeEventListener(type,f,!1);else if(emitter.detachEvent)emitter.detachEvent("on"+type,f);else for(var handlers=getHandlers(emitter,type,!1),i=0;i<handlers.length;++i)if(handlers[i]==f){handlers.splice(i,1);break}},signal=CodeMirror.signal=function(emitter,type){var handlers=getHandlers(emitter,type,!0);if(handlers.length)for(var args=Array.prototype.slice.call(arguments,2),i=0;i<handlers.length;++i)handlers[i].apply(null,args)},orphanDelayedCallbacks=null;function signalLater(emitter,type){var arr=getHandlers(emitter,type,!1);if(arr.length){var list,args=Array.prototype.slice.call(arguments,2);operationGroup?list=operationGroup.delayedCallbacks:orphanDelayedCallbacks?list=orphanDelayedCallbacks:(list=orphanDelayedCallbacks=[],setTimeout(fireOrphanDelayed,0));for(var i=0;i<arr.length;++i)list.push(bnd(arr[i]))}function bnd(f){return function(){f.apply(null,args)}}}function fireOrphanDelayed(){var delayed=orphanDelayedCallbacks;orphanDelayedCallbacks=null;for(var i=0;i<delayed.length;++i)delayed[i]()}function signalDOMEvent(cm,e,override){return"string"==typeof e&&(e={type:e,preventDefault:function(){this.defaultPrevented=!0}}),signal(cm,override||e.type,cm,e),e_defaultPrevented(e)||e.codemirrorIgnore}function signalCursorActivity(cm){var arr=cm._handlers&&cm._handlers.cursorActivity;if(arr)for(var set=cm.curOp.cursorActivityHandlers||(cm.curOp.cursorActivityHandlers=[]),i=0;i<arr.length;++i)-1==indexOf(set,arr[i])&&set.push(arr[i])}function hasHandler(emitter,type){return 0<getHandlers(emitter,type).length}function eventMixin(ctor){ctor.prototype.on=function(type,f){on(this,type,f)},ctor.prototype.off=function(type,f){off(this,type,f)}}var scrollerGap=30,Pass=CodeMirror.Pass={toString:function(){return"CodeMirror.Pass"}},sel_dontScroll={scroll:!1},sel_mouse={origin:"*mouse"},sel_move={origin:"+move"};function Delayed(){this.id=null}Delayed.prototype.set=function(ms,f){clearTimeout(this.id),this.id=setTimeout(f,ms)};var countColumn=CodeMirror.countColumn=function(string,end,tabSize,startIndex,startValue){null==end&&-1==(end=string.search(/[^\s\u00a0]/))&&(end=string.length);for(var i=startIndex||0,n=startValue||0;;){var nextTab=string.indexOf("\t",i);if(nextTab<0||end<=nextTab)return n+(end-i);n+=nextTab-i,n+=tabSize-n%tabSize,i=nextTab+1}},findColumn=CodeMirror.findColumn=function(string,goal,tabSize){for(var pos=0,col=0;;){var nextTab=string.indexOf("\t",pos);-1==nextTab&&(nextTab=string.length);var skipped=nextTab-pos;if(nextTab==string.length||goal<=col+skipped)return pos+Math.min(skipped,goal-col);if(col+=nextTab-pos,pos=nextTab+1,goal<=(col+=tabSize-col%tabSize))return pos}},spaceStrs=[""];function spaceStr(n){for(;spaceStrs.length<=n;)spaceStrs.push(lst(spaceStrs)+" ");return spaceStrs[n]}function lst(arr){return arr[arr.length-1]}var selectInput=function(node){node.select()};function indexOf(array,elt){for(var i=0;i<array.length;++i)if(array[i]==elt)return i;return-1}function map(array,f){for(var out=[],i=0;i<array.length;i++)out[i]=f(array[i],i);return out}function nothing(){}function createObj(base,props){var inst;return inst=Object.create?Object.create(base):(nothing.prototype=base,new nothing),props&&copyObj(props,inst),inst}function copyObj(obj,target,overwrite){for(var prop in target||(target={}),obj)!obj.hasOwnProperty(prop)||!1===overwrite&&target.hasOwnProperty(prop)||(target[prop]=obj[prop]);return target}function bind(f){var args=Array.prototype.slice.call(arguments,1);return function(){return f.apply(null,args)}}ios?selectInput=function(node){node.selectionStart=0,node.selectionEnd=node.value.length}:ie&&(selectInput=function(node){try{node.select()}catch(_e){}});var nonASCIISingleCaseWordChar=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,isWordCharBasic=CodeMirror.isWordChar=function(ch){return/\w/.test(ch)||""<ch&&(ch.toUpperCase()!=ch.toLowerCase()||nonASCIISingleCaseWordChar.test(ch))};function isWordChar(ch,helper){return helper?!!(-1<helper.source.indexOf("\\w")&&isWordCharBasic(ch))||helper.test(ch):isWordCharBasic(ch)}function isEmpty(obj){for(var n in obj)if(obj.hasOwnProperty(n)&&obj[n])return!1;return!0}var range,extendingChars=/[\u0300-\u036f\u0483-\u0489\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065e\u0670\u06d6-\u06dc\u06de-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0900-\u0902\u093c\u0941-\u0948\u094d\u0951-\u0955\u0962\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f90-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1dc0-\u1de6\u1dfd-\u1dff\u200c\u200d\u20d0-\u20f0\u2cef-\u2cf1\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua66f-\ua672\ua67c\ua67d\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uabe5\uabe8\uabed\udc00-\udfff\ufb1e\ufe00-\ufe0f\ufe20-\ufe26\uff9e\uff9f]/;function isExtendingChar(ch){return 768<=ch.charCodeAt(0)&&extendingChars.test(ch)}function elt(tag,content,className,style){var e=document.createElement(tag);if(className&&(e.className=className),style&&(e.style.cssText=style),"string"==typeof content)e.appendChild(document.createTextNode(content));else if(content)for(var i=0;i<content.length;++i)e.appendChild(content[i]);return e}function removeChildren(e){for(var count=e.childNodes.length;0<count;--count)e.removeChild(e.firstChild);return e}function removeChildrenAndAdd(parent,e){return removeChildren(parent).appendChild(e)}range=document.createRange?function(node,start,end,endNode){var r=document.createRange();return r.setEnd(endNode||node,end),r.setStart(node,start),r}:function(node,start,end){var r=document.body.createTextRange();try{r.moveToElementText(node.parentNode)}catch(e){return r}return r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r};var contains=CodeMirror.contains=function(parent,child){if(3==child.nodeType&&(child=child.parentNode),parent.contains)return parent.contains(child);do{if(11==child.nodeType&&(child=child.host),child==parent)return!0}while(child=child.parentNode)};function activeElt(){for(var activeElement=document.activeElement;activeElement&&activeElement.root&&activeElement.root.activeElement;)activeElement=activeElement.root.activeElement;return activeElement}function classTest(cls){return new RegExp("(^|\\s)"+cls+"(?:$|\\s)\\s*")}ie&&ie_version<11&&(activeElt=function(){try{return document.activeElement}catch(e){return document.body}});var rmClass=CodeMirror.rmClass=function(node,cls){var current=node.className,match=classTest(cls).exec(current);if(match){var after=current.slice(match.index+match[0].length);node.className=current.slice(0,match.index)+(after?match[1]+after:"")}},addClass=CodeMirror.addClass=function(node,cls){var current=node.className;classTest(cls).test(current)||(node.className+=(current?" ":"")+cls)};function joinClasses(a,b){for(var as=a.split(" "),i=0;i<as.length;i++)as[i]&&!classTest(as[i]).test(b)&&(b+=" "+as[i]);return b}function forEachCodeMirror(f){if(document.body.getElementsByClassName)for(var byClass=document.body.getElementsByClassName("CodeMirror"),i=0;i<byClass.length;i++){var cm=byClass[i].CodeMirror;cm&&f(cm)}}var globalsRegistered=!1;var zwspSupported,badBidiRects,dragAndDrop=function(){if(ie&&ie_version<9)return!1;var div=elt("div");return"draggable"in div||"dragDrop"in div}();function zeroWidthElement(measure){if(null==zwspSupported){var test=elt("span","​");removeChildrenAndAdd(measure,elt("span",[test,document.createTextNode("x")])),0!=measure.firstChild.offsetHeight&&(zwspSupported=test.offsetWidth<=1&&2<test.offsetHeight&&!(ie&&ie_version<8))}var node=zwspSupported?elt("span","​"):elt("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px");return node.setAttribute("cm-text",""),node}function hasBadBidiRects(measure){if(null!=badBidiRects)return badBidiRects;var txt=removeChildrenAndAdd(measure,document.createTextNode("AخA")),r0=range(txt,0,1).getBoundingClientRect();if(!r0||r0.left==r0.right)return!1;var r1=range(txt,1,2).getBoundingClientRect();return badBidiRects=r1.right-r0.right<3}var e,splitLinesAuto=CodeMirror.splitLines=3!="\n\nb".split(/\n/).length?function(string){for(var pos=0,result=[],l=string.length;pos<=l;){var nl=string.indexOf("\n",pos);-1==nl&&(nl=string.length);var line=string.slice(pos,"\r"==string.charAt(nl-1)?nl-1:nl),rt=line.indexOf("\r");-1!=rt?(result.push(line.slice(0,rt)),pos+=rt+1):(result.push(line),pos=nl+1)}return result}:function(string){return string.split(/\r\n?|\n/)},hasSelection=window.getSelection?function(te){try{return te.selectionStart!=te.selectionEnd}catch(e){return!1}}:function(te){try{var range=te.ownerDocument.selection.createRange()}catch(e){}return!(!range||range.parentElement()!=te)&&0!=range.compareEndPoints("StartToEnd",range)},hasCopyEvent="oncopy"in(e=elt("div"))||(e.setAttribute("oncopy","return;"),"function"==typeof e.oncopy),badZoomedRects=null;var bidiOther,keyNames=CodeMirror.keyNames={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",61:"=",91:"Mod",92:"Mod",93:"Mod",106:"*",107:"=",109:"-",110:".",111:"/",127:"Delete",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63232:"Up",63233:"Down",63234:"Left",63235:"Right",63272:"Delete",63273:"Home",63275:"End",63276:"PageUp",63277:"PageDown",63302:"Insert"};function bidiLeft(part){return part.level%2?part.to:part.from}function bidiRight(part){return part.level%2?part.from:part.to}function lineLeft(line){var order=getOrder(line);return order?bidiLeft(order[0]):0}function lineRight(line){var order=getOrder(line);return order?bidiRight(lst(order)):line.text.length}function lineStart(cm,lineN){var line=getLine(cm.doc,lineN),visual=visualLine(line);visual!=line&&(lineN=lineNo(visual));var order=getOrder(visual),ch=order?order[0].level%2?lineRight(visual):lineLeft(visual):0;return Pos(lineN,ch)}function lineStartSmart(cm,pos){var start=lineStart(cm,pos.line),line=getLine(cm.doc,start.line),order=getOrder(line);if(order&&0!=order[0].level)return start;var firstNonWS=Math.max(0,line.text.search(/\S/)),inWS=pos.line==start.line&&pos.ch<=firstNonWS&&pos.ch;return Pos(start.line,inWS?0:firstNonWS)}function compareBidiLevel(order,a,b){var linedir=order[0].level;return a==linedir||b!=linedir&&a<b}function getBidiPartAt(order,pos){bidiOther=null;for(var found,i=0;i<order.length;++i){var cur=order[i];if(cur.from<pos&&cur.to>pos)return i;if(cur.from==pos||cur.to==pos){if(null!=found)return compareBidiLevel(order,cur.level,order[found].level)?(cur.from!=cur.to&&(bidiOther=found),i):(cur.from!=cur.to&&(bidiOther=i),found);found=i}}return found}function moveInLine(line,pos,dir,byUnit){if(!byUnit)return pos+dir;for(;0<(pos+=dir)&&isExtendingChar(line.text.charAt(pos)););return pos}function moveVisually(line,start,dir,byUnit){var bidi=getOrder(line);if(!bidi)return moveLogically(line,start,dir,byUnit);for(var pos=getBidiPartAt(bidi,start),part=bidi[pos],target=moveInLine(line,start,part.level%2?-dir:dir,byUnit);;){if(target>part.from&&target<part.to)return target;if(target==part.from||target==part.to)return getBidiPartAt(bidi,target)==pos?target:0<dir==(part=bidi[pos+=dir]).level%2?part.to:part.from;if(!(part=bidi[pos+=dir]))return null;target=0<dir==part.level%2?moveInLine(line,part.to,-1,byUnit):moveInLine(line,part.from,1,byUnit)}}function moveLogically(line,start,dir,byUnit){var target=start+dir;if(byUnit)for(;0<target&&isExtendingChar(line.text.charAt(target));)target+=dir;return target<0||target>line.text.length?null:target}!function(){for(var i=0;i<10;i++)keyNames[i+48]=keyNames[i+96]=String(i);for(i=65;i<=90;i++)keyNames[i]=String.fromCharCode(i);for(i=1;i<=12;i++)keyNames[i+111]=keyNames[i+63235]="F"+i}();var bidiOrdering=function(){var lowTypes="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLN",arabicTypes="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmm";var bidiRE=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,isNeutral=/[stwN]/,isStrong=/[LRr]/,countsAsLeft=/[Lb1n]/,countsAsNum=/[1n]/;function BidiSpan(level,from,to){this.level=level,this.from=from,this.to=to}return function(str){if(!bidiRE.test(str))return!1;for(var code,len=str.length,types=[],i=0;i<len;++i)types.push(type=(code=str.charCodeAt(i))<=247?lowTypes.charAt(code):1424<=code&&code<=1524?"R":1536<=code&&code<=1773?arabicTypes.charAt(code-1536):1774<=code&&code<=2220?"r":8192<=code&&code<=8203?"w":8204==code?"b":"L");i=0;for(var prev="L";i<len;++i){"m"==(type=types[i])?types[i]=prev:prev=type}i=0;for(var cur="L";i<len;++i){"1"==(type=types[i])&&"r"==cur?types[i]="n":isStrong.test(type)&&"r"==(cur=type)&&(types[i]="R")}for(i=1,prev=types[0];i<len-1;++i){"+"==(type=types[i])&&"1"==prev&&"1"==types[i+1]?types[i]="1":","!=type||prev!=types[i+1]||"1"!=prev&&"n"!=prev||(types[i]=prev),prev=type}for(i=0;i<len;++i){if(","==(type=types[i]))types[i]="N";else if("%"==type){for(var end=i+1;end<len&&"%"==types[end];++end);for(var replace=i&&"!"==types[i-1]||end<len&&"1"==types[end]?"1":"N",j=i;j<end;++j)types[j]=replace;i=end-1}}for(i=0,cur="L";i<len;++i){var type=types[i];"L"==cur&&"1"==type?types[i]="L":isStrong.test(type)&&(cur=type)}for(i=0;i<len;++i)if(isNeutral.test(types[i])){for(end=i+1;end<len&&isNeutral.test(types[end]);++end);var before="L"==(i?types[i-1]:"L"),after="L"==(end<len?types[end]:"L");for(replace=before||after?"L":"R",j=i;j<end;++j)types[j]=replace;i=end-1}var m,order=[];for(i=0;i<len;)if(countsAsLeft.test(types[i])){var start=i;for(++i;i<len&&countsAsLeft.test(types[i]);++i);order.push(new BidiSpan(0,start,i))}else{var pos=i,at=order.length;for(++i;i<len&&"L"!=types[i];++i);for(j=pos;j<i;)if(countsAsNum.test(types[j])){pos<j&&order.splice(at,0,new BidiSpan(1,pos,j));var nstart=j;for(++j;j<i&&countsAsNum.test(types[j]);++j);order.splice(at,0,new BidiSpan(2,nstart,j)),pos=j}else++j;pos<i&&order.splice(at,0,new BidiSpan(1,pos,i))}return 1==order[0].level&&(m=str.match(/^\s+/))&&(order[0].from=m[0].length,order.unshift(new BidiSpan(0,0,m[0].length))),1==lst(order).level&&(m=str.match(/\s+$/))&&(lst(order).to-=m[0].length,order.push(new BidiSpan(0,len-m[0].length,len))),2==order[0].level&&order.unshift(new BidiSpan(1,order[0].to,order[0].to)),order[0].level!=lst(order).level&&order.push(new BidiSpan(order[0].level,len,len)),order}}();return CodeMirror.version="5.10.0",CodeMirror});"use strict";function uiCodemirrorDirective($timeout,uiCodemirrorConfig){return{restrict:"EA",require:"?ngModel",compile:function(){if(angular.isUndefined(window.CodeMirror))throw new Error("ui-codemirror needs CodeMirror to work... (o rly?)");return postLink}};function postLink(scope,iElement,iAttrs,ngModel){var codemirrorOptions=angular.extend({value:iElement.text()},uiCodemirrorConfig.codemirror||{},scope.$eval(iAttrs.uiCodemirror),scope.$eval(iAttrs.uiCodemirrorOpts)),codemirror=function(iElement,codemirrorOptions){var codemirrot;codemirrot="TEXTAREA"===iElement[0].tagName?window.CodeMirror.fromTextArea(iElement[0],codemirrorOptions):(iElement.html(""),new window.CodeMirror(function(cm_el){iElement.append(cm_el)},codemirrorOptions));return codemirrot}(iElement,codemirrorOptions);!function(codemirrot,uiCodemirrorAttr,scope){if(!uiCodemirrorAttr)return;var codemirrorDefaultsKeys=Object.keys(window.CodeMirror.defaults);scope.$watch(uiCodemirrorAttr,function(newValues,oldValue){if(!angular.isObject(newValues))return;codemirrorDefaultsKeys.forEach(function(key){if(newValues.hasOwnProperty(key)){if(oldValue&&newValues[key]===oldValue[key])return;codemirrot.setOption(key,newValues[key])}})},!0)}(codemirror,iAttrs.uiCodemirror||iAttrs.uiCodemirrorOpts,scope),function(codemirror,ngModel,scope){if(!ngModel)return;ngModel.$formatters.push(function(value){if(angular.isUndefined(value)||null===value)return"";if(angular.isObject(value)||angular.isArray(value))throw new Error("ui-codemirror cannot use an object or an array as a model");return value}),ngModel.$render=function(){var safeViewValue=ngModel.$viewValue||"";codemirror.setValue(safeViewValue)},codemirror.on("change",function(instance){var newValue=instance.getValue();newValue!==ngModel.$viewValue&&scope.$evalAsync(function(){ngModel.$setViewValue(newValue)})})}(codemirror,ngModel,scope),function(codeMirror,uiRefreshAttr,scope){if(!uiRefreshAttr)return;scope.$watch(uiRefreshAttr,function(newVal,oldVal){newVal!==oldVal&&$timeout(function(){codeMirror.refresh()})})}(codemirror,iAttrs.uiRefresh,scope),scope.$on("CodeMirror",function(event,callback){if(!angular.isFunction(callback))throw new Error("the CodeMirror event requires a callback function");callback(codemirror)}),angular.isFunction(codemirrorOptions.onLoad)&&codemirrorOptions.onLoad(codemirror)}}angular.module("ui.codemirror",[]).constant("uiCodemirrorConfig",{}).directive("uiCodemirror",uiCodemirrorDirective),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror"),require("../xml/xml"),require("../javascript/javascript"),require("../css/css")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../xml/xml","../javascript/javascript","../css/css"],mod):mod(CodeMirror)}(function(CodeMirror){var defaultTags={script:[["lang",/(javascript|babel)/i,"javascript"],["type",/^(?:text|application)\/(?:x-)?(?:java|ecma)script$|^$/i,"javascript"],["type",/./,"text/plain"],[null,null,"javascript"]],style:[["lang",/^css$/i,"css"],["type",/^(text\/)?(x-)?(stylesheet|css)$/i,"css"],["type",/./,"text/plain"],[null,null,"css"]]};var attrRegexpCache={};function getAttrValue(stream,attr){for(var match,pos=stream.pos;0<=pos&&"<"!==stream.string.charAt(pos);)pos--;return pos<0?pos:(match=stream.string.slice(pos,stream.pos).match(function(attr){var regexp=attrRegexpCache[attr];return regexp||(attrRegexpCache[attr]=new RegExp("\\s+"+attr+"\\s*=\\s*('|\")?([^'\"]+)('|\")?\\s*"))}(attr)))?match[2]:""}function getTagRegexp(tagName,anchored){return new RegExp((anchored?"^":"")+"</s*"+tagName+"s*>","i")}function addTags(from,to){for(var tag in from)for(var dest=to[tag]||(to[tag]=[]),source=from[tag],i=source.length-1;0<=i;i--)dest.unshift(source[i])}CodeMirror.defineMode("htmlmixed",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,{name:"xml",htmlMode:!0,multilineTagIndentFactor:parserConfig.multilineTagIndentFactor,multilineTagIndentPastTag:parserConfig.multilineTagIndentPastTag}),tags={},configTags=parserConfig&&parserConfig.tags,configScript=parserConfig&&parserConfig.scriptTypes;if(addTags(defaultTags,tags),configTags&&addTags(configTags,tags),configScript)for(var i=configScript.length-1;0<=i;i--)tags.script.unshift(["type",configScript[i].matches,configScript[i].mode]);function html(stream,state){var modeSpec,tagName=state.htmlState.tagName&&state.htmlState.tagName.toLowerCase(),tagInfo=tagName&&tags.hasOwnProperty(tagName)&&tags[tagName],style=htmlMode.token(stream,state.htmlState);if(tagInfo&&/\btag\b/.test(style)&&">"===stream.current()&&(modeSpec=function(tagInfo,stream){for(var i=0;i<tagInfo.length;i++){var spec=tagInfo[i];if(!spec[0]||spec[1].test(getAttrValue(stream,spec[0])))return spec[2]}}(tagInfo,stream))){var mode=CodeMirror.getMode(config,modeSpec),endTagA=getTagRegexp(tagName,!0),endTag=getTagRegexp(tagName,!1);state.token=function(stream,state){return stream.match(endTagA,!1)?(state.token=html,state.localState=state.localMode=null,null):function(stream,pat,style){var cur=stream.current(),close=cur.search(pat);return-1<close?stream.backUp(cur.length-close):cur.match(/<\/?$/)&&(stream.backUp(cur.length),stream.match(pat,!1)||stream.match(cur)),style}(stream,endTag,state.localMode.token(stream,state.localState))},state.localMode=mode,state.localState=CodeMirror.startState(mode,htmlMode.indent(state.htmlState,""))}return style}return{startState:function(){return{token:html,localMode:null,localState:null,htmlState:htmlMode.startState()}},copyState:function(state){var local;return state.localState&&(local=CodeMirror.copyState(state.localMode,state.localState)),{token:state.token,localMode:state.localMode,localState:local,htmlState:CodeMirror.copyState(htmlMode,state.htmlState)}},token:function(stream,state){return state.token(stream,state)},indent:function(state,textAfter){return!state.localMode||/^\s*<\//.test(textAfter)?htmlMode.indent(state.htmlState,textAfter):state.localMode.indent?state.localMode.indent(state.localState,textAfter):CodeMirror.Pass},innerMode:function(state){return{state:state.localState||state.htmlState,mode:state.localMode||htmlMode}}}},"xml","javascript","css"),CodeMirror.defineMIME("text/html","htmlmixed")}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){CodeMirror.defineMode("xml",function(config,parserConfig){var indentUnit=config.indentUnit,multilineTagIndentFactor=parserConfig.multilineTagIndentFactor||1,multilineTagIndentPastTag=parserConfig.multilineTagIndentPastTag;null==multilineTagIndentPastTag&&(multilineTagIndentPastTag=!0);var type,setStyle,Kludges=parserConfig.htmlMode?{autoSelfClosers:{area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0,menuitem:!0},implicitlyClosed:{dd:!0,li:!0,optgroup:!0,option:!0,p:!0,rp:!0,rt:!0,tbody:!0,td:!0,tfoot:!0,th:!0,tr:!0},contextGrabbers:{dd:{dd:!0,dt:!0},dt:{dd:!0,dt:!0},li:{li:!0},option:{option:!0,optgroup:!0},optgroup:{optgroup:!0},p:{address:!0,article:!0,aside:!0,blockquote:!0,dir:!0,div:!0,dl:!0,fieldset:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,menu:!0,nav:!0,ol:!0,p:!0,pre:!0,section:!0,table:!0,ul:!0},rp:{rp:!0,rt:!0},rt:{rp:!0,rt:!0},tbody:{tbody:!0,tfoot:!0},td:{td:!0,th:!0},tfoot:{tbody:!0},th:{td:!0,th:!0},thead:{tbody:!0,tfoot:!0},tr:{tr:!0}},doNotIndent:{pre:!0},allowUnquoted:!0,allowMissing:!0,caseFold:!0}:{autoSelfClosers:{},implicitlyClosed:{},contextGrabbers:{},doNotIndent:{},allowUnquoted:!1,allowMissing:!1,caseFold:!1},alignCDATA=parserConfig.alignCDATA;function inText(stream,state){function chain(parser){return(state.tokenize=parser)(stream,state)}var ch=stream.next();return"<"==ch?stream.eat("!")?stream.eat("[")?stream.match("CDATA[")?chain(inBlock("atom","]]>")):null:stream.match("--")?chain(inBlock("comment","--\x3e")):stream.match("DOCTYPE",!0,!0)?(stream.eatWhile(/[\w\._\-]/),chain(function doctype(depth){return function(stream,state){for(var ch;null!=(ch=stream.next());){if("<"==ch)return state.tokenize=doctype(depth+1),state.tokenize(stream,state);if(">"==ch){if(1!=depth)return state.tokenize=doctype(depth-1),state.tokenize(stream,state);state.tokenize=inText;break}}return"meta"}}(1))):null:stream.eat("?")?(stream.eatWhile(/[\w\._\-]/),state.tokenize=inBlock("meta","?>"),"meta"):(type=stream.eat("/")?"closeTag":"openTag",state.tokenize=inTag,"tag bracket"):"&"!=ch?(stream.eatWhile(/[^&<]/),null):(stream.eat("#")?stream.eat("x")?stream.eatWhile(/[a-fA-F\d]/)&&stream.eat(";"):stream.eatWhile(/[\d]/)&&stream.eat(";"):stream.eatWhile(/[\w\.\-:]/)&&stream.eat(";"))?"atom":"error"}function inTag(stream,state){var ch=stream.next();if(">"==ch||"/"==ch&&stream.eat(">"))return state.tokenize=inText,type=">"==ch?"endTag":"selfcloseTag","tag bracket";if("="==ch)return type="equals",null;if("<"!=ch)return/[\'\"]/.test(ch)?(state.tokenize=(quote=ch,(closure=function(stream,state){for(;!stream.eol();)if(stream.next()==quote){state.tokenize=inTag;break}return"string"}).isInAttribute=!0,closure),state.stringStartCol=stream.column(),state.tokenize(stream,state)):(stream.match(/^[^\s\u00a0=<>\"\']*[^\s\u00a0=<>\"\'\/]/),"word");state.tokenize=inText,state.state=baseState,state.tagName=state.tagStart=null;var quote,closure,next=state.tokenize(stream,state);return next?next+" tag error":"tag error"}function inBlock(style,terminator){return function(stream,state){for(;!stream.eol();){if(stream.match(terminator)){state.tokenize=inText;break}stream.next()}return style}}function Context(state,tagName,startOfLine){this.prev=state.context,this.tagName=tagName,this.indent=state.indented,this.startOfLine=startOfLine,(Kludges.doNotIndent.hasOwnProperty(tagName)||state.context&&state.context.noIndent)&&(this.noIndent=!0)}function popContext(state){state.context&&(state.context=state.context.prev)}function maybePopContext(state,nextTagName){for(var parentTagName;;){if(!state.context)return;if(parentTagName=state.context.tagName,!Kludges.contextGrabbers.hasOwnProperty(parentTagName)||!Kludges.contextGrabbers[parentTagName].hasOwnProperty(nextTagName))return;popContext(state)}}function baseState(type,stream,state){return"openTag"==type?(state.tagStart=stream.column(),tagNameState):"closeTag"==type?closeTagNameState:baseState}function tagNameState(type,stream,state){return"word"==type?(state.tagName=stream.current(),setStyle="tag",attrState):(setStyle="error",tagNameState)}function closeTagNameState(type,stream,state){if("word"!=type)return setStyle="error",closeStateErr;var tagName=stream.current();return state.context&&state.context.tagName!=tagName&&Kludges.implicitlyClosed.hasOwnProperty(state.context.tagName)&&popContext(state),state.context&&state.context.tagName==tagName?(setStyle="tag",closeState):(setStyle="tag error",closeStateErr)}function closeState(type,_stream,state){return"endTag"!=type?(setStyle="error",closeState):(popContext(state),baseState)}function closeStateErr(type,stream,state){return setStyle="error",closeState(type,0,state)}function attrState(type,_stream,state){if("word"==type)return setStyle="attribute",attrEqState;if("endTag"!=type&&"selfcloseTag"!=type)return setStyle="error",attrState;var tagName=state.tagName,tagStart=state.tagStart;return state.tagName=state.tagStart=null,"selfcloseTag"==type||Kludges.autoSelfClosers.hasOwnProperty(tagName)?maybePopContext(state,tagName):(maybePopContext(state,tagName),state.context=new Context(state,tagName,tagStart==state.indented)),baseState}function attrEqState(type,stream,state){return"equals"==type?attrValueState:(Kludges.allowMissing||(setStyle="error"),attrState(type,0,state))}function attrValueState(type,stream,state){return"string"==type?attrContinuedState:"word"==type&&Kludges.allowUnquoted?(setStyle="string",attrState):(setStyle="error",attrState(type,0,state))}function attrContinuedState(type,stream,state){return"string"==type?attrContinuedState:attrState(type,0,state)}return inText.isInText=!0,{startState:function(){return{tokenize:inText,state:baseState,indented:0,tagName:null,tagStart:null,context:null}},token:function(stream,state){if(!state.tagName&&stream.sol()&&(state.indented=stream.indentation()),stream.eatSpace())return null;type=null;var style=state.tokenize(stream,state);return(style||type)&&"comment"!=style&&(setStyle=null,state.state=state.state(type||style,stream,state),setStyle&&(style="error"==setStyle?style+" error":setStyle)),style},indent:function(state,textAfter,fullLine){var context=state.context;if(state.tokenize.isInAttribute)return state.tagStart==state.indented?state.stringStartCol+1:state.indented+indentUnit;if(context&&context.noIndent)return CodeMirror.Pass;if(state.tokenize!=inTag&&state.tokenize!=inText)return fullLine?fullLine.match(/^(\s*)/)[0].length:0;if(state.tagName)return multilineTagIndentPastTag?state.tagStart+state.tagName.length+2:state.tagStart+indentUnit*multilineTagIndentFactor;if(alignCDATA&&/<!\[CDATA\[/.test(textAfter))return 0;var tagAfter=textAfter&&/^<(\/)?([\w_:\.-]*)/.exec(textAfter);if(tagAfter&&tagAfter[1])for(;context;){if(context.tagName==tagAfter[2]){context=context.prev;break}if(!Kludges.implicitlyClosed.hasOwnProperty(context.tagName))break;context=context.prev}else if(tagAfter)for(;context;){var grabbers=Kludges.contextGrabbers[context.tagName];if(!grabbers||!grabbers.hasOwnProperty(tagAfter[2]))break;context=context.prev}for(;context&&!context.startOfLine;)context=context.prev;return context?context.indent+indentUnit:0},electricInput:/<\/[\s\w:]+>$/,blockCommentStart:"\x3c!--",blockCommentEnd:"--\x3e",configuration:parserConfig.htmlMode?"html":"xml",helperType:parserConfig.htmlMode?"html":"xml"}}),CodeMirror.defineMIME("text/xml","xml"),CodeMirror.defineMIME("application/xml","xml"),CodeMirror.mimeModes.hasOwnProperty("text/html")||CodeMirror.defineMIME("text/html",{name:"xml",htmlMode:!0})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){CodeMirror.defineMode("javascript",function(config,parserConfig){var type,content,indentUnit=config.indentUnit,statementIndent=parserConfig.statementIndent,jsonldMode=parserConfig.jsonld,jsonMode=parserConfig.json||jsonldMode,isTS=parserConfig.typescript,wordRE=parserConfig.wordCharacters||/[\w$\xa1-\uffff]/,keywords=function(){function kw(type){return{type:type,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c"),operator=kw("operator"),atom={type:"atom",style:"atom"},jsKeywords={if:kw("if"),while:A,with:A,else:B,do:B,try:B,finally:B,return:C,break:C,continue:C,new:kw("new"),delete:C,throw:C,debugger:C,var:kw("var"),const:kw("var"),let:kw("var"),function:kw("function"),catch:kw("catch"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:operator,typeof:operator,instanceof:operator,true:atom,false:atom,null:atom,undefined:atom,NaN:atom,Infinity:atom,this:kw("this"),class:kw("class"),super:kw("atom"),yield:C,export:kw("export"),import:kw("import"),extends:C};if(isTS){var type={type:"variable",style:"variable-3"},tsKeywords={interface:kw("class"),implements:C,namespace:C,module:kw("module"),enum:kw("module"),public:kw("modifier"),private:kw("modifier"),protected:kw("modifier"),abstract:kw("modifier"),as:operator,string:type,number:type,boolean:type,any:type};for(var attr in tsKeywords)jsKeywords[attr]=tsKeywords[attr]}return jsKeywords}(),isOperatorChar=/[+\-*&%=<>!?|~^]/,isJsonldKeyword=/^@(context|id|value|language|type|container|list|set|reverse|index|base|vocab|graph)"/;function ret(tp,style,cont){return type=tp,content=cont,style}function tokenBase(stream,state){var quote,ch=stream.next();if('"'==ch||"'"==ch)return state.tokenize=(quote=ch,function(stream,state){var next,escaped=!1;if(jsonldMode&&"@"==stream.peek()&&stream.match(isJsonldKeyword))return state.tokenize=tokenBase,ret("jsonld-keyword","meta");for(;null!=(next=stream.next())&&(next!=quote||escaped);)escaped=!escaped&&"\\"==next;return escaped||(state.tokenize=tokenBase),ret("string","string")}),state.tokenize(stream,state);if("."==ch&&stream.match(/^\d+(?:[eE][+\-]?\d+)?/))return ret("number","number");if("."==ch&&stream.match(".."))return ret("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(ch))return ret(ch);if("="==ch&&stream.eat(">"))return ret("=>","operator");if("0"==ch&&stream.eat(/x/i))return stream.eatWhile(/[\da-f]/i),ret("number","number");if("0"==ch&&stream.eat(/o/i))return stream.eatWhile(/[0-7]/i),ret("number","number");if("0"==ch&&stream.eat(/b/i))return stream.eatWhile(/[01]/i),ret("number","number");if(/\d/.test(ch))return stream.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),ret("number","number");if("/"==ch)return stream.eat("*")?(state.tokenize=tokenComment)(stream,state):stream.eat("/")?(stream.skipToEnd(),ret("comment","comment")):/^(?:operator|sof|keyword c|case|new|[\[{}\(,;:])$/.test(state.lastType)||"quasi"==state.lastType&&/\{\s*$/.test(stream.string.slice(0,stream.pos-1))?(function(stream){for(var next,escaped=!1,inSet=!1;null!=(next=stream.next());){if(!escaped){if("/"==next&&!inSet)return;"["==next?inSet=!0:inSet&&"]"==next&&(inSet=!1)}escaped=!escaped&&"\\"==next}}(stream),stream.match(/^\b(([gimyu])(?![gimyu]*\2))+\b/),ret("regexp","string-2")):(stream.eatWhile(isOperatorChar),ret("operator","operator",stream.current()));if("`"==ch)return(state.tokenize=tokenQuasi)(stream,state);if("#"==ch)return stream.skipToEnd(),ret("error","error");if(isOperatorChar.test(ch))return stream.eatWhile(isOperatorChar),ret("operator","operator",stream.current());if(wordRE.test(ch)){stream.eatWhile(wordRE);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&"."!=state.lastType?ret(known.type,known.style,word):ret("variable","variable",word)}}function tokenComment(stream,state){for(var ch,maybeEnd=!1;ch=stream.next();){if("/"==ch&&maybeEnd){state.tokenize=tokenBase;break}maybeEnd="*"==ch}return ret("comment","comment")}function tokenQuasi(stream,state){for(var next,escaped=!1;null!=(next=stream.next());){if(!escaped&&("`"==next||"$"==next&&stream.eat("{"))){state.tokenize=tokenBase;break}escaped=!escaped&&"\\"==next}return ret("quasi","string-2",stream.current())}var brackets="([{}])";function findFatArrow(stream,state){state.fatArrowAt&&(state.fatArrowAt=null);var arrow=stream.string.indexOf("=>",stream.start);if(!(arrow<0)){for(var depth=0,sawSomething=!1,pos=arrow-1;0<=pos;--pos){var ch=stream.string.charAt(pos),bracket=brackets.indexOf(ch);if(0<=bracket&&bracket<3){if(!depth){++pos;break}if(0==--depth)break}else if(3<=bracket&&bracket<6)++depth;else if(wordRE.test(ch))sawSomething=!0;else{if(/["'\/]/.test(ch))return;if(sawSomething&&!depth){++pos;break}}}sawSomething&&!depth&&(state.fatArrowAt=pos)}}var atomicTypes={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,this:!0,"jsonld-keyword":!0};function JSLexical(indented,column,type,align,prev,info){this.indented=indented,this.column=column,this.type=type,this.prev=prev,this.info=info,null!=align&&(this.align=align)}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return!0;for(var cx=state.context;cx;cx=cx.prev)for(v=cx.vars;v;v=v.next)if(v.name==varname)return!0}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;0<=i;i--)cx.cc.push(arguments[i])}function cont(){return pass.apply(null,arguments),!0}function register(varname){function inList(list){for(var v=list;v;v=v.next)if(v.name==varname)return!0;return!1}var state=cx.state;if(cx.marked="def",state.context){if(inList(state.localVars))return;state.localVars={name:varname,next:state.localVars}}else{if(inList(state.globalVars))return;parserConfig.globalVars&&(state.globalVars={name:varname,next:state.globalVars})}}var defaultVars={name:"this",next:{name:"arguments"}};function pushcontext(){cx.state.context={prev:cx.state.context,vars:cx.state.localVars},cx.state.localVars=defaultVars}function popcontext(){cx.state.localVars=cx.state.context.vars,cx.state.context=cx.state.context.prev}function pushlex(type,info){var result=function(){var state=cx.state,indent=state.indented;if("stat"==state.lexical.type)indent=state.lexical.indented;else for(var outer=state.lexical;outer&&")"==outer.type&&outer.align;outer=outer.prev)indent=outer.indented;state.lexical=new JSLexical(indent,cx.stream.column(),type,null,state.lexical,info)};return result.lex=!0,result}function poplex(){var state=cx.state;state.lexical.prev&&(")"==state.lexical.type&&(state.indented=state.lexical.indented),state.lexical=state.lexical.prev)}function expect(wanted){return function exp(type){return type==wanted?cont():";"==wanted?pass():cont(exp)}}function statement(type,value){return"var"==type?cont(pushlex("vardef",value.length),vardef,expect(";"),poplex):"keyword a"==type?cont(pushlex("form"),expression,statement,poplex):"keyword b"==type?cont(pushlex("form"),statement,poplex):"{"==type?cont(pushlex("}"),block,poplex):";"==type?cont():"if"==type?("else"==cx.state.lexical.info&&cx.state.cc[cx.state.cc.length-1]==poplex&&cx.state.cc.pop()(),cont(pushlex("form"),expression,statement,poplex,maybeelse)):"function"==type?cont(functiondef):"for"==type?cont(pushlex("form"),forspec,statement,poplex):"variable"==type?cont(pushlex("stat"),maybelabel):"switch"==type?cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex):"case"==type?cont(expression,expect(":")):"default"==type?cont(expect(":")):"catch"==type?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):"class"==type?cont(pushlex("form"),className,poplex):"export"==type?cont(pushlex("stat"),afterExport,poplex):"import"==type?cont(pushlex("stat"),afterImport,poplex):"module"==type?cont(pushlex("form"),pattern,pushlex("}"),expect("{"),block,poplex,poplex):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type){return expressionInner(type,!1)}function expressionNoComma(type){return expressionInner(type,!0)}function expressionInner(type,noComma){if(cx.state.fatArrowAt==cx.stream.start){var body=noComma?arrowBodyNoComma:arrowBody;if("("==type)return cont(pushcontext,pushlex(")"),commasep(pattern,")"),poplex,expect("=>"),body,popcontext);if("variable"==type)return pass(pushcontext,pattern,expect("=>"),body,popcontext)}var maybeop=noComma?maybeoperatorNoComma:maybeoperatorComma;return atomicTypes.hasOwnProperty(type)?cont(maybeop):"function"==type?cont(functiondef,maybeop):"keyword c"==type?cont(noComma?maybeexpressionNoComma:maybeexpression):"("==type?cont(pushlex(")"),maybeexpression,comprehension,expect(")"),poplex,maybeop):"operator"==type||"spread"==type?cont(noComma?expressionNoComma:expression):"["==type?cont(pushlex("]"),arrayLiteral,poplex,maybeop):"{"==type?contCommasep(objprop,"}",null,maybeop):"quasi"==type?pass(quasi,maybeop):"new"==type?cont(function(noComma){return function(type){return"."==type?cont(noComma?targetNoComma:target):pass(noComma?expressionNoComma:expression)}}(noComma)):cont()}function maybeexpression(type){return type.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeexpressionNoComma(type){return type.match(/[;\}\)\],]/)?pass():pass(expressionNoComma)}function maybeoperatorComma(type,value){return","==type?cont(expression):maybeoperatorNoComma(type,value,!1)}function maybeoperatorNoComma(type,value,noComma){var me=0==noComma?maybeoperatorComma:maybeoperatorNoComma,expr=0==noComma?expression:expressionNoComma;return"=>"==type?cont(pushcontext,noComma?arrowBodyNoComma:arrowBody,popcontext):"operator"==type?/\+\+|--/.test(value)?cont(me):"?"==value?cont(expression,expect(":"),expr):cont(expr):"quasi"==type?pass(quasi,me):";"!=type?"("==type?contCommasep(expressionNoComma,")","call",me):"."==type?cont(property,me):"["==type?cont(pushlex("]"),maybeexpression,expect("]"),poplex,me):void 0:void 0}function quasi(type,value){return"quasi"!=type?pass():"${"!=value.slice(value.length-2)?cont(quasi):cont(expression,continueQuasi)}function continueQuasi(type){if("}"==type)return cx.marked="string-2",cx.state.tokenize=tokenQuasi,cont(quasi)}function arrowBody(type){return findFatArrow(cx.stream,cx.state),pass("{"==type?statement:expression)}function arrowBodyNoComma(type){return findFatArrow(cx.stream,cx.state),pass("{"==type?statement:expressionNoComma)}function target(_,value){if("target"==value)return cx.marked="keyword",cont(maybeoperatorComma)}function targetNoComma(_,value){if("target"==value)return cx.marked="keyword",cont(maybeoperatorNoComma)}function maybelabel(type){return":"==type?cont(poplex,statement):pass(maybeoperatorComma,expect(";"),poplex)}function property(type){if("variable"==type)return cx.marked="property",cont()}function objprop(type,value){return"variable"==type||"keyword"==cx.style?(cx.marked="property",cont("get"==value||"set"==value?getterSetter:afterprop)):"number"==type||"string"==type?(cx.marked=jsonldMode?"property":cx.style+" property",cont(afterprop)):"jsonld-keyword"==type?cont(afterprop):"modifier"==type?cont(objprop):"["==type?cont(expression,expect("]"),afterprop):"spread"==type?cont(expression):void 0}function getterSetter(type){return"variable"!=type?pass(afterprop):(cx.marked="property",cont(functiondef))}function afterprop(type){return":"==type?cont(expressionNoComma):"("==type?pass(functiondef):void 0}function commasep(what,end){function proceed(type){if(","!=type)return type==end?cont():cont(expect(end));var lex=cx.state.lexical;return"call"==lex.info&&(lex.pos=(lex.pos||0)+1),cont(what,proceed)}return function(type){return type==end?cont():pass(what,proceed)}}function contCommasep(what,end,info){for(var i=3;i<arguments.length;i++)cx.cc.push(arguments[i]);return cont(pushlex(end,info),commasep(what,end),poplex)}function block(type){return"}"==type?cont():pass(statement,block)}function maybetype(type){if(isTS&&":"==type)return cont(typedef)}function maybedefault(_,value){if("="==value)return cont(expressionNoComma)}function typedef(type){if("variable"==type)return cx.marked="variable-3",cont()}function vardef(){return pass(pattern,maybetype,maybeAssign,vardefCont)}function pattern(type,value){return"modifier"==type?cont(pattern):"variable"==type?(register(value),cont()):"spread"==type?cont(pattern):"["==type?contCommasep(pattern,"]"):"{"==type?contCommasep(proppattern,"}"):void 0}function proppattern(type,value){return"variable"!=type||cx.stream.match(/^\s*:/,!1)?("variable"==type&&(cx.marked="property"),"spread"==type?cont(pattern):cont(expect(":"),pattern,maybeAssign)):(register(value),cont(maybeAssign))}function maybeAssign(_type,value){if("="==value)return cont(expressionNoComma)}function vardefCont(type){if(","==type)return cont(vardef)}function maybeelse(type,value){if("keyword b"==type&&"else"==value)return cont(pushlex("form","else"),statement,poplex)}function forspec(type){if("("==type)return cont(pushlex(")"),forspec1,expect(")"),poplex)}function forspec1(type){return"var"==type?cont(vardef,expect(";"),forspec2):";"==type?cont(forspec2):"variable"==type?cont(formaybeinof):pass(expression,expect(";"),forspec2)}function formaybeinof(_type,value){return"in"==value||"of"==value?(cx.marked="keyword",cont(expression)):cont(maybeoperatorComma,forspec2)}function forspec2(type,value){return";"==type?cont(forspec3):"in"==value||"of"==value?(cx.marked="keyword",cont(expression)):pass(expression,expect(";"),forspec3)}function forspec3(type){")"!=type&&cont(expression)}function functiondef(type,value){return"*"==value?(cx.marked="keyword",cont(functiondef)):"variable"==type?(register(value),cont(functiondef)):"("==type?cont(pushcontext,pushlex(")"),commasep(funarg,")"),poplex,statement,popcontext):void 0}function funarg(type){return"spread"==type?cont(funarg):pass(pattern,maybetype,maybedefault)}function className(type,value){if("variable"==type)return register(value),cont(classNameAfter)}function classNameAfter(type,value){return"extends"==value?cont(expression,classNameAfter):"{"==type?cont(pushlex("}"),classBody,poplex):void 0}function classBody(type,value){return"variable"==type||"keyword"==cx.style?"static"==value?(cx.marked="keyword",cont(classBody)):(cx.marked="property","get"==value||"set"==value?cont(classGetterSetter,functiondef,classBody):cont(functiondef,classBody)):"*"==value?(cx.marked="keyword",cont(classBody)):";"==type?cont(classBody):"}"==type?cont():void 0}function classGetterSetter(type){return"variable"!=type?pass():(cx.marked="property",cont())}function afterExport(_type,value){return"*"==value?(cx.marked="keyword",cont(maybeFrom,expect(";"))):"default"==value?(cx.marked="keyword",cont(expression,expect(";"))):pass(statement)}function afterImport(type){return"string"==type?cont():pass(importSpec,maybeFrom)}function importSpec(type,value){return"{"==type?contCommasep(importSpec,"}"):("variable"==type&&register(value),"*"==value&&(cx.marked="keyword"),cont(maybeAs))}function maybeAs(_type,value){if("as"==value)return cx.marked="keyword",cont(importSpec)}function maybeFrom(_type,value){if("from"==value)return cx.marked="keyword",cont(expression)}function arrayLiteral(type){return"]"==type?cont():pass(expressionNoComma,maybeArrayComprehension)}function maybeArrayComprehension(type){return"for"==type?pass(comprehension,expect("]")):","==type?cont(commasep(maybeexpressionNoComma,"]")):pass(commasep(expressionNoComma,"]"))}function comprehension(type){return"for"==type?cont(forspec,comprehension):"if"==type?cont(expression,comprehension):void 0}return poplex.lex=!0,{startState:function(basecolumn){var state={tokenize:tokenBase,lastType:"sof",cc:[],lexical:new JSLexical((basecolumn||0)-indentUnit,0,"block",!1),localVars:parserConfig.localVars,context:parserConfig.localVars&&{vars:parserConfig.localVars},indented:0};return parserConfig.globalVars&&"object"==typeof parserConfig.globalVars&&(state.globalVars=parserConfig.globalVars),state},token:function(stream,state){if(stream.sol()&&(state.lexical.hasOwnProperty("align")||(state.lexical.align=!1),state.indented=stream.indentation(),findFatArrow(stream,state)),state.tokenize!=tokenComment&&stream.eatSpace())return null;var style=state.tokenize(stream,state);return"comment"==type?style:(state.lastType="operator"!=type||"++"!=content&&"--"!=content?type:"incdec",function(state,style,type,content,stream){var cc=state.cc;for(cx.state=state,cx.stream=stream,cx.marked=null,cx.cc=cc,cx.style=style,state.lexical.hasOwnProperty("align")||(state.lexical.align=!0);;)if((cc.length?cc.pop():jsonMode?expression:statement)(type,content)){for(;cc.length&&cc[cc.length-1].lex;)cc.pop()();return cx.marked?cx.marked:"variable"==type&&inScope(state,content)?"variable-2":style}}(state,style,type,content,stream))},indent:function(state,textAfter){if(state.tokenize==tokenComment)return CodeMirror.Pass;if(state.tokenize!=tokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;if(!/^\s*else\b/.test(textAfter))for(var i=state.cc.length-1;0<=i;--i){var c=state.cc[i];if(c==poplex)lexical=lexical.prev;else if(c!=maybeelse)break}"stat"==lexical.type&&"}"==firstChar&&(lexical=lexical.prev),statementIndent&&")"==lexical.type&&"stat"==lexical.prev.type&&(lexical=lexical.prev);var type=lexical.type,closing=firstChar==type;return"vardef"==type?lexical.indented+("operator"==state.lastType||","==state.lastType?lexical.info+1:0):"form"==type&&"{"==firstChar?lexical.indented:"form"==type?lexical.indented+indentUnit:"stat"==type?lexical.indented+(function(state,textAfter){return"operator"==state.lastType||","==state.lastType||isOperatorChar.test(textAfter.charAt(0))||/[,.]/.test(textAfter.charAt(0))}(state,textAfter)?statementIndent||indentUnit:0):"switch"!=lexical.info||closing||0==parserConfig.doubleIndentSwitch?lexical.align?lexical.column+(closing?0:1):lexical.indented+(closing?0:indentUnit):lexical.indented+(/^(?:case|default)\b/.test(textAfter)?indentUnit:2*indentUnit)},electricInput:/^\s*(?:case .*?:|default:|\{|\})$/,blockCommentStart:jsonMode?null:"/*",blockCommentEnd:jsonMode?null:"*/",lineComment:jsonMode?null:"//",fold:"brace",closeBrackets:"()[]{}''\"\"``",helperType:jsonMode?"json":"javascript",jsonldMode:jsonldMode,jsonMode:jsonMode}}),CodeMirror.registerHelper("wordChars","javascript",/[\w$]/),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/x-javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/ld+json",{name:"javascript",jsonld:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){function keySet(array){for(var keys={},i=0;i<array.length;++i)keys[array[i]]=!0;return keys}CodeMirror.defineMode("css",function(config,parserConfig){var inline=parserConfig.inline;parserConfig.propertyKeywords||(parserConfig=CodeMirror.resolveMode("text/css"));var type,override,indentUnit=config.indentUnit,tokenHooks=parserConfig.tokenHooks,documentTypes=parserConfig.documentTypes||{},mediaTypes=parserConfig.mediaTypes||{},mediaFeatures=parserConfig.mediaFeatures||{},mediaValueKeywords=parserConfig.mediaValueKeywords||{},propertyKeywords=parserConfig.propertyKeywords||{},nonStandardPropertyKeywords=parserConfig.nonStandardPropertyKeywords||{},fontProperties=parserConfig.fontProperties||{},counterDescriptors=parserConfig.counterDescriptors||{},colorKeywords=parserConfig.colorKeywords||{},valueKeywords=parserConfig.valueKeywords||{},allowNested=parserConfig.allowNested,supportsAtComponent=!0===parserConfig.supportsAtComponent;function ret(style,tp){return type=tp,style}function tokenString(quote){return function(stream,state){for(var ch,escaped=!1;null!=(ch=stream.next());){if(ch==quote&&!escaped){")"==quote&&stream.backUp(1);break}escaped=!escaped&&"\\"==ch}return(ch==quote||!escaped&&")"!=quote)&&(state.tokenize=null),ret("string","string")}}function tokenParenthesized(stream,state){return stream.next(),stream.match(/\s*[\"\')]/,!1)?state.tokenize=null:state.tokenize=tokenString(")"),ret(null,"(")}function Context(type,indent,prev){this.type=type,this.indent=indent,this.prev=prev}function pushContext(state,stream,type,indent){return state.context=new Context(type,stream.indentation()+(!1===indent?0:indentUnit),state.context),type}function popContext(state){return state.context.prev&&(state.context=state.context.prev),state.context.type}function pass(type,stream,state){return states[state.context.type](type,stream,state)}function popAndPass(type,stream,state,n){for(var i=n||1;0<i;i--)state.context=state.context.prev;return pass(type,stream,state)}function wordAsValue(stream){var word=stream.current().toLowerCase();override=valueKeywords.hasOwnProperty(word)?"atom":colorKeywords.hasOwnProperty(word)?"keyword":"variable"}var states={top:function(type,stream,state){if("{"==type)return pushContext(state,stream,"block");if("}"==type&&state.context.prev)return popContext(state);if(supportsAtComponent&&/@component/.test(type))return pushContext(state,stream,"atComponentBlock");if(/^@(-moz-)?document$/.test(type))return pushContext(state,stream,"documentTypes");if(/^@(media|supports|(-moz-)?document|import)$/.test(type))return pushContext(state,stream,"atBlock");if(/^@(font-face|counter-style)/.test(type))return state.stateArg=type,"restricted_atBlock_before";if(/^@(-(moz|ms|o|webkit)-)?keyframes$/.test(type))return"keyframes";if(type&&"@"==type.charAt(0))return pushContext(state,stream,"at");if("hash"==type)override="builtin";else if("word"==type)override="tag";else{if("variable-definition"==type)return"maybeprop";if("interpolation"==type)return pushContext(state,stream,"interpolation");if(":"==type)return"pseudo";if(allowNested&&"("==type)return pushContext(state,stream,"parens")}return state.context.type},block:function(type,stream,state){if("word"!=type)return"meta"==type?"block":allowNested||"hash"!=type&&"qualifier"!=type?states.top(type,stream,state):(override="error","block");var word=stream.current().toLowerCase();return propertyKeywords.hasOwnProperty(word)?(override="property","maybeprop"):nonStandardPropertyKeywords.hasOwnProperty(word)?(override="string-2","maybeprop"):allowNested?(override=stream.match(/^\s*:(?:\s|$)/,!1)?"property":"tag","block"):(override+=" error","maybeprop")},maybeprop:function(type,stream,state){return":"==type?pushContext(state,stream,"prop"):pass(type,stream,state)},prop:function(type,stream,state){if(";"==type)return popContext(state);if("{"==type&&allowNested)return pushContext(state,stream,"propBlock");if("}"==type||"{"==type)return popAndPass(type,stream,state);if("("==type)return pushContext(state,stream,"parens");if("hash"!=type||/^#([0-9a-fA-f]{3,4}|[0-9a-fA-f]{6}|[0-9a-fA-f]{8})$/.test(stream.current())){if("word"==type)wordAsValue(stream);else if("interpolation"==type)return pushContext(state,stream,"interpolation")}else override+=" error";return"prop"},propBlock:function(type,_stream,state){return"}"==type?popContext(state):"word"==type?(override="property","maybeprop"):state.context.type},parens:function(type,stream,state){return"{"==type||"}"==type?popAndPass(type,stream,state):")"==type?popContext(state):"("==type?pushContext(state,stream,"parens"):"interpolation"==type?pushContext(state,stream,"interpolation"):("word"==type&&wordAsValue(stream),"parens")},pseudo:function(type,stream,state){return"word"==type?(override="variable-3",state.context.type):pass(type,stream,state)},documentTypes:function(type,stream,state){return"word"==type&&documentTypes.hasOwnProperty(stream.current())?(override="tag",state.context.type):states.atBlock(type,stream,state)},atBlock:function(type,stream,state){if("("==type)return pushContext(state,stream,"atBlock_parens");if("}"==type||";"==type)return popAndPass(type,stream,state);if("{"==type)return popContext(state)&&pushContext(state,stream,allowNested?"block":"top");if("interpolation"==type)return pushContext(state,stream,"interpolation");if("word"==type){var word=stream.current().toLowerCase();override="only"==word||"not"==word||"and"==word||"or"==word?"keyword":mediaTypes.hasOwnProperty(word)?"attribute":mediaFeatures.hasOwnProperty(word)?"property":mediaValueKeywords.hasOwnProperty(word)?"keyword":propertyKeywords.hasOwnProperty(word)?"property":nonStandardPropertyKeywords.hasOwnProperty(word)?"string-2":valueKeywords.hasOwnProperty(word)?"atom":colorKeywords.hasOwnProperty(word)?"keyword":"error"}return state.context.type},atComponentBlock:function(type,stream,state){return"}"==type?popAndPass(type,stream,state):"{"==type?popContext(state)&&pushContext(state,stream,allowNested?"block":"top",!1):("word"==type&&(override="error"),state.context.type)},atBlock_parens:function(type,stream,state){return")"==type?popContext(state):"{"==type||"}"==type?popAndPass(type,stream,state,2):states.atBlock(type,stream,state)},restricted_atBlock_before:function(type,stream,state){return"{"==type?pushContext(state,stream,"restricted_atBlock"):"word"==type&&"@counter-style"==state.stateArg?(override="variable","restricted_atBlock_before"):pass(type,stream,state)},restricted_atBlock:function(type,stream,state){return"}"==type?(state.stateArg=null,popContext(state)):"word"==type?(override="@font-face"==state.stateArg&&!fontProperties.hasOwnProperty(stream.current().toLowerCase())||"@counter-style"==state.stateArg&&!counterDescriptors.hasOwnProperty(stream.current().toLowerCase())?"error":"property","maybeprop"):"restricted_atBlock"},keyframes:function(type,stream,state){return"word"==type?(override="variable","keyframes"):"{"==type?pushContext(state,stream,"top"):pass(type,stream,state)},at:function(type,stream,state){return";"==type?popContext(state):"{"==type||"}"==type?popAndPass(type,stream,state):("word"==type?override="tag":"hash"==type&&(override="builtin"),"at")},interpolation:function(type,stream,state){return"}"==type?popContext(state):"{"==type||";"==type?popAndPass(type,stream,state):("word"==type?override="variable":"variable"!=type&&"("!=type&&")"!=type&&(override="error"),"interpolation")}};return{startState:function(base){return{tokenize:null,state:inline?"block":"top",stateArg:null,context:new Context(inline?"block":"top",base||0,null)}},token:function(stream,state){if(!state.tokenize&&stream.eatSpace())return null;var style=(state.tokenize||function(stream,state){var ch=stream.next();if(tokenHooks[ch]){var result=tokenHooks[ch](stream,state);if(!1!==result)return result}return"@"==ch?(stream.eatWhile(/[\w\\\-]/),ret("def",stream.current())):"="==ch||("~"==ch||"|"==ch)&&stream.eat("=")?ret(null,"compare"):'"'==ch||"'"==ch?(state.tokenize=tokenString(ch),state.tokenize(stream,state)):"#"==ch?(stream.eatWhile(/[\w\\\-]/),ret("atom","hash")):"!"==ch?(stream.match(/^\s*\w*/),ret("keyword","important")):/\d/.test(ch)||"."==ch&&stream.eat(/\d/)?(stream.eatWhile(/[\w.%]/),ret("number","unit")):"-"!==ch?/[,+>*\/]/.test(ch)?ret(null,"select-op"):"."==ch&&stream.match(/^-?[_a-z][_a-z0-9-]*/i)?ret("qualifier","qualifier"):/[:;{}\[\]\(\)]/.test(ch)?ret(null,ch):"u"==ch&&stream.match(/rl(-prefix)?\(/)||"d"==ch&&stream.match("omain(")||"r"==ch&&stream.match("egexp(")?(stream.backUp(1),state.tokenize=tokenParenthesized,ret("property","word")):/[\w\\\-]/.test(ch)?(stream.eatWhile(/[\w\\\-]/),ret("property","word")):ret(null,null):/[\d.]/.test(stream.peek())?(stream.eatWhile(/[\w.%]/),ret("number","unit")):stream.match(/^-[\w\\\-]+/)?(stream.eatWhile(/[\w\\\-]/),stream.match(/^\s*:/,!1)?ret("variable-2","variable-definition"):ret("variable-2","variable")):stream.match(/^\w+-/)?ret("meta","meta"):void 0})(stream,state);return style&&"object"==typeof style&&(type=style[1],style=style[0]),override=style,state.state=states[state.state](type,stream,state),override},indent:function(state,textAfter){var cx=state.context,ch=textAfter&&textAfter.charAt(0),indent=cx.indent;return"prop"!=cx.type||"}"!=ch&&")"!=ch||(cx=cx.prev),cx.prev&&("}"!=ch||"block"!=cx.type&&"top"!=cx.type&&"interpolation"!=cx.type&&"restricted_atBlock"!=cx.type?(")"!=ch||"parens"!=cx.type&&"atBlock_parens"!=cx.type)&&("{"!=ch||"at"!=cx.type&&"atBlock"!=cx.type)||(indent=Math.max(0,cx.indent-indentUnit),cx=cx.prev):indent=(cx=cx.prev).indent),indent},electricChars:"}",blockCommentStart:"/*",blockCommentEnd:"*/",fold:"brace"}});var documentTypes_=["domain","regexp","url","url-prefix"],documentTypes=keySet(documentTypes_),mediaTypes_=["all","aural","braille","handheld","print","projection","screen","tty","tv","embossed"],mediaTypes=keySet(mediaTypes_),mediaFeatures_=["width","min-width","max-width","height","min-height","max-height","device-width","min-device-width","max-device-width","device-height","min-device-height","max-device-height","aspect-ratio","min-aspect-ratio","max-aspect-ratio","device-aspect-ratio","min-device-aspect-ratio","max-device-aspect-ratio","color","min-color","max-color","color-index","min-color-index","max-color-index","monochrome","min-monochrome","max-monochrome","resolution","min-resolution","max-resolution","scan","grid","orientation","device-pixel-ratio","min-device-pixel-ratio","max-device-pixel-ratio","pointer","any-pointer","hover","any-hover"],mediaFeatures=keySet(mediaFeatures_),mediaValueKeywords_=["landscape","portrait","none","coarse","fine","on-demand","hover","interlace","progressive"],mediaValueKeywords=keySet(mediaValueKeywords_),propertyKeywords_=["align-content","align-items","align-self","alignment-adjust","alignment-baseline","anchor-point","animation","animation-delay","animation-direction","animation-duration","animation-fill-mode","animation-iteration-count","animation-name","animation-play-state","animation-timing-function","appearance","azimuth","backface-visibility","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","baseline-shift","binding","bleed","bookmark-label","bookmark-level","bookmark-state","bookmark-target","border","border-bottom","border-bottom-color","border-bottom-left-radius","border-bottom-right-radius","border-bottom-style","border-bottom-width","border-collapse","border-color","border-image","border-image-outset","border-image-repeat","border-image-slice","border-image-source","border-image-width","border-left","border-left-color","border-left-style","border-left-width","border-radius","border-right","border-right-color","border-right-style","border-right-width","border-spacing","border-style","border-top","border-top-color","border-top-left-radius","border-top-right-radius","border-top-style","border-top-width","border-width","bottom","box-decoration-break","box-shadow","box-sizing","break-after","break-before","break-inside","caption-side","clear","clip","color","color-profile","column-count","column-fill","column-gap","column-rule","column-rule-color","column-rule-style","column-rule-width","column-span","column-width","columns","content","counter-increment","counter-reset","crop","cue","cue-after","cue-before","cursor","direction","display","dominant-baseline","drop-initial-after-adjust","drop-initial-after-align","drop-initial-before-adjust","drop-initial-before-align","drop-initial-size","drop-initial-value","elevation","empty-cells","fit","fit-position","flex","flex-basis","flex-direction","flex-flow","flex-grow","flex-shrink","flex-wrap","float","float-offset","flow-from","flow-into","font","font-feature-settings","font-family","font-kerning","font-language-override","font-size","font-size-adjust","font-stretch","font-style","font-synthesis","font-variant","font-variant-alternates","font-variant-caps","font-variant-east-asian","font-variant-ligatures","font-variant-numeric","font-variant-position","font-weight","grid","grid-area","grid-auto-columns","grid-auto-flow","grid-auto-position","grid-auto-rows","grid-column","grid-column-end","grid-column-start","grid-row","grid-row-end","grid-row-start","grid-template","grid-template-areas","grid-template-columns","grid-template-rows","hanging-punctuation","height","hyphens","icon","image-orientation","image-rendering","image-resolution","inline-box-align","justify-content","left","letter-spacing","line-break","line-height","line-stacking","line-stacking-ruby","line-stacking-shift","line-stacking-strategy","list-style","list-style-image","list-style-position","list-style-type","margin","margin-bottom","margin-left","margin-right","margin-top","marker-offset","marks","marquee-direction","marquee-loop","marquee-play-count","marquee-speed","marquee-style","max-height","max-width","min-height","min-width","move-to","nav-down","nav-index","nav-left","nav-right","nav-up","object-fit","object-position","opacity","order","orphans","outline","outline-color","outline-offset","outline-style","outline-width","overflow","overflow-style","overflow-wrap","overflow-x","overflow-y","padding","padding-bottom","padding-left","padding-right","padding-top","page","page-break-after","page-break-before","page-break-inside","page-policy","pause","pause-after","pause-before","perspective","perspective-origin","pitch","pitch-range","play-during","position","presentation-level","punctuation-trim","quotes","region-break-after","region-break-before","region-break-inside","region-fragment","rendering-intent","resize","rest","rest-after","rest-before","richness","right","rotation","rotation-point","ruby-align","ruby-overhang","ruby-position","ruby-span","shape-image-threshold","shape-inside","shape-margin","shape-outside","size","speak","speak-as","speak-header","speak-numeral","speak-punctuation","speech-rate","stress","string-set","tab-size","table-layout","target","target-name","target-new","target-position","text-align","text-align-last","text-decoration","text-decoration-color","text-decoration-line","text-decoration-skip","text-decoration-style","text-emphasis","text-emphasis-color","text-emphasis-position","text-emphasis-style","text-height","text-indent","text-justify","text-outline","text-overflow","text-shadow","text-size-adjust","text-space-collapse","text-transform","text-underline-position","text-wrap","top","transform","transform-origin","transform-style","transition","transition-delay","transition-duration","transition-property","transition-timing-function","unicode-bidi","vertical-align","visibility","voice-balance","voice-duration","voice-family","voice-pitch","voice-range","voice-rate","voice-stress","voice-volume","volume","white-space","widows","width","word-break","word-spacing","word-wrap","z-index","clip-path","clip-rule","mask","enable-background","filter","flood-color","flood-opacity","lighting-color","stop-color","stop-opacity","pointer-events","color-interpolation","color-interpolation-filters","color-rendering","fill","fill-opacity","fill-rule","image-rendering","marker","marker-end","marker-mid","marker-start","shape-rendering","stroke","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-rendering","baseline-shift","dominant-baseline","glyph-orientation-horizontal","glyph-orientation-vertical","text-anchor","writing-mode"],propertyKeywords=keySet(propertyKeywords_),nonStandardPropertyKeywords_=["scrollbar-arrow-color","scrollbar-base-color","scrollbar-dark-shadow-color","scrollbar-face-color","scrollbar-highlight-color","scrollbar-shadow-color","scrollbar-3d-light-color","scrollbar-track-color","shape-inside","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","zoom"],nonStandardPropertyKeywords=keySet(nonStandardPropertyKeywords_),fontProperties=keySet(["font-family","src","unicode-range","font-variant","font-feature-settings","font-stretch","font-weight","font-style"]),counterDescriptors=keySet(["additive-symbols","fallback","negative","pad","prefix","range","speak-as","suffix","symbols","system"]),colorKeywords_=["aliceblue","antiquewhite","aqua","aquamarine","azure","beige","bisque","black","blanchedalmond","blue","blueviolet","brown","burlywood","cadetblue","chartreuse","chocolate","coral","cornflowerblue","cornsilk","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkgray","darkgreen","darkkhaki","darkmagenta","darkolivegreen","darkorange","darkorchid","darkred","darksalmon","darkseagreen","darkslateblue","darkslategray","darkturquoise","darkviolet","deeppink","deepskyblue","dimgray","dodgerblue","firebrick","floralwhite","forestgreen","fuchsia","gainsboro","ghostwhite","gold","goldenrod","gray","grey","green","greenyellow","honeydew","hotpink","indianred","indigo","ivory","khaki","lavender","lavenderblush","lawngreen","lemonchiffon","lightblue","lightcoral","lightcyan","lightgoldenrodyellow","lightgray","lightgreen","lightpink","lightsalmon","lightseagreen","lightskyblue","lightslategray","lightsteelblue","lightyellow","lime","limegreen","linen","magenta","maroon","mediumaquamarine","mediumblue","mediumorchid","mediumpurple","mediumseagreen","mediumslateblue","mediumspringgreen","mediumturquoise","mediumvioletred","midnightblue","mintcream","mistyrose","moccasin","navajowhite","navy","oldlace","olive","olivedrab","orange","orangered","orchid","palegoldenrod","palegreen","paleturquoise","palevioletred","papayawhip","peachpuff","peru","pink","plum","powderblue","purple","rebeccapurple","red","rosybrown","royalblue","saddlebrown","salmon","sandybrown","seagreen","seashell","sienna","silver","skyblue","slateblue","slategray","snow","springgreen","steelblue","tan","teal","thistle","tomato","turquoise","violet","wheat","white","whitesmoke","yellow","yellowgreen"],colorKeywords=keySet(colorKeywords_),valueKeywords_=["above","absolute","activeborder","additive","activecaption","afar","after-white-space","ahead","alias","all","all-scroll","alphabetic","alternate","always","amharic","amharic-abegede","antialiased","appworkspace","arabic-indic","armenian","asterisks","attr","auto","avoid","avoid-column","avoid-page","avoid-region","background","backwards","baseline","below","bidi-override","binary","bengali","blink","block","block-axis","bold","bolder","border","border-box","both","bottom","break","break-all","break-word","bullets","button","button-bevel","buttonface","buttonhighlight","buttonshadow","buttontext","calc","cambodian","capitalize","caps-lock-indicator","caption","captiontext","caret","cell","center","checkbox","circle","cjk-decimal","cjk-earthly-branch","cjk-heavenly-stem","cjk-ideographic","clear","clip","close-quote","col-resize","collapse","column","column-reverse","compact","condensed","contain","content","content-box","context-menu","continuous","copy","counter","counters","cover","crop","cross","crosshair","currentcolor","cursive","cyclic","dashed","decimal","decimal-leading-zero","default","default-button","destination-atop","destination-in","destination-out","destination-over","devanagari","disc","discard","disclosure-closed","disclosure-open","document","dot-dash","dot-dot-dash","dotted","double","down","e-resize","ease","ease-in","ease-in-out","ease-out","element","ellipse","ellipsis","embed","end","ethiopic","ethiopic-abegede","ethiopic-abegede-am-et","ethiopic-abegede-gez","ethiopic-abegede-ti-er","ethiopic-abegede-ti-et","ethiopic-halehame-aa-er","ethiopic-halehame-aa-et","ethiopic-halehame-am-et","ethiopic-halehame-gez","ethiopic-halehame-om-et","ethiopic-halehame-sid-et","ethiopic-halehame-so-et","ethiopic-halehame-ti-er","ethiopic-halehame-ti-et","ethiopic-halehame-tig","ethiopic-numeric","ew-resize","expanded","extends","extra-condensed","extra-expanded","fantasy","fast","fill","fixed","flat","flex","flex-end","flex-start","footnotes","forwards","from","geometricPrecision","georgian","graytext","groove","gujarati","gurmukhi","hand","hangul","hangul-consonant","hebrew","help","hidden","hide","higher","highlight","highlighttext","hiragana","hiragana-iroha","horizontal","hsl","hsla","icon","ignore","inactiveborder","inactivecaption","inactivecaptiontext","infinite","infobackground","infotext","inherit","initial","inline","inline-axis","inline-block","inline-flex","inline-table","inset","inside","intrinsic","invert","italic","japanese-formal","japanese-informal","justify","kannada","katakana","katakana-iroha","keep-all","khmer","korean-hangul-formal","korean-hanja-formal","korean-hanja-informal","landscape","lao","large","larger","left","level","lighter","line-through","linear","linear-gradient","lines","list-item","listbox","listitem","local","logical","loud","lower","lower-alpha","lower-armenian","lower-greek","lower-hexadecimal","lower-latin","lower-norwegian","lower-roman","lowercase","ltr","malayalam","match","matrix","matrix3d","media-controls-background","media-current-time-display","media-fullscreen-button","media-mute-button","media-play-button","media-return-to-realtime-button","media-rewind-button","media-seek-back-button","media-seek-forward-button","media-slider","media-sliderthumb","media-time-remaining-display","media-volume-slider","media-volume-slider-container","media-volume-sliderthumb","medium","menu","menulist","menulist-button","menulist-text","menulist-textfield","menutext","message-box","middle","min-intrinsic","mix","mongolian","monospace","move","multiple","myanmar","n-resize","narrower","ne-resize","nesw-resize","no-close-quote","no-drop","no-open-quote","no-repeat","none","normal","not-allowed","nowrap","ns-resize","numbers","numeric","nw-resize","nwse-resize","oblique","octal","open-quote","optimizeLegibility","optimizeSpeed","oriya","oromo","outset","outside","outside-shape","overlay","overline","padding","padding-box","painted","page","paused","persian","perspective","plus-darker","plus-lighter","pointer","polygon","portrait","pre","pre-line","pre-wrap","preserve-3d","progress","push-button","radial-gradient","radio","read-only","read-write","read-write-plaintext-only","rectangle","region","relative","repeat","repeating-linear-gradient","repeating-radial-gradient","repeat-x","repeat-y","reset","reverse","rgb","rgba","ridge","right","rotate","rotate3d","rotateX","rotateY","rotateZ","round","row","row-resize","row-reverse","rtl","run-in","running","s-resize","sans-serif","scale","scale3d","scaleX","scaleY","scaleZ","scroll","scrollbar","se-resize","searchfield","searchfield-cancel-button","searchfield-decoration","searchfield-results-button","searchfield-results-decoration","semi-condensed","semi-expanded","separate","serif","show","sidama","simp-chinese-formal","simp-chinese-informal","single","skew","skewX","skewY","skip-white-space","slide","slider-horizontal","slider-vertical","sliderthumb-horizontal","sliderthumb-vertical","slow","small","small-caps","small-caption","smaller","solid","somali","source-atop","source-in","source-out","source-over","space","space-around","space-between","spell-out","square","square-button","start","static","status-bar","stretch","stroke","sub","subpixel-antialiased","super","sw-resize","symbolic","symbols","table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row","table-row-group","tamil","telugu","text","text-bottom","text-top","textarea","textfield","thai","thick","thin","threeddarkshadow","threedface","threedhighlight","threedlightshadow","threedshadow","tibetan","tigre","tigrinya-er","tigrinya-er-abegede","tigrinya-et","tigrinya-et-abegede","to","top","trad-chinese-formal","trad-chinese-informal","translate","translate3d","translateX","translateY","translateZ","transparent","ultra-condensed","ultra-expanded","underline","up","upper-alpha","upper-armenian","upper-greek","upper-hexadecimal","upper-latin","upper-norwegian","upper-roman","uppercase","urdu","url","var","vertical","vertical-text","visible","visibleFill","visiblePainted","visibleStroke","visual","w-resize","wait","wave","wider","window","windowframe","windowtext","words","wrap","wrap-reverse","x-large","x-small","xor","xx-large","xx-small"],valueKeywords=keySet(valueKeywords_),allWords=documentTypes_.concat(mediaTypes_).concat(mediaFeatures_).concat(mediaValueKeywords_).concat(propertyKeywords_).concat(nonStandardPropertyKeywords_).concat(colorKeywords_).concat(valueKeywords_);function tokenCComment(stream,state){for(var ch,maybeEnd=!1;null!=(ch=stream.next());){if(maybeEnd&&"/"==ch){state.tokenize=null;break}maybeEnd="*"==ch}return["comment","comment"]}CodeMirror.registerHelper("hintWords","css",allWords),CodeMirror.defineMIME("text/css",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,tokenHooks:{"/":function(stream,state){return!!stream.eat("*")&&(state.tokenize=tokenCComment)(stream,state)}},name:"css"}),CodeMirror.defineMIME("text/x-scss",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){return stream.eat("/")?(stream.skipToEnd(),["comment","comment"]):stream.eat("*")?(state.tokenize=tokenCComment)(stream,state):["operator","operator"]},":":function(stream){return!!stream.match(/\s*\{/)&&[null,"{"]},$:function(stream){return stream.match(/^[\w-]+/),stream.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"]},"#":function(stream){return!!stream.eat("{")&&[null,"interpolation"]}},name:"css",helperType:"scss"}),CodeMirror.defineMIME("text/x-less",{mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,mediaValueKeywords:mediaValueKeywords,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,colorKeywords:colorKeywords,valueKeywords:valueKeywords,fontProperties:fontProperties,allowNested:!0,tokenHooks:{"/":function(stream,state){return stream.eat("/")?(stream.skipToEnd(),["comment","comment"]):stream.eat("*")?(state.tokenize=tokenCComment)(stream,state):["operator","operator"]},"@":function(stream){return stream.eat("{")?[null,"interpolation"]:!stream.match(/^(charset|document|font-face|import|(-(moz|ms|o|webkit)-)?keyframes|media|namespace|page|supports)\b/,!1)&&(stream.eatWhile(/[\w\\\-]/),stream.match(/^\s*:/,!1)?["variable-2","variable-definition"]:["variable-2","variable"])},"&":function(){return["atom","atom"]}},name:"css",helperType:"less"}),CodeMirror.defineMIME("text/x-gss",{documentTypes:documentTypes,mediaTypes:mediaTypes,mediaFeatures:mediaFeatures,propertyKeywords:propertyKeywords,nonStandardPropertyKeywords:nonStandardPropertyKeywords,fontProperties:fontProperties,counterDescriptors:counterDescriptors,colorKeywords:colorKeywords,valueKeywords:valueKeywords,supportsAtComponent:!0,tokenHooks:{"/":function(stream,state){return!!stream.eat("*")&&(state.tokenize=tokenCComment)(stream,state)}},name:"css",helperType:"gss"})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],mod):mod(CodeMirror)}(function(CodeMirror){function Context(indented,column,type,info,align,prev){this.indented=indented,this.column=column,this.type=type,this.info=info,this.align=align,this.prev=prev}function pushContext(state,col,type,info){var indent=state.indented;return state.context&&"statement"==state.context.type&&"statement"!=type&&(indent=state.context.indented),state.context=new Context(indent,col,type,info,null,state.context)}function popContext(state){var t=state.context.type;return")"!=t&&"]"!=t&&"}"!=t||(state.indented=state.context.indented),state.context=state.context.prev}function typeBefore(stream,state,pos){return"variable"==state.prevToken||"variable-3"==state.prevToken||(!!/\S(?:[^- ]>|[*\]])\s*$|\*$/.test(stream.string.slice(0,pos))||(!(!state.typeAtEndOfLine||stream.column()!=stream.indentation())||void 0))}function isTopScope(context){for(;;){if(!context||"top"==context.type)return!0;if("}"==context.type&&"namespace"!=context.prev.info)return!1;context=context.prev}}function words(str){for(var obj={},words=str.split(" "),i=0;i<words.length;++i)obj[words[i]]=!0;return obj}function contains(words,word){return"function"==typeof words?words(word):words.propertyIsEnumerable(word)}CodeMirror.defineMode("clike",function(config,parserConfig){var curPunc,isDefKeyword,indentUnit=config.indentUnit,statementIndentUnit=parserConfig.statementIndentUnit||indentUnit,dontAlignCalls=parserConfig.dontAlignCalls,keywords=parserConfig.keywords||{},types=parserConfig.types||{},builtin=parserConfig.builtin||{},blockKeywords=parserConfig.blockKeywords||{},defKeywords=parserConfig.defKeywords||{},atoms=parserConfig.atoms||{},hooks=parserConfig.hooks||{},multiLineStrings=parserConfig.multiLineStrings,indentStatements=!1!==parserConfig.indentStatements,indentSwitch=!1!==parserConfig.indentSwitch,namespaceSeparator=parserConfig.namespaceSeparator,isPunctuationChar=parserConfig.isPunctuationChar||/[\[\]{}\(\),;\:\.]/,numberStart=parserConfig.numberStart||/[\d\.]/,number=parserConfig.number||/^(?:0x[a-f\d]+|0b[01]+|(?:\d+\.?\d*|\.\d+)(?:e[-+]?\d+)?)(u|ll?|l|f)?/i,isOperatorChar=parserConfig.isOperatorChar||/[+\-*&%=<>!?|\/]/;function tokenBase(stream,state){var quote,ch=stream.next();if(hooks[ch]){var result=hooks[ch](stream,state);if(!1!==result)return result}if('"'==ch||"'"==ch)return state.tokenize=(quote=ch,function(stream,state){for(var next,escaped=!1,end=!1;null!=(next=stream.next());){if(next==quote&&!escaped){end=!0;break}escaped=!escaped&&"\\"==next}return(end||!escaped&&!multiLineStrings)&&(state.tokenize=null),"string"}),state.tokenize(stream,state);if(isPunctuationChar.test(ch))return curPunc=ch,null;if(numberStart.test(ch)){if(stream.backUp(1),stream.match(number))return"number";stream.next()}if("/"==ch){if(stream.eat("*"))return(state.tokenize=tokenComment)(stream,state);if(stream.eat("/"))return stream.skipToEnd(),"comment"}if(isOperatorChar.test(ch)){for(;!stream.match(/^\/[\/*]/,!1)&&stream.eat(isOperatorChar););return"operator"}if(stream.eatWhile(/[\w\$_\xa1-\uffff]/),namespaceSeparator)for(;stream.match(namespaceSeparator);)stream.eatWhile(/[\w\$_\xa1-\uffff]/);var cur=stream.current();return contains(keywords,cur)?(contains(blockKeywords,cur)&&(curPunc="newstatement"),contains(defKeywords,cur)&&(isDefKeyword=!0),"keyword"):contains(types,cur)?"variable-3":contains(builtin,cur)?(contains(blockKeywords,cur)&&(curPunc="newstatement"),"builtin"):contains(atoms,cur)?"atom":"variable"}function tokenComment(stream,state){for(var ch,maybeEnd=!1;ch=stream.next();){if("/"==ch&&maybeEnd){state.tokenize=null;break}maybeEnd="*"==ch}return"comment"}function maybeEOL(stream,state){parserConfig.typeFirstDefinitions&&stream.eol()&&isTopScope(state.context)&&(state.typeAtEndOfLine=typeBefore(stream,state,stream.pos))}return{startState:function(basecolumn){return{tokenize:null,context:new Context((basecolumn||0)-indentUnit,0,"top",null,!1),indented:0,startOfLine:!0,prevToken:null}},token:function(stream,state){var ctx=state.context;if(stream.sol()&&(null==ctx.align&&(ctx.align=!1),state.indented=stream.indentation(),state.startOfLine=!0),stream.eatSpace())return maybeEOL(stream,state),null;curPunc=isDefKeyword=null;var style=(state.tokenize||tokenBase)(stream,state);if("comment"==style||"meta"==style)return style;if(null==ctx.align&&(ctx.align=!0),";"==curPunc||":"==curPunc||","==curPunc&&stream.match(/^\s*(?:\/\/.*)?$/,!1))for(;"statement"==state.context.type;)popContext(state);else if("{"==curPunc)pushContext(state,stream.column(),"}");else if("["==curPunc)pushContext(state,stream.column(),"]");else if("("==curPunc)pushContext(state,stream.column(),")");else if("}"==curPunc){for(;"statement"==ctx.type;)ctx=popContext(state);for("}"==ctx.type&&(ctx=popContext(state));"statement"==ctx.type;)ctx=popContext(state)}else curPunc==ctx.type?popContext(state):indentStatements&&(("}"==ctx.type||"top"==ctx.type)&&";"!=curPunc||"statement"==ctx.type&&"newstatement"==curPunc)&&pushContext(state,stream.column(),"statement",stream.current());if("variable"==style&&("def"==state.prevToken||parserConfig.typeFirstDefinitions&&typeBefore(stream,state,stream.start)&&isTopScope(state.context)&&stream.match(/^\s*\(/,!1))&&(style="def"),hooks.token){var result=hooks.token(stream,state,style);void 0!==result&&(style=result)}return"def"==style&&!1===parserConfig.styleDefs&&(style="variable"),state.startOfLine=!1,state.prevToken=isDefKeyword?"def":style||curPunc,maybeEOL(stream,state),style},indent:function(state,textAfter){if(state.tokenize!=tokenBase&&null!=state.tokenize||state.typeAtEndOfLine)return CodeMirror.Pass;var ctx=state.context,firstChar=textAfter&&textAfter.charAt(0);if("statement"==ctx.type&&"}"==firstChar&&(ctx=ctx.prev),parserConfig.dontIndentStatements)for(;"statement"==ctx.type&&parserConfig.dontIndentStatements.test(ctx.info);)ctx=ctx.prev;if(hooks.indent){var hook=hooks.indent(state,ctx,textAfter);if("number"==typeof hook)return hook}var closing=firstChar==ctx.type,switchBlock=ctx.prev&&"switch"==ctx.prev.info;if(parserConfig.allmanIndentation&&/[{(]/.test(firstChar)){for(;"top"!=ctx.type&&"}"!=ctx.type;)ctx=ctx.prev;return ctx.indented}return"statement"==ctx.type?ctx.indented+("{"==firstChar?0:statementIndentUnit):!ctx.align||dontAlignCalls&&")"==ctx.type?")"!=ctx.type||closing?ctx.indented+(closing?0:indentUnit)+(closing||!switchBlock||/^(?:case|default)\b/.test(textAfter)?0:indentUnit):ctx.indented+statementIndentUnit:ctx.column+(closing?0:1)},electricInput:indentSwitch?/^\s*(?:case .*?:|default:|\{\}?|\})$/:/^\s*[{}]$/,blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}});var cKeywords="auto if break case register continue return default do sizeof static else struct switch extern typedef union for goto while enum const volatile",cTypes="int long char short double float unsigned signed void size_t ptrdiff_t";function cppHook(stream,state){if(!state.startOfLine)return!1;for(var ch,next=null;ch=stream.peek();){if("\\"==ch&&stream.match(/^.$/)){next=cppHook;break}if("/"==ch&&stream.match(/^\/[\/\*]/,!1))break;stream.next()}return state.tokenize=next,"meta"}function pointerHook(_stream,state){return"variable-3"==state.prevToken&&"variable-3"}function cpp14Literal(stream){return stream.eatWhile(/[\w\.']/),"number"}function cpp11StringHook(stream,state){if(stream.backUp(1),stream.match(/(R|u8R|uR|UR|LR)/)){var match=stream.match(/"([^\s\\()]{0,16})\(/);return!!match&&(state.cpp11RawStringDelim=match[1],(state.tokenize=tokenRawString)(stream,state))}return stream.match(/(u8|u|U|L)/)?!!stream.match(/["']/,!1)&&"string":(stream.next(),!1)}function tokenAtString(stream,state){for(var next;null!=(next=stream.next());)if('"'==next&&!stream.eat('"')){state.tokenize=null;break}return"string"}function tokenRawString(stream,state){var delim=state.cpp11RawStringDelim.replace(/[^\w\s]/g,"\\$&");return stream.match(new RegExp(".*?\\)"+delim+'"'))?state.tokenize=null:stream.skipToEnd(),"string"}function def(mimes,mode){"string"==typeof mimes&&(mimes=[mimes]);var words=[];function add(obj){if(obj)for(var prop in obj)obj.hasOwnProperty(prop)&&words.push(prop)}add(mode.keywords),add(mode.types),add(mode.builtin),add(mode.atoms),words.length&&(mode.helperType=mimes[0],CodeMirror.registerHelper("hintWords",mimes[0],words));for(var i=0;i<mimes.length;++i)CodeMirror.defineMIME(mimes[i],mode)}function tokenTripleString(stream,state){for(var escaped=!1;!stream.eol();){if(!escaped&&stream.match('"""')){state.tokenize=null;break}escaped="\\"==stream.next()&&!escaped}return"string"}def(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:words(cKeywords),types:words(cTypes+" bool _Complex _Bool float_t double_t intptr_t intmax_t int8_t int16_t int32_t int64_t uintptr_t uintmax_t uint8_t uint16_t uint32_t uint64_t"),blockKeywords:words("case do else for if switch while struct"),defKeywords:words("struct"),typeFirstDefinitions:!0,atoms:words("null true false"),hooks:{"#":cppHook,"*":pointerHook},modeProps:{fold:["brace","include"]}}),def(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:words(cKeywords+" asm dynamic_cast namespace reinterpret_cast try explicit new static_cast typeid catch operator template typename class friend private this using const_cast inline public throw virtual delete mutable protected alignas alignof constexpr decltype nullptr noexcept thread_local final static_assert override"),types:words(cTypes+" bool wchar_t"),blockKeywords:words("catch class do else finally for if struct switch try while"),defKeywords:words("class namespace struct enum union"),typeFirstDefinitions:!0,atoms:words("true false null"),dontIndentStatements:/^template$/,hooks:{"#":cppHook,"*":pointerHook,u:cpp11StringHook,U:cpp11StringHook,L:cpp11StringHook,R:cpp11StringHook,0:cpp14Literal,1:cpp14Literal,2:cpp14Literal,3:cpp14Literal,4:cpp14Literal,5:cpp14Literal,6:cpp14Literal,7:cpp14Literal,8:cpp14Literal,9:cpp14Literal,token:function(stream,state,style){if("variable"==style&&"("==stream.peek()&&(";"==state.prevToken||null==state.prevToken||"}"==state.prevToken)&&(word=stream.current(),(lastTwo=/(\w+)::(\w+)$/.exec(word))&&lastTwo[1]==lastTwo[2]))return"def";var word,lastTwo}},namespaceSeparator:"::",modeProps:{fold:["brace","include"]}}),def("text/x-java",{name:"clike",keywords:words("abstract assert break case catch class const continue default do else enum extends final finally float for goto if implements import instanceof interface native new package private protected public return static strictfp super switch synchronized this throw throws transient try volatile while"),types:words("byte short int long float double boolean char void Boolean Byte Character Double Float Integer Long Number Object Short String StringBuffer StringBuilder Void"),blockKeywords:words("catch class do else finally for if switch try while"),defKeywords:words("class interface package enum"),typeFirstDefinitions:!0,atoms:words("true false null"),number:/^(?:0x[a-f\d_]+|0b[01_]+|(?:[\d_]+\.?\d*|\.\d+)(?:e[-+]?[\d_]+)?)(u|ll?|l|f)?/i,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"}},modeProps:{fold:["brace","import"]}}),def("text/x-csharp",{name:"clike",keywords:words("abstract as async await base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),types:words("Action Boolean Byte Char DateTime DateTimeOffset Decimal Double Func Guid Int16 Int32 Int64 Object SByte Single String Task TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),blockKeywords:words("catch class do else finally for foreach if struct switch try while"),defKeywords:words("class interface namespace struct var"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"@":function(stream,state){return stream.eat('"')?(state.tokenize=tokenAtString)(stream,state):(stream.eatWhile(/[\w\$_]/),"meta")}}}),def("text/x-scala",{name:"clike",keywords:words("abstract case catch class def do else extends final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble :: #:: "),types:words("AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Int Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),multiLineStrings:!0,blockKeywords:words("catch class do else finally for forSome if match switch try while"),defKeywords:words("class def object package trait type val var"),atoms:words("true false null"),indentStatements:!1,indentSwitch:!1,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"},'"':function(stream,state){return!!stream.match('""')&&(state.tokenize=tokenTripleString,state.tokenize(stream,state))},"'":function(stream){return stream.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},"=":function(stream,state){var cx=state.context;return!("}"!=cx.type||!cx.align||!stream.eat(">"))&&(state.context=new Context(cx.indented,cx.column,cx.type,cx.info,null,cx.prev),"operator")}},modeProps:{closeBrackets:{triples:'"'}}}),def("text/x-kotlin",{name:"clike",keywords:words("package as typealias class interface this super val var fun for is in This throw return break continue object if else while do try when !in !is as? file import where by get set abstract enum open inner override private public internal protected catch finally out final vararg reified dynamic companion constructor init sealed field property receiver param sparam lateinit data inline noinline tailrec external annotation crossinline const operator infix"),types:words("Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),intendSwitch:!1,indentStatements:!1,multiLineStrings:!0,blockKeywords:words("catch class do else finally for if where try while enum"),defKeywords:words("class val var object package interface fun"),atoms:words("true false null this"),hooks:{'"':function(stream,state){var tripleString;return state.tokenize=(tripleString=stream.match('""'),function(stream,state){for(var next,escaped=!1,end=!1;!stream.eol();){if(!tripleString&&!escaped&&stream.match('"')){end=!0;break}if(tripleString&&stream.match('"""')){end=!0;break}next=stream.next(),!escaped&&"$"==next&&stream.match("{")&&stream.skipTo("}"),escaped=!escaped&&"\\"==next&&!tripleString}return!end&&tripleString||(state.tokenize=null),"string"}),state.tokenize(stream,state)}},modeProps:{closeBrackets:{triples:'"'}}}),def(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:words("sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadow const attribute uniform varying break continue discard return for while do if else struct in out inout"),types:words("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4"),blockKeywords:words("for while do if else struct"),builtin:words("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smoothstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:words("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_PointCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),indentSwitch:!1,hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-nesc",{name:"clike",keywords:words(cKeywords+"as atomic async call command component components configuration event generic implementation includes interface module new norace nx_struct nx_union post provides signal task uses abstract extends"),types:words(cTypes),blockKeywords:words("case do else for if switch while struct"),atoms:words("null true false"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}}),def("text/x-objectivec",{name:"clike",keywords:words(cKeywords+"inline restrict _Bool _Complex _Imaginary BOOL Class bycopy byref id IMP in inout nil oneway out Protocol SEL self super atomic nonatomic retain copy readwrite readonly"),types:words(cTypes),atoms:words("YES NO NULL NILL ON OFF true false"),hooks:{"@":function(stream){return stream.eatWhile(/[\w\$]/),"keyword"},"#":cppHook,indent:function(_state,ctx,textAfter){if("statement"==ctx.type&&/^@\w/.test(textAfter))return ctx.indented}},modeProps:{fold:"brace"}}),def("text/x-squirrel",{name:"clike",keywords:words("base break clone continue const default delete enum extends function in class foreach local resume return this throw typeof yield constructor instanceof static"),types:words(cTypes),blockKeywords:words("case catch class else for foreach if switch try while"),defKeywords:words("function local class"),typeFirstDefinitions:!0,atoms:words("true false null"),hooks:{"#":cppHook},modeProps:{fold:["brace","include"]}});var stringTokenizer=null;def("text/x-ceylon",{name:"clike",keywords:words("abstracts alias assembly assert assign break case catch class continue dynamic else exists extends finally for function given if import in interface is let module new nonempty object of out outer package return satisfies super switch then this throw try value void while"),types:function(word){var first=word.charAt(0);return first===first.toUpperCase()&&first!==first.toLowerCase()},blockKeywords:words("case catch class dynamic else finally for function if interface module new object switch try while"),defKeywords:words("class dynamic function interface module object package value"),builtin:words("abstract actual aliased annotation by default deprecated doc final formal late license native optional sealed see serializable shared suppressWarnings tagged throws variable"),isPunctuationChar:/[\[\]{}\(\),;\:\.`]/,isOperatorChar:/[+\-*&%=<>!?|^~:\/]/,numberStart:/[\d#$]/,number:/^(?:#[\da-fA-F_]+|\$[01_]+|[\d_]+[kMGTPmunpf]?|[\d_]+\.[\d_]+(?:[eE][-+]?\d+|[kMGTPmunpf]|)|)/i,multiLineStrings:!0,typeFirstDefinitions:!0,atoms:words("true false null larger smaller equal empty finished"),indentSwitch:!1,styleDefs:!1,hooks:{"@":function(stream){return stream.eatWhile(/[\w\$_]/),"meta"},'"':function(stream,state){return state.tokenize=function tokenCeylonString(type){return function(stream,state){for(var next,escaped=!1,end=!1;!stream.eol();){if(!escaped&&stream.match('"')&&("single"==type||stream.match('""'))){end=!0;break}if(!escaped&&stream.match("``")){stringTokenizer=tokenCeylonString(type),end=!0;break}next=stream.next(),escaped="single"==type&&!escaped&&"\\"==next}return end&&(state.tokenize=null),"string"}}(stream.match('""')?"triple":"single"),state.tokenize(stream,state)},"`":function(stream,state){return!(!stringTokenizer||!stream.match("`"))&&(state.tokenize=stringTokenizer,stringTokenizer=null,state.tokenize(stream,state))},"'":function(stream){return stream.eatWhile(/[\w\$_\xa1-\uffff]/),"atom"},token:function(_stream,state,style){if(("variable"==style||"variable-3"==style)&&"."==state.prevToken)return"variable-2"}},modeProps:{fold:["brace","import"],closeBrackets:{triples:'"'}}})}),function(mod){"object"==typeof exports&&"object"==typeof module?mod(require("../../lib/codemirror"),require("../htmlmixed/htmlmixed"),require("../clike/clike")):"function"==typeof define&&define.amd?define(["../../lib/codemirror","../htmlmixed/htmlmixed","../clike/clike"],mod):mod(CodeMirror)}(function(CodeMirror){function keywords(str){for(var obj={},words=str.split(" "),i=0;i<words.length;++i)obj[words[i]]=!0;return obj}function matchSequence(list,end,escapes){return 0==list.length?phpString(end):function(stream,state){for(var patterns=list[0],i=0;i<patterns.length;i++)if(stream.match(patterns[i][0]))return state.tokenize=matchSequence(list.slice(1),end),patterns[i][1];return state.tokenize=phpString(end,escapes),"string"}}function phpString(closing,escapes){return function(stream,state){return function(stream,state,closing,escapes){if(!1!==escapes&&stream.match("${",!1)||stream.match("{$",!1))return state.tokenize=null,"string";if(!1!==escapes&&stream.match(/^\$[a-zA-Z_][a-zA-Z0-9_]*/))return stream.match("[",!1)&&(state.tokenize=matchSequence([[["[",null]],[[/\d[\w\.]*/,"number"],[/\$[a-zA-Z_][a-zA-Z0-9_]*/,"variable-2"],[/[\w\$]+/,"variable"]],[["]",null]]],closing,escapes)),stream.match(/\-\>\w/,!1)&&(state.tokenize=matchSequence([[["->",null]],[[/[\w]+/,"variable"]]],closing,escapes)),"variable-2";var escaped=!1;for(;!stream.eol()&&(escaped||!1===escapes||!stream.match("{$",!1)&&!stream.match(/^(\$[a-zA-Z_][a-zA-Z0-9_]*|\$\{)/,!1));){if(!escaped&&stream.match(closing)){state.tokenize=null,state.tokStack.pop(),state.tokStack.pop();break}escaped="\\"==stream.next()&&!escaped}return"string"}(stream,state,closing,escapes)}}var phpKeywords="abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally",phpAtoms="true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__",phpBuiltin="func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents file_put_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once json_decode json_encode json_last_error json_last_error_msg curl_close curl_copy_handle curl_errno curl_error curl_escape curl_exec curl_file_create curl_getinfo curl_init curl_multi_add_handle curl_multi_close curl_multi_exec curl_multi_getcontent curl_multi_info_read curl_multi_init curl_multi_remove_handle curl_multi_select curl_multi_setopt curl_multi_strerror curl_pause curl_reset curl_setopt_array curl_setopt curl_share_close curl_share_init curl_share_setopt curl_strerror curl_unescape curl_version mysqli_affected_rows mysqli_autocommit mysqli_change_user mysqli_character_set_name mysqli_close mysqli_commit mysqli_connect_errno mysqli_connect_error mysqli_connect mysqli_data_seek mysqli_debug mysqli_dump_debug_info mysqli_errno mysqli_error_list mysqli_error mysqli_fetch_all mysqli_fetch_array mysqli_fetch_assoc mysqli_fetch_field_direct mysqli_fetch_field mysqli_fetch_fields mysqli_fetch_lengths mysqli_fetch_object mysqli_fetch_row mysqli_field_count mysqli_field_seek mysqli_field_tell mysqli_free_result mysqli_get_charset mysqli_get_client_info mysqli_get_client_stats mysqli_get_client_version mysqli_get_connection_stats mysqli_get_host_info mysqli_get_proto_info mysqli_get_server_info mysqli_get_server_version mysqli_info mysqli_init mysqli_insert_id mysqli_kill mysqli_more_results mysqli_multi_query mysqli_next_result mysqli_num_fields mysqli_num_rows mysqli_options mysqli_ping mysqli_prepare mysqli_query mysqli_real_connect mysqli_real_escape_string mysqli_real_query mysqli_reap_async_query mysqli_refresh mysqli_rollback mysqli_select_db mysqli_set_charset mysqli_set_local_infile_default mysqli_set_local_infile_handler mysqli_sqlstate mysqli_ssl_set mysqli_stat mysqli_stmt_init mysqli_store_result mysqli_thread_id mysqli_thread_safe mysqli_use_result mysqli_warning_count";CodeMirror.registerHelper("hintWords","php",[phpKeywords,phpAtoms,phpBuiltin].join(" ").split(" ")),CodeMirror.registerHelper("wordChars","php",/[\w$]/);var phpConfig={name:"clike",helperType:"php",keywords:keywords(phpKeywords),blockKeywords:keywords("catch do else elseif for foreach if switch try while finally"),defKeywords:keywords("class function interface namespace trait"),atoms:keywords(phpAtoms),builtin:keywords(phpBuiltin),multiLineStrings:!0,hooks:{$:function(stream){return stream.eatWhile(/[\w\$_]/),"variable-2"},"<":function(stream,state){var before;if(before=stream.match(/<<\s*/)){var quoted=stream.eat(/['"]/);stream.eatWhile(/[\w\.]/);var delim=stream.current().slice(before[0].length+(quoted?2:1));if(quoted&&stream.eat(quoted),delim)return(state.tokStack||(state.tokStack=[])).push(delim,0),state.tokenize=phpString(delim,"'"!=quoted),"string"}return!1},"#":function(stream){for(;!stream.eol()&&!stream.match("?>",!1);)stream.next();return"comment"},"/":function(stream){if(stream.eat("/")){for(;!stream.eol()&&!stream.match("?>",!1);)stream.next();return"comment"}return!1},'"':function(_stream,state){return(state.tokStack||(state.tokStack=[])).push('"',0),state.tokenize=phpString('"'),"string"},"{":function(_stream,state){return state.tokStack&&state.tokStack.length&&state.tokStack[state.tokStack.length-1]++,!1},"}":function(_stream,state){return state.tokStack&&0<state.tokStack.length&&!--state.tokStack[state.tokStack.length-1]&&(state.tokenize=phpString(state.tokStack[state.tokStack.length-2])),!1}}};CodeMirror.defineMode("php",function(config,parserConfig){var htmlMode=CodeMirror.getMode(config,"text/html"),phpMode=CodeMirror.getMode(config,phpConfig);return{startState:function(){var html=CodeMirror.startState(htmlMode),php=parserConfig.startOpen?CodeMirror.startState(phpMode):null;return{html:html,php:php,curMode:parserConfig.startOpen?phpMode:htmlMode,curState:parserConfig.startOpen?php:html,pending:null}},copyState:function(state){var cur,html=state.html,htmlNew=CodeMirror.copyState(htmlMode,html),php=state.php,phpNew=php&&CodeMirror.copyState(phpMode,php);return cur=state.curMode==htmlMode?htmlNew:phpNew,{html:htmlNew,php:phpNew,curMode:state.curMode,curState:cur,pending:state.pending}},token:function(stream,state){var isPHP=state.curMode==phpMode;if(stream.sol()&&state.pending&&'"'!=state.pending&&"'"!=state.pending&&(state.pending=null),isPHP)return isPHP&&null==state.php.tokenize&&stream.match("?>")?(state.curMode=htmlMode,state.curState=state.html,state.php.context.prev||(state.php=null),"meta"):phpMode.token(stream,state.curState);if(stream.match(/^<\?\w*/))return state.curMode=phpMode,state.php||(state.php=CodeMirror.startState(phpMode,htmlMode.indent(state.html,""))),state.curState=state.php,"meta";if('"'==state.pending||"'"==state.pending){for(;!stream.eol()&&stream.next()!=state.pending;);var style="string"}else style=state.pending&&stream.pos<state.pending.end?(stream.pos=state.pending.end,state.pending.style):htmlMode.token(stream,state.curState);state.pending&&(state.pending=null);var m,cur=stream.current(),openPHP=cur.search(/<\?/);return-1!=openPHP&&("string"==style&&(m=cur.match(/[\'\"]$/))&&!/\?>/.test(cur)?state.pending=m[0]:state.pending={end:stream.pos,style:style},stream.backUp(cur.length-openPHP)),style},indent:function(state,textAfter){return state.curMode!=phpMode&&/^\s*<\//.test(textAfter)||state.curMode==phpMode&&/^\?>/.test(textAfter)?htmlMode.indent(state.html,textAfter):state.curMode.indent(state.curState,textAfter)},blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(state){return{state:state.curState,mode:state.curMode}}}},"htmlmixed","clike"),CodeMirror.defineMIME("application/x-httpd-php","php"),CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),CodeMirror.defineMIME("text/x-php",phpConfig)}),angular.module("ui.sortable",[]).value("uiSortableConfig",{items:"> [ng-repeat],> [data-ng-repeat],> [x-ng-repeat]"}).directive("uiSortable",["uiSortableConfig","$timeout","$log",function(uiSortableConfig,$timeout,$log){return{require:"?ngModel",scope:{ngModel:"=",uiSortable:"=",create:"&uiSortableCreate",start:"&uiSortableStart",activate:"&uiSortableActivate",beforeStop:"&uiSortableBeforeStop",update:"&uiSortableUpdate",remove:"&uiSortableRemove",receive:"&uiSortableReceive",deactivate:"&uiSortableDeactivate",stop:"&uiSortableStop"},link:function(scope,element,attrs,ngModel){var savedNodes,helper;function combineCallbacks(first,second){var secondIsFunc="function"==typeof second;return"function"==typeof first&&secondIsFunc?function(){first.apply(this,arguments),second.apply(this,arguments)}:secondIsFunc?second:first}function getSortableWidgetInstance(element){var data=element.data("ui-sortable");return data&&"object"==typeof data&&"ui-sortable"===data.widgetFullName?data:null}function patchSortableOption(key,value){return callbacks[key]?("stop"===key&&(value=combineCallbacks(value=combineCallbacks(value,function(){scope.$apply()}),afterStop)),value=combineCallbacks(callbacks[key],value)):wrappers[key]&&(value=wrappers[key](value)),value||"items"!==key&&"ui-model-items"!==key||(value=uiSortableConfig.items),value}function patchUISortableOptions(newVal,oldVal,sortableWidgetInstance){angular.forEach(callbacks,function(value,key){key in opts||(opts[key]=null)});var defaultOptions,optsDiff=null;oldVal&&angular.forEach(oldVal,function(oldValue,key){if(!(newVal&&key in newVal)){if(key in directiveOpts)return void(opts[key]="ui-floating"===key?"auto":patchSortableOption(key,void 0));defaultOptions||(defaultOptions=angular.element.ui.sortable().options);var defaultValue=defaultOptions[key];defaultValue=patchSortableOption(key,defaultValue),optsDiff||(optsDiff={}),optsDiff[key]=defaultValue,opts[key]=defaultValue}});return angular.forEach(newVal,function(value,key){if(key in directiveOpts)return"ui-floating"!==key||!1!==value&&!0!==value||!sortableWidgetInstance||(sortableWidgetInstance.floating=value),void(opts[key]=patchSortableOption(key,value));value=patchSortableOption(key,value),optsDiff||(optsDiff={}),optsDiff[key]=value,opts[key]=value}),optsDiff}function getSortingHelper(element,ui){var result=null;return function(element,ui){var helperOption=element.sortable("option","helper");return"clone"===helperOption||"function"==typeof helperOption&&ui.item.sortable.isCustomHelperUsed()}(element,ui)&&"parent"===element.sortable("option","appendTo")&&(result=helper),result}function afterStop(e,ui){ui.item.sortable._destroy()}function getItemIndex(item){return item.parent().find(opts["ui-model-items"]).index(item)}var opts={},directiveOpts={"ui-floating":void 0,"ui-model-items":uiSortableConfig.items},callbacks={create:null,start:null,activate:null,beforeStop:null,update:null,remove:null,receive:null,deactivate:null,stop:null},wrappers={helper:null};function wireUp(){scope.$watchCollection("ngModel",function(){$timeout(function(){getSortableWidgetInstance(element)&&element.sortable("refresh")},0,!1)}),callbacks.start=function(e,ui){if("auto"===opts["ui-floating"]){var siblings=ui.item.siblings();getSortableWidgetInstance(angular.element(e.target)).floating=/left|right/.test((item=siblings).css("float"))||/inline|table-cell/.test(item.css("display"))}var item,index=getItemIndex(ui.item);ui.item.sortable={model:ngModel.$modelValue[index],index:index,source:element,sourceList:ui.item.parent(),sourceModel:ngModel.$modelValue,cancel:function(){ui.item.sortable._isCanceled=!0},isCanceled:function(){return ui.item.sortable._isCanceled},isCustomHelperUsed:function(){return!!ui.item.sortable._isCustomHelperUsed},_isCanceled:!1,_isCustomHelperUsed:ui.item.sortable._isCustomHelperUsed,_destroy:function(){angular.forEach(ui.item.sortable,function(value,key){ui.item.sortable[key]=void 0})},_connectedSortables:[],_getElementContext:function(element){return function(elementScopes,element){for(var i=0;i<elementScopes.length;i++){var c=elementScopes[i];if(c.element[0]===element[0])return c}}(this._connectedSortables,element)}}},callbacks.activate=function(e,ui){var isSourceContext=ui.item.sortable.source===element,savedNodesOrigin=isSourceContext?ui.item.sortable.sourceList:element,elementContext={element:element,scope:scope,isSourceContext:isSourceContext,savedNodesOrigin:savedNodesOrigin};ui.item.sortable._connectedSortables.push(elementContext),savedNodes=savedNodesOrigin.contents(),helper=ui.helper;var placeholder=function(element){var placeholder=element.sortable("option","placeholder");if(placeholder&&placeholder.element&&"function"==typeof placeholder.element){var result=placeholder.element();return result=angular.element(result)}return null}(element);if(placeholder&&placeholder.length){var excludes=function(element,placeholder){var notCssSelector=opts["ui-model-items"].replace(/[^,]*>/g,"");return element.find('[class="'+placeholder.attr("class")+'"]:not('+notCssSelector+")")}(element,placeholder);savedNodes=savedNodes.not(excludes)}},callbacks.update=function(e,ui){if(!ui.item.sortable.received){ui.item.sortable.dropindex=getItemIndex(ui.item);var droptarget=ui.item.closest("[ui-sortable], [data-ui-sortable], [x-ui-sortable]");ui.item.sortable.droptarget=droptarget,ui.item.sortable.droptargetList=ui.item.parent();var droptargetContext=ui.item.sortable._getElementContext(droptarget);ui.item.sortable.droptargetModel=droptargetContext.scope.ngModel,element.sortable("cancel")}var sortingHelper=!ui.item.sortable.received&&getSortingHelper(element,ui);sortingHelper&&sortingHelper.length&&(savedNodes=savedNodes.not(sortingHelper));var elementContext=ui.item.sortable._getElementContext(element);savedNodes.appendTo(elementContext.savedNodesOrigin),ui.item.sortable.received&&(savedNodes=null),ui.item.sortable.received&&!ui.item.sortable.isCanceled()&&(scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ui.item.sortable.moved)}),scope.$emit("ui-sortable:moved",ui))},callbacks.stop=function(e,ui){var wasMoved="dropindex"in ui.item.sortable&&!ui.item.sortable.isCanceled();if(wasMoved&&!ui.item.sortable.received)scope.$apply(function(){ngModel.$modelValue.splice(ui.item.sortable.dropindex,0,ngModel.$modelValue.splice(ui.item.sortable.index,1)[0])}),scope.$emit("ui-sortable:moved",ui);else if(!wasMoved&&!angular.equals(element.contents().toArray(),savedNodes.toArray())){var sortingHelper=getSortingHelper(element,ui);sortingHelper&&sortingHelper.length&&(savedNodes=savedNodes.not(sortingHelper));var elementContext=ui.item.sortable._getElementContext(element);savedNodes.appendTo(elementContext.savedNodesOrigin)}helper=savedNodes=null},callbacks.receive=function(e,ui){ui.item.sortable.received=!0},callbacks.remove=function(e,ui){"dropindex"in ui.item.sortable||(element.sortable("cancel"),ui.item.sortable.cancel()),ui.item.sortable.isCanceled()||scope.$apply(function(){ui.item.sortable.moved=ngModel.$modelValue.splice(ui.item.sortable.index,1)[0]})},angular.forEach(callbacks,function(value,key){callbacks[key]=combineCallbacks(callbacks[key],function(){var attrHandlerFn,attrHandler=scope[key];"function"==typeof attrHandler&&("uiSortable"+key.substring(0,1).toUpperCase()+key.substring(1)).length&&"function"==typeof(attrHandlerFn=attrHandler())&&attrHandlerFn.apply(this,arguments)})}),wrappers.helper=function(inner){return inner&&"function"==typeof inner?function(e,item){var oldItemSortable=item.sortable,index=getItemIndex(item);item.sortable={model:ngModel.$modelValue[index],index:index,source:element,sourceList:item.parent(),sourceModel:ngModel.$modelValue,_restore:function(){angular.forEach(item.sortable,function(value,key){item.sortable[key]=void 0}),item.sortable=oldItemSortable}};var innerResult=inner.apply(this,arguments);return item.sortable._restore(),item.sortable._isCustomHelperUsed=item!==innerResult,innerResult}:inner},scope.$watchCollection("uiSortable",function(newVal,oldVal){var sortableWidgetInstance=getSortableWidgetInstance(element);if(sortableWidgetInstance){var optsDiff=patchUISortableOptions(newVal,oldVal,sortableWidgetInstance);optsDiff&&element.sortable("option",optsDiff)}},!0),patchUISortableOptions(opts)}function initIfEnabled(){return(!scope.uiSortable||!scope.uiSortable.disabled)&&(ngModel?wireUp():$log.info("ui.sortable: ngModel not provided!",element),element.sortable(opts),initIfEnabled.cancelWatcher(),initIfEnabled.cancelWatcher=angular.noop,!0)}angular.extend(opts,directiveOpts,uiSortableConfig,scope.uiSortable),angular.element.fn&&angular.element.fn.jquery?(initIfEnabled.cancelWatcher=angular.noop,initIfEnabled()||(initIfEnabled.cancelWatcher=scope.$watch("uiSortable.disabled",initIfEnabled))):$log.error("ui.sortable: jQuery should be included before AngularJS!")}}}]),function(dndLists){var MIME_TYPE="application/x-dnd",ALL_EFFECTS=["move","copy","link"];function filterEffects(effects,effectAllowed){return"all"==effectAllowed?effects:effects.filter(function(effect){return-1!=effectAllowed.toLowerCase().indexOf(effect)})}dndLists.directive("dndDraggable",["$parse","$timeout",function($parse,$timeout){return function(scope,element,attr){element.attr("draggable","true"),attr.dndDisableIf&&scope.$watch(attr.dndDisableIf,function(disabled){element.attr("draggable",!disabled)}),element.on("dragstart",function(event){if(event=event.originalEvent||event,"false"==element.attr("draggable"))return!0;dndState.isDragging=!0,dndState.itemType=attr.dndType&&scope.$eval(attr.dndType).toLowerCase(),dndState.dropEffect="none",dndState.effectAllowed=attr.dndEffectAllowed||ALL_EFFECTS[0],event.dataTransfer.effectAllowed=dndState.effectAllowed;var item=scope.$eval(attr.dndDraggable),mimeType=MIME_TYPE+(dndState.itemType?"-"+dndState.itemType:"");try{event.dataTransfer.setData(mimeType,angular.toJson(item))}catch(e){var data=angular.toJson({item:item,type:dndState.itemType});try{event.dataTransfer.setData("application/json",data)}catch(e){var effectsAllowed=filterEffects(ALL_EFFECTS,dndState.effectAllowed);event.dataTransfer.effectAllowed=effectsAllowed[0],event.dataTransfer.setData("Text",data)}}if(element.addClass("dndDragging"),$timeout(function(){element.addClass("dndDraggingSource")},0),event._dndHandle&&event.dataTransfer.setDragImage&&event.dataTransfer.setDragImage(element[0],0,0),$parse(attr.dndDragstart)(scope,{event:event}),attr.dndCallback){var callback=$parse(attr.dndCallback);dndState.callback=function(params){return callback(scope,params||{})}}event.stopPropagation()}),element.on("dragend",function(event){event=event.originalEvent||event,scope.$apply(function(){var dropEffect=dndState.dropEffect;$parse(attr[{copy:"dndCopied",link:"dndLinked",move:"dndMoved",none:"dndCanceled"}[dropEffect]])(scope,{event:event}),$parse(attr.dndDragend)(scope,{event:event,dropEffect:dropEffect})}),dndState.isDragging=!1,dndState.callback=void 0,element.removeClass("dndDragging"),element.removeClass("dndDraggingSource"),event.stopPropagation(),$timeout(function(){element.removeClass("dndDraggingSource")},0)}),element.on("click",function(event){attr.dndSelected&&(event=event.originalEvent||event,scope.$apply(function(){$parse(attr.dndSelected)(scope,{event:event})}),event.stopPropagation())}),element.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]),dndLists.directive("dndList",["$parse",function($parse){return function(scope,element,attr){var placeholder=function(){var placeholder;return angular.forEach(element.children(),function(childNode){var child=angular.element(childNode);child.hasClass("dndPlaceholder")&&(placeholder=child)}),placeholder||angular.element("<li class='dndPlaceholder'></li>")}();placeholder.remove();var placeholderNode=placeholder[0],listNode=element[0],listSettings={};function getMimeType(types){if(!types)return"Text";for(var i=0;i<types.length;i++)if("Text"==types[i]||"application/json"==types[i]||types[i].substr(0,MIME_TYPE.length)==MIME_TYPE)return types[i];return null}function getItemType(mimeType){return dndState.isDragging?dndState.itemType||void 0:"Text"==mimeType||"application/json"==mimeType?null:mimeType&&mimeType.substr(MIME_TYPE.length+1)||void 0}function isDropAllowed(itemType){return!listSettings.disabled&&(!(!listSettings.externalSources&&!dndState.isDragging)&&(!listSettings.allowedTypes||null===itemType||itemType&&-1!=listSettings.allowedTypes.indexOf(itemType)))}function getDropEffect(event,ignoreDataTransfer){var effects=ALL_EFFECTS;return ignoreDataTransfer||(effects=filterEffects(effects,event.dataTransfer.effectAllowed)),dndState.isDragging&&(effects=filterEffects(effects,dndState.effectAllowed)),attr.dndEffectAllowed&&(effects=filterEffects(effects,attr.dndEffectAllowed)),effects.length?event.ctrlKey&&-1!=effects.indexOf("copy")?"copy":event.altKey&&-1!=effects.indexOf("link")?"link":effects[0]:"none"}function stopDragover(){return placeholder.remove(),element.removeClass("dndDragover"),!0}function invokeCallback(expression,event,dropEffect,itemType,index,item){return $parse(expression)(scope,{callback:dndState.callback,dropEffect:dropEffect,event:event,external:!dndState.isDragging,index:void 0!==index?index:getPlaceholderIndex(),item:item||void 0,type:itemType})}function getPlaceholderIndex(){return Array.prototype.indexOf.call(listNode.children,placeholderNode)}element.on("dragenter",function(event){event=event.originalEvent||event;var types=attr.dndAllowedTypes&&scope.$eval(attr.dndAllowedTypes);listSettings={allowedTypes:angular.isArray(types)&&types.join("|").toLowerCase().split("|"),disabled:attr.dndDisableIf&&scope.$eval(attr.dndDisableIf),externalSources:attr.dndExternalSources&&scope.$eval(attr.dndExternalSources),horizontal:attr.dndHorizontalList&&scope.$eval(attr.dndHorizontalList)};var mimeType=getMimeType(event.dataTransfer.types);if(!mimeType||!isDropAllowed(getItemType(mimeType)))return!0;event.preventDefault()}),element.on("dragover",function(event){var mimeType=getMimeType((event=event.originalEvent||event).dataTransfer.types),itemType=getItemType(mimeType);if(!mimeType||!isDropAllowed(itemType))return!0;if(placeholderNode.parentNode!=listNode&&element.append(placeholder),event.target!=listNode){for(var listItemNode=event.target;listItemNode.parentNode!=listNode&&listItemNode.parentNode;)listItemNode=listItemNode.parentNode;if(listItemNode.parentNode==listNode&&listItemNode!=placeholderNode){var rect=listItemNode.getBoundingClientRect();if(listSettings.horizontal){var isFirstHalf=event.clientX<rect.left+rect.width/2;isFirstHalf=event.clientX<rect.left+10,window.lastpageX<event.pageX&&(window.direction=0),(window.lastpageX>event.pageX||1===window.direction)&&(window.direction=1,isFirstHalf=event.clientX<rect.left+rect.width-10),window.lastpageX=event.pageX}else isFirstHalf=event.clientY<rect.top+rect.height/2;listNode.insertBefore(placeholderNode,isFirstHalf?listItemNode:listItemNode.nextSibling)}}else{var listItemNodeChildren=(listItemNode=event.target).children,paras=document.getElementsByClassName("dndPlaceholder");for(paras[0].parentNode.removeChild(paras[0]),listItemNode.appendChild(placeholderNode),i=0;i<listItemNodeChildren.length;i++)if(!(listItemNodeChildren[i].classList.contains("dndPlaceholder")||listItemNodeChildren[i].classList.contains("dndDraggingCloneSource")||listItemNodeChildren[i].classList.contains("dndDraggingSource"))){rect=listItemNodeChildren[i].getBoundingClientRect();if(listSettings.horizontal){if(event.clientX<rect.left){listItemNode.insertBefore(placeholderNode,listItemNodeChildren[i]);break}}else if(event.clientY<rect.top){listItemNode.insertBefore(placeholderNode,listItemNodeChildren[i]);break}}}var ignoreDataTransfer="Text"==mimeType,dropEffect=getDropEffect(event,ignoreDataTransfer);return"none"==dropEffect?stopDragover():attr.dndDragover&&!invokeCallback(attr.dndDragover,event,dropEffect,itemType)?stopDragover():(event.preventDefault(),ignoreDataTransfer||(event.dataTransfer.dropEffect=dropEffect),element.addClass("dndDragover"),event.stopPropagation(),!1)}),element.on("drop",function(event){var mimeType=getMimeType((event=event.originalEvent||event).dataTransfer.types),itemType=getItemType(mimeType);if(!mimeType||!isDropAllowed(itemType))return!0;event.preventDefault();try{var data=JSON.parse(event.dataTransfer.getData(mimeType))}catch(e){return stopDragover()}if(("Text"==mimeType||"application/json"==mimeType)&&(itemType=data.type||void 0,data=data.item,!isDropAllowed(itemType)))return stopDragover();var ignoreDataTransfer="Text"==mimeType,dropEffect=getDropEffect(event,ignoreDataTransfer);if("none"==dropEffect)return stopDragover();var index=getPlaceholderIndex();return attr.dndDrop&&!(data=invokeCallback(attr.dndDrop,event,dropEffect,itemType,index,data))?stopDragover():(dndState.dropEffect=dropEffect,ignoreDataTransfer||(event.dataTransfer.dropEffect=dropEffect),!0!==data&&scope.$apply(function(){scope.$eval(attr.dndList).splice(index,0,data)}),invokeCallback(attr.dndInserted,event,dropEffect,itemType,index,data),stopDragover(),event.stopPropagation(),!1)}),element.on("dragleave",function(event){event=event.originalEvent||event;var newTarget=document.elementFromPoint(event.clientX,event.clientY);listNode.contains(newTarget)&&!event._dndPhShown?event._dndPhShown=!0:stopDragover()})}}]),dndLists.directive("dndNodrag",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart",function(event){(event=event.originalEvent||event)._dndHandle||(event.dataTransfer.types&&event.dataTransfer.types.length||event.preventDefault(),event.stopPropagation())}),element.on("dragend",function(event){(event=event.originalEvent||event)._dndHandle||event.stopPropagation()})}}),dndLists.directive("dndHandle",function(){return function(scope,element,attr){element.attr("draggable","true"),element.on("dragstart dragend",function(event){(event=event.originalEvent||event)._dndHandle=!0})}});var dndState={}}(angular.module("dndLists",[]));
CTFrontendBuilder.controller("ComponentsTree",["$scope","$parentScope","$timeout","$interval",function(l,a,s,c){l.componentsTreeExample={name:"root",children:[{id:1,name:"section",options:{ct_parent:0,ct_id:1,original:{background:"#515151"},hover:{background:"#cccccc"}},children:[{id:2,name:"button",options:{ct_parent:1,ct_id:2,original:{value:"Click Me!"}}}]},{id:3,name:"section",options:{ct_parent:0,ct_id:1,original:{background:"#515151"},hover:{background:"#333333"},media:[{size:"748px",original:{background:"#929292"}}]},children:[{id:4,name:"headline",options:{ct_parent:3,ct_id:4,original:{tag:"h3",text:"I am a headline!"}}}]}]},l.componentsTree=[{id:0,name:"root",depth:0}],l.findComponentByName=function(e,n,t,o){var r;if(isBreak=!1,angular.forEach(e,function(e){isBreak||(e.name==n?(r=t(e.id,e,o),isBreak=!0):e.children&&(r=l.findComponentByName(e.children,n,t,o)))}),void 0!==r)return r},l.findComponentItem=function(e,n,t,o){var r;return l.log,isBreak=!1,0==n?void 0!==(r=t(n,l.componentsTree,o))&&r:(angular.forEach(e,function(e){isBreak||(e.id==n?(r=t(n,e,o),isBreak=!0):e.children&&(r=l.findComponentItem(e.children,n,t,o)))}),void 0!==r?r:void 0)},l.hasParent=function(e){return 0<l.findParentComponentItem(l.componentsTree,e,function(e){return e})},l.findParentComponentItem=function(n,t,o,r){var a;if(l.log,isBreak=!1,angular.forEach(n.children,function(e){isBreak||(e.id==t?(a=o(e.options.ct_parent,n,t,r),isBreak=!0):e.children&&(a=l.findParentComponentItem(e,t,o,r)))}),void 0!==a)return a},l.removeComponentFromTree=function(e,t,o,n){l.log&&console.log("removeComponentFromTree()",o),n&&"ct_span"==n.removeName&&"ct_link"==n.parentName&&(t.options.ct_content=t.options.ct_content.replace('<span id="ct-placeholder-'+n.parentId+'"></span>','<span id="ct-placeholder-'+n.removeId+'"></span>')),angular.forEach(t.children,function(e,n){e.id==o&&(t.children.splice(n,1),l.newComponentKey=n)}),0==t.children.length&&delete t.children,n&&"ct_span"==n.removeName&&"ct_link"==n.parentName&&l.rebuildDOM(t.id)},l.insertComponentToTree=function(e,n,t,o){l.log&&console.log("insertComponentToTree()",e,n,t),"object"!=typeof t&&(t=o);var r=l.getComponentById(e).attr("is-nestable");if(t.isBuiltIn&&"oxy_superbox"==n.name&&(r=!0),r||"ct_column"==t.name||"ct_span"==t.name||"ct_link"==t.name&&"ct_span"==t.currentName||"ct_div_block"==t.name&&"ct_new_columns"==n.name||"oxy_header_row"==t.name&&"oxy_header"==n.name||("oxy_header_left"==t.name||"oxy_header_center"==t.name||"oxy_header_right"==t.name)&&"oxy_header_row"==n.name){n.children||(n.children=[]);var a={id:t.id,name:t.name,options:{ct_id:t.id,ct_parent:e,selector:t.name.slice(3)+"-"+t.id+"-"+CtBuilderAjax.postId,original:{}}};t.isShortcode&&(a.options.ct_shortcode="true"),t.isWidget&&(a.options.ct_widget="true"),t.isData&&(a.options.ct_data="true"),t.isSidebar&&(a.options.ct_sidebar="true"),t.isNavMenu&&(a.options.ct_nav_menu="true"),t.isBuiltIn&&(a.options.oxy_builtin="true"),"ct_link"==t.name&&"ct_span"==t.currentName&&(n.options.ct_content=n.options.ct_content.replace('<span id="ct-placeholder-'+t.currentId+'"></span>','<span id="ct-placeholder-'+t.id+'"></span>')),"ct_columns"==t.name&&(l.columns[t.id]=1);var c=l.calculateDepth(t,n);if(c&&(a.depth=c),t.index)for(e in l.idToInsert=t.index,n.children){"true"==n.children[e].options.oxy_builtin&&l.idToInsert++}if(0<=l.idToInsert&&!1!==l.idToInsert?(n.children.splice(l.idToInsert,0,a),l.idToInsert=-1):n.children.push(a),"ct_div_block"==t.name&&"ct_new_columns"==n.name&&l.updateColumnsOnAdd){var i=1<n.children.length?n.children.length-1:100,p=100/i;l.setOptionModel("width-unit","%",t.id,t.name);var d=!1;if(angular.forEach(n.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(d=!0)}),d)return!1;angular.forEach(n.children,function(e){var n=100/i;n=(n/((100+p)/100)).toFixed(2),l.setOptionModel("width",n,e.id,"ct_div_block")}),l.checkColumnsWidthSum(n.children,"ct_div_block")}l.updateDOMTreeNavigator(t.id)}else l.findParentComponentItem(l.componentsTree,e,l.insertComponentToTree,t)},l.insertComponentToParent=function(e,n,t){l.findComponentItem(l.componentsTree.children,n.options.ct_parent,l.insertComponentToTree,t)},l.insertComponentToChild=function(e,n,t){n.children&&0<n.children.length&&"ct_div_block"==n.children[0].name&&l.findComponentItem(l.componentsTree.children,n.children[0].id,l.insertComponentToTree,t)},l.insertComponentToGrandParent=function(e,n,t){l.findParentComponentItem(l.componentsTree,n.options.ct_parent,l.insertComponentToTree,t)},l.getComponentItem=function(e,n,t){return n},l.pasteComponentToTree=function(e,n,t){l.log&&console.log("pasteComponentToTree()",e,n,t,l.componentBuffer);try{var o=l.getComponentById(l.componentBuffer.id);if(o instanceof jQuery&&o.hasClass("oxy-tabs-contents")?tabsContents=o:tabsContents=jQuery(o).find(".oxy-tabs-contents"),tabsContents.length)var r=s(function(){var e=tabsContents.attr("data-oxy-tabs-wrapper"),n=jQuery("#"+e),t=n.attr("data-oxy-tabs-active-tab-class");n.children("."+t).trigger("click"),s.cancel(r)},10,!1);if(jQuery("body").hasClass("ct_inner")&&(0===parseInt(e)||1e5<parseInt(e))&&0<jQuery(".ct-inner-content.ct-component").length&&(e=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id")),n=l.findComponentItem(l.componentsTree.children,e,l.getComponentItem),l.componentBuffer.options.ct_parent=parseInt(e)),"ct_inner_content"==n.name&&CtBuilderAjax.query&&CtBuilderAjax.query.post_type&&"ct_template"===CtBuilderAjax.query.post_type&&!jQuery("body").hasClass("ct_inner")){var a=n;e=parseInt(n.options.ct_parent),n=l.findComponentItem(l.componentsTree.children,e,l.getComponentItem),l.componentBuffer.options.ct_parent=parseInt(e),l.newComponentKey=_.indexOf(n.children,a)+1}if(!l.componentBuffer)return!1;if("ct_columns"==n.name)if(12==(d=n.children.length))return alert("Max number of columns is 12"),l.componentBuffer=!1;l.updateComponentDepth(l.componentBuffer,n),n.children?0<=l.newComponentKey?(n.children.splice(l.newComponentKey,0,l.componentBuffer),l.newComponentKey=-1):n.children.push(l.componentBuffer):(n.children=[],n.children.push(l.componentBuffer));var c="ct_column";if("ct_div_block"==l.componentBuffer.name)c="ct_div_block";if(("ct_column"==l.componentBuffer.name||"ct_div_block"==l.componentBuffer.name&&"ct_new_columns"==n.name)&&!l.reorderSameParent){var i=!1;if(angular.forEach(n.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(i=!0)}),i)return!1;var p=0,d=1<n.children.length?n.children.length-1:100;"ct_div_block"!=l.componentBuffer.name||l.componentBuffer.options.original&&l.componentBuffer.options.original.width?p=parseFloat(l.componentBuffer.options.original.width):(p=100/d,l.setOptionModel("width-unit","%",l.componentBuffer.id,l.componentBuffer.name)),angular.forEach(n.children,function(e){if("ct_div_block"!=l.componentBuffer.name||e.options.original&&e.options.original.width)n=parseFloat(e.options.original.width);else var n=100/d;n=(n/((100+p)/100)).toFixed(2),l.setOptionModel("width",n,e.id,c)}),l.checkColumnsWidthSum(n.children,c)}l.unsavedChanges()}catch(e){console.error(e);var m=e.toString();r=s(function(){l.showErrorModal(0,"There was an error. DO NOT SAVE THE PAGE. Please copy below error message and send to our support team.",m),l.$apply(),s.cancel(r)},10,!1)}},l.calculateDepth=function(e,n){var t=!1;return"ct_column"==e.name&&"ct_columns"==n.name&&(t=parseInt(n.depth)),"ct_columns"==e.name&&(t=parseInt(n.depth)+1),"oxy_header"==e.name&&(t=parseInt(n.depth)+1),"oxy_header_row"!=e.name&&"oxy_header_left"!=e.name&&"oxy_header_center"!=e.name&&"oxy_header_right"!=e.name||(t=parseInt(n.depth)),"ct_new_columns"==e.name&&(t=parseInt(n.depth)+1),"oxy_dynamic_list"==e.name&&(t=parseInt(n.depth)+1),"ct_div_block"!=e.name&&"ct_nestable_shortcode"!=e.name||(t=parseInt(n.depth)+1),"ct_div_block"!=e.name&&"ct_nestable_shortcode"!=e.name||"ct_column"!=n.name&&"ct_new_columns"!=n.name||(t=parseInt(n.depth)),"ct_link"==e.name&&(t=parseInt(n.depth)+1),"ct_link"==e.name&&"ct_column"==n.name&&(t=parseInt(n.depth)),"ct_section"==e.name&&(t=parseInt(n.depth)+1),"ct_section"==e.name&&"ct_column"==n.name&&(t=parseInt(n.depth)),"ct_inner_content"==e.name&&(t=parseInt(n.depth)+1),"ct_slider"==e.name&&(t=parseInt(n.depth)+1),"ct_slide"==e.name&&(t=parseInt(n.depth)),"oxy_icon_box"==e.name&&(t=parseInt(n.depth)+1),"oxy_superbox"==e.name&&(t=parseInt(n.depth)+1),"oxy_toggle"==e.name&&(t=parseInt(n.depth)+1),"oxy_tab"==e.name&&"oxy_tabs"==n.name&&(t=parseInt(n.depth)),"oxy_tabs"==e.name&&(t=parseInt(n.depth)+1),"oxy_tab_content"==e.name&&"oxy_tabs_contents"==n.name&&(t=parseInt(n.depth)),"oxy_tabs_contents"==e.name&&(t=parseInt(n.depth)+1),"ct_modal"==e.name&&(t=parseInt(n.depth)+1),t},l.updateComponentDepth=function(n,e){var t=l.calculateDepth(n,e);t&&(n.depth=t),n.children&&angular.forEach(n.children,function(e){l.updateComponentDepth(e,n)})},l.updateNewComponentIds=function(n,e){if(l.log&&console.log("updateNewComponentIds()",n,e),n.options.selector=n.name.slice(3)+"-"+l.component.id+"-"+CtBuilderAjax.postId,e.options&&e.options.ct_content&&(e.options.ct_content=e.options.ct_content.replace('<span id="ct-placeholder-'+n.id+'"></span>','<span id="ct-placeholder-temporary-'+l.component.id+'"></span>')),n.id=l.component.id,n.options.ct_id=l.component.id,n.options.ct_parent=parseInt(e.id),n.children&&angular.forEach(n.children,function(e){l.component.id++,iframeScope.activeSelectors[l.component.id]=iframeScope.activeSelectors[e.id],l.updateNewComponentIds(e,n)}),n.options&&n.options.ct_content&&(n.options.ct_content=n.options.ct_content.replace(new RegExp('<span id="ct-placeholder-[0-9]+"></span>',"g"),""),n.options.ct_content=n.options.ct_content.replace(new RegExp("ct-placeholder-temporary-","g"),"ct-placeholder-")),"oxy_tabs"!=n.name||l.tabsContentsItemToUpdate||(l.tabsItemToUpdate=n),"oxy_tabs_contents"==n.name&&l.tabsItemToUpdate){var t=n.options.selector,o=l.tabsItemToUpdate.options.ct_id;l.tabsItemToUpdate.options.original.tabs_contents_wrapper=t;var r=s(function(){l.rebuildDOM(o),c.cancel(r)},0,!1);l.tabsItemToUpdate=!1}else"oxy_tabs_contents"!=n.name||l.tabsItemToUpdate||(l.tabsContentsItemToUpdate=n);if("oxy_tabs"==n.name&&l.tabsContentsItemToUpdate){t=l.tabsContentsItemToUpdate.options.selector;n.options.original.tabs_contents_wrapper=t,l.tabsContentsItemToUpdate=!1}},l.copyComponentTreeNode=function(e,t,o){angular.forEach(t.children,function(e,n){if(e.id==o){if("ct_column"==e.name&&!l.reorderSameParent&&(columnsNumber=t.children.length,12==columnsNumber))return alert("Max number of columns is 12"),l.componentBuffer=!1;l.componentBuffer=angular.copy(e),l.updateNewComponentIds(l.componentBuffer,t),l.newComponentKey=n+1}})},l.cutComponentFromTree=function(e,o,r){l.log&&console.log("cutComponentFromTree()",o,r),l.idToInsert=-1,angular.forEach(o.children,function(e,n){if(e.id==r){var t=!1;"ct_column"!=e.name&&("ct_div_block"!=e.name||"ct_new_columns"!=o.name)||l.reorderSameParent||(newColumnsNumber=o.children.length-1,freeSpace=parseFloat(e.options.original.width),angular.forEach(o.children,function(e){var n={};l.findComponentItem(l.componentsTree.children,e.id,l.getComponentActiveSelector,n),n.activeselector&&(t=!0)}),t||angular.forEach(o.children,function(e){e.id!=r&&(columnWidth=parseFloat(e.options.original.width),columnWidth=(columnWidth+freeSpace/newColumnsNumber).toFixed(2),l.setOptionModel("width",columnWidth,e.id,"ct_column"))})),e.options.ct_parent=parseInt(l.componentInsertId),l.componentBuffer=angular.copy(e),o.children.splice(n,1),0==o.children.length&&delete o.children,"ct_column"!=e.name&&("ct_div_block"!=e.name||"ct_new_columns"!=o.name)||l.reorderSameParent||t||l.checkColumnsWidthSum(o.children,"ct_div_block"),l.idToInsert=n}})},l.updateComponentParentId=function(e,n){l.log&&console.log("updateComponentParentId()",e),n.options.ct_parent=parseInt(l.componentInsertId)},l.componentsReorder=function(e,n,t,o,r,a){l.log&&console.log(e,n,t,o,r,a);try{var c=e[0].attributes["ng-attr-tree-id"]?"ng-attr-tree-id":"ng-attr-component-id",i=e[0].attributes[c].value;e.parent();jQuery("body").hasClass("ct_inner")&&(0===parseInt(o)||1e5<parseInt(o)||void 0===o)&&0<jQuery(".ct-inner-content.ct-component").length&&(o=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id"))),99999==o&&(o=a.attr("ng-attr-tree-actual-id"),n++),99999==t&&(t=r.attr("ng-attr-tree-actual-id")),l.componentInsertId=o,l.newComponentKey=n,l.reorderSameParent=t==o,l.findParentComponentItem(l.componentsTree,i,l.cutComponentFromTree),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree);a=l.getComponentById(o),r=l.getComponentById(t);a.hasClass("ct-columns")&&(l.columns[t]--,l.columns[o]++),a.hasClass("ct-slider")&&l.rebuildDOM(o),!l.reorderSameParent&&r.hasClass("ct-slider")&&l.rebuildDOM(t),l.findComponentItem(l.componentsTree.children,i,l.updateComponentParentId),a.hasClass("ct-new-columns")&&t==o?l.rebuildDOM(o):(a.hasClass("ct-new-columns")&&l.rebuildDOM(t),l.rebuildDOM(i,!0)),l.updateDOMTreeNavigator(i,!0),l.cancelDeleteUndo()}catch(e){console.error(e);var p=e.toString();l.showErrorModal(0,"There was an error. DO NOT SAVE THE PAGE. Please copy below error message and send to our support team.",p),l.$apply()}},l.wrapWith=function(e){l.isSelectableEnabled&&l.isDOMNodesSelected?(l.wrapSelectedComponentWith(e),l.isDOMNodesSelected=!1):l.wrapComponentWith(e)},l.wrapComponentWith=function(e,n,t){void 0===n&&(n=l.component.active.id),void 0===t&&(t=l.component.active.parent.id),l.log&&console.log("wrapComponentWith()",e,n,t);var o=l.component.id;return newComponent={id:o,name:e,currentId:l.component.active.id,currentName:l.component.active.name},l.componentInsertId=newComponent.id,l.findParentComponentItem(l.componentsTree,n,l.cutComponentFromTree),l.removeComponentFromDOM(n),l.removeDOMTreeNavigatorNode(n),l.findComponentItem(l.componentsTree.children,t,l.insertComponentToTree,newComponent),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree),l.findParentComponentItem(l.componentsTree,n,l.updateCurrentActiveParent),"ct_span"==newComponent.currentName?(l.rebuildDOM(t),l.updateDOMTreeNavigator(t)):(l.rebuildDOM(newComponent.id),l.activateComponent(newComponent.id),0<t?l.updateDOMTreeNavigator(t):l.updateDOMTreeNavigator(),l.toggleNode(newComponent.id)),l.cancelDeleteUndo(),o},l.wrapSelectedComponentWith=function(e){var n=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent(),t=n.attr("ng-attr-tree-id"),o=n.children(".ct-dom-tree-node").has(".ct-selected-dom-node"),r=[];o.each(function(){r.push(jQuery(this).attr("ng-attr-tree-id"))}),newComponent={id:l.component.id,name:e,currentId:t},l.componentInsertId=newComponent.id,l.findComponentItem(l.componentsTree.children,t,l.insertComponentToTree,newComponent);for(var a,c=r.length-1;a=r[c],0<=c;c--)l.findParentComponentItem(l.componentsTree,a,l.cutComponentFromTree),l.removeComponentFromDOM(a),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree);l.cancelDeleteUndo(),l.rebuildDOM(t)},l.removeActiveParent=function(){l.log&&console.log("removeActiveParent"),componentId=l.component.active.id,parentId=l.component.active.parent.id,component={removeId:l.component.active.id,removeName:l.component.active.name,parentId:l.component.active.parent.id,parentName:l.component.active.parent.name},l.findParentComponentItem(l.componentsTree,parentId,l.updateCurrentActiveParent),l.componentInsertId=l.component.active.parent.id,l.findParentComponentItem(l.componentsTree,componentId,l.cutComponentFromTree),l.removeComponentFromDOM(componentId),l.findParentComponentItem(l.componentsTree,parentId,l.removeComponentFromTree,component),l.removeComponentFromDOM(parentId),l.findComponentItem(l.componentsTree.children,l.componentInsertId,l.pasteComponentToTree),l.findParentComponentItem(l.componentsTree,componentId,l.updateCurrentActiveParent),l.cancelDeleteUndo(),l.rebuildDOM(componentId),l.removeDOMTreeNavigatorNode(parentId),l.updateDOMTreeNavigator(componentId)},l.builderInit=function(e){if(l.log&&console.log("builderInit()",e),!1!==(l.componentsTree=e)){CtBuilderAjax.ctTemplate?l.loadTemplateData(l.setTemplateData):e.children&&l.buildComponentsFromTree(e.children),l.component.id++,parent.document.getElementById("oxygen-ui").style.display="block",l.updateDOMTreeNavigator(),l.outputCSSOptions(),a.current_post_meta_keys=e.meta_keys,angular.element("body").hasClass("ct_inner")&&(l.outerTemplateData.edit_link=e.outerTemplateData.edit_link,l.outerTemplateData.template_name=e.outerTemplateData.template_name,angular.element("body").on("click",function(e){if(0<angular.element(".ct-inner-content-workarea").length&&angular.element(e.target).closest(".ct-inner-content-workarea").length<1&&angular.element(e.target).closest("#oxygen-resize-box").length<1&&!jQuery(this).hasClass("oxy-dragging-resize-box")){if(void 0!==l.choosingSelectorEnabled&&1==l.choosingSelectorEnabled)return;l.activateComponent(0),l.component.active.name="ct_template",l.component.active.parent.id=0,l.$apply()}}));var n=s(function(){a.adjustStickyHeaders(window),void 0!==oxygenVSBInitToggleState&&void 0!==oxygenVSBInitToggleClick&&oxygenVSBInitToggleState(),s.cancel(n)},0,!1);if(void 0!==oxygenVSBInitTabs)var t=s(function(){oxygenVSBInitTabs(),s.cancel(t)},500,!1),o=s(function(){oxygenVSBInitTabs(),s.cancel(o)},1e3,!1);if(l.fixShortcodes)var r=s(function(){l.fixShortcodesFound?l.showNoticeModal("<p>Broken shortcodes found and fixed. See console log.</p>"):l.showNoticeModal("<p>Broken shortcodes NOT found.</p>"),l.$apply(),s.cancel(r)},5e3,!1)}else alert("Error occured while trying to build a page.")},l.findMedia=function(e,n){var t,o=!1;if(angular.forEach(e,function(e){o||(e.options.media&&e.options.media[n]&&e.options.media[n][l.currentState]?o=t=!0:e.children&&(t=l.findMedia(e.children,n)))}),void 0!==t)return t},l.calculateBuiltInOffset=function(e,n,t){var o=0;return n.children&&angular.forEach(n.children,function(e){e.options.oxy_builtin&&o++}),o},l.isBuiltinComponent=function(){var e=l.component.active.id;return l.builtinComponents[e]},l.updateTagsByName=function(e,n,t){angular.forEach(n.children,function(e){e.name==t.from&&l.updateTreeComponentTag(e.id,e,t.to),e.children&&l.updateTagsByName(e.id,e,t)})},l.getComponentActiveSelector=function(e,n,t){t.activeselector=n.options.activeselector}}]);
CTFrontendBuilder.controller("ComponentsStates",["$scope","$parentScope",function(s,n){s.currentState="original",s.switchState=function(e,t,o){if(s.log&&console.log("switchState()",e,t,o),s.currentState==e)return!1;null==o&&(o=s.component.active.id),t||(s.showClasses=!1),s.currentState=e,s.highlightSelector(!0,s.selectorToEdit),s.applyModelOptions(),s.showStates=!1,s.outputCSSOptions(o),n.checkTabs(),s.parentScope.activeForEditBgLayer=!1},s.addState=function(){var e=prompt("Pseudo-class name:");null!=e&&(0===e.indexOf(":")&&(e=e.substring(1,e.length)),0===e.indexOf(":")&&(e=e.substring(1,e.length)),s.switchState(e),s.findComponentItem(s.componentsTree.children,s.component.active.id,s.addStateToComponent,e)),s.unsavedChanges()},s.tryDeleteComponentState=function(e,t){if(s.cancelDeleteUndo(),t.stopPropagation(),!confirm('Remove "'+e+'" styles?'))return!1;s.deleteComponentState(e)},s.deleteComponentState=function(e,t){s.log&&console.log("deleteComponentState",e),void 0===t&&(t=s.component.active.id),s.isEditing("class")?s.removeStateFromClass(s.currentClass,e):s.isEditing("custom-selector")?s.removeStateFromCustomSelector(s.selectorToEdit,e):(s.findComponentItem(s.componentsTree.children,t,s.removeStateFromTree,e),s.isEditing("media")?s.component.options[t].media&&s.component.options[t].media[s.currentMedia]&&delete s.component.options[t].media[s.currentMedia]:s.component.options[t][e]&&delete s.component.options[t][e]),s.isCurrentState("original")&&s.outputCSSOptions(t),s.switchState("original"),s.unsavedChanges()},s.removeStateFromTree=function(e,t,o){if(s.log&&console.log("removeStateFromTree()",e,o,t),0==e)return!1;s.isEditing("media")?void 0!==t.options.media[s.currentMedia][o]&&delete t.options.media[s.currentMedia][o]:void 0!==t.options[o]&&delete t.options[o]},s.addStateToComponent=function(e,t,o){if(s.log&&console.log("addStateToComponent()",e,o,t),0==e)return!1;t.options[o]={},s.component.options[e][o]={}},s.removeStateFromClass=function(e,t){s.isEditing("media")?void 0!==s.classes[e].media[s.currentMedia][t]&&delete s.classes[e].media[s.currentMedia][t]:void 0!==s.classes[e][t]&&delete s.classes[e][t]},s.removeStateFromCustomSelector=function(e,t){s.isEditing("media")?void 0!==s.customSelectors[e].media[s.currentMedia][t]&&delete s.customSelectors[e].media[s.currentMedia][t]:void 0!==s.customSelectors[e][t]&&delete s.customSelectors[e][t]},s.isCurrentState=function(e){return s.currentState==e},s.isPseudoElement=function(e){return-1<e.indexOf("before")||-1<e.indexOf("after")||-1<e.indexOf("first-letter")||-1<e.indexOf("first-line")||-1<e.indexOf("selection")},s.getComponentStatesList=function(e){void 0===e&&(e=s.component.active.id);var t,o=["hover","before","after"];if(s.isEditing("id")?t=s.component.options[e]:s.isEditing("class")?t=s.classes[s.currentClass]:s.isEditing("custom-selector")&&(t=s.customSelectors[s.selectorToEdit]),t)for(var n in states=Object.keys(t),states){var i=states[n];"object"==typeof t[i]&&"media"!=i&&"model"!=i&&"original"!=i&&"hover"!=i&&"before"!=i&&"after"!=i&&"id"!=i&&o.push(i)}return o},s.isStateHasOptions=function(e){var t=s.component.active.id;return state=!1,s.isEditing("id")&&(s.isEditing("media")?s.component.options[t].media&&s.component.options[t].media[s.currentMedia]&&(state=s.component.options[t].media[s.currentMedia][e]):state=s.component.options[t][e]),s.isEditing("class")&&s.classes[s.currentClass]&&(s.isEditing("media")?s.classes[s.currentClass].media&&s.classes[s.currentClass].media[s.currentMedia]&&(state=s.classes[s.currentClass].media[s.currentMedia][e]):state=s.classes[s.currentClass][e]),s.isEditing("custom-selector")&&!s.isEditing("class")&&s.customSelectors[s.selectorToEdit]&&(s.isEditing("media")?s.customSelectors[s.selectorToEdit].media&&s.customSelectors[s.selectorToEdit].media[s.currentMedia]&&(state=s.customSelectors[s.selectorToEdit].media[s.currentMedia][e]):state=s.customSelectors[s.selectorToEdit][e]),!(!state||jQuery.isEmptyObject(state))},s.isStatesHasOptions=function(){var e=s.getComponentStatesList();for(var t in e){var o=e[t];if(s.isStateHasOptions(o))return!0}return!1}}]);
CTFrontendBuilder.controller("ControllerNavigation",["$scope","$parentScope","$http","$timeout",function(w,c,e,s){w.openFolders={},w.toggledNodes=[],w.generateBreadcrumbs=function(e,t){return!1},w.calcDefaultComponentTitle=function(e,t){var o=w.niceNames[e.name];return"ct_reusable"==e.name?o+=" (post: "+e.options.view_id+")":"ct_woocommerce"==e.name&&(hookName=w.getWooCommerceHookNiceName(e.options.original.hook_name),o+=hookName),t||(o+=" (#"+e.id+")"),o},w.setComponentCategory=function(e,t,o){var n=w.findComponentItem(w.componentsTree.children,e,w.getComponentItem);n.options.ct_category===t?(delete n.options.ct_category,delete w.component.options[e].ct_category):(n.options.ct_category=t,w.component.options[e].ct_category=t),jQuery(o.target).closest(".ct-more-options-expanded").removeClass("ct-more-options-expanded")},w.generateDOMTreeNavigator=function(e,b,f,t,C){null==w.component.options[99999]&&(w.component.options[99999]=[]),w.component.options[99999].nicename="Button Area",void 0===t&&(t=!1);var x=!1;angular.forEach(e.children,function(e,t){if(!x){if(void 0===b||e.id==b){var o=e.id,n=e.name,a="",r="",i=" ng-class=\"{'ct-dom-tree-node-expanded' : toggledNodes["+o+"],'ct-dom-tree-child' : hasParent("+o+')}"}',c=" ng-class=\"{'ct-dom-tree-node-selected' : parentScope.isActiveId("+o+')}"';"oxy_header_left"==n||"oxy_header_center"==n||"oxy_header_right"==n?(activateID=e.options.ct_parent,activateName="oxy_header_row",a+=" dom-tree-disabled"):(activateID=o,activateName=n);var s=w.calcDefaultComponentTitle(e),l=' ng-mousedown="parentScope.triggerCodeMirrorBlur('+o+');" ng-click="activateComponent('+activateID+", '"+activateName+"',$event); parentScope.scrollToComponent('"+e.options.selector+"');\"";if(99999==e.id&&(l=""),e.children||(a+=" ct-dom-tree-no-children"),"ct_columns"!=e.name&&"ct_new_columns"!=e.name&&"ct_column"!=e.name&&"ct_section"!=e.name&&"ct_ul"!=e.name&&"ct_link"!=e.name&&("ct_inner_content"!=e.name||CtBuilderAjax.query&&CtBuilderAjax.query.post_type&&"ct_template"===CtBuilderAjax.query.post_type)&&"ct_div_block"!=e.name&&"oxy_dynamic_list"!=e.name&&"ct_nestable_shortcode"!=e.name&&"oxy_icon_box_button_area"!=e.name&&"oxy_tabs"!=e.name&&"oxy_tabs_contents"!=e.name&&"oxy_tab"!=e.name&&"oxy_tab_content"!=e.name&&"oxy_toggle"!=e.name&&"oxy_header"!=e.name&&"ct_if_wrap"!=e.name&&"ct_else_wrap"!=e.name&&"oxy_header"!=e.name&&"oxy_header_left"!=e.name&&"oxy_header_center"!=e.name&&"oxy_header_right"!=e.name&&"ct_slider"!=e.name&&"ct_slide"!=e.name&&"ct_modal"!=e.name||(a+=" ct-accept-drops"),"ct_columns"==e.name&&(a+=" ct-sortable-columns"),"ct_column"==e.name&&(a+=" ct-sortable-column"),"ct_ul"==e.name&&(a+=" ct-sortable-ul"),"ct_li"==e.name&&(a+=" ct-sortable-li"),"ct_if_else_wrap"==e.name&&(a+=" ct-sortable-if-else-wrap"),"ct_if_wrap"==e.name&&(a+=" ct-sortable-if-wrap"),"oxy_dynamic_list"==e.name&&(a+=" ct-sortable-dynamic-list"),"ct_else_wrap"==e.name&&(a+=" ct-sortable-else-wrap"),"ct_slider"==e.name&&(a+=" ct-sortable-slider"),"ct_modal"==e.name&&(a+=" ct-sortable-modal"),"ct_slide"==e.name&&(a+=" ct-sortable-slide"),"ct_section"==e.name&&(a+=" ct-sortable-section"),"ct_link"==e.name&&(a+=" ct-sortable-link"),"ct_link_text"==e.name&&(a+=" ct-sortable-link-text"),"ct_new_columns"==e.name&&(a+=" ct-sortable-new-columns"),"ct_div_block"==e.name&&(a+=" ct-sortable-div-block"),"oxy_header"==e.name&&(a+=" ct-sortable-header"),"oxy_header_row"==e.name&&(a+=" ct-sortable-header-row"),"oxy_tabs"==e.name&&(a+=" ct-sortable-tabs"),"oxy_tabs_contents"==e.name&&(a+=" ct-sortable-tabs-contents"),"oxy_tab"==e.name&&(a+=" ct-sortable-tab"),"oxy_tab_content"==e.name&&(a+=" ct-sortable-tab-content"),"ct_span"!=e.name&&"oxy_header_left"!=e.name&&"oxy_header_right"!=e.name&&"oxy_header_center"!=e.name&&"true"!=e.options.oxy_builtin&&(a+=" ct-draggable"),"ct_span"!=e.name&&"true"!=e.options.oxy_builtin)var d='<li ng-show="isCanComponentize('+o+",'"+n+'\');"ng-click="saveReusable('+o+')">Make Re-Usable</li>',m='<li ng-click="duplicateComponent('+o+",'"+n+"',"+e.options.ct_parent+')">Duplicate</li>',p="<li ng-click=\"wrapComponentWith('ct_div_block',"+o+","+e.options.ct_parent+')">Wrap with &#60;div&#62;</li>';else d="",m="",p="";if(null==w.component.options[e.id]&&(w.component.options[e.id]={}),w.component.options[e.id].nicename=w.component.options[e.id].nicename&&""!==w.component.options[e.id].nicename.trim()?w.component.options[e.id].nicename:s,w.component.options[e.id].ct_parent=e.options.ct_parent,parseInt(e.id)<1e5){if("oxy_header_left"!=e.name&&"oxy_header_right"!=e.name&&"oxy_header_center"!=e.name&&"ct_if_wrap"!=e.name&&"ct_else_wrap"!=e.name)var g='<span class="ct-icon ct-delete-icon" title="Remove Component" ng-click="removeComponentWithUndo('+o+",'"+n+"',"+e.options.ct_parent+')"></span>';else g="";var u=!1;if(CtBuilderAjax.componentCategories&&0<CtBuilderAjax.componentCategories.length)for(key in u="",CtBuilderAjax.componentCategories)u+="<li ng-class=\"{'active': component.options[component.active.id]['ct_category'] === '"+CtBuilderAjax.componentCategories[key]+'\'}" ng-click="showCategorize=false; setComponentCategory('+e.id+", '"+CtBuilderAjax.componentCategories[key]+"', $event)\">"+CtBuilderAjax.componentCategories[key]+"</li>";var _=angular.element("body").hasClass("ct_connection_active")&&u&&(0===parseInt(e.options.ct_parent)||1e5<parseInt(e.options.ct_parent));99999!=e.id&&"true"!=e.options.oxy_builtin&&(r='<div class="ct-node-options"><span class="ct-icon ct-more-options-icon" ng-click="showCategorize=false"></span>'+g+'<div class="ct-more-options-container"><div class="ct-more-options"><ul ng-show="showCategorize!=true">'+d+m+p+'<li ng-click="setEditableFriendlyName('+o+')">Rename</li>'+(_?'<li ng-click="showCategorize=true">Categorize</li>':"")+"</ul>"+(_?'<ul ng-show="showCategorize==true"><li ng-click="showCategorize=false">< Back</li>'+u+"</ul>":"")+"</div></div></div>"),f.HTML+='<div ng-attr-tree-actual-id="'+e.actualID+'" ng-attr-tree-id="'+e.id+'"'+i+' id="ct-dom-tree-node-'+e.id+'" class="ct-dom-tree-node '+a+'" ng-Style="parentScope.isActiveId('+o+')?{zIndex: 9999}:{}"><div class="ct-dom-tree-bottom-dash-cover"></div><div class="ct-dom-tree-left-dash-cover"></div><div ng-attr-node-id="'+o+'" class="ct-dom-tree-node-anchor ct-dom-tree-node-type-general ct-dom-tree-name"'+c+l+'><div class="ct-dom-tree-node-header" ng-class="{\'ct-handle\': editableFriendlyName!='+o+(_?", 'categorized-component': component.options['"+e.id+"']['ct_category']":"")+'}"><div class="ct-expand-butt" ng-click="toggleNode('+o+',$event)"><span class="ct-icon"></span></div><span class="ct-icon ct-node-type-icon"></span><i class="ct-icon-if-conditions" ng-if="(component.options['+o+"]['model']['globalconditions'] && component.options["+o+"]['model']['globalconditions'].length > 0) || component.options["+o+"]['model']['conditionspreview'] === '0'\"></i><span class=\"ct-nicename\" ng-if=\"editableFriendlyName!="+o+'" ng-bind="component.options[\''+e.id+'\'][\'nicename\']" /><span class="ct-nicename ct-nicename-editing" ng-blur="setEditableFriendlyName(0)" ng-change="updateFriendlyName('+o+')" ng-if="editableFriendlyName=='+o+'" contenteditable="true" data-plaintext="true" data-defaulttext="'+s+'" ng-Model="component.options[\''+e.id+"']['nicename']\" focus-me=\"true\" />"+r+'</div><div class="ct-dom-tree-horizontal-dash"></div></div>'}if(e.children){if("oxy_icon_box"==e.name){e=angular.copy(e);var v=angular.copy(e);v.name="oxy_icon_box_button_area",v.actualID=v.id,v.id=99999,v.children.splice(0,1),e.children.splice(1,0,v),e.children.length=2}w.generateDOMTreeNavigator(e,void 0,f,!0)}parseInt(e.id)<1e5&&(f.HTML+="</div>"),void 0===b&&(w.componentsTreeNavigator=f.HTML),w.findComponentItem(w.componentsTree.children,e.id,w.loadComponentNiceName)}else e.children&&w.generateDOMTreeNavigator(e,b,f);if(e.id==b){x=!0,w.removeDOMTreeNavigatorNode(e.id);var y=e.options.ct_parent<1e5?e.options.ct_parent:0;0===y&&w.innerContentRoot&&w.innerContentRoot.id&&(y=w.innerContentRoot.id);var h=window.parent.document.getElementById("ct-dom-tree-node-"+y);h=angular.element(h),w.cleanInsert(f.HTML,h,t+3,C),jQuery(h).removeClass("ct-dom-tree-no-children")}}})},w.updateDOMTreeNavigator=function(e,t){var o=window.parent.document.getElementById("ct-dom-tree");if(!o)return!1;c.showSidePanel,w.log&&console.log("updateDOMTreeNavigator()",e),w.functionStart("updateDOMTreeNavigator");var n={HTML:""},a=0;w.innerContentRoot&&w.innerContentRoot.id&&(a=w.innerContentRoot.id);var r='<div id="ct-dom-tree-node-'+a+'" ng-attr-tree-id="'+a+'" dragula="\'ct-dom-tree\'" class="oxy-dom-tree-root ct-accept-drops ct-elements-managers-bottom"><span></span><span></span><div  ng-mousedown="triggerCodeMirrorBlur(0);" ng-click="activateComponent(0, \'root\')" ng-class="{\'ct-dom-tree-node-selected\' : parentScope.isActiveId(0)}" ng-attr-tree-id="'+a+'" ng-click="activateComponent(0, \'root\')" class="ct-dom-tree-body-anchor ct-dom-tree-node-anchor ct-dom-tree-parent"><span class="ct-icon ct-dom-parent-icon"></span>'+(window.parent.document.getElementsByTagName("BODY")[0].classList.contains("ct_inner")?"Inner Content":"Body")+"</div>";void 0===e&&(o=angular.element(o)).empty(),w.functionStart("generateDOMTreeNavigator"),t||w.generateDOMTreeNavigator(w.componentsTree,e,n,!1),w.functionEnd("generateDOMTreeNavigator"),r+=n.HTML+"</div></div>",void 0===e&&w.cleanInsert(r,o),w.functionEnd("updateDOMTreeNavigator")},w.removeDOMTreeNavigatorNode=function(e){w.log&&console.log("try removeDOMTreeNavigatorNode()",e);var t=window.parent.document.getElementById("ct-dom-tree-node-"+e);t=angular.element(t);var o=jQuery(t).parent();0<t.length&&w.log&&console.log("DOMTreeNavigatorNode() removed",e,t),t.remove(),void 0!==t.scope()&&t.scope().$destroy(),t=null,jQuery(o).children().length<=3&&jQuery(o).addClass("ct-dom-tree-no-children")},w.toggleNode=function(e,t){if(void 0!==t&&(angular.element("#ct-sidepanel").trigger(t.type),t.stopPropagation()),w.latestDroppedDOMParent!=e){var o=angular.element("div[ng-attr-tree-id="+e+"]",window.parent.document);void 0===w.toggledNodes[e]&&o.hasClass("ct-dom-tree-node-expanded")?(w.toggledNodes[e]=!1,angular.element("div[ng-attr-tree-id="+e+"]",window.parent.document).removeClass("ct-dom-tree-node-expanded")):w.toggledNodes[e]=!w.toggledNodes[e]}else w.latestDroppedDOMParent=null},w.expandAllNodes=function(){for(var e in w.component.options)w.component.options.hasOwnProperty(e)&&(w.toggledNodes[e]=!0)},w.collapseAllNodes=function(){w.toggledNodes=[]},w.highlightDOMNode=function(r,e){if(w.log&&console.log("highlightDOMNode()",r),!(1e5<r)){if(!c.isShowTab("sidePanel","DOMTree")||!c.showSidePanel)return!1;e&&e.stopPropagation(),jQuery("#ct-dom-tree-node-"+r,window.parent.document).parents(".ct-dom-tree-node:not(.ct-dom-tree-node-expanded)").each(function(){var e=jQuery(this).attr("ng-attr-tree-id");w.toggledNodes[e]=!0});var i=s(function(){var e=0;w.innerContentRoot&&w.innerContentRoot.id&&(e=w.innerContentRoot.id);var t=jQuery("#ct-dom-tree-node-"+e,window.parent.document),o=t.scrollTop(),n=jQuery("#ct-dom-tree-node-"+r,window.parent.document);if(n.offset()){t.scrollTop(0);var a=n.offset().top;t.scrollTop(o),t.stop().animate({scrollTop:a-t.offset().top-120},500),s.cancel(i)}},500,!1)}},w.openLoadFolder=function(e,t,o,n){w.experimental_components[t].fresh?(o&&angular.element(n.target).addClass("oxygen-small-progress"),w.getComponentsListFromSource(e,t,function(e){o&&(c.tabs.components=[],angular.element(n.target).removeClass("oxygen-small-progress")),w.openFolder(e,t),c.applyMenuAim()})):(o&&(c.tabs.components=[]),w.openFolder(e,t))},w.openFolder=function(e,t){w.closeAllFolders(),w.openFolders[e]=void 0===t||t,"categories-categories"===e&&(void 0!==w.libraryCategories&&null!==w.libraryCategories||(w.libraryCategories={},w.libraryPages={},w.getStuffFromSource(w.processLibraryStuff)));s(function(){jQuery(".oxygen-folder-"+e+" .ct-add-item-button-image",window.parent.document).each(function(){jQuery(this).attr("src",jQuery(this).data("src"))})},0,!1);c.applyMenuAim()},w.processLibraryStuff=function(e){var t=(e=JSON.parse(e)).items,o=(e.key,parseInt(e.next));if(t){var n=t.components;n&&_.each(n,function(e){var t=e.category;void 0===t&&(t="Other"),w.libraryCategories[t]=w.libraryCategories[t]||{},w.libraryCategories[t].slug=btoa(t).replace(/=/g,""),w.libraryCategories[t].contents=w.libraryCategories[t].contents||[],w.libraryCategories[t].contents.push(e)});var a=t.pages;a&&_.each(a,function(e){if("ct_template"!==e.type){var t=e.category;void 0===t&&(t="Other"),w.libraryPages[t]=w.libraryPages[t]||{},w.libraryPages[t].slug=btoa(t).replace(/=/g,""),w.libraryPages[t].contents=w.libraryPages[t].contents||[],w.libraryPages[t].contents.push(e)}})}w.getStuffFromSource(w.processLibraryStuff,o),c.applyMenuAim()},w.closeAllFolders=function(e){w.openFolders={}},w.isShowFolder=function(e){return!!w.openFolders[e]},w.hasOpenFolders=function(){return 0<Object.keys(w.openFolders).length}}]);
CTFrontendBuilder.controller("ControllerColumns",["$scope","$parentScope","$timeout",function(p,d,t){p.columns=[],p.emptyColumnsComponent=[],p.updateColumnsOnAdd=!0,p.setColumns=function(t,e){var n=e.children.length,o=p.columns[t]-n,c=e.children[n-1];if(0<o)for(var i=0;i<o;i++)p.addColumn(t);if(o<0)for(i=0;o<i;i--)p.removeColumn(c.id)},p.updateColumns=function(t){p.findComponentItem(p.componentsTree.children,t,p.setColumns)},p.addColumn=function(t){p.applyComponentDefaultOptions(p.component.id,"ct_column");var e="ct_column",n=p.getActiveComponent(),o=p.getComponentTemplate(e,p.component.id);column={id:p.component.id,name:e},p.findComponentItem(p.componentsTree.children,p.component.active.id,p.insertComponentToTree,column),p.updateColumnsOnAdd(n,o),p.component.id++,p.activateComponent(t,"ct_columns")},p.removeColumn=function(t){if(1==p.columns[p.component.active.parent.id])return alert("You can not delete the last column"),!1;p.columns[p.component.active.parent.id]--;var e=p.getComponentById(t),n=e.parent();p.updateColumnsOnRemove(n,e),p.findParentComponentItem(p.componentsTree,t,p.cutComponentFromTree),p.removeDOMTreeNavigatorNode(t)},p.updateColumnsOnRemove=function(t,e){p.log&&console.log("updateColumnsOnRemove()");var n=t[0].querySelectorAll(".ct-column");if(d.isActiveName("ct_div_block")){if(!d.isActiveParentName("ct_columns")&&!d.isActiveParentName("ct_new_columns"))return!1;n=jQuery(t).children(".ct-div-block"),componentName="ct_div_block"}else componentName="ct_column";if(0<n.length){var o=n.length-1,c=e[0].getAttribute("ng-attr-component-id"),i=parseFloat(p.getOption("width",c));e.remove();var l=!1;if(angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));if(!isNaN(n)){var o={};p.findComponentItem(p.componentsTree.children,e,p.getComponentActiveSelector,o),o.activeselector&&(l=!0)}}),l)return!1;angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=((n=parseFloat(p.getOption("width",e)))+i/o).toFixed(2);p.setOptionModel("width",n,e,componentName)}),p.cleanInsert(t)}"ct_div_block"==componentName?p.checkColumnsWidthSum(jQuery(t).children(".ct-div-block"),componentName):p.checkColumnsWidthSum(t[0].querySelectorAll(".ct-column"),componentName)},p.updateColumnsOnChange=function(n,t){if(!p.isEditing("class")){var e=p.getOption("width",n),o=t-parseFloat(e),c=p.getComponentById(n),i=c.parent(),l=i[0].querySelectorAll(".ct-column");if(!(100<parseFloat(e)||parseFloat(e)<0||""===e||isNaN(parseFloat(e)))){if(d.isActiveName("ct_div_block")){if(!d.isActiveParentName("ct_columns")&&!d.isActiveParentName("ct_new_columns"))return!1;l=jQuery(i).children(".ct-div-block"),componentName="ct_div_block"}else componentName="ct_column";p.log&&console.log("updateColumnsOnChange()",t,e);var a=c.next();if(a[0]||(a=c.prev()),!a[0])return!1;var r=a[0].getAttribute("ng-attr-component-id"),m=parseFloat(p.getOption("width",r));if(!isNaN(m)){if(o<0)if(m>Math.abs(o)){var u=(m+o).toFixed(2);p.setOptionModel("width",u,r,componentName)}else if(0<l.length){u=((100-e)/(l.length-1)).toFixed(2);angular.forEach(l,function(t){var e=t.getAttribute("ng-attr-component-id");e!=n&&p.setOptionModel("width",u,e,componentName)})}if(0<o){u=(m+o).toFixed(2);p.setOptionModel("width",u,r,componentName)}p.checkColumnsWidthSum(l,componentName,n)}}}},p.updateColumnsOnAdd=function(t,e){p.log&&console.log("updateColumnsOnAdd()");var n=t[0].querySelectorAll(".ct-column");if(0<n.length){var o=n.length,c=(angular.element(n[0]).parent()[0].offsetWidth,(100/(o+1)).toFixed(2)),i=!1;if(angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));if(!isNaN(n)){var o={};p.findComponentItem(p.componentsTree.children,e,p.getComponentActiveSelector,o),o.activeselector&&(i=!0)}}),i)return!1;angular.forEach(n,function(t){var e=t.getAttribute("ng-attr-component-id"),n=parseFloat(p.getOption("width",e));n=((100-c)/100*n).toFixed(2);p.setOptionModel("width",n,e,"ct_column")}),p.setOptionModel("width",c,p.component.id,"ct_column")}p.getInnerWrap(t).append(e),p.cleanInsert(t),p.checkColumnsWidthSum(t[0].querySelectorAll(".ct-column"))},p.checkColumnsWidthSum=function(t,e,n){if(void 0!==t&&!p.isEditing("class")&&(null==e&&(e="ct_column"),p.log&&console.log("checkColumnsWidthSum()",t,e),0<t.length)){var o=0;angular.forEach(t,function(t){var e;e=t.options?t.id:t.getAttribute("ng-attr-component-id");var n=parseFloat(p.getOption("width",e));isNaN(n)||(o+=n)});var c,i=parseFloat(100-o).toFixed(2);t[0]&&t[0].name==e?n==(c=jQuery(t).last()[0].id)&&(c=jQuery(t).last().prev()[0].id):n==(c=jQuery(t).last()[0].getAttribute("ng-attr-component-id"))&&(c=jQuery(t).last().prev()[0].getAttribute("ng-attr-component-id"));var l=parseFloat(p.getOption("width",c)),a=parseFloat(l)+parseFloat(i);if(isNaN(a))return;p.setOptionModel("width",a.toFixed(2),c,e)}},p.checkEmptyColumns=function(t){if(p.emptyColumnsComponent[t]=!1,p.findComponentItem(p.componentsTree.children,t,p.checkEmptyColumnsCallback),!p.emptyColumnsComponent[t])return"ct-columns-empty"},p.checkEmptyColumnsCallback=function(t,e,n){angular.forEach(e.children,function(t){t.children&&(p.emptyColumnsComponent[e.id]=!0)})}}]);
CTFrontendBuilder.controller("ControllerAJAX",["$scope","$parentScope","$http","$timeout",function(g,c,h,f){g.postsData=[],g.showErrorModal=function(e,o,t,n){var r="";r=e&&0<e?("string"==typeof o?"<h4>"+o+"</h4>":"")+"<p><strong>"+("string"==typeof t?t:"")+" "+e+"</strong></p><p>Your server returned a "+e+" error for the request to "+n+".</p><p><a href='http://oxygenbuilder.com/documentation/troubleshooting/troubleshooting-guide/' style='text-decoration: underline; color: #fff;' target='_blank'>Troubleshooting Guide &raquo;</a></p>":("string"==typeof o?"<h4>"+o+"</h4>":"")+"<p><strong>"+("string"==typeof t?t:"")+"</strong></p>",g.showNoticeModal("<div>"+r+"</div>")},g.savePage=function(a){void 0!==g.parentScope.currentModal&&void 0!==g.component.options[g.parentScope.currentModal]&&"ct_modal"==g.component.options[g.parentScope.currentModal].name&&g.setOptionModel("behavior","1",g.parentScope.currentModal),a||c.showLoadingOverlay("savePage()"),c.disableContentEdit();var e={classes:g.classes,custom_selectors:g.customSelectors,style_sets:g.styleSets,style_folders:g.styleFolders,style_sheets:g.styleSheets,page_settings:g.pageSettingsMeta,global_settings:g.globalSettings,easy_posts_templates:g.easyPostsCustomTemplates,comments_list_templates:g.commentsListCustomTemplates,typekit_fonts:g.typeKitFonts,global_colors:g.globalColorSets,preview:(g.previewType,g.template.postData.permalink)};g.googleFontsCache||(e.google_fonts_cache=g.googleFontsList),angular.forEach(g.activeSelectors,function(e,o){g.findComponentItem(g.componentsTree.children,o,g.updateComponentActiveSelector,e)});var o={params:e,tree:g.componentsTree};o=angular.toJson(o),e={action:"ct_save_components_tree",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};(jQuery("body").hasClass("ct_inner")||jQuery("body",window.parent.document).hasClass("ct_inner"))&&(e.ct_inner=!0),h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:e,data:o,transformResponse:!1}).success(function(o,t,e,n){try{var r;if(a)0!=(r=JSON.parse(o)).post_saved&&g.allSaved();else 0===(r=JSON.parse(o))?g.showErrorModal(0,"YOUR PAGE WAS NOT SAVED BECAUSE YOU ARE NOT LOGGED IN. Open a new browser tab and log back in to WordPress. Then attempt to save the page again."):0==r.post_saved?(console.log(o),g.showErrorModal(0,"Error occurred while saving")):g.allSaved(),c.hideLoadingOverlay("savePage()")}catch(e){console.log(o),console.log(e),a||g.showErrorModal(t,"Error occurred while saving",e)}}).error(function(e,o,t,n){console.log(e,o),a||c.hideLoadingOverlay("savePage()")}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while saving",e.statusText,e.config.url)})},g.updatePageCSS=function(){c.showLoadingOverlay("updatePageCSS()"),h({url:CtBuilderAjax.permalink,method:"POST",params:{xlink:"css",action:"save-css"},transformResponse:!1}).success(function(e,o,t,n){c.hideLoadingOverlay("updatePageCSS()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("updatePageCSS()")}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while saving CSS",e.statusText,e.config.url)})},g.updateComponentActiveSelector=function(e,o,t){o&&o.options&&(o.options.activeselector=t)},g.saveComponentAsView=function(r,e){var o={action:"ct_save_component_as_view",name:g.componentizeOptions.name,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};if(e.constructor===Array)var t=e;else t=[e];h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:o,data:{id:0,name:"root",depth:0,children:t}}).success(function(e,o,t,n){c.hideLoadingOverlay("saveComponentAsView()"),0!=e?(alert('Re-usable part "'+g.componentizeOptions.name+'" saved successfully.'),g.replaceReusablePart(r,e)):g.showErrorModal(0,'Error occurred while saving "Re-usable part".')}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("saveComponentAsView()")}).then(null,function(e){g.showErrorModal(e.status,'Error occurred while saving "Re-usable part".',e.statusText,e.config.url)})},g.postComponentize=function(e,o){c.showLoadingOverlay("postComponentize()");var t={action:"ct_componentize",id_to_update:g.componentizeOptions.idToUpdate,name:g.componentizeOptions.name,design_set_id:g.componentizeOptions.designSetId,category_id:g.componentizeOptions.categoryId,screenshot:g.componentizeOptions.assetId,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce},n=angular.copy(o);if(g.addComponentClassesStyles(n),o.constructor===Array)var r=n;else r=[n];h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:t,transformResponse:!1,data:{id:0,name:"root",depth:0,children:r}}).success(function(e,o,t,n){"ok"==(e=JSON.parse(e)).status?alert('Re-usable part "'+g.componentizeOptions.name+'" saved successfully.'):"error"==e.status?g.showErrorModal(0,e.message):g.showErrorModal(0,'Unknown error occurred while saving "Re-usable part".'),c.hideLoadingOverlay("postComponentize()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("postComponentize()")}).then(null,function(e){g.showErrorModal(e.status,'Error occurred while saving "Re-usable part".',e.statusText,e.config.url)})},g.postAsset=function(e,r){if(void 0!==e){c.showLoadingOverlay("postAsset()");var o={action:"ct_post_asset",file_name:e.name,file_type:e.type,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:o,transformResponse:!1,data:e}).success(function(e,o,t,n){"ok"==(e=JSON.parse(e)).status?(g.componentizeOptions.assetId=e.asset_id,r()):"error"==e.status?g.showErrorModal(0,"Error occurred while posting asset:"+e.message):g.showErrorModal(0,"Unknown error occurred while posting asset."),c.hideLoadingOverlay("postAsset()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("postAsset()")}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while posting asset.",e.statusText,e.config.url)})}else alert("No asset provided")},g.pageComponentize=function(){c.showLoadingOverlay("pageComponentize()");var r={action:"ct_componentize_page",name:g.componentizeOptions.pageName,design_set_id:g.componentizeOptions.designSetId,screenshot:g.componentizeOptions.assetId,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce},e=angular.copy(g.componentsTree);g.addComponentClassesStyles(e),h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:r,transformResponse:!1,data:e}).success(function(e,o,t,n){"ok"==(e=JSON.parse(e)).status?alert('Re-usable page "'+r.name+'" saved successfully.'):"error"==e.status?g.showErrorModal(0,e.message):g.showErrorModal(0,'Unknown error occurred while saving "Re-usable page".'),c.hideLoadingOverlay("pageComponentize()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("pageComponentize()")}).then(null,function(e){g.showErrorModal(e.status,'Error occurred while saving "Re-usable page".',e.statusText,e.config.url)})},g.loadComponentsTree=function(a,s,i,l){g.log&&console.log("loadComponentsTree()",s,i,l),c.showLoadingOverlay("loadComponentsTree()"),void 0===s&&(s=CtBuilderAjax.postId);var e={action:"ct_get_components_tree",id:s,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};jQuery("body").hasClass("ct_inner")&&(e.ct_inner=!0),h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:e,transformResponse:!1}).success(function(o,e,t,n){try{var r=JSON.parse(o);a(r,s,i,l)}catch(e){console.log(o,e),g.showErrorModal(0,"Error occurred while loading post: "+s,e)}c.hideLoadingOverlay("loadComponentsTree()")}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while loading post: "+s,e.statusText,e.config.url)})},g.renderInnerContent=function(s,e){var o=CtBuilderAjax.permalink,t={};o="term"===g.previewType?(t.term=g.template.postData.term,g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.ajaxUrl):(t.post=g.template.postData,g.template.postData&&g.template.postData.permalink?t.post.permalink:CtBuilderAjax.ajaxUrl);var n={action:"ct_render_innercontent",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:o,method:"POST",params:n,transformResponse:!1}).success(function(e,o,t,n){if(0!==parseInt(e)){var r=g.getComponentById(s);r.html();var a=angular.element("<div>");a.html(e),r.append(a),g.adjustResizeBox()}}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while rendering innercontent",e.statusText,e.config.url)})},g.evalCondition=function(r){var e;if(void 0===r&&(r=g.component.active.id),0<(e=g.getComponentById(r).closest(".oxy-dynamic-list")).length){var o=e.attr("ng-attr-component-id");g.dynamicListAction(o,r)}else if(g.component.options[r].original&&g.component.options[r].original.conditions&&0<g.component.options[r].original.conditions.length){var t=CtBuilderAjax.permalink,n={};t="term"===g.previewType?(n.term=g.template.postData.term,g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.permalink):(n.post=g.template.postData,g.template.postData&&g.template.postData.permalink?n.post.permalink:CtBuilderAjax.permalink);var a={action:"ct_eval_condition",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:t,method:"POST",params:a,data:JSON.stringify(g.component.options[r]),transformResponse:!1}).success(function(e,o,t,n){void 0!==(e=JSON.parse(e)).result&&g.setOptionModel("conditionsresult",e.result,r,g.component.options[r].name)}).error(function(e,o,t,n){console.log(e,o),g.adjustResizeBox()}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while evaluation condition",e.statusText,e.config.url)})}else delete iframeScope.component.options[r].model.conditionsresult},g.renderShortcode=function(c,e,d,p){if(g.component.options[c]&&g.component.options[c].original&&"true"==g.component.options[c].original.dont_render){g.getComponentById(c).html("")}else{var u=CtBuilderAjax.permalink,o={};u="term"===g.previewType?(o.term=g.template.postData.term,g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.permalink):(o.post=g.template.postData,g.template.postData&&g.template.postData.permalink?o.post.permalink:CtBuilderAjax.permalink);var m={action:"ct_render_shortcode",shortcode_name:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};if(d&&(g.oxygenShortcodesCache=g.oxygenShortcodesCache||[],p&&p.original&&p.original.full_shortcode&&-1<p.original.full_shortcode.indexOf("[oxygen"))){var t=_.findWhere(g.oxygenShortcodesCache,{id:m.post_id,url:u,full_shortcode:p.original.full_shortcode});if(t)return void d(p.original.full_shortcode,t.result)}h({url:u,method:"POST",params:m,data:p?JSON.stringify(p):JSON.stringify(g.component.options[c]),transformResponse:!1}).success(function(e,o,t,n){if(e||""===e){var r=g.getComponentById(c),a=angular.element("<div>");if(a.html(e),d){g.oxygenShortcodesCache=g.oxygenShortcodesCache||[];var s=a.find("#ct-shortcode-links-scripts").html();g.oxygenShortcodesCache.push({id:m.post_id,url:u,full_shortcode:p.original.full_shortcode,result:s}),d(p.original.full_shortcode,s)}else{r.html(a.find("#ct-shortcode-links-scripts").html());var i=r.closest("body");i.find('link[data-forId="'+c+'"], script[data-forId="'+c+'"]').remove(),a.find("link, script").each(function(){i.append(angular.element(this).attr("data-forId",c))});var l=f(function(){jQuery.ready(),f.cancel(l)},1e3,!1)}}else console.log(e,o),d&&d(p.original.full_shortcode,""),g.showErrorModal(0,"Error occurred while rendering shortcode");g.adjustResizeBox()}).error(function(e,o,t,n){console.log(e,o),g.adjustResizeBox()}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while rendering shortcode",e.statusText,e.config.url)})}},g.evalConditionsViaAjax=function(e,r){var o=CtBuilderAjax.permalink,t={};o="term"===g.previewType?(t.term=g.template.postData.term,g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.permalink):(t.post=g.template.postData,g.template.postData&&g.template.postData.permalink?t.post.permalink:CtBuilderAjax.permalink);var n={action:"ct_eval_conditions",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:o,method:"POST",params:n,data:JSON.stringify(e),transformResponse:!1}).success(function(e,o,t,n){e=JSON.parse(e),r&&r(e)}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while evaluating conditions",e.statusText,e.config.url)})},g.removeChromeModal=function(e){if(e.stopPropagation(),e.preventDefault(),jQuery(e.target).hasClass("ct-chrome-modal-bg")||jQuery(e.target).hasClass("ct-chrome-modal-hide")){var o={action:"ct_remove_chrome_modal",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:o,transformResponse:!1}).success(function(e,o,t,n){jQuery(".ct-chrome-modal-bg").remove()}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while dismissing the notice",e.statusText,e.config.url)})}},g.renderDataComponent=function(a,e){var o=CtBuilderAjax.permalink,t={};o="term"===g.previewType?(t.term=g.template.postData.term,g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.ajaxUrl):(t.post=g.template.postData,g.template.postData&&g.template.postData.permalink?t.post.permalink:CtBuilderAjax.ajaxUrl);var s={action:"ct_render_data_component",component_name:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:o,method:"POST",params:s,data:JSON.stringify(g.component.options[a]),transformResponse:!1}).success(function(e,o,t,n){if(e||""===e){var r=g.getComponentById(a);switch(s.component_name){case"ct_data_featured_image":case"ct_data_author_avatar":e=JSON.parse(e),r[0].src=e.src;break;default:r.html(e)}}else console.log(e,o),g.showErrorModal(0,"Error occurred while rendering the component")}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while rendering the component",e.statusText,e.config.url)})},g.renderWidget=function(s,i){if("true"!=g.component.options[s].original.dont_render||i){g.log&&console.log("renderWidget()",s,i);var e=JSON.stringify({options:g.component.options[s]}),o=CtBuilderAjax.ajaxUrl,t={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};i?(t.action="ct_render_widget_form",c.cleanInsertUI("<span></span>","#ct-dialog-widget-content"),c.showSidebarLoader=!0):(t.action="ct_render_widget",c.showWidgetOverlay(s),o=g.getAJAXRequestURL()),h({url:o,method:"POST",params:t,data:e,transformResponse:!1}).success(function(e,o,t,n){var r=g.getComponentById(s);if(e)if(i){var a=f(function(){c.cleanInsertUI('<form id="ct-widget-form" class="open">'+e+"</form>","#ct-dialog-widget-content"),window.parent.jQuery(window.parent.document).trigger("widget-added",[jQuery("#ct-widget-form",window.parent.document)]),f.cancel(a)},0,!1);c.showSidebarLoader=!1}else{void 0!==window.google&&void 0!==window.google.maps&&"sow-google-map"==g.component.options[s].id.id_base&&delete window.google.maps,r.html(e);a=f(function(){jQuery.ready(),f.cancel(a)},1e3,!1);c.hideWidgetOverlay(s),g.adjustResizeBox()}e&&""!==r.text()||i||r.html("<div class='ct-blank-widget'>Widget Content</div>")}).error(function(e,o,t,n){g.getComponentById(s).html("<div class='ct-blank-widget'>Widget Content<div>")})}else{g.getComponentById(s).html("")}},g.renderSidebar=function(a,e){var o=JSON.stringify({options:g.component.options[a]}),t={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"ct_render_sidebar"};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:t,data:o,transformResponse:!1}).success(function(e,o,t,n){var r=g.getComponentById(a);e&&r.html(e),e&&""!==r.text()||r.html("<div class='ct-blank-widget'>Sidebar Content</div>")}).error(function(e,o,t,n){g.getComponentById(a).html("<div class='ct-blank-widget'>Sidebar Content<div>")})},g.renderNavMenu=function(a){void 0===a&&(a=g.component.active.id),g.log&&console.log("renderNavMenu()",a),c.showWidgetOverlay(a);var e=JSON.stringify({options:g.component.options[a]}),o=g.getAJAXRequestURL();params={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"oxy_render_nav_menu"},h({url:o,method:"POST",params:params,data:e,transformResponse:!1}).success(function(e,o,t,n){var r=g.getComponentById(a);e?r.html(e):r.html("No menu found"),g.adjustResizeBox(),c.hideWidgetOverlay(a)}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while rendering menu",e.statusText,e.config.url)})},g.getDynamicDataFromQuery=function(r,e,o,t,a,s){void 0===r&&(r=g.component.active.id),g.log&&console.log("getDynamicDataFromQuery()",action,r);var n=CtBuilderAjax.permalink;CtBuilderAjax.oxyTemplate&&(n=g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.ajaxUrl);var i=JSON.stringify({options:g.component.options[r],shortcodes:e,conditions:o,logicConditions:t}),l={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:"oxy_get_dynamic_data_query"};c.showWidgetOverlay(r),h({url:n,method:"POST",params:l,data:i,transformResponse:!1}).success(function(e,o,t,n){e?a&&a(e,s):component.html("No data received"),c.hideWidgetOverlay(r)}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred",e.statusText,e.config.url)})},g.renderComponentWithAJAX=function(a,s){void 0===s&&(s=g.component.active.id),g.log&&console.log("renderComponentWithAJAX()",a,s);var e=JSON.stringify({options:g.component.options[s]}),o=g.getAJAXRequestURL(),t={post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,action:a};c.showWidgetOverlay(s),"oxy_render_easy_posts"==a&&jQuery(".oxygen-easy-posts-ajax-styles-"+s).remove(),h({url:o,method:"POST",params:t,data:e,transformResponse:!1}).success(function(e,o,t,n){var r=g.getComponentById(s);e?(r.html(e),"oxy_render_easy_posts"==a&&r.find(".oxygen-easy-posts-ajax-styles-"+s).prependTo("head")):r.html("No data received"),g.adjustResizeBox(),c.hideWidgetOverlay(s)}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while rendering the component",e.statusText,e.config.url)})},g.loadSVGIconSets=function(){var e={action:"ct_get_svg_icon_sets",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:e,transformResponse:!1}).success(function(o,e,t,n){try{var r=JSON.parse(o);g.SVGSets=r,g.currentSVGSet=Object.keys(r)[0]}catch(e){console.log(o),console.log(e),g.showErrorModal(0,"Error occurred while loading SVG icons")}}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while loading SVG icons",e.statusText,e.config.url)})},g.loadAttachmentSizes=function(e,r){var o={action:"ct_get_attachment_sizes",post_id:CtBuilderAjax.postId,attachment_id:e,nonce:CtBuilderAjax.nonce};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:o,transformResponse:!1}).success(function(o,e,t,n){try{o=JSON.parse(o)}catch(e){console.log(o),console.log(e),g.showErrorModal(0,"Error occurred while loading attachment sizes")}r(o)}).error(function(e,o,t,n){console.log(e,o)}).then(null,function(e){g.showErrorModal(e.status,"Error occurred while loading attachment sizes",e.statusText,e.config.url)})},g.loadTemplateData=function(a,e){c.showLoadingOverlay("loadTemplateData()");var o={action:"ct_get_template_data",template_id:CtBuilderAjax.postId,preview_post_id:e,preview_type:g.previewType,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:o,transformResponse:!1}).success(function(o,e,t,n){try{var r=JSON.parse(o);a(r)}catch(e){console.log(o),console.log(e),g.showErrorModal(0,"Failed to load template data",e)}c.hideLoadingOverlay("loadTemplateData()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("loadTemplateData()")}).then(null,function(e){g.showErrorModal(e.status,"Failed to load template data",e.statusText,e.config.url)})},g.loadPostData=function(a,s,i){if(g.postsData[s])a(g.postsData[s],i);else{c.showLoadingOverlay("loadPostData()");var e={action:"ct_get_post_data",id:s,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce,preview_post_id:g.template.postData.ID};h({url:CtBuilderAjax.ajaxUrl,method:"POST",params:e,transformResponse:!1}).success(function(o,e,t,n){try{var r=JSON.parse(o);a(r,i),g.postsData[s]=r}catch(e){console.log(o),console.log(e),g.showErrorModal(0,"Failed to load post data. ID: "+s,e)}c.hideLoadingOverlay("loadPostData()")}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay("loadPostData()")}).then(null,function(e){g.showErrorModal(e.status,"Failed to load post data. ID: "+s,e.statusText,e.config.url)})}},g.execCode=function(e,r,a){var o=g.getAJAXRequestURL(),t={code:g.b64EncodeUnicode(e),query:CtBuilderAjax.query};t=JSON.stringify(t),h({method:"POST",transformResponse:!1,url:o,params:{action:"ct_exec_code",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce},data:t}).success(function(e,o,t,n){0===e.trim().length&&(e=""),-1<e.indexOf("<html")&&(e=jQuery("<div>").append(e).find(".ct-code-block").html()),(e=jQuery("<div>").append(e)).find("script").remove(),e=e.html(),a(e,r)}).error(function(e,o,t,n){console.log(e,o)})},g.getStuffFromSource=function(r,e){void 0===e&&setTimeout(function(){angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).addClass("oxygen-small-progress")},100);var o={action:"ct_new_style_api_call",call_type:"get_stuff_from_source",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};if(0===parseInt(e))return angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress"),!1;null!=e&&(o.next=e),h({method:"GET",transformResponse:!1,url:CtBuilderAjax.ajaxUrl,params:o}).success(function(e,o,t,n){r(e)}).error(function(e,o,t,n){console.log(e,o)})},g.getComponentsListFromSource=function(i,l,c){setTimeout(function(){angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).addClass("oxygen-small-progress")},200),h({method:"GET",transformResponse:!1,url:CtBuilderAjax.ajaxUrl,params:{action:"ct_new_style_api_call",call_type:"get_items_from_source",name:l,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce}}).success(function(e,o,t,n){var r=!1;if(e&&""!=e.trim()||(r=!0),r||(e=JSON.parse(e)),r||!e.components)return g.showErrorModal(0,"Items not loaded. "+(e.error?e.error:"Try again!")),void angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress");if(angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress"),delete g.experimental_components[l].fresh,g.experimental_components[l].items={},_.each(e.components,function(e){var o=e.category;o&&(g.experimental_components[l].items[o]=g.experimental_components[l].items[o]||{},g.experimental_components[l].items[o].slug=btoa(o).replace(/=/g,""),g.experimental_components[l].items[o].contents=g.experimental_components[l].items[o].contents||[],g.experimental_components[l].items[o].contents.push(e))}),CtBuilderAjax.freeVersion&&_.each(g.experimental_components[l].items,function(e,o){var t=Math.round(e.contents.length/10);t<1?t=1:4<t&&(t=4);for(var n=0;n<e.contents.length;n++)e.contents[n].firstFew=n<t?1:0}),g.experimental_components[l].pages=g.experimental_components[l].pages||[],g.experimental_components[l].templates=g.experimental_components[l].templates||[],_.each(e.pages,function(e){"ct_template"===e.type?g.experimental_components[l].templates.push(e):g.experimental_components[l].pages.push(e)}),CtBuilderAjax.freeVersion){var a=Math.round(g.experimental_components[l].pages.length/10);a<1?a=1:4<a&&(a=4);for(var s=0;s<g.experimental_components[l].pages.length;s++)g.experimental_components[l].pages[s].firstFew=s<a?1:0;(a=Math.round(g.experimental_components[l].templates.length/10))<1?a=1:4<a&&(a=4);for(s=0;s<g.experimental_components[l].templates.length;s++)g.experimental_components[l].templates[s].firstFew=s<a?1:0}c(i),angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress")}).error(function(e,o,t,n){console.log(e,o),angular.element(".oxygen-sidebar-breadcrumb",window.parent.document).removeClass("oxygen-small-progress")})},g.getPageFromSource=function(e,r,a,s){c.showLoadingOverlay("getPageFromSource()"),h({method:"GET",transformResponse:!1,url:CtBuilderAjax.ajaxUrl,params:{action:"ct_new_style_api_call",nonce:CtBuilderAjax.nonce,call_type:"get_page_from_source",id:e,post_id:CtBuilderAjax.postId,source:btoa(r)}}).success(function(e,o,t,n){s(e,r,a),c.hideLoadingOverlay()}).error(function(e,o,t,n){c.hideLoadingOverlay(),console.log(e,o)})},g.getComponentFromSource=function(e,r,a,o,s){c.showLoadingOverlay("getComponentFromSource()"),h({method:"GET",transformResponse:!1,url:CtBuilderAjax.ajaxUrl,params:{action:"ct_new_style_api_call",nonce:CtBuilderAjax.nonce,post_id:CtBuilderAjax.postId,call_type:"get_component_from_source",id:e,page:o,source:btoa(r)}}).success(function(e,o,t,n){c.hideLoadingOverlay(),s(e,!1,r,a)}).error(function(e,o,t,n){c.hideLoadingOverlay(),console.log(e,o)})},g.getSoundCloudTrackID=function(e){c.showLoadingOverlay("getSoundCloudTrackID()");var o=CtBuilderAjax.ajaxUrl,t={action:"oxy_get_soundcloud_track_id",soundcloud_url:e,post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};h({method:"POST",url:o,params:t}).success(function(e,o,t,n){e?g.setOptionModel("soundcloud_track_id",e):g.showErrorModal(0,"Error retrieving SoundCloud Track ID. Please check the URL you specified"),c.hideLoadingOverlay()}).error(function(e,o,t,n){console.log(e,o),c.hideLoadingOverlay()})},g.getAJAXRequestURL=function(){var e=CtBuilderAjax.permalink;return CtBuilderAjax.oxyTemplate&&(e=g.template.postData&&g.template.postData.permalink?g.template.postData.permalink:CtBuilderAjax.ajaxUrl),e}}]);
CTFrontendBuilder.controller("ControllerHeader",["$scope","$timeout",function(t,e){t.emptyHeaderRowComponent=[],t.checkEmptyHeaderRow=function(e){if(t.emptyHeaderRowComponent[e]=!1,t.findComponentItem(t.componentsTree.children,e,t.checkEmptyHeaderRowCallback),!t.emptyHeaderRowComponent[e])return"oxy-header-row-empty"},t.checkEmptyHeaderRowCallback=function(e,n,o){angular.forEach(n.children,function(e){e.children&&(t.emptyHeaderRowComponent[n.id]=!0)})},t.isLastRow=function(e){void 0===e&&(e=t.component.active.id);var n=t.getComponentById(e);return!!jQuery(n).hasClass("oxy-header-row")&&0===jQuery(n).siblings(".oxy-header-row").length},t.isBuiltIn=function(e){if(void 0===e&&(e=t.component.active.id),t.component.options[e].original&&"true"==t.component.options[e].original.oxy_builtin)return!0},t.isTemplateInnerContent=function(e){if(e&&"ct_inner_content"==e.name&&1e5<=e.id)return!0}}]);
CTFrontendBuilder.controller("ControllerClasses",["$scope","$parentScope","$timeout",function(i,t,s){i.currentClass=!1,i.activeSelectors={},i.componentsClasses=[],i.classes={},i.newcomponentclass={name:""},i.updateTreeComponentClasses=function(e,o,n){n?(index=o.options.classes.indexOf(n),-1<index&&o.options.classes.splice(index,1)):(o.options.classes||(o.options.classes=[]),o.options.classes.push(i.currentClass))},i.setCurrentClass=function(e,o){i.log&&console.log("setCurrentClass()",e),i.switchState("original"),!1!==(i.currentClass=e)&&(i.activeSelectors=i.activeSelectors||{},i.activeSelectors[i.component.active.id]=e),i.showClasses=!1,o||(i.applyModelOptions(),i.outputCSSOptions(i.component.active.id),t.checkTabs())},i.removeComponentClass=function(e,o){if(i.log&&console.log("removeComponentClass()",e,o),i.switchEditToId(),void 0===o&&(o=i.component.active.id),i.componentsClasses[o]?key=i.componentsClasses[o].indexOf(e):key=-1,-1<key){i.componentsClasses[o].splice(key,1);var n=e}i.activeSelectors[o]===e&&(i.activeSelectors[o]=!1,i.switchEditToId()),i.findComponentItem(i.componentsTree.children,o,i.updateTreeComponentClasses,n),i.unsavedChanges();var s=iframeScope.getComponentById(o).closest(".oxy-dynamic-list");0<s.length&&iframeScope.dynamicListAction(s.attr("ng-attr-component-id"),o)},i.tryAddClassToComponent=function(e){i.cancelDeleteUndo();var o=i.newcomponentclass.name;if(void 0!==o&&""!==o.trim()||(o=prompt("Class name:")),null!=o){if(!i.validateClassName(o))return alert("Wrong selector name. Name must begin with an underscore (_), a hyphen (-), or a letter(a–z), followed by any number of hyphens, underscores or letters."),!1;i.addClassToComponent(e,o),i.newcomponentclass.name="";var n=iframeScope.getComponentById(e).closest(".oxy-dynamic-list");0<n.length&&iframeScope.dynamicListAction(n.attr("ng-attr-component-id"),e)}},i.processClassNameInput=function(e,o){if(13===e.keyCode){i.tryAddClassToComponent(o);var n=s(function(){jQuery(".oxygen-select",t.oxygenUIElement).trigger("click"),s.cancel(n)},0,!1)}},i.onSelectorDropdown=function(){t.ctSelectBoxFocus=!0},i.isNotSelectedYet=function(e){return(!i.activeSelectors||void 0===i.activeSelectors[e])&&!!(i.justaddedcomponents&&-1<i.justaddedcomponents.indexOf(e))},i.addClassToComponent=function(e,o,n){i.log&&console.log("addClassToComponent()",e,o),void 0===n&&(n=!0),i.componentsClasses[e]?key=i.componentsClasses[e].indexOf(o):(i.componentsClasses[e]=[],key=-1);var s=!1;if(i.classes[o]||(i.classes[o]={},i.classes[o].original={},s=!0),-1<key)return n&&i.setCurrentClass(o),!1;i.componentsClasses[e].push(o),n&&i.setCurrentClass(o),s&&e==i.component.active.id&&t.isActiveName("ct_div_block")&&t.isActiveParentName("ct_new_columns")&&i.setOptionModel("width-unit","%",e,"ct_div_block"),i.findComponentItem(i.componentsTree.children,e,i.updateTreeComponentClasses),i.unsavedChanges()},i.addClassToComponentSafe=function(e,o){i.currentClass=o,i.addClassToComponent(e,o,!1),i.currentClass=!1},i.isComponentHasClass=function(e,o){return!!i.componentsClasses[e]&&(key=i.componentsClasses[e].indexOf(o),-1<key)},i.tryDeleteClass=function(e){if(i.cancelDeleteUndo(),!confirm('Delete "'+e+'" from install? (Changes will take effect on Save)'))return!1;i.deleteClass(e)},i.deleteClass=function(s){i.log&&console.log("deleteClass()",s),delete i.classes[s],i.selectorToEdit=!1,i.currentClass=!1,angular.forEach(i.componentsClasses,function(e,o){var n=e.indexOf(s);-1<n&&(e.splice(n,1),i.findComponentItem(i.componentsTree.children,o,i.updateTreeComponentClasses,s))}),-1==i.component.active.id&&i.activateComponent(0,"root"),delete i.cache.classStyles[i.currentClass],i.outputCSSOptions(),i.unsavedChanges()},i.getGlobalConditionsClass=function(e){var o=iframeScope.component.options[e].model.globalConditionsResult;return!1===o&&void 0!==o?" ct_hidden_by_conditional_logic":""},i.getComponentsClasses=function(e,o){var n="ct-component "+o,s=iframeScope.component.options[e].model.conditionsresult;if(1!==s&&void 0!==s&&(n+=" ct_hidden_by_conditional_logic"),n+=i.getGlobalConditionsClass(e),"ct_section"!=o&&"ct_columns"!=o&&"ct_column"!=o&&(n+=" "+o.replace(new RegExp("_","g"),"-")),i.componentsClasses[e]){var t=angular.copy(i.componentsClasses[e]);for(var a in t)if(t.hasOwnProperty(a)){var l=t[a];l&&0<l.indexOf("-tab-active")&&0===l.indexOf("tabs")&&(t[a]=null),l&&0<l.indexOf("-expanded")&&0===l.indexOf("toggle-")&&(t[a]=null)}n+=" "+t.join(" ")}return"ct_svg_icon"==o&&(n+=" ct-"+i.component.options[e].model["icon-id"]),"ct_link"!=o&&"ct_link_text"!=o&&"ct_link_button"!=o||(n+=" ct-links"),"ct_section"==o&&i.component.options[e].model.video_background&&(n+=" oxy-video-background"),"oxy_header"==o&&"yes"==i.component.options[e].model.sticky_header&&(n+=" oxy-sticky-header"),"oxy_header"==o&&i.component.options[e].model["overlay-header-above"]&&"never"!=i.component.options[e].model["overlay-header-above"]&&(n+=" oxy-overlay-header"),"oxy_header_row"==o&&"yes"==i.component.options[e].model.hide_in_sticky&&(n+=" oxygen-hide-in-sticky"),"oxy_header_row"==o&&"yes"==i.component.options[e].model.show_in_sticky_only&&(n+=" oxygen-show-in-sticky-only"),"oxy_header_row"==o&&"only_show_in_overlay"==i.component.options[e].model.overlay_display&&(n+=" oxygen-only-show-in-overlay"),"oxy_header_row"==o&&"hide_in_overlay"==i.component.options[e].model.overlay_display&&(n+=" oxygen-hide-in-overlay"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.dropdowns&&(n+=" oxy-nav-menu-dropdowns"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.menu_dropdown_arrow&&(n+=" oxy-nav-menu-dropdown-arrow"),"oxy_nav_menu"==o&&"on"==i.component.options[e].model.menu_responsive_dropdowns&&(n+=" oxy-nav-menu-responsive-dropdowns"),"oxy_nav_menu"==o&&"column"==i.component.options[e].model["menu_flex-direction"]&&(n+=" oxy-nav-menu-vertical"),"oxy_gallery"==o&&("masonry"==i.component.options[e].model.layout?n+=" oxy-gallery-masonry":n+=" oxy-gallery-flex","yes"==i.component.options[e].model.gallery_captions&&(n+=" oxy-gallery-captions")),"true"==i.component.options[e].model.dont_render&&(n+=" oxy-placeholder-element"),"oxy_testimonial"==o&&("vertical"==i.component.options[e].model.testimonial_layout?n+=" oxy-testimonial-vertical":n+=" oxy-testimonial-horizontal"),"oxy_superbox"==o&&"live"!=i.component.options[e].model.superbox_editing_mode&&(n+=" oxy-superbox-editing-"+i.component.options[e].model.superbox_editing_mode),n},i.addClass=function(e){return!i.classes[e]&&(i.classes[e]={},i.classes[e].original={},!0)},i.validateClassName=function(e){return/^[a-z_-][a-z\d_-]*$/i.test(e)},i.checkComponentClasses=function(e){if(0===e||"0"===e)return!1;var o=i.activeSelectors[e];if(o&&void 0===i.classes[o]&&(i.activeSelectors[e]=!1),i.componentsClasses[e]){var n=angular.copy(i.componentsClasses[e]);for(var s in n)if(n.hasOwnProperty(s)){var t=n[s];void 0===i.classes[t]&&i.removeComponentClass(t,e)}}}}]);
CTFrontendBuilder.controller("ControllerOptions",["$scope","$parentScope","$timeout",function(b,_,y){b.changesToApply=[],b.optionsHierarchy={background:{color:["background-color"],image:["background","background-image","overlay-color","video_background","video_background_overlay","background-blend-mode"],size:["background-size","background-repeat","background-attachment","background-position-left","background-position-top","background-size-width","background-size-height","background-clip"]},position:{margin_padding:["container-padding-top","container-padding-right","container-padding-bottom","container-padding-left","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left","container-padding-top-unit","container-padding-right-unit","container-padding-bottom-unit","container-padding-left-unit","padding-top-unit","padding-right-unit","padding-bottom-unit","padding-left-unit","margin-top-unit","margin-right-unit","margin-bottom-unit","margin-left-unit"],size:["width","min-width","max-width","height","min-height","max-height","section-width","header-width","header-row-width","width-unit","min-width-unit","max-width-unit","height-unit","min-height-unit","max-height-unit"]},layout:{position:["display","float","visibility","z-index","clear","overflow","position","top","right","bottom","left","flex-direction","align-items","justify-content","flex-wrap","flex-reverse","align-content","order"]},typography:{typography:["font-family","font-size","font-weight","color","text-align","line-height","letter-spacing","text-decoration","font-style","text-transform","-webkit-font-smoothing"]},borders:{border:["border-top-color","border-top-style","border-top-width","border-right-color","border-right-style","border-right-width","border-bottom-color","border-bottom-style","border-bottom-width","border-left-color","border-left-style","border-left-width"],radius:["border-top-left-radius","border-top-right-radius","border-bottom-left-radius","border-bottom-right-radius","border-radius"]},effects:{opacity:["opacity"],transform:["transform"],transition:["transition-duration","transition-duration-unit","transition-timing-function","transition-delay","transition-delay-unit","transition-property"],"box-shadow":["box-shadow-inset","box-shadow-color","box-shadow-horizontal-offset","box-shadow-vertical-offset","box-shadow-blur","box-shadow-spread"],"text-shadow":["text-shadow-color","text-shadow-horizontal-offset","text-shadow-vertical-offset","text-shadow-blur"],"css-filter":["filter","filter-amount-blur","filter-amount-brightness","filter-amount-contrast","filter-amount-grayscale","filter-amount-hue-rotate","filter-amount-invert","filter-amount-saturate","filter-amount-sepia"],"animation-on-scroll":["aos-enable","aos-type","aos-easing","aos-duration","aos-offset","aos-delay","aos-anchor","aos-anchor-placement","aos-once"]},cssjs:{css:["custom-css"],js:["custom-js"]},"code-php":["code-php"],"code-css":["code-css"],"code-js":["code-js"]},b.builtinComponents={},b.lastSetEasyPostsTemplate=[],b.addNewColor=function(o,t,e){if(b.log&&console.log("addNewColor()",o,t,e),CtBuilderAjax.freeVersion)return _.hideAddNewColorDialog(),_.showDialogWindow(),void(_.dialogForms.showProGlobalColorEditDialog=!0);if("latest"==e&&(e=_.addNewColorDialogValue),void 0===e||""==e)return b.showErrorModal(0,"Color value is not defined"),_.hideAddNewColorDialog(),!1;if(void 0===o||""==o)return b.showErrorModal(0,"Color name is not defined"),_.hideAddNewColorDialog(),!1;var n=b.getGlobalColorSet(t);if(b.getGlobalColorbyName(o,n.name))return b.showErrorModal(0,"'"+o+"' already exist in '"+n.name+"' set"),_.newGlobalSettingsColorName="",_.hideAddNewColorDialog(),!1;void 0!==t&&""!==t||(t=0),b.globalColorSets.colorsIncrement++,b.globalColorSets.colors.push({id:b.globalColorSets.colorsIncrement,name:o,value:e,set:t}),b.parentScope.setGlobalColor(b.globalColorSets.colorsIncrement),_.hideAddNewColorDialog(),_.newGlobalColorName="",_.newGlobalColorValue="",_.newGlobalSettingsColorName="",_.showAddGlobalColorPanel=!1},b.addNewColorSet=function(o){return b.log&&console.log("addNewColorSet()",o),CtBuilderAjax.freeVersion?(_.showDialogWindow(),void(_.dialogForms.showProGlobalColorEditDialog=!0)):null==o||""==o?(b.showErrorModal(0,"Color Set name is not defined"),!1):b.getGlobalColorSetbyName(o)?(b.showErrorModal(0,"'"+o+"' name is already taken"),!1):(b.globalColorSets.setsIncrement++,b.globalColorSets.sets.push({id:b.globalColorSets.setsIncrement,name:o}),_.newGlobalColorSetName="",void(_.addGlobalColorSetPanel=!1))},b.isGlobalColorValue=function(o){return 0===o.indexOf("color(")},b.getGlobalColorID=function(o){if(b.log&&console.log("getGlobalColorID()",o),!o||"string"!=typeof o)return!1;if(0!==o.indexOf("color("))return!1;var t=/\(([^)]+)\)/.exec(o);return null!=t&&t[1]},b.getGlobalColorValue=function(o){b.log&&console.log("getGlobalColorValue()",o);var t=b.getGlobalColorID(o);if(!1===t)return o;var e=b.globalColorSets.colors.find(function(o){return o.id==t});return void 0===e||void 0===e.value?o:e.value},b.getGlobalColorNiceName=function(o){b.log&&console.log("getGlobalColorValue()",o);var t=b.getGlobalColorID(o);if(!1===t)return!1;var e=b.globalColorSets.colors.find(function(o){return o.id==t});if(void 0===e||void 0===e.value)return!1;var n=b.getGlobalColorSet(e.set);return void 0!==n&&void 0!==n.name&&n.name+" - "+e.name},b.getGlobalColor=function(t){return b.log&&console.log("getGlobalColor()",t),b.globalColorSets.colors.find(function(o){return o.id==t})},b.getGlobalColorbyName=function(t,o){b.log&&console.log("getGlobalColorbyName()",t,o);var e=b.getGlobalColorSetbyName(o);return b.globalColorSets.colors.find(function(o){return o.name==t&&o.set==e.id})},b.getGlobalColorSet=function(t){return b.log&&console.log("getGlobalColorSet()",t,b.globalColorSets.sets),b.globalColorSets.sets.find(function(o){return o.id==t})},b.getGlobalColorSetbyName=function(t){return b.log&&console.log("getGlobalColorSet()",t,b.globalColorSets.sets),b.globalColorSets.sets.find(function(o){return o.name==t})},b.deleteGlobalColorSet=function(t,o){if(!confirm("Are you sure to delete this set?"))return!1;var e=b.globalColorSets.sets.findIndex(function(o){return o.id==t});for(var e in b.globalColorSets.sets.splice(e,1),b.globalColorSets.colors){if(b.globalColorSets.colors.hasOwnProperty(e))b.globalColorSets.colors[e].set===t&&(b.globalColorSets.colors[e]=null)}b.globalColorSets.colors=b.globalColorSets.colors.filter(function(o){return null!==o}),!0===o&&(_.toggleSettingsPanel(!0),_.switchTab("settings","colors")),b.unsavedChanges()},b.deleteGlobalColor=function(t,o){var e=b.globalColorSets.colors.findIndex(function(o){return o.id==t});b.globalColorSets.colors.splice(e,1),b.unsavedChanges()},b.globalColorSetHasColors=function(t){return b.globalColorSets.colors.find(function(o){return o.set==t})},b.replaceGlobalColors=function(o){return void 0===o?o:o.replace(/color\(\d+\)/g,function(o){return b.getGlobalColorValue(o)})},b.updateTreeComponentOptions=function(o,t,e){b.log&&console.log("updateTreeComponentOptions()",o,t,e);var n=b.defaultOptions[t.name];b.currentState;n.ct_content&&(t.options.ct_content=n.ct_content)},b.updateTreeComponentOption=function(o,t,e){b.log&&console.log("updateTreeComponentOption()",o,t,e);var n=b.defaultOptions[t.name],i=b.currentState,s=e.optionName,r="";if(-1===b.optionsWhiteList.indexOf(s)&&-1===b.optionsWhiteListNoMedia.indexOf(s)&&(i="original"),0<=e.optionName.indexOf("fake_")&&0<=e.optionName.indexOf("hover_")&&(i="hover",s=s.replace("fake_","")),r="selector"==s?b.component.options[e.id][s]:!b.isEditing("id")||b.isEditing("state")||b.isEditing("media")?b.component.options[e.id].model[s]:b.component.options[e.id].id[s],0<=e.optionName.indexOf("fake_")&&0<=e.optionName.indexOf("hover_")&&(s=s.replace("hover_","")),"ct_column"==e.tag&&"width"==s)return t.options[i]||(t.options[i]={}),t.options[i][s]=r,b.component.options[e.id][i][s]=r,!0;if(b.isEditing("class")&&(0<=b.optionsWhiteList.indexOf(s)||0<=b.optionsWhiteListNoMedia.indexOf(s)||"icon-style"==s||"button-style"==s||"gradient"==s))b.classes[b.currentClass]&&(b.cache.classStyles[b.currentClass]="","icon-style"==s||"button-style"==s?b.classes[b.currentClass].original[s]=r:"selector"==s||"ct_id"==s||"ct_parent"==s||"ct_content"==s||"classes"==s||"url"==s&&e.isShortcode||(!b.isEditing("media")||0<=b.optionsWhiteListNoMedia.indexOf(s)?(b.classes[b.currentClass][i]||(b.classes[b.currentClass][i]={}),""==r?delete b.classes[b.currentClass][i][s]:b.classes[b.currentClass][i][s]=angular.copy(r)):(b.classes[b.currentClass].media||(b.classes[b.currentClass].media={}),b.classes[b.currentClass].media[b.currentMedia]||(b.classes[b.currentClass].media[b.currentMedia]={}),b.classes[b.currentClass].media[b.currentMedia][i]||(b.classes[b.currentClass].media[b.currentMedia][i]={}),""==r?delete b.classes[b.currentClass].media[b.currentMedia][i][s]:b.classes[b.currentClass].media[b.currentMedia][i][s]=r)));else if(b.isEditing("media")&&0<=b.optionsWhiteList.indexOf(s)&&"selector"!=s&&"ct_id"!=s&&"ct_parent"!=s)b.setMediaParameter(e.id,s,r,i),t.options.media||(t.options.media={}),t.options.media[b.currentMedia]||(t.options.media[b.currentMedia]={}),t.options.media[b.currentMedia][i]||(t.options.media[b.currentMedia][i]={}),""==r||null==r?(delete t.options.media[b.currentMedia][i][s],delete b.component.options[e.id].media[b.currentMedia][i][s],b.isObjectEmpty(t.options.media[b.currentMedia][i])&&delete t.options.media[b.currentMedia][i],b.isObjectEmpty(t.options.media[b.currentMedia])&&delete t.options.media[b.currentMedia],b.isObjectEmpty(t.options.media)&&delete t.options.media):t.options.media[b.currentMedia][i][s]=r;else if(b.component.options[e.id][i]||(b.component.options[e.id][i]={}),t.options[i]||(t.options[i]={}),-1<b.allowedEmptyOptions.indexOf(s)&&"original"==i?b.component.options[e.id][i][s]=r:void 0===r&&"original"==i?b.component.options[e.id][i][s]=n[s]:""===r?delete b.component.options[e.id][i][s]:b.component.options[e.id][i][s]=r,0<s.indexOf("-unit")){var a=s.replace("-unit","");b.component.options[e.id][i][s]!=n[s]||b.component.options[e.id][i][a]!=n[a]||b.component.options[e.id].id[a]?b.component.options[e.id][i][s]==n[s]?delete t.options[i][s]:(t.options[i][s]=r,t.options[i][a]=b.component.options[e.id][i][a]):(delete t.options[i][s],delete t.options[i][a])}else if(void 0!==n[s+"-unit"]&&n[s+"-unit"]!==b.component.options[e.id][i][s+"-unit"])""!=r&&null!=r?t.options[i][s]=r:(delete t.options[i][s],delete b.component.options[e.id][i][s],"original"==i&&(b.component.options[e.id][i][s]=n[s]));else if("ct_content"==s){var l=b.getComponentById(e.id),c=!1;if(l&&(c=l.attr("contenteditable")),c){var d=angular.element("<span>"+r+"</span>"),p=!1;angular.forEach(d.find("*"),function(o){var t=angular.element(o),e=t.attr("ng-attr-component-id");e&&(t.replaceWith('<span id="ct-placeholder-'+e+'"></span>'),p=!0)}),t.options[s]=p?d.prop("innerHTML"):r}else t.options[s]=r}else"selector"==s||"ct_id"==s||"ct_parent"==s||"classes"==s||"url"==s&&e.isShortcode?t.options[s]=r:i&&(""!==r&&void 0!==r||-1!==b.allowedEmptyOptions.indexOf(s)?t.options[i][s]=r:delete t.options[i][s])},b.updateTreeComponentTag=function(o,t,e){t.name=e,b.component.active.id==o&&(b.component.active.name=e),b.component.options[o].nicename&&""!==b.component.options[o].nicename.trim()&&(b.component.options[t.id].nicename=b.calcDefaultComponentTitle(t));var n=y(function(){b.rebuildDOM(o),b.updateDOMTreeNavigator(o),y.cancel(n)},0,!1)},b.applyComponentDefaultOptions=function(o,t,e){for(var n in b.log&&console.log("applyComponentDefaultOptions()",o,t),b.component.options[o]||(b.component.options[o]={}),b.component.options[o].original||(b.component.options[o].original={}),b.component.options[o].id||(b.component.options[o].id={}),b.defaultOptions[t])if(b.defaultOptions[t].hasOwnProperty(n)){var i=b.defaultOptions[t][n];b.component.options[o].original[n]=i,("font-family"==n||-1<n.indexOf("font-family"))&&b.loadWebFont(i)}b.component.options[o].selector||(b.component.options[o].selector=t.slice(3)+"-"+o+"-"+CtBuilderAjax.postId),b.component.options[o].name||(b.component.options[o].name=t),e&&e.options&&e.options.ct_category&&(b.component.options[o].ct_category=e.options.ct_category),b.component.options[o].model=angular.copy(b.component.options[o].original)},b.applyComponentSavedOptions=function(o,t){for(var e in b.log&&console.log("applyComponentSavedOptions()",o,t),b.checkGlobalFont(t.options),t.options)if(t.options.hasOwnProperty(e)){var n=t.options[e];if("object"==typeof n&&"classes"!=e){for(var i in b.component.options[o][e]||(b.component.options[o][e]={}),n)if(n.hasOwnProperty(i)){var s=n[i];"original"==e&&(b.component.options[o].id[i]=s),b.component.options[o][e][i]=s,b.log,("font-family"==i||-1<i.indexOf("font-family"))&&b.loadWebFont(s)}}else"object"!=typeof n&&("selector"==e?b.component.options[o][e]=n:b.component.options[o].original[e]=n)}b.component.options[o].model=angular.copy(b.component.options[o].original),t.options.oxy_builtin&&(b.builtinComponents[o]=!0)},b.applyModelOptions=function(o,t){if(void 0===o&&(o=b.component.active.id),void 0===t&&(t=b.component.active.name),b.log&&console.log("applyModelOptions()",o,t),0!==o&&"0"!==o){if(b.component.options[o]||(b.component.options[o]=[]),b.component.options[o].model={},angular.extend(b.component.options[o].model,b.component.options[o].original),b.isEditing("id")&&(b.isEditing("media")?(b.component.options[o].model={},b.component.options[o].media&&b.component.options[o].media[b.currentMedia]&&(b.component.options[o].model=angular.copy(b.component.options[o].media[b.currentMedia][b.currentState]||{}))):b.isEditing("state")&&(b.component.options[o].model=angular.copy(b.component.options[o][b.currentState]||{}))),b.isEditing("class")&&"object"==typeof b.classes[b.currentClass])if(b.component.options[o].model=angular.copy(b.classes[b.currentClass].original||{}),b.isEditing("media"))for(var e in b.component.options[o].model={},b.classes[b.currentClass].media&&b.classes[b.currentClass].media[b.currentMedia]&&(b.component.options[o].model=angular.copy(b.classes[b.currentClass].media[b.currentMedia][b.currentState]||{})),b.classes[b.currentClass][b.currentState])b.classes[b.currentClass][b.currentState].hasOwnProperty(e)&&-1<b.optionsWhiteListNoMedia.indexOf(e)&&(b.component.options[o].model[e]=b.classes[b.currentClass][b.currentState][e]);else b.component.options[o].model={},b.classes[b.currentClass]&&b.classes[b.currentClass][b.currentState]&&(b.component.options[o].model=angular.copy(b.classes[b.currentClass][b.currentState]||{}));for(var n in b.isEditing("custom-selector")&&!b.isEditing("class")&&b.customSelectors[b.selectorToEdit]&&(b.isEditing("media")?(b.component.options[o].model={},b.customSelectors[b.selectorToEdit].media&&b.customSelectors[b.selectorToEdit].media[b.currentMedia]&&(b.component.options[o].model=angular.copy(b.customSelectors[b.selectorToEdit].media[b.currentMedia][b.currentState]||{}))):(b.component.options[o].model={},b.customSelectors[b.selectorToEdit]&&b.customSelectors[b.selectorToEdit][b.currentState]&&(b.component.options[o].model=angular.copy(b.customSelectors[b.selectorToEdit][b.currentState]||{})))),b.component.options[o].model)(b.component.options[o].model.hasOwnProperty(n)&&"font-family"==n||-1<n.indexOf("font-family"))&&b.loadWebFont(b.component.options[o].model[n]);for(var n in b.component.options[o].model)b.component.options[o].model.hasOwnProperty(n)&&b.component.options[o].model[n+"-unit"]&&(!b.isEditing("id")||b.isEditing("media")||b.isEditing("state")||b.component.options[o].model[n+"-unit"]==b.defaultOptions[t][n+"-unit"]||b.component.options[o].id[n]||delete b.component.options[o].model[n]);if(!b.isEditing("custom-selector"))for(var e in b.component.options[o].original)b.component.options[o].original.hasOwnProperty(e)&&-1===b.optionsWhiteList.indexOf(e)&&(!b.isEditing("class")||"icon-style"!=e&&"button-style"!=e&&"gradient"!=e?b.isEditing("class")&&-1<b.optionsWhiteListNoMedia.indexOf(e)||(b.component.options[o].model[e]=b.component.options[o].original[e]):b.component.options[o].model[e]=angular.copy(b.classes[b.currentClass].original[e]));if("ct_section"==t)for(var i in sectionOptions=["container-padding-top","container-padding-top-unit","container-padding-bottom","container-padding-bottom-unit","container-padding-left","container-padding-left-unit","container-padding-right","container-padding-right-unit"],sectionOptions)sectionOptions.hasOwnProperty(i)&&(e=sectionOptions[i],null!=b.component.options[o].model[e]&&""!=b.component.options[o].model[e]||(b.component.options[o].model[e]=b.globalSettings.sections[e]))}},b.setOption=function(e,t,o,n,i){(b.cancelDeleteUndo(),b.log&&(console.log("setOption() '"+o+"' for '"+t+"' id:"+e+" tag to '"+b.component.options[e].model[o]+"'"),b.functionStart("setOption()")),null==b.component.options[e].model[o]&&(b.component.options[e].model[o]=""),b.adjustResizeBox(),_.disableSelectorDetectorMode&&_.disableSelectorDetectorMode(),o&&0===o.indexOf("aos-")&&"aos-enable"!==o&&"aos-type"!==o)&&(s=b.getComponentById(e)).attr("data-"+o,b.component.options[e].model[o]);if("aos-type"==o){var s=b.getComponentById(e),r=b.getOption("aos-type",e)||b.pageSettingsMeta.aos.type||b.pageSettings.aos.type||b.globalSettings.aos.type;r?s.attr("data-aos",r):s.removeAttr("data-aos")}if(!b.isEditing("id")||b.isEditing("media")||b.isEditing("state")||(void 0!==b.component.options[e].model[o]?(b.component.options[e].id||(b.component.options[e].id={}),b.component.options[e].id[o]=angular.copy(b.component.options[e].model[o])):""==b.component.options[e].model[o]&&(-1===b.allowedEmptyOptions.indexOf(o)?(delete b.component.options[e].id[o],b.component.options[e].model[o+"-unit"]?b.component.options[e].model[o+"-unit"]==b.defaultOptions[t][o+"-unit"]&&(b.component.options[e].model[o]=b.defaultOptions[t][o],b.component.options[e].original[o]=b.defaultOptions[t][o]):"ct_content"!=o&&(b.component.options[e].model[o]=b.defaultOptions[t][o],b.component.options[e].original[o]=b.defaultOptions[t][o])):(b.component.options[e].id||(b.component.options[e].id={}),b.component.options[e].id[o]=b.component.options[e].model[o]))),b.isEditing("class")&&""==b.currentClass)return alert("Please choose the class from the list or set a new one."),b.functionEnd("setOption()"),!1;if("ct_column"==t&&"width"==o&&(100<b.component.options[e].model[o]&&(b.component.options[e].model[o]=100),b.component.options[e].model[o]<0&&(b.component.options[e].model[o]=0)),o&&"custom-css"==o){var a=b.component.options[e].model[o],l=!0,c="";if(0<a.length&&(-1<a.indexOf("{")||-1<a.indexOf("}")?(l=!1,c="The Custom CSS field contains one or more curly braces. The CSS will not be saved until all curly braces are removed."):-1==a.indexOf(":")&&(l=!1,c="The Custom CSS field contains invalid CSS. The CSS will not be saved until this is corrected."),!l))return jQuery(".oxygen-code-error-container",_.oxygenUIElement).show().html(c),!1;jQuery(".oxygen-code-error-container",_.oxygenUIElement).hide().html("")}if(o&&-1<o.indexOf("border-all"))return b.setOptionModel(o.replace("all","top"),b.component.options[e].model[o]),b.setOptionModel(o.replace("all","right"),b.component.options[e].model[o]),b.setOptionModel(o.replace("all","bottom"),b.component.options[e].model[o]),b.setOptionModel(o.replace("all","left"),b.component.options[e].model[o]),void b.functionEnd("setOption()");if("flex-direction"==o&&("column"==b.component.options[e].model[o]||"row"==b.component.options[e].model[o]))var d=y(function(){b.setOptionModel("display","flex",e,t),y.cancel(d)},0,!1);if("display"==o&&"flex"!=b.component.options[e].model[o]&&b.setOptionModel("flex-direction","unset",e,t),0<=["container-padding-top","container-padding-bottom","container-padding-left","container-padding-right"].indexOf(o)&&""==b.component.options[e].model[o])d=y(function(){b.applyModelOptions(e,t),b.parentScope.safeApply(),y.cancel(d)},0,!1);if(-1<["layout","link","lightbox","image_aspect_ratio","images_per_row","space_around_image","image_min_width","gallery_captions","caption_color","caption_background_color","gallery_captions_only_hover","hide_captions_below","image_opacity_hover","image_opacity","transition_duration","gallery_thumbnail_size"].indexOf(o)&&"oxy_gallery"==t)d=y(function(){b.renderComponentWithAJAX("oxy_render_gallery"),y.cancel(d)},0,!1);if("selector"==o&&"oxy_tabs_contents"==t)d=y(function(){var o=jQuery(b.getComponentById(e)).data("oxy-tabs-wrapper"),t=jQuery("#"+o).attr("ng-attr-component-id");b.setOptionModel("tabs_contents_wrapper",b.component.options[e].selector,t,"oxy_tabs"),b.$apply(),y.cancel(d)},0,!1);if("selector"==o&&"oxy_tabs"==t)d=y(function(){var o=jQuery(b.getComponentById(e)).data("oxy-tabs-contents-wrapper"),t=jQuery("#"+o).attr("ng-attr-component-id");b.setOptionModel("tabs_wrapper",b.component.options[e].selector,t,"oxy_tabs_contents"),b.$apply(),y.cancel(d)},0,!1);if("dont_render"==o&&"ct_widget"==t)d=y(function(){b.renderWidget(e,!1),y.cancel(d)},0,!1);if("oxy_social_icons"==t&&o&&0<=b.socialIcons.networks.indexOf(o.replace("icon-",""))&&(""==b.component.options[e].model[o]||""!=b.component.options[e].model[o]&&""==b.component.options[e].original[o]))d=y(function(){b.rebuildDOM(e),y.cancel(d)},0,!1);if(-1<["progress_bar_animation_stripes","progress_bar_animate_width","progress_bar_animation_stripes_duration","progress_bar_animation_width_duration"].indexOf(o))d=y(function(){b.rebuildDOM(e),y.cancel(d)},0,!1);"soundcloud_url"==o&&b.getSoundCloudTrackID(b.component.options[e].model[o]),"hide_in_sticky"==o&&"yes"==b.component.options[e].model[o]&&"yes"==b.getOption("show_in_sticky_only",e)&&b.setOptionModel("show_in_sticky_only","",e,t),"show_in_sticky_only"==o&&"yes"==b.component.options[e].model[o]&&"yes"==b.getOption("hide_in_sticky",e)&&b.setOptionModel("hide_in_sticky","",e,t);var p={id:e,tag:t,optionName:o,isShortcode:n,isData:0===t.lastIndexOf("ct_data",0)};if(b.isEditing("custom-selector")){var m=p.optionName,u=b.component.options[p.id].model[m];if(!("selector"==m||"ct_id"==m||"ct_parent"==m||"ct_content"==m||"classes"==m||"url"==m&&p.isShortcode))return b.updateCustomSelectorValue(m,u),delete b.cache.classStyles[b.currentClass],b.outputCSSOptions(),b.unsavedChanges(),void b.functionEnd("setOption()")}else void 0!==o?(b.findComponentItem(b.componentsTree.children,e,b.updateTreeComponentOption,p),0<=o.indexOf("hover_")&&"oxy_posts_grid"!=t&&(p.optionName="fake_"+p.optionName,b.findComponentItem(b.componentsTree.children,e,b.updateTreeComponentOption,p))):b.findComponentItem(b.componentsTree.children,e,b.updateTreeComponentOptions,p);if(b.unsavedChanges(),void 0!==o&&0===o.indexOf("aos-")){if("undefined"!=typeof AOS)d=y(function(){AOS.refreshHard(),y.cancel(d)},0,!1)}else if("undefined"!=typeof AOS)d=y(function(){AOS.refresh(),y.cancel(d)},0,!1);if("aos-type"==o)var g=b.getComponentById(e),f=y(function(){g.css("transitionDuration","0s").removeClass("aos-animate"),y.cancel(f)},100,!1),h=y(function(){g.css("transitionDuration","").addClass("aos-animate"),y.cancel(h)},200,!1);if(n&&b.renderShortcode(e,t),p.isData&&b.renderDataComponent(e,t),"ct_content"==o||i)b.functionEnd("setOption()");else{if("ct_video"===t&&"src"===o)if(-1!==b.component.options[e].model[o].indexOf("[oxygen")){b.applyShortcodeResults(e,b.component.options[e].model[o],function(o){b.setOptionModel("embed_src",b.getYoutubeVimeoEmbedUrl(o.trim()),e,t)})}else b.setOptionModel("embed_src",b.getYoutubeVimeoEmbedUrl(b.component.options[e].model[o]),e,t);b.outputCSSOptions(e),b.isNotSelectedYet(e)&&void 0!==o&&b.switchEditToId(!0),b.functionEnd("setOption()")}},b.setOptionModel=function(o,t,e,n,i){void 0===e&&(e=b.component.active.id),void 0===n&&(n=b.component.active.name),b.classesCached=!1,b.log&&(console.log("setOptionModel()",o,t,e,n,i),b.functionStart("setOptionModel()")),-1<o.indexOf(".")?(2==(o=o.split(".")).length&&(b.component.options[e].model[o[0]][o[1]]=t),3==o.length&&(b.component.options[e].model[o[0]][o[1]][o[2]]=t)):(b.component.options[e].model[o]=t,b.setOption(e,n,o,!1,i)),b.functionEnd("setOptionModel()")},b.getOption=function(o,t){return void 0===t&&(t=b.component.active.id),-1<o.indexOf(".")?2==(o=o.split(".")).length&&b.component.options[t].model[o[0]]&&b.component.options[t].model[o[0]][o[1]]?b.component.options[t].model[o[0]][o[1]]:3==o.length&&b.component.options[t].model[o[0]]&&b.component.options[t].model[o[0]][o[1]]&&b.component.options[t].model[o[0]][o[1]][o[2]]?b.component.options[t].model[o[0]][o[1]][o[2]]:void 0:b.component.options[t].model&&void 0!==b.component.options[t].model[o]?b.component.options[t].model[o]:""},b.getCSSOptions=function(o,t,e,n){var i={};if(e)i=angular.copy(e);else{if(void 0===o)return{};void 0===t&&(t=b.currentState),b.component.options[o]&&(i=angular.copy(b.component.options[o][t]))}for(var s in i=i||{},b.log&&console.log("getCSSOptions()",o,t,i),i)if(i.hasOwnProperty(s)&&("ct_video"!=n||"padding-bottom"!=s))if(s.indexOf("-unit")<0){if(n||(n=o&&0<o?b.component.options[o].name:"all"),null==b.defaultOptions[n][s+"-unit"])continue;if("container-padding-top"==s||"container-padding-bottom"==s||"container-padding-left"==s||"container-padding-right"==s){var r=i[s+"-unit"]?i[s+"-unit"]:b.globalSettings.sections[s+"-unit"];i[s]&&(i[s]+=r)}else if("auto"==i[s+"-unit"])i[s]="auto";else{r=i[s+"-unit"]?i[s+"-unit"]:b.defaultOptions[n][s+"-unit"];i[s]&&(i[s]+=r)}delete i[s+"-unit"]}else"auto"==i[s]&&(i[s.replace("-unit","")]="auto");for(var s in i)i.hasOwnProperty(s)&&0<s.indexOf("-unit")&&delete i[s];if(i["background-position-top"]||i["background-position-left"]){var a=i["background-position-top"]||"0%",l=i["background-position-left"]||"0%";i["background-position"]=l,i["background-position"]+=" "+a}if(i["background-position-top"]=null,i["background-position-left"]=null,"manual"==i["background-size"]){var c=i["background-size-width"]||"auto",d=i["background-size-height"]||"auto";i["background-size"]=c,i["background-size"]+=" "+d}for(var s in i["background-size-width"]=null,i["background-size-height"]=null,i)i.hasOwnProperty(s)&&-1<s.indexOf("font-family")&&"global"==i[s][0]&&(i[s]=e?b.getGlobalFont(i[s][1]):b.getComponentFont(o,!1,t));return i},b.checkOptionChanged=function(o,t){if(b.log,b.isEditing("custom-selector"))return!1;var e=!1,n=!1;if(b.isEditing("state")&&b.isEditing("id")){if(b.component.options[o][b.currentState]&&(n=b.component.options[o][b.currentState][t]),!n)return!1;if(e=b.component.options[o].original[t],"font-family"==t&&n&&"global"==n[0]&&"global"==e[0]&&n[1]==e[1])return!1;if(e&&n!=e)return"ct-option-different"}else if(b.classes[b.currentClass]&&b.classes[b.currentClass][b.currentState]&&b.classes[b.currentClass][b.currentState][t])return"ct-option-different"},b.isEditing=function(o){switch(o){case"id":return!1===b.currentClass&&0<=b.component.active.id;case"class":return!1!==b.currentClass;case"state":return"original"!=b.currentState;case"pseudo-element":return!!b.isPseudoElement(b.currentState);case"custom-selector":return!1!==b.selectorToEdit;case"style-sheet":return!1!==b.stylesheetToEdit&&void 0!==b.stylesheetToEdit;case"media":return"default"!==b.currentMedia;default:return!1}},b.switchEditToId=function(o){b.log&&console.log("switchEditToId()",b.component.active.id);var t=b.isEditing("id");if(!0!==o&&b.setCustomSelectorToEdit(!1),b.activeSelectors[b.component.active.id]||!0===o||b.setCurrentClass(!1),void 0!==o&&!0===o&&(b.activeSelectors=b.activeSelectors||{},b.activeSelectors[b.component.active.id]=!1,b.setCurrentClass(!1)),b.switchState("original"),b.showClasses=!1,t)return!1},b.setEditingStateToDefault=function(o){b.log&&console.log("setEditingStateToDefault()"),b.switchEditToId(!0),o||b.setCurrentMedia("default");var t=y(function(){b.$apply(),y.cancel(t)},0,!1)},b.pageSettingsUpdate=function(){b.mediaList["page-width"].maxSize=b.getPageWidth()+"px",b.mediaList["page-width"].title="Page container ("+b.getPageWidth()+"px) and below",b.getPageSetting("overlay-header-above")&&"never"!=b.getPageSetting("overlay-header-above")?jQuery("body").addClass("oxy-overlay-header"):jQuery("body").removeClass("oxy-overlay-header"),b.updateAllComponentsCacheStyles(),b.outputCSSOptions(),b.outputPageSettingsCSS(),_.adjustViewportContainer(),b.unsavedChanges()},b.$watch("globalSettings.scripts",function(){b.updateScriptsSettings()},!0),b.$watch("pageSettingsMeta.scripts",function(){b.updateScriptsSettings()},!0),b.updateScriptsSettings=function(){var o=!1;b.pageSettingsMeta.scripts&&"true"==b.pageSettingsMeta.scripts.scroll_to_hash?(o=b.pageSettingsMeta.scripts,""===b.pageSettingsMeta.scripts.scroll_to_hash_time&&(o.scroll_to_hash_time=b.pageSettings.scripts.scroll_to_hash_time)):o=b.pageSettings.scripts&&"true"==b.pageSettings.scripts.scroll_to_hash?b.pageSettings.scripts:b.globalSettings.scripts,o&&"true"==o.scroll_to_hash?(jQuery("body").addClass("oxygen-scroll-to-hash-links"),jQuery("body").attr("data-oxygen-scroll-to-hash-links",o.scroll_to_hash_time)):jQuery("body").removeClass("oxygen-scroll-to-hash-links")},b.getPageSetting=function(o,t){return void 0!==b.pageSettingsMeta[o]&&""!==b.pageSettingsMeta[o]?b.pageSettingsMeta[o]:void 0!==b.pageSettings[o]&&""!==b.pageSettings[o]?b.pageSettings[o]:1==t&&void 0!==b.globalSettings[o]&&""!==b.globalSettings[o]?b.globalSettings[o]:""},b.setOptionUnit=function(o,t,e){var n=o+"-unit",i=b.component.active.id,s=b.component.active.name;-1<n.indexOf(".")?(2==(n=n.split(".")).length&&b.component.options[i].model[n[0]]&&(b.component.options[i].model[n[0]][n[1]]=t),3==n.length&&b.component.options[i].model[n[0]]&&b.component.options[i].model[n[0]][n[1]]&&(b.component.options[i].model[n[0]][n[1]][n[2]]=t),b.setOption(i,s,n[0],!1,e)):(b.component.options[i].model[n]=t,b.setOption(i,s,n,!1,e)),b.applyModelOptions()},b.getOptionUnit=function(o){var t=o+"-unit",e=b.component.active.id;return-1<t.indexOf(".")?2==(t=t.split(".")).length?b.component.options[e].model[t[0]]&&b.component.options[e].model[t[0]][t[1]]?b.component.options[e].model[t[0]][t[1]]:b.defaultOptions.all[t[1]]:3==t.length?b.component.options[e].model[t[0]]&&b.component.options[e].model[t[0]][t[1]]&&b.component.options[e].model[t[0]][t[1]][t[2]]?b.component.options[e].model[t[0]][t[1]][t[2]]:b.defaultOptions.all[t[2]]:void 0:b.component.options[e].model&&b.component.options[e].model[t]?b.component.options[e].model[t]:b.defaultOptions.all[t]},b.getGlobalOptionUnit=function(o,t){var e=t+"-unit";return"page"==o&&b.pageSettingsMeta&&b.pageSettingsMeta[e]?b.pageSettingsMeta[e]:"global"==o&&b.globalSettings&&b.globalSettings[e]?b.globalSettings[e]:""},b.getComponentSelector=function(o){return null==o&&(o=b.component.active.id),b.component.options[o].selector},b.applyComponentJS=function(o,t,e){b.applyingComponentJS=!0,jQuery(".oxygen-code-error-container",_.oxygenUIElement).hide().html(""),b.log&&console.log("applyComponentJS()",o,t),null==o&&(o=b.component.active.id),null==t&&(t=b.component.active.name),null==e&&(e=!0),e&&b.setOption(o,t,"custom-js",!1,!1);var n=b.getOption("custom-js",o);b.defaultOptions[t]["custom-js"]!==n&&b.outputJSScript("ct_custom_js_",o,n),b.applyingComponentJS=!1},b.isInherited=function(o,t,e){if(void 0===e&&(e=b.getOption(t,o)),b.getOption(t,o)!=e)return!1;if(Array.isArray(e)&&0===e.length)return!0;if(b.isEditing("id")&&!b.isEditing("media")&&!b.isEditing("state")&&(void 0===b.component.options[o].id||b.component.options[o].id[t]==e||angular.equals(e,b.component.options[o].id[t])))return!1;if(b.isEditing("id")&&!b.isEditing("media")&&b.isEditing("state")&&b.component.options[o][b.currentState]&&b.component.options[o][b.currentState][t]==e)return!1;if(b.isEditing("id")&&b.isEditing("media")&&b.component.options[o].media&&b.component.options[o].media[b.currentMedia]&&b.component.options[o].media[b.currentMedia][b.currentState]&&b.component.options[o].media[b.currentMedia][b.currentState][t]==e)return!1;if(b.isEditing("class")&&!b.isEditing("media")&&b.classes[b.currentClass]&&b.classes[b.currentClass][b.currentState]&&b.classes[b.currentClass][b.currentState][t]==e)return!1;if(b.isEditing("class")&&b.isEditing("media")&&b.classes[b.currentClass]&&b.classes[b.currentClass].media&&b.classes[b.currentClass].media[b.currentMedia]&&b.classes[b.currentClass].media[b.currentMedia][b.currentState]&&b.classes[b.currentClass].media[b.currentMedia][b.currentState][t]==e)return!1;if(b.isEditing("custom-selector")&&!b.isEditing("class")){if(b.isEditing("media")&&b.customSelectors[b.selectorToEdit]&&b.customSelectors[b.selectorToEdit].media&&b.customSelectors[b.selectorToEdit].media[b.currentMedia]&&b.customSelectors[b.selectorToEdit].media[b.currentMedia][b.currentState]&&b.customSelectors[b.selectorToEdit].media[b.currentMedia][b.currentState][t]==e)return!1;if(b.customSelectors[b.selectorToEdit]&&b.customSelectors[b.selectorToEdit][b.currentState]&&b.customSelectors[b.selectorToEdit][b.currentState][t]==e)return!1}return!0},b.isBorderHasStyles=function(o){var t=b.isInherited(b.component.active.id,"border-"+o+"-width");return style=b.isInherited(b.component.active.id,"border-"+o+"-style"),color=b.isInherited(b.component.active.id,"border-"+o+"-color"),!(t&&style&&color)},b.isTabHasOptions=function(o,t){if(void 0===o){for(var o in b.optionsHierarchy)if(b.optionsHierarchy.hasOwnProperty(o))for(var e in b.optionsHierarchy[o])if(b.optionsHierarchy[o].hasOwnProperty(e)){var n=b.optionsHierarchy[o][e];for(var i in n){var s=n[i];if(!1===b.isInherited(b.component.active.id,s)&&""!=b.getOption(s,b.component.active.id))return!0}}}else if(void 0===t){for(var e in b.optionsHierarchy[o])if(b.optionsHierarchy[o].hasOwnProperty(e)){n=b.optionsHierarchy[o][e];for(var i in n){s=n[i];if(!1===b.isInherited(b.component.active.id,s)&&""!=b.getOption(s,b.component.active.id))return!0}}}else{if(!b.optionsHierarchy[o][t])return!1;n=b.optionsHierarchy[o][t];for(var i in n){s=n[i];if(!1===b.isInherited(b.component.active.id,s)&&""!=b.getOption(s,b.component.active.id))return!0}}},b.checkGlobalOptions=function(t){try{t=JSON.parse(t)}catch(o){return void console.log(t)}void 0!==t.display&&void 0!==t.text&&(b.globalSettings.fonts.Display==t.display&&b.globalSettings.fonts.Text==t.text||confirm("This Design Set's recommended fonts are:\rDisplay: "+t.display+"\rText: "+t.text+"\rWould you like to change your fonts to the recommended fonts?")&&(b.setGlobalFont("Display",t.display),b.setGlobalFont("Text",t.text)));void 0!==t["page-width"]&&(b.getPageWidth()!=t["page-width"]&&confirm("This Design Set's recommended page width is "+t["page-width"]+"px, but the width of this page is "+b.getPageWidth()+"px. Would you like to change your page width to "+t["page-width"]+"px?")&&(b.pageSettings["max-width"]=t["page-width"],b.pageSettingsUpdate()))},b.resetGlobalStylesToDefault=function(){confirm("Are you sure you wish to reset your Global Settings to the defaults?")&&(angular.copy(b.globalSettingsDefaults.fonts,b.globalSettings.fonts),angular.copy(b.globalSettingsDefaults.headings,b.globalSettings.headings),angular.copy(b.globalSettingsDefaults.body_text,b.globalSettings.body_text),angular.copy(b.globalSettingsDefaults.links,b.globalSettings.links),angular.copy(b.globalSettingsDefaults.sections,b.globalSettings.sections),b.globalSettings["max-width"]=b.globalSettingsDefaults["max-width"],b.pageSettingsUpdate())},b.setFirstTimeOptions=function(o,t){"ct_slider"==t&&(b.setOptionModel("slider-arrow-color","darker",o,t),b.setOptionModel("slider-dot-color","#ffffff",o,t),b.setOptionModel("slider-show-arrows","yes",o,t),b.setOptionModel("slider-show-dots","yes",o,t),b.setOptionModel("slider-autoplay","no",o,t),b.setOptionModel("slider-autoplay-delay","3000",o,t),b.setOptionModel("slider-infinite","no",o,t),b.setOptionModel("slider-animation","horizontal",o,t),b.setOptionModel("slider-animation-speed","750",o,t)),"oxy_nav_menu"==t&&(b.setOptionModel("menu_responsive","page-width",o,t),b.setOptionModel("menu_responsive_padding_size","0",o,t),b.setOptionModel("menu_responsive_icon_size","40",o,t),b.setOptionModel("menu_responsive_icon_margin","10",o,t),b.setOptionModel("dropdowns","on",o,t),b.setOptionModel("menu_dropdown_arrow","on",o,t),b.setOptionModel("menu_padding-top","20",o,t),b.setOptionModel("menu_padding-left","20",o,t),b.setOptionModel("menu_padding-right","20",o,t),b.setOptionModel("menu_padding-bottom","20",o,t),b.setOptionModel("menu_hover_background-color","#eee",o,t),b.setOptionModel("menu_hover_border-top-width","3",o,t),b.setOptionModel("menu_flex-direction","row",o,t)),"oxy_social_icons"==t&&(b.setOptionModel("icon-facebook","https://facebook.com"),b.setOptionModel("icon-instagram","https://instagram.com"),b.setOptionModel("icon-twitter","https://twitter.com")),"oxy_header"==t&&(b.setOptionModel("sticky-media","page-width"),b.setOptionModel("sticky_scroll_distance","300")),"oxy_soundcloud"==t&&(b.setOptionModel("height","300"),b.setOptionModel("height-unit","px"),b.setOptionModel("width","100"),b.setOptionModel("width-unit","%"),b.setOptionModel("soundcloud_url","https://soundcloud.com/nathaniel-eliason/13-learning-spanish-and-more"),b.setOptionModel("soundcloud_track_id","331837379")),"oxy_superbox"==t&&(b.setOptionModel("superbox_secondary_opacity_start","0"),b.setOptionModel("superbox_secondary_opacity_finish","1"))},b.isFlexPossible=function(o){return null==o&&(o=b.component.active.name),-1<["ct_div_block","ct_section","ct_link"].indexOf(o)},b.setTextAlign=function(){var t=y(function(){var o=b.component.active.id;if("column"==b.component.options[o].model["flex-direction"])switch(b.component.options[o].model["align-items"]){case"flex-start":b.setOptionModel("text-align","left");break;case"center":b.setOptionModel("text-align","center");break;case"flex-end":b.setOptionModel("text-align","right");break;case"stretch":b.setOptionModel("text-align","justify");break;default:b.setOptionModel("text-align","")}if("row"==b.component.options[o].model["flex-direction"])switch(b.component.options[o].model["justify-content"]){case"flex-start":b.setOptionModel("text-align","left");break;case"center":b.setOptionModel("text-align","center");break;case"flex-end":b.setOptionModel("text-align","right");break;case"space-between":case"space-around":b.setOptionModel("text-align","justify");break;default:b.setOptionModel("text-align","")}y.cancel(t)},11,!1)},b.setEasyPostsTemplate=function(o,t){if(void 0===t&&(t=!0),t&&!confirm("Current settings for this element will be overwritten. Are you sure?"))return!1;b.setOptionModel("code-php",o.code_php),b.setOption(b.component.active.id,b.component.active.name,"code-php"),b.setOptionModel("code-css",o.code_css),b.setOption(b.component.active.id,b.component.active.name,"code-css");var e=["title_size","title_size-unit","title_color","title_hover_color","meta_size","meta_size-unit","meta_color","content_size","content_size-unit","content_color","read_more_display_as","read_more_size","read_more_size-unit","read_more_text_color","read_more_text_hover_color","read_more_button_color","read_more_button_hover_color","paginate_color","paginate_alignment","paginate_link_color","paginate_link_hover_color","posts_per_page","posts_5050_below","posts_100_below"];for(var n in e){var i=e[n];b.setOptionModel(i,o[i])}b.lastSetEasyPostsTemplate[b.component.active.id]=o.name,b.renderComponentWithAJAX("oxy_render_easy_posts")},b.addEasyPostsTemplate=function(){if(b.newEasyPostsTemplate&&""!==b.newEasyPostsTemplate){var o={name:b.newEasyPostsTemplate,code_php:b.getOption("code-php"),code_css:b.getOption("code-css")},t=["title_size","title_size-unit","title_color","title_hover_color","meta_size","meta_size-unit","meta_color","content_size","content_size-unit","content_color","read_more_display_as","read_more_size","read_more_size-unit","read_more_text_color","read_more_text_hover_color","read_more_button_color","read_more_button_hover_color","paginate_color","paginate_alignment","paginate_link_color","paginate_link_hover_color","posts_per_page","posts_5050_below","posts_100_below"];for(var e in t){var n=t[e];o[n]=b.getOption(n)}b.easyPostsCustomTemplates.push(o),b.newEasyPostsTemplate="",alert("Your preset was saved successfully"),b.unsavedChanges()}else alert("Please set the preset name")},b.deleteEasyPostsTemplate=function(o,t){void 0!==t&&t.stopPropagation(),b.easyPostsCustomTemplates.splice(o,1)},b.setCommentsListTemplate=function(o){b.setOptionModel("code-php",o.code_php),b.setOption(b.component.active.id,b.component.active.name,"code-php"),b.setOptionModel("code-css",o.code_css),b.setOption(b.component.active.id,b.component.active.name,"code-css"),b.lastSetCommentsListTemplate=o.name,b.renderComponentWithAJAX("oxy_render_comments_list")},b.addCommentsListTemplate=function(){b.newCommentsListTemplate&&""!==b.newCommentsListTemplate?(b.commentsListCustomTemplates.push({name:b.newCommentsListTemplate,code_php:b.getOption("code-php"),code_css:b.getOption("code-css")}),b.newCommentsListTemplate="",alert("Your preset was saved successfully"),b.unsavedChanges()):alert("Please set the preset name")},b.deleteCommentsListTemplate=function(o,t){void 0!==t&&t.stopPropagation(),b.commentsListCustomTemplates.splice(o,1)},b.getPageWidth=function(o){return o||void 0===b.getPageSetting("max-width")||""==b.getPageSetting("max-width")?parseInt(b.globalSettings["max-width"]):parseInt(b.getPageSetting("max-width"))},b.reEnablePricingBoxText=function(){""==b.getOption("pricing_box_package_regular")&&b.setOptionModel("pricing_box_package_regular","monthly $399"),""==b.getOption("pricing_box_package_subtitle")&&b.setOptionModel("pricing_box_package_subtitle","for small business"),""!=b.getOption("pricing_box_content")&&"<br>"!=b.getOption("pricing_box_content")||b.setOptionModel("pricing_box_content","my features<br />another feature<br />my last feature<br />")},b.getSuperBoxEditingModeTitle=function(){switch(b.getOption("superbox_editing_mode")){case"primary_only":return"Show Primary Only";case"secondary_only":return"Show Secondary Only";case"as_hovered":return"As If Hovered";case"as_not_hovered":return"As If Not Hovered";default:return"Live"}},b.unsetAllBorders=function(){b.component.active.id;var o=["border-all-width","border-all-width-unit","border-all-style","border-all-color","border-top-width","border-top-width-unit","border-top-style","border-top-color","border-right-width","border-right-width-unit","border-right-style","border-right-color","border-bottom-width","border-bottom-width-unit","border-bottom-style","border-bottom-color","border-left-width","border-left-width-unit","border-left-style","border-left-color"];for(var t in o){var e=o[t];b.setOptionModel(e,null)}},b.addComponentTransform=function(){var o=b.objectToArrayObject(b.getOption("transform")),t=typeof o;"string"!==t&&"undefined"!==t||(o=[]),o.push({"transform-type":"rotate"}),b.setOptionModel("transform",o)},b.removeComponentTransform=function(o,t){var e=b.objectToArrayObject(b.getOption("transform"));console.log(e,t),e.splice(t,1),b.setOptionModel("transform",e)}}]);
CTFrontendBuilder.controller("ControllerFonts",["$scope","$http","$timeout",function(s,n,o){s.APIKey="AIzaSyBlDz9OGMf_5_-QxgHPTjjmvYVzEauwcQE",s.WebFontsUrl="https://www.googleapis.com/webfonts/v1/webfonts",s.webSafeFonts=["Georgia, serif","Times New Roman, Times, serif","Arial, Helvetica, sans-serif","Arial Black, Gadget, sans-serif","Tahoma, Geneva, sans-serif","Verdana, Geneva, sans-serif","Courier New, Courier, monospace"],s.showFonts=[],s.loadedFonts=[],s.googleFontsList=[],s.getWebFontsList=function(){if(s.googleFontsCache){var o={action:"oxy_get_google_fonts",post_id:CtBuilderAjax.postId,nonce:CtBuilderAjax.nonce};n({method:"GET",url:CtBuilderAjax.ajaxUrl,params:o,transformResponse:!1}).success(function(o,n,t,e){(o=JSON.parse(o))||(o=[]),s.googleFontsList=o,s.loadSavedGlobalFonts()}).error(function(o,n,t,e){console.log(o)})}else n({method:"GET",url:s.WebFontsUrl,params:{key:s.APIKey,sort:"popularity"}}).success(function(o,n,t,e){angular.forEach(o.items,function(o){s.googleFontsList.push({family:o.family,variants:o.variants})}),s.loadSavedGlobalFonts()}).error(function(o,n,t,e){console.log(o)})},s.getGoogleFont=function(n){var o=s.googleFontsList.find(function(o){return o.family===n});return void 0!==o&&o},s.setComponentFont=function(o,n,t,e){void 0===e&&(e="font-family"),s.loadWebFont(t),s.component.options[o].model[e]=t,s.setOption(o,n,e),s.showFonts=[],s.fontsFilter=""},s.getComponentFont=function(o,n,t,e){if(0==o)return"";if(t||(t="model"),null==e&&(e="font-family"),o||(o=s.component.active.id),s.component.options[o]&&void 0!==s.component.options[o][t])var a=s.component.options[o][t][e];return a?"global"==a[0]?!0===n?a[1]+" ("+s.getGlobalFont(a[1])+")":s.getGlobalFont(a[1]):a:void 0},s.setGlobalFont=function(o,n){s.globalSettings.fonts[o]=n,s.fontsFilter="",s.loadWebFont(["global",o]),s.classesCached=!1,s.updateAllComponentsCacheStyles(),s.outputCSSOptions(),s.unsavedChanges()},s.getGlobalFont=function(o){return s.globalSettings.fonts[o]},s.addGlobalFont=function(){var o=prompt("Custom global font name (i.e 'My Font'):");if(null!=o)return s.globalSettings.fonts[o]="Open Sans";s.unsavedChanges()},s.deleteGlobalFont=function(t){if(!confirm('Are you sure to delete "'+t+'" font?'))return!1;delete s.globalSettings.fonts[t],angular.forEach(s.classes,function(o,n){angular.forEach(o,function(o,n){o["font-family"]&&o["font-family"][1]==t&&delete o["font-family"]})}),s.unsavedChanges()},s.checkGlobalFont=function(o){angular.forEach(o,function(e,a){"object"==typeof e&&angular.forEach(e,function(o,n){if("object"==typeof o&&"media"==a)s.checkGlobalFont(o);else{var t=!0;"font-family"==n&&"global"==o[0]&&(t=s.getGlobalFont(o[1])),"string"==typeof n&&-1<n.indexOf("font-family")&&"global"==o[0]&&(t=s.getGlobalFont(o[1])),null==t&&delete e[n]}})})},s.loadWebFont=function(o,n){if("true"!=s.disableGoogleFonts){if("Inherit"==o)return!1;var t=":100,200,300,400,500,600,700,800,900";if("global"==o[0]){if(name=s.getGlobalFont(o[1]),!1===s.getGoogleFont(name))return!1;if(s.globalSettings.fontsOptions&&s.globalSettings.fontsOptions[o[1]]){for(var e in t=":",s.globalSettings.fontsOptions[o[1]])"true"==s.globalSettings.fontsOptions[o[1]][e]&&(t+=e+",");":"==t&&(t=":100,200,300,400,500,600,700,800,900")}}else name=o;if(-1<s.webSafeFonts.indexOf(name))return!1;if(s.elegantCustomFonts&&-1<s.elegantCustomFonts.indexOf(name))return!1;if(s.typeKitFonts)for(var a=0,l=s.typeKitFonts.length;a<l;a++)if(s.typeKitFonts[a].slug===name)return!1;if(-1<s.loadedFonts.indexOf(name)&&!0!==n)return!1;s.loadedFonts.push(name),name&&""!==name&&(name+=t,WebFont.load({google:{families:[name]}}))}},s.loadSavedGlobalFonts=function(){angular.forEach(s.globalSettings.fonts,function(o,n){s.loadWebFont(["global",n])})}}]);
CTFrontendBuilder.controller("ControllerSVGIcons",["$scope","$http","$timeout",function(c,t,n){c.setCurrentSVGSet=function(t){c.currentSVGSet=t,c.showSVGSets=!1},c.setSVGIcon=function(t,n){var o=c.component.active.id,e=c.component.active.name;t=c.currentSVGSet.split(" ").join("")+t,c.component.options[o].model["icon-id"]=t,c.setOption(o,e,"icon-id"),c.iconFilter.title=n,c.parentScope.switchActionTab("SVGIcons")}}]);
CTFrontendBuilder.controller("ControllerCSS",["$scope","$parentScope","$http","$timeout",function(Ke,l,e,o){var t,a;Ke.idStylesContainer=document.getElementById("ct-id-styles"),Ke.classStylesContainer=document.getElementById("ct-class-styles"),Ke.customSelectorsExample={"#my-custom-id":{original:{color:"red","font-size":"24px"}}},Ke.selectedCSSFolder=null,Ke.expandedFolder=[],Ke.expandedSelectorFolder=[],Ke.expandedStylesets=[],Ke.selectedSelectorFolder=null,Ke.selectedNodeType=null,Ke.selectedStyleSet=null,Ke.selectorDetector={mode:!1},Ke.cssFolderMenuOpen=!1,Ke.selectorFolderMenuOpen=!1,Ke.componentSelector={},Ke.selectorToEdit=!1,Ke.selectorHighlighted=!0,Ke.expandedStyleSets=[],Ke.excludeProperties=["ct_content","ct_id","ct_parent","tag","url","src","alt","target","icon-id","section-width","custom-width","header-width","header-custom-width","header-row-width","header-row-custom-width","container-padding-top","container-padding-right","container-padding-bottom","container-padding-left","background-position-top","background-position-left","background-size-width","background-size-height","video-padding-bottom","use-custom","custom-code","embed-src","button-style","button-size","button-color","button-text-color","gradient","background","overlay-color","icon-size","icon-style","icon-color","icon-background-color","use-acf-repeater","acf-repeater","globalConditionsResult","conditionspreview","conditionstype","custom-js","border-all-width","border-all-style","border-all-color","function_name","full_shortcode","gutter","code-css","code-php","code-js","class_name","id_base","pretty_name","friendly_name","separator","date_format","size","meta_key","hover_color","flex-reverse","stack-columns-vertically","reverse-column-order","set-columns-width-50","menu_id","video_background","video_background_media","video_background_hide","aos-type","aos-duration","aos-easing","aos-offset","aos-delay","aos-anchor","aos-anchor-placement","aos-once","aos-enable","transform"],Ke.cache.idCSS="",Ke.cache.idStyles={},Ke.cache.classCSS="",Ke.cache.classStyles={},Ke.cache.selectorCSS="",Ke.cache.selectorStyles={},Ke.cache.mediaCSS="",Ke.cache.mediaStyles={},Ke.contentAdded=[],Ke.socialIcons=[],Ke.socialIcons.networks=["facebook","instagram","twitter","linkedin","rss","youtube"],Ke.socialIcons.networkColors={facebook:"#3b5998",instagram:"#c32aa3",twitter:"#00b6f1",linkedin:"#007bb6",rss:"#ee802f",youtube:"#ff0000"},Ke.socialIcons.networkHoverColors={facebook:"#5b79b8",instagram:"#e34ac3",twitter:"#20d6ff",linkedin:"#209bd6",rss:"#ffa04f",youtube:"#ff4444"},Ke.mappedSelectors={},Ke.filterStylesheets=function(o){var e=Ke.styleSheets.filter(function(e){return e.id==o.parent});return!(0<e.length&&0===e[0].status)&&-1!==parseInt(o.parent)},Ke.setSelectedSelectorFolder=function(e){Ke.setSelectedNodeType("selectorfolder"),Ke.selectedSelectorFolder=e},Ke.getCSSFolder=function(e){return Ke.styleSheets.find(function(e){return e.id===iframeScope.selectedCSSFolder})},Ke.setSelectedCSSFolder=function(e){Ke.selectedCSSFolder=e},Ke.setActiveCSSFolder=function(e){Ke.setSelectedNodeType("cssfolder")},Ke.setSelectedNodeType=function(e){"stylesheet"!==e&&l.toggleSidebar(!0),Ke.selectedNodeType=e},Ke.greaterThan=function(o,t){return function(e){return e[o]>t}},Ke.equalsTo=function(o,t){return function(e){return e[o]===t}},Ke.toggleCSSFolder=function(e){Ke.cssFolderMenuOpen=null,e.status=1==e.status?0:1},Ke.toggleSelectorFolder=function(e){e.status=1==e.status?0:1},Ke.checkNewCustomSelector=function(e){void 0===Ke.customSelectors[e]&&(Ke.customSelectors[e]={set_name:"Uncategorized Custom Selectors",original:{}}),void 0===Ke.customSelectors[e].set_name&&(Ke.customSelectors[e].set_name="Uncategorized Custom Selectors"),void 0===Ke.customSelectors[e].original&&(Ke.customSelectors[e].original={})},Ke.setCustomSelectorToEdit=function(e){if(Ke.styleSetActive=!1,0<Ke.component.active.id&&(Ke.activeSelectors[Ke.component.active.id]=void 0!==Ke.activeSelectors[Ke.component.active.id]?Ke.activeSelectors[Ke.component.active.id]:Ke.component.options[Ke.component.active.id].model.activeselector,Ke.activeSelectors[Ke.component.active.id]&&Ke.setCurrentClass(!!Ke.activeSelectors[Ke.component.active.id]&&Ke.activeSelectors[Ke.component.active.id])),Ke.log&&console.log("setCustomSelectorToEdit()",e),"string"==typeof(Ke.selectorToEdit=e)){Ke.activateComponent(-1,"ct_selector");var o=e.substr(1);Ke.classes[o]?(Ke.setCurrentClass(o),Ke.populateSelectorFolderDropdown(!0),Ke.setSelectedNodeType("class")):(Ke.setCurrentClass(!1),Ke.populateSelectorFolderDropdown(),Ke.setSelectedNodeType("selector")),Ke.customSelectors[e]&&(Ke.expandedStyleSets[Ke.customSelectors[e].set_name]=!0)}Ke.highlightSelector(!0,e),l.cleanEmptySelectors&&""!==e&&l.cleanEmptySelectors()},Ke.setStyleSetActive=function(){Ke.setSelectedNodeType("styleset"),Ke.styleSetActive=!0,Ke.selectorToEdit=!1,Ke.currentClass=!1},Ke.populateSelectorFolderDropdown=function(e){var o,t="";e?(o=Ke.classes[Ke.currentClass])&&(t=o.parent):Ke.selectedStyleSet?t=Ke.styleSets[Ke.selectedStyleSet].parent:(o=Ke.customSelectors[Ke.selectorToEdit])&&(t=o.parent);Ke.currentActiveFolder=t},Ke.setStyleSheetToEdit=function(e){var o=_.findWhere(Ke.styleSheets,{id:e.parent});Ke.currentActiveStylesheetFolder=o?o.name:"",Ke.cancelDeleteUndo(),Ke.log&&console.log("setStyleSheetToEdit()",e),Ke.activateComponent(0),Ke.stylesheetToEdit=e,Ke.parentScope.switchActionTab("styleSheet"),Ke.setSelectedNodeType("stylesheet"),Ke.parentScope.expandSidebar()},Ke.highlightSelector=function(e,o,t){if(Ke.log&&console.log("highlightSelector()",e,o),!1===o)return Ke.outputCSSStyles("ct-selector-highlight",""),!1;t&&t.stopPropagation();var i="";if(void 0===o&&(o=Ke.selectorToEdit),Ke.selectorHighlighted=void 0===e?!Ke.selectorHighlighted:e,Ke.selectorHighlighted){var n=[];try{n=o.indexOf(".")<0&&o.indexOf("#")<0&&o.indexOf("body")<0?angular.element(o,".oxygen-body"):angular.element(o)}catch(e){console.log(e)}if(0==n.length)return Ke.selectorHighlighted=!1,Ke.outputCSSStyles("ct-selector-highlight",""),!1}var r="";r="original"==Ke.currentState||"hover"==Ke.currentState||"active"==Ke.currentState||"focus"==Ke.currentState?"":":"+Ke.currentState,Ke.selectorHighlighted&&(i=o+r+"{outline: 1px dashed rgb(19, 187, 38); outline-offset: 0px;}",o.indexOf(".")<0&&o.indexOf("#")<0&&o.indexOf("body")<0&&(i=".oxygen-body "+i)),Ke.outputCSSStyles("ct-selector-highlight",i)},Ke.deleteSelectorFolder=function(o){if(Ke.styleFolders.hasOwnProperty(o)){if((_.findWhere(Ke.styleSets,{parent:o})||_.findWhere(Ke.classes,{parent:o}))&&!confirm("Are you sure you wish to delete this folder and all classes and selectors inside it?"))return!1;angular.forEach(iframeScope.styleSets,function(e){e.parent===o&&delete iframeScope.styleSets[e.key]}),angular.forEach(iframeScope.classes,function(e){e.parent===o&&delete iframeScope.classes[e.key]}),delete Ke.styleFolders[o]}},Ke.toggleUncategorizedFolderContents=function(e){e?(_.each(_.filter(Ke.styleSets,function(e){return void 0===e.parent||null===e.parent}),function(e){e.parent=-1}),_.each(_.filter(Ke.classes,function(e){return void 0===e.parent||null===e.parent}),function(e){e.parent=-1})):(_.each(_.filter(Ke.styleSets,function(e){return-1===e.parent||"-1"===e.parent}),function(e){delete e.parent}),_.each(_.filter(Ke.classes,function(e){return-1===e.parent||"-1"===e.parent}),function(e){delete e.parent}))},Ke.toggleUncategorizedStyleSheets=function(e){e?_.each(_.filter(Ke.styleSheets,function(e){return void 0===e.parent||null===e.parent||0===parseInt(e.parent)}),function(e){e.parent=-1}):_.each(_.filter(Ke.styleSheets,function(e){return-1===e.parent||"-1"===e.parent}),function(e){e.parent=0})},Ke.addSelectorFolder=function(){Ke.cancelDeleteUndo();var e=prompt("Provide a name for the folder").trim();/^[a-z_-][a-z\d_-]*$/i.test(e)?Ke.styleFolders.hasOwnProperty(e)?alert("'"+e+"' already exist."):Ke.styleFolders[e]={status:1}:alert("Bad folder name. Special characters and spaces are not allowed")},Ke.addSelectorItem=function(){Ke.cancelDeleteUndo();var e=prompt("Type a valid CSS selector").trim();try{document.querySelector(e)}catch(e){return alert("Not a valid selector"),!1}if(Ke.customSelectors.hasOwnProperty(e))alert("'"+e+"' already exist.");else{Ke.customSelectors[e]={set_name:"Uncategorized Custom Selectors",original:{}},Ke.selectedSelectorFolder&&Ke.styleFolders.hasOwnProperty(Ke.selectedSelectorFolder)&&(Ke.customSelectors[e].parent=Ke.selectedSelectorFolder),Ke.setCustomSelectorToEdit(e),Ke.selectedStyleSet=e,Ke.expandedStyleSets["Uncategorized Custom Selectors"]=!0;var o=Ke.styleSets["Uncategorized Custom Selectors"].parent;void 0===o?iframeScope.expandedSelectorFolder[0]=!0:-1===o?iframeScope.expandedSelectorFolder.uncategorized=!0:iframeScope.expandedSelectorFolder[o]=!0}},Ke.addStyleSheet=function(e){Ke.cancelDeleteUndo();var o=prompt("Enter a name for the "+(e?"Folder":"Stylesheet"));if(o){o=o.trim();if(/^[a-z_-][a-z\d_-]*$/i.test(o))if(0<Ke.styleSheets.filter(function(e){return e.name==o}).length)alert("'"+o+"' already exist. Please choose another name.");else{var t=1;if(0<Ke.styleSheets.length&&(t=_.max(Ke.styleSheets,function(e){return e.id}).id+1),e)Ke.styleSheets.push({id:t,name:o,status:1,folder:1});else{var i=-1===Ke.selectedCSSFolder||null===Ke.selectedCSSFolder?0:Ke.selectedCSSFolder,n={id:t,name:o,css:"",parent:i};for(key in Ke.styleSheets.push(n),iframeScope.expandedFolder)iframeScope.expandedFolder[key]=!1;iframeScope.expandedFolder[i]=!0,iframeScope.setStyleSheetToEdit(n)}}else alert("Bad stylesheet name. Special characters and spaces are not allowed")}},Ke.deleteStyleSheet=function(o){if(Ke.cancelDeleteUndo(),o.folder){if(!confirm("Are you sure you wish to delete this folder and all stylesheets inside it?"))return!1}else if(!confirm('Delete "'+o.name+'" stylesheet from install? (Changes will take effect on Save).'))return!1;Ke.log&&console.log("deleteStyleSheet()",selector),Ke.styleSheets.splice(Ke.styleSheets.indexOf(o),1),o.folder&&(Ke.styleSheets=Ke.styleSheets.filter(function(e){return e.parent!=o.id})),angular.element(document.getElementById("ct-style-sheet-"+o.name)).remove(),Ke.stylesheetToEdit===o&&(Ke.stylesheetToEdit=!1,l.actionTabs.styleSheet=!1,l.toggleSidebar(!0)),Ke.selectedNodeType=null},Ke.deleteCustomSelector=function(e){return Ke.cancelDeleteUndo(),"Uncategorized Custom Selector"===e?(alert("Sorry, you can't delete the Style Set named Uncategorized Custom Selectors"),!1):!!confirm('Are you sure to delete "'+e+'" selector?')&&(Ke.log&&console.log("deleteCustomSelector()",e),delete Ke.customSelectors[e],Ke.selectorToEdit=!1,-1==Ke.component.active.id&&Ke.activateComponent(0,"root"),Ke.classesCached=!1,Ke.outputCSSOptions(),void Ke.unsavedChanges())},Ke.updateCustomSelectorValue=function(e,o){if(Ke.cancelDeleteUndo(),Ke.log&&console.log("updateCustomSelectorValue()",e,o),""===Ke.selectorToEdit)return!1;var t=Ke.currentState,i=Ke.selectorToEdit.substr(1);Ke.classes[i]?(Ke.classes[i][t]||(Ke.classes[i][t]={}),""==o?delete Ke.classes[i][t][e]:Ke.classes[i][t][e]=o):Ke.isEditing("media")?(Ke.customSelectors[Ke.selectorToEdit].media||(Ke.customSelectors[Ke.selectorToEdit].media={}),Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia]||(Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia]={}),Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia][t]||(Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia][t]={}),""==o?delete Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia][t][e]:Ke.customSelectors[Ke.selectorToEdit].media[Ke.currentMedia][t][e]=o):(Ke.customSelectors[Ke.selectorToEdit]||(Ke.customSelectors[Ke.selectorToEdit]={set_name:"Uncategorized Custom Selectors"}),Ke.customSelectors[Ke.selectorToEdit][t]||(Ke.customSelectors[Ke.selectorToEdit][t]={}),""==o?delete Ke.customSelectors[Ke.selectorToEdit][t][e]:Ke.customSelectors[Ke.selectorToEdit][t][e]=o)},Ke.outputCSSStyles=function(e,o){var t=document.getElementById(e),i="";i='<style id="'+e+'">',i+=o,i+="</style>",t?t.innerHTML=o:angular.element("head").append(i)},Ke.deleteCSSStyles=function(e){var o=document.getElementById(e);o&&angular.element(o).remove()},Ke.generateDynamicBackgrounds=function(t,e,i,n,o){void 0===o&&(o=Ke.componentsTree),Ke.dynamicBackgrounds=Ke.dynamicBackgrounds||{};var r={lock:!0};"id"===i?(Ke.dynamicBackgrounds[t]=Ke.dynamicBackgrounds[t]||{},Ke.dynamicBackgrounds[t]=r):"class"===i?(Ke.dynamicBackgrounds.classes=Ke.dynamicBackgrounds.classes||{},Ke.dynamicBackgrounds.classes[t]=Ke.dynamicBackgrounds.classes[t]||{},Ke.dynamicBackgrounds.classes[t]=r):"selector"===i&&(Ke.dynamicBackgrounds.selectors=Ke.dynamicBackgrounds.selectors||{},Ke.dynamicBackgrounds.selectors[t]=Ke.dynamicBackgrounds.selectors[t]||{},Ke.dynamicBackgrounds.selectors[t]=r);var a={};if("id"===i){var l=Ke.findComponentItem(o.children,t,Ke.getComponentItem);a=l?l.options:{}}else"class"===i?a=Ke.classes[t]||{}:"selector"===i&&(a=Ke.customSelectors[t]||{});var s=0;for(key in a)if(!(-1<["ct_id","ct_parent","set_name","parent","key","status","friendly_name","selector","activeselector","classes","nicename"].indexOf(key)))if("media"===key){r.media={};var c=a.media;for(bpKey in c)for(stateKey in r.media[bpKey]={},c[bpKey])"id"===i&&c[bpKey][stateKey]["background-image"]&&-1<c[bpKey][stateKey]["background-image"].indexOf("[oxygen")&&(r.media[bpKey][stateKey]=c[bpKey][stateKey]["background-image"],s++)}else"id"===i&&a[key]&&a[key]["background-image"]&&-1<a[key]["background-image"].indexOf("[oxygen")&&(r[key]=a[key]["background-image"],s++);for(key in r)if("lock"!==key)if("media"===key){c=r.media;for(bpKey in c)for(stateKey in c[bpKey])Ke.applyShortcodeResults(t,r.media[bpKey][stateKey],function(e,o){if("selector"===i?Ke.dynamicBackgrounds.selectors[t].media[o.bpKey][o.stateKey]=e.trim():"class"===i?Ke.dynamicBackgrounds.classes[t].media[o.bpKey][o.stateKey]=e.trim():"id"===i&&(Ke.dynamicBackgrounds[t].media[o.bpKey][o.stateKey]=e.trim()),0===--s)return delete r.lock,void n()},{id:t,bpKey:bpKey,stateKey:stateKey})}else Ke.applyShortcodeResults(t,r[key],function(e,o){if("selector"===i?Ke.dynamicBackgrounds.selectors[t][o.key]=e.trim():"class"===i?Ke.dynamicBackgrounds.classes[t][o.key]=e.trim():"id"===i&&(Ke.dynamicBackgrounds[t][o.key]=e.trim()),0===--s)return delete r.lock,void n()},{id:t,key:key});0===s&&(delete r.lock,n())},Ke.outputCSSOptions=function(e,i){Ke.log&&(console.log("outputCSSOptions()",e),Ke.functionStart("outputCSSOptions()"));if(Ke.bufferedOutputStyles=Ke.bufferedOutputStyles||{},Ke.bufferedOutputStyles.keys=Ke.bufferedOutputStyles.keys||[],(Ke.isEditing("class")||Ke.isEditing("id")||1==i)&&Ke.bufferedOutputStyles.keys.indexOf("id")<0&&Ke.bufferedOutputStyles.keys.push("id"),!Ke.isEditing("class")&&Ke.classesCached||Ke.bufferedOutputStyles.keys.indexOf("classes")<0&&Ke.bufferedOutputStyles.keys.push("classes"),Ke.bufferedOutputStyles.keys.indexOf("selectors")<0&&Ke.bufferedOutputStyles.keys.push("selectors"),(Ke.isEditing("class")||Ke.isEditing("id")||1==i)&&(void 0!==e&&0<e?Ke.updateComponentCacheStyles(e,function(){Ke.cache.idCSS="",Object.keys(Ke.cache.idStyles).map(function(e,o){Ke.cache.idCSS+=Ke.cache.idStyles[e]}),Ke.outputCSSStylesAfterWait("id",Ke.cache.idCSS)}):(Object.keys(Ke.cache.idStyles).map(function(e,o){Ke.cache.idCSS+=Ke.cache.idStyles[e]}),Ke.outputCSSStylesAfterWait("id",Ke.cache.idCSS))),Ke.isEditing("class")||!Ke.classesCached)if(Ke.classesCached)void 0!==Ke.classes[Ke.currentClass]&&void 0!==Ke.classes[Ke.currentClass].parent&&void 0!==Ke.styleFolders[Ke.classes[Ke.currentClass].parent]&&1!==Ke.styleFolders[Ke.classes[Ke.currentClass].parent].status||-1!==parseInt(Ke.classes[Ke.currentClass].parent)&&(Ke.cache.classStyles[Ke.currentClass]=Ke.getSingleClassCSS(Ke.currentClass)),Ke.cache.classCSS="",Object.keys(Ke.cache.classStyles).map(function(e,o){Ke.cache.classCSS+=Ke.cache.classStyles[e]}),Ke.outputCSSStylesAfterWait("classes",Ke.cache.classCSS),"";else{Ke.cache.classStyles=[];var n=Object.keys(Ke.classes),r=function(e){var o=function(){0<n.length?r(n.shift()):(Ke.cache.classCSS="",Object.keys(Ke.cache.classStyles).map(function(e,o){Ke.cache.classCSS+=Ke.cache.classStyles[e]}),Ke.outputCSSStylesAfterWait("classes",Ke.cache.classCSS),"",Ke.classesCached=!0)};if(Ke.classes.hasOwnProperty(e)){var t=Ke.classes[e];Ke.cache.classStyles[e]="",(void 0===Ke.classes[e].parent||void 0===Ke.styleFolders[Ke.classes[e].parent]||1===Ke.styleFolders[Ke.classes[e].parent].status)&&-1!==parseInt(Ke.classes[e].parent)?Ke.generateDynamicBackgrounds(e,i,"class",function(){Ke.cache.classStyles[e]=Ke.getSingleClassCSS(e,t),o()}):o()}else o()};0<n.length?r(n.shift()):(Ke.cache.classCSS="",Ke.outputCSSStylesAfterWait("classes",Ke.cache.classCSS),Ke.classesCached=!0)}Ke.cache.selectorStyles=[],Ke.cache.selectorCSS="";var a=Object.keys(Ke.customSelectors),l=function(e){var o=function(){0<a.length?l(a.shift()):(Ke.cache.selectorCSS="",Object.keys(Ke.cache.selectorStyles).map(function(e,o){Ke.cache.selectorCSS+=Ke.cache.selectorStyles[e]}),Ke.outputCSSStylesAfterWait("selectors",Ke.cache.selectorCSS))};if(Ke.customSelectors.hasOwnProperty(e)){var t=Ke.customSelectors[e];Ke.cache.selectorStyles[e]="",!(void 0!==Ke.customSelectors[e].set_name&&void 0!==Ke.styleSets[Ke.customSelectors[e].set_name]&&void 0!==Ke.styleSets[Ke.customSelectors[e].set_name].parent&&void 0!==Ke.styleFolders[Ke.styleSets[Ke.customSelectors[e].set_name].parent]&&void 0!==Ke.styleFolders[Ke.styleSets[Ke.customSelectors[e].set_name].parent].status&&1!==Ke.styleFolders[Ke.styleSets[Ke.customSelectors[e].set_name].parent].status||void 0!==Ke.styleSets[Ke.customSelectors[e].set_name]&&-1===parseInt(Ke.styleSets[Ke.customSelectors[e].set_name].parent))?Ke.generateDynamicBackgrounds(e,i,"selector",function(){Ke.cache.selectorStyles[e]=Ke.getSingleSelectorCSS(e,t),o()}):o()}else o()};0<a.length?l(a.shift()):Ke.outputCSSStylesAfterWait("selectors",Ke.cache.selectorCSS),Ke.functionEnd("outputCSSOptions()")},Ke.outputCSSStylesAfterWait=function(e,o){"id"===e&&(Ke.idStylesContainer.innerHTML=o),"classes"===e&&(Ke.classStylesContainer.innerHTML=o),"selectors"===e&&Ke.outputCSSStyles("ct-custom-selectors",o)},Ke.updateComponentCacheStyles=function(e,o){Ke.contentAdded=[],Ke.log&&console.log("updateComponentCacheStyles()",e,Ke.component.options[e]),Ke.generateDynamicBackgrounds(e,!1,"id",function(){Ke.cache.idStyles[e]=Ke.getSingleComponentCSS(Ke.component.options[e],e),o&&o()})},Ke.updateAllComponentsCacheStyles=function(){for(var e in Ke.functionStart("updateAllComponentsCacheStyles()"),Ke.component.options)Ke.component.options.hasOwnProperty(e)&&Ke.updateComponentCacheStyles(e,function(){Ke.cache.idCSS="",Object.keys(Ke.cache.idStyles).map(function(e,o){Ke.cache.idCSS+=Ke.cache.idStyles[e]}),Ke.outputCSSStylesAfterWait("id",Ke.cache.idCSS)});Ke.functionEnd("updateAllComponentsCacheStyles()")},Ke.removeComponentCacheStyles=function(e){delete Ke.cache.idStyles[e]},Ke.getDynamicBackground=function(e,o){var t;return"id"===e&&Ke.dynamicBackgrounds[o.id]?t=Ke.dynamicBackgrounds[o.id]:"class"===e&&Ke.dynamicBackgrounds.classes[o.id]?t=Ke.dynamicBackgrounds.classes[o.id]:"selector"===e&&Ke.dynamicBackgrounds.selectors[o.id]&&(t=Ke.dynamicBackgrounds.selectors[o.id]),o.media?t.media[o.media]["id"===o.stateName?"original":o.stateName]:t["id"===o.stateName?"original":o.stateName]},Ke.getSingleComponentCSS=function(e,o,t,i){if("ct_reusable"==e.name&&e.original){Ke.reusableCSS={},Ke.reusableCSS.styles="  ";var n=e.original.view_id;return Ke.postsData[n]&&(Ke.generateTreeCSS(Ke.postsData[n].post_tree,Ke.reusableCSS),Ke.outputCSSStyles("ct-re-usable-styles-"+n,Ke.reusableCSS.styles)),""}Ke.log&&(console.log("getSingleComponentCSS()",o,e,t),Ke.functionStart("getSingleComponentCSS()"));var r="",a="",l="",s=Ke.defaultOptions[e.name];for(var c in null==e.original&&(e.original=[]),e)if(e.hasOwnProperty(c)){var d=e[c];if("original"==c&&!t)continue;if(0!=o&&"object"==typeof d&&"model"!=c&&"classes"!=c&&"media"!=c){var g,p,u,_,m,y,b=angular.copy(e[c]),x=Ke.getCSSOptions(o,c,b,e.name);if(mergedOriginalOptions=angular.copy(e.original),originalOptions=Ke.getCSSOptions(o,"original",mergedOriginalOptions,e.name),l="id"==c||t&&"original"==c||c==Ke.currentState&&o==Ke.component.active.id&&Ke.isEditing("id")&&("hover"==c||"active"==c||"focus"==c)?"":":"+c,a="ct_paragraph"==e.name?" p":"","ct_columns"==e.name){var f=Ke.getWidth(e.original.gutter);r+="#"+e.selector+" .ct-column"+l+"{",r+="margin-right:"+f.value/2+f.unit+";",r+="margin-left:"+f.value/2+f.unit+";",r+="}"}if("true"==e.original.dont_render&&(r+="#"+e.selector+"{",e.original["placeholder-width"]&&(r+="width:"+e.original["placeholder-width"]+(e.original["placeholder-width-unit"]||s["placeholder-width-unit"])+";"),e.original["placeholder-height"]&&(r+="height:"+e.original["placeholder-height"]+(e.original["placeholder-height-unit"]||s["placeholder-height-unit"])+";"),r+="}"),"ct_section"==e.name){r+="#"+e.selector+">.ct-section-inner-wrap"+l+"{",null==x["section-width"]&&(x["section-width"]=s["section-width"]),x["section-width"],"custom"==x["section-width"]&&x["custom-width"]&&(r+="max-width:"+x["custom-width"]+";"),"full-width"==x["section-width"]&&(r+="max-width:100%;"),x["container-padding-top"]&&(r+="padding-top:"+x["container-padding-top"]+";"),x["container-padding-right"]&&(r+="padding-right:"+x["container-padding-right"]+";"),x["container-padding-bottom"]&&(r+="padding-bottom:"+x["container-padding-bottom"]+";"),x["container-padding-left"]&&(r+="padding-left:"+x["container-padding-left"]+";"),x.display&&(r+="display:"+x.display+";");var h="reverse"==x["flex-reverse"]?"-reverse":"";x["flex-direction"]&&(r+="flex-direction:"+x["flex-direction"]+h+";"),x["justify-content"]&&(r+="justify-content:"+x["justify-content"]+";"),x["align-content"]&&(r+="align-content:"+x["align-content"]+";"),x["align-items"]&&(r+="align-items:"+x["align-items"]+";"),x["flex-wrap"]&&(r+="flex-wrap:"+x["flex-wrap"]+";"),r+="}",e.original.video_background_hide&&(r+="@media (max-width: "+Ke.getMediaMaxSize(e.original.video_background_hide)+") {",r+="#"+e.selector+" .oxy-video-container { display: none; }",r+="}"),e.original.video_background_overlay&&(r+="#"+e.selector+" .oxy-video-overlay { background-color: "+e.original.video_background_overlay+"; }")}if("oxy_posts_grid"==e.name&&(Ke.mapCSSProperty("title_size","font-size",".oxy-post-title"),Ke.mapCSSProperty("title_color","color",".oxy-post-title"),Ke.mapCSSProperty("title_hover_color","color",".oxy-post-title:hover"),Ke.mapCSSProperty("meta_size","font-size",".oxy-post-meta"),Ke.mapCSSProperty("meta_color","color",".oxy-post-meta"),Ke.mapCSSProperty("content_size","font-size",".oxy-post-content"),Ke.mapCSSProperty("content_color","color",".oxy-post-content"),Ke.mapCSSProperty("read_more_size","font-size",".oxy-read-more"),Ke.mapCSSProperty("read_more_text_color","color",".oxy-read-more"),Ke.mapCSSProperty("read_more_button_color","background-color",".oxy-read-more"),Ke.mapCSSProperty("read_more_text_hover_color","color",".oxy-read-more:hover"),Ke.mapCSSProperty("read_more_button_hover_color","background-color",".oxy-read-more:hover"),Ke.mapCSSProperty("paginate_color","color",".oxy-easy-posts-pages"),Ke.mapCSSProperty("paginate_alignment","text-align",".oxy-easy-posts-pages"),Ke.mapCSSProperty("paginate_link_color","color",".oxy-easy-posts-pages a.page-numbers"),Ke.mapCSSProperty("paginate_link_hover_color","color",".oxy-easy-posts-pages a.page-numbers:hover"),"button"==e.original.read_more_display_as?(r+="#"+e.selector+" .oxy-read-more {",r+="text-decoration:none;",r+="padding:0.75em 1.5em;",r+="line-height:1;",r+="border-radius:3px;",r+="display:inline-block;",r+="}"):(Ke.unmapCSSProperty("background-color",".oxy-read-more"),Ke.unmapCSSProperty("background-color",".oxy-read-more:hover")),r+="@media (max-width: "+Ke.getMediaMaxSize(e.original.posts_5050_below)+") {",r+="#"+e.selector+" .oxy-post { width: 50% !important; }",r+="}",r+="@media (max-width: "+Ke.getMediaMaxSize(e.original.posts_100_below)+") {",r+="#"+e.selector+" .oxy-post { width: 100% !important; }",r+="}"),"oxy_comment_form"==e.name&&(Ke.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Ke.mapCSSProperty("form_field_text_color","color","input, textarea"),Ke.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Ke.mapCSSProperty("submit_button_background_color","background-color","#submit"),Ke.mapCSSProperty("submit_button_text_color","color","#submit")),"oxy_login_form"==e.name&&(Ke.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Ke.mapCSSProperty("form_field_text_color","color","input, textarea"),Ke.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Ke.mapCSSProperty("submit_button_background_color","background-color","input[type=submit]"),Ke.mapCSSProperty("submit_button_text_color","color","input[type=submit]")),"oxy_search_form"==e.name&&(Ke.mapCSSProperty("form_field_border_color","border-color","input, textarea"),Ke.mapCSSProperty("form_field_text_color","color","input, textarea"),Ke.mapCSSProperty("field_border_radius","border-radius","input, textarea"),Ke.mapCSSProperty("submit_button_background_color","background-color","input[type=submit]"),Ke.mapCSSProperty("submit_button_text_color","color","input[type=submit]")),"ct_video"==e.name){r=r+"#"+e.selector+">.oxygen-vsb-responsive-video-wrapper"+l+"{";var S=e.original["video-padding-bottom"]||s["video-padding-bottom"];S&&(r+="padding-bottom:"+S+";"),r+="}"}if("ct_new_columns"==e.name&&e.original["set-columns-width-50"]&&"never"!=e.original["set-columns-width-50"]&&(r+="@media (max-width: "+Ke.getMediaMaxSize(e.original["set-columns-width-50"])+") {",r+="#"+e.selector+"> .ct-div-block {width: 50% !important;}",r+="}"),"ct_new_columns"==e.name){var v=parseInt(Ke.getMediaMaxSize(e.original["reverse-column-order"]))||0,w=parseInt(Ke.getMediaMaxSize(e.original["stack-columns-vertically"]))||0,C="",k="";"always"==e.original["reverse-column-order"]&&(v=9999999999),e.original["stack-columns-vertically"]&&"never"!=e.original["stack-columns-vertically"]&&(k+="@media (max-width: "+Ke.getMediaMaxSize(e.original["stack-columns-vertically"])+") {",k+="#"+e.selector+"> .ct-div-block {",k+="width: 100% !important;",k+="}",k+="#"+e.selector+"{",k+=v<w?"flex-direction: column;":"flex-direction: column-reverse;",k+="}",k+="}"),void 0===e.original["stack-columns-vertically"]&&(r+="@media (max-width: "+Ke.getMediaMaxSize(s["stack-columns-vertically"])+") {",r+="#"+e.selector+"> .ct-div-block {width: 100% !important;}",r+="}"),e.original["reverse-column-order"]&&"never"!=e.original["reverse-column-order"]&&"always"!=e.original["reverse-column-order"]&&(C+="@media (max-width: "+Ke.getMediaMaxSize(e.original["reverse-column-order"])+") {",C+="#"+e.selector+"{",C+=w<v?"flex-direction: row-reverse;":"flex-direction: column-reverse;",C+="}",C+="}"),"always"==e.original["reverse-column-order"]&&(r+="#"+e.selector+"{flex-direction: row-reverse;}"),w<v?(r+=C,r+=k):(r+=k,r+=C)}if("oxy_header"==e.name){r+="#"+e.selector+" .oxy-header-container"+l+"{",null==x["header-width"]&&(x["header-width"]=s["header-width"]),"custom"==x["header-width"]&&x["header-custom-width"]&&(r+="max-width:"+x["header-custom-width"]+";"),"full-width"==x["header-width"]&&(r+="max-width:100%;"),r+="}",e.original["overlay-header-above"]&&"never"!=e.original["overlay-header-above"]&&("always"!=e.original["overlay-header-above"]&&(r+="@media (min-width: "+Ke.getMediaMinSize(e.original["overlay-header-above"])+") {"),r+="#"+e.selector+".oxy-header.oxy-overlay-header {position: absolute;left: 0;right: 0;z-index: 20;}#"+e.selector+".oxy-header.oxy-overlay-header:not(.oxy-sticky-header-active) .oxy-header-row,#"+e.selector+".oxy-header.oxy-overlay-header:not(.oxy-sticky-header-active){background-color: initial !important;}#"+e.selector+".oxy-header.oxy-overlay-header .oxygen-hide-in-overlay{display: none}#"+e.selector+".oxy-header.oxy-overlay-header .oxygen-only-show-in-overlay{display: block}","always"!=e.original["overlay-header-above"]&&(r+="}"));var O="";if(e.original["sticky-media"]&&"never"!=e.original["sticky-media"])"always"!=e.original["sticky-media"]&&(O+="@media (min-width: "+Ke.getMediaMinSize(e.original["sticky-media"])+") {"),O+="#"+e.selector+".oxy-header-wrapper.oxy-header.oxy-sticky-header.oxy-sticky-header-active {",O+="position: fixed; top: 0; left: 0; right: 0; z-index: "+(e.original.sticky_zindex||"2147483640")+";",O+=e.original["sticky-background-color"]?"background-color:"+Ke.getGlobalColorValue(e.original["sticky-background-color"])+";":"",O+="box-shadow:"+(e.original["sticky-box-shadow"]||s["sticky-box-shadow"])+";",O+="}",O+="#"+e.selector+".oxy-header.oxy-sticky-header-active .oxygen-hide-in-sticky {",O+="display:none;",O+="}",O+="#"+e.selector+".oxy-header.oxy-header .oxygen-show-in-sticky-only {",O+="display: none;",O+="}","always"!=e.original["sticky-media"]&&(O+="}");O&&(r+=O),e.original.sticky_header_fade_in_speed&&(r+="#"+e.selector+".oxy-sticky-header-active {animation-duration: "+e.original.sticky_header_fade_in_speed+"s;}")}if("oxy_header"==e.name||"oxy_header_row"==e.name){var z="";e.original["stack-header-vertically"]&&"never"!=e.original["stack-header-vertically"]&&(z+="@media (max-width: "+Ke.getMediaMaxSize(e.original["stack-header-vertically"])+") {",z+="#"+e.selector+" .oxy-header-container {",z+="flex-direction: column;",z+="}",z+="#"+e.selector+" .oxy-header-container > div{",z+="justify-content: center;",z+="}",z+="}"),z&&(r+=z)}if("oxy_header_row"==e.name){r+="#"+e.selector+".oxy-header-row .oxy-header-container"+l+"{",null==x["header-row-width"]&&(x["header-row-width"]=s["header-row-width"]),"custom"==x["header-row-width"]&&x["header-row-custom-width"]&&(r+="max-width:"+x["header-row-custom-width"]+";"),"full-width"==x["header-row-width"]&&(r+="max-width:100%;"),"page-width"==x["header-row-width"]&&(r+="max-width:"+Ke.getPageWidth()+"px;"),r+="}";var T="",G="";e.original["hide-row"]&&"never"!=e.original["hide-row"]&&(T+="@media (max-width: "+Ke.getMediaMaxSize(e.original["hide-row"])+") {",T+="#"+e.selector+" {",T+="display: none;",T+="}",T+="}"),T&&(r+=T);var M=x.display||"block";G+=".oxy-header.oxy-sticky-header-active > #"+e.selector+".oxygen-show-in-sticky-only {",G+="display: "+M+";",r+=G+="}"}if("ct_slider"==e.name&&(t||"id"!=c||(x["slider-arrow-color"]&&"lighter"==x["slider-arrow-color"]&&(r+="#"+e.selector+" .unslider-arrow {",r+="background-color: rgba(255,255,255,0.2); ",r+="}"),x["slider-dot-color"]&&(r+="#"+e.selector+" .unslider-nav ol li {",r+="border-color: "+Ke.getGlobalColorValue(x["slider-dot-color"])+"; ",r+="}",r+="#"+e.selector+" .unslider-nav ol li.unslider-active {",r+="background-color: "+Ke.getGlobalColorValue(x["slider-dot-color"])+"; ",r+="}"),x["slider-remove-padding"]&&"yes"==x["slider-remove-padding"]&&(r+="#"+e.selector+" .unslider {",r+="padding: 0px; ",r+="}",r+="#"+e.selector+" .unslider-wrap.unslider-carousel > li {",r+="padding: 0px; ",r+="}",r+="#"+e.selector+" .unslider-arrow.next {",r+="right: 10px; ",r+="z-index: 100; ",r+="}",r+="#"+e.selector+" .unslider-arrow.prev {",r+="left: 10px; ",r+="z-index: 100; ",r+="}"),x["slider-dots-overlay"]&&"yes"==x["slider-dots-overlay"]&&(r+="#"+e.selector+" .unslider .unslider-nav {",r+="position: absolute; bottom: 0; left: 0; right: 0; z-index:100",r+="}"),x["slider-stretch-slides"]&&"yes"==x["slider-stretch-slides"]&&(r+="#"+e.selector+" .unslider-wrap {",r+="display: flex;",r+="}",r+="#"+e.selector+" .ct-slide {",r+="height: 100%;",r+="}",r+="#"+e.selector+" .unslider,",r+="#"+e.selector+" .oxygen-unslider-container,",r+="#"+e.selector+" .unslider-wrap,",r+="#"+e.selector+" .unslider-wrap li {",r+="height: 100%;",r+="}"),x["slider-stretch-slides"]&&"yes"==x["slider-stretch-slides"]&&x["slider-animation"]&&"fade"==x["slider-animation"]&&(r+="#"+e.selector+" .unslider-fade ul li.unslider-active {",r+="width: 100%;",r+="}"),x["slider-slide-padding"]&&(r+="#"+e.selector+" .ct-slide {",r+="padding: "+x["slider-slide-padding"],r+="}"))),"ct_link_button"==e.name){if(t||"id"!=c)V=!!Ke.component.options[o]&&Ke.component.options[o].original["button-style"],A=Ke.getGlobalColorValue(x["button-color"]),I=x["button-size"],P=Ke.getGlobalColorValue(x["button-text-color"]);else var V=originalOptions["button-style"]||s["button-style"],A=Ke.getGlobalColorValue(x["button-color"]),I=x["button-size"],P=Ke.getGlobalColorValue(x["button-text-color"]);if(r=r+"#"+e.selector+l+"{",1==V&&A&&(r+="background-color: "+Ke.getGlobalColorValue(A)+";",r+="border: 1px solid "+A+";",P&&(r+="color: "+Ke.getGlobalColorValue(P)+";")),2==V&&(r+="background-color: transparent;",A?(r+="border: 1px solid "+Ke.getGlobalColorValue(A)+";",r+="color: "+Ke.getGlobalColorValue(A)+";"):r+="color: "+Ke.getGlobalColorValue(s["button-color"])+";"),I){var N=2==V?1:0;r+="padding: "+(parseInt(I)-N)+"px "+(1.6*parseInt(I)-N)+"px;"}r+="}"}if("ct_fancy_icon"==e.name){if(t||"id"!=c)E=!!Ke.component.options[o]&&Ke.component.options[o].original["icon-style"],F=Ke.getGlobalColorValue(x["icon-color"]),j=Ke.getGlobalColorValue(x["icon-background-color"]),B=x["icon-padding"],D=x["icon-size"];else var E=originalOptions["icon-style"]||s["icon-style"],F=Ke.getGlobalColorValue(x["icon-color"]),j=Ke.getGlobalColorValue(x["icon-background-color"])||s["icon-background-color"],B=x["icon-padding"]||s["icon-padding"]+s["icon-padding-unit"],D=x["icon-size"];r=r+"#"+e.selector+l+"{",1==E&&(r+="border: 1px solid;"),2==E&&j&&(r+="background-color: "+Ke.getGlobalColorValue(j)+";",r+="border: 1px solid "+Ke.getGlobalColorValue(j)+";"),1!=E&&2!=E||B&&(r+="padding:"+B+";"),F&&(r+="color:"+Ke.getGlobalColorValue(F)+";"),r+="}",D&&(r=r+"#"+e.selector+l+">svg {",r+="width: "+D+";",r+="height: "+D+";",r+="}")}if("oxy_social_icons"==e.name){E=e.original["icon-style"]||s["icon-style"];var X=Ke.getGlobalColorValue(e.original["icon-use-brand-colors"])||s["icon-use-brand-colors"];if(r+="#"+e.selector+".oxy-social-icons {",r+="flex-direction: "+(e.original["icon-layout"]||s["icon-layout"])+";",r+="margin-right: -"+(e.original["icon-space-between-icons"]||s["icon-space-between-icons"])+"px;",r+="margin-bottom: -"+(e.original["icon-space-between-icons"]||s["icon-space-between-icons"])+"px;",r+="}",r+="#"+e.selector+".oxy-social-icons a {",r+="font-size: "+(e.original["icon-size"]||s["icon-size"])+"px; ",r+="margin-right: "+(e.original["icon-space-between-icons"]||s["icon-space-between-icons"])+"px;",r+="margin-bottom: "+(e.original["icon-space-between-icons"]||s["icon-space-between-icons"])+"px;","circle"==E?r+="border-radius: 50%;":"square"==E&&(r+="border-radius: 0%;"),"blank"!=E&&(r+="background-color: "+(Ke.getGlobalColorValue(e.original["icon-background-color"])||s["icon-background-color"])+";"),r+="}",r+="#"+e.selector+".oxy-social-icons a:hover {","blank"!=E&&(r+="background-color: "+(Ke.getGlobalColorValue(e.original["icon-background-hover-color"])||s["icon-background-hover-color"])+";"),r+="}","yes"==X)for(var Y in Ke.socialIcons.networks)if(Ke.socialIcons.networks.hasOwnProperty(Y)){var K=Ke.socialIcons.networks[Y],H=Ke.socialIcons.networkColors[K],U=Ke.socialIcons.networkHoverColors[K];"blank"!=E?(r+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+K+" {",r+="background-color: "+H+";",r+="}",r+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+K+":hover {",r+="background-color: "+U+";",r+="}",e.original["icon-color"]="#ffffff",e.original["icon-hover-color"]="#ffffff"):(r+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+K+" svg {",r+="color: "+H+";",r+="}",r+="#"+e.selector+".oxy-social-icons a.oxy-social-icons-"+K+":hover svg {",r+="color: "+U+";",r+="}")}r+="#"+e.selector+".oxy-social-icons a svg {",r+="blank"!=E?"width: 0.5em; height: 0.5em;":"width: 1em; height: 1em;",r+="color: "+(Ke.getGlobalColorValue(e.original["icon-color"])||s["icon-color"])+"; ",r+="}",r+="#"+e.selector+".oxy-social-icons a:hover svg {",r+="color: "+(Ke.getGlobalColorValue(e.original["icon-hover-color"])||s["icon-hover-color"])+"; ",r+="}"}if("oxy_testimonial"==e.name){var W,L,$,Z,Q,q="",R=x.testimonial_image_spacing;if("vertical"==x.testimonial_layout?(q="margin:0;",R=x.testimonial_image_spacing||s.testimonial_image_spacing+s["testimonial_image_spacing-unit"],"bottom"==x.testimonial_image_position?q+="margin-top":q+="margin-bottom"):"bottom"==x.testimonial_image_position?(q="margin:0;",R=x.testimonial_image_spacing||s.testimonial_image_spacing+s["testimonial_image_spacing-unit"],q+="margin-left"):q+="margin-right",q+=": "+R+";","left"==x.testimonial_content_alignment?(W="flex-start",L="left"):"center"==x.testimonial_content_alignment?L=W="center":"right"==x.testimonial_content_alignment&&(W="flex-end",L="right"),"left"==e.original.testimonial_mobile_content_alignment?($="flex-start",Z="left"):"center"==e.original.testimonial_mobile_content_alignment?Z=$="center":"right"==e.original.testimonial_mobile_content_alignment&&($="flex-end",Z="right"),"vertical"==x.testimonial_layout?r+="#"+e.selector+" {flex-direction: column;}":"horizontal"==x.testimonial_layout&&(r+="#"+e.selector+" {flex-direction: row;align-items: center;}"),"top"==x.testimonial_image_position?r+="#"+e.selector+" .oxy-testimonial-photo-wrap {order: 1;}":"bottom"==x.testimonial_image_position&&(r+="#"+e.selector+" .oxy-testimonial-photo-wrap {order: 3;}"),r+="#"+e.selector+" .oxy-testimonial-photo {width:"+x.testimonial_image_size+";height:"+x.testimonial_image_size+";"+q+"}",r+="#"+e.selector+" .oxy-testimonial-photo-wrap,#"+e.selector+" .oxy-testimonial-author-wrap,#"+e.selector+" .oxy-testimonial-content-wrap {align-items:"+W+";text-align:"+L+";}",r+="#"+e.selector+" .oxy-testimonial-text {margin-bottom:"+x.testimonial_text_space_below+";"+Ke.generateTypographyCSS(x,"testimonial_text_typography")+"}",r+="#"+e.selector+" .oxy-testimonial-author {margin-bottom:"+x.testimonial_author_space_below+";"+Ke.generateTypographyCSS(x,"testimonial_author_typography")+"}",r+="#"+e.selector+" .oxy-testimonial-author-info {margin-bottom:"+x.testimonial_author_info_space_below+";"+Ke.generateTypographyCSS(x,"testimonial_author_info_typography")+"}",maxSize=Ke.getMediaMaxSize(e.original.testimonial_vertical_layout_below),maxSize)Q="bottom"==x.testimonial_image_position?"top":"bottom",r+="@media (max-width: "+maxSize+"){#"+e.selector+" {flex-direction: column !important;}#"+e.selector+" .oxy-testimonial-photo {margin: 0;margin-"+Q+":"+x.testimonial_image_spacing+";}#"+e.selector+" .oxy-testimonial-photo-wrap, #"+e.selector+" .oxy-testimonial-author-wrap, #"+e.selector+" .oxy-testimonial-content-wrap {align-items:"+$+";text-align:"+Z+";}}"}if("oxy_icon_box"==e.name){var J,ee,oe,te,ie;if("top"==x.icon_box_icon_position?J="column":"left"==x.icon_box_icon_position?J="row":"right"==x.icon_box_icon_position?J="row-reverse":"bottom"==x.icon_box_icon_position&&(J="column-reverse"),"left"==x.icon_box_icon_position||"right"==x.icon_box_icon_position){var ne=x.icon_box_icon_space_before||s.icon_box_icon_space_before+s["icon_box_icon_space_before-unit"];right=x.icon_box_icon_space_after||s.icon_box_icon_space_after+s["icon_box_icon_space_after-unit"],oe="margin-left: "+ne+";\n",oe+="margin-right: "+right+";\n",oe+="margin-bottom: 0; margin-top: 0;"}else oe="margin-top: "+x.icon_box_icon_space_before+";\n",oe+="margin-bottom: "+x.icon_box_icon_space_after+";\n";"left"==x.icon_box_icon_position||"right"==x.icon_box_icon_position?ee=x.icon_box_icon_vertical_alignment:"left"==x.icon_box_content_alignment?ee="flex-start":"center"==x.icon_box_content_alignment?ee="center":"right"==x.icon_box_content_alignment&&(ee="flex-end"),ie="left"==x.icon_box_mobile_content_alignment?(te="flex-start","left"):"center"==x.icon_box_mobile_content_alignment?te="center":"right"==x.icon_box_mobile_content_alignment?(te="flex-end","right"):(te="flex-start","left"),r+="#"+e.selector+" {text-align: "+x.icon_box_content_alignment+";flex-direction: "+J+";}",r+="#"+e.selector+" .oxy-icon-box-icon {"+oe+"align-self: "+ee+";}",r+="#"+e.selector+" .oxy-icon-box-heading {"+Ke.generateTypographyCSS(x,"icon_box_heading_typography")+"margin-top: "+x.icon_box_heading_space_above+";margin-bottom: "+x.icon_box_heading_space_below+";}",r+="#"+e.selector+" .oxy-icon-box-text {"+Ke.generateTypographyCSS(x,"icon_box_text_typography")+"margin-top: "+x.icon_box_text_space_above+";margin-bottom: "+x.icon_box_text_space_below+";align-self: "+ee+";}",r+="#"+e.selector+" .oxy-icon-box-link {margin-top: "+x.icon_box_link_space_above+";margin-bottom: "+x.icon_box_link_space_below+";}",maxSize=Ke.getMediaMaxSize(x.icon_box_vertical_layout_below),maxSize&&!t&&(r+="@media (max-width: "+maxSize+"){#"+e.selector+".oxy-icon-box {flex-direction: column !important;text-align: "+ie+";}#"+e.selector+" .oxy-icon-box-icon {margin-left: 0;margin-right: 0;margin-top: "+x.icon_box_icon_space_before+";margin-bottom: "+x.icon_box_icon_space_after+";}#"+e.selector+" .oxy-icon-box-icon, .oxy-icon-box-text {align-self: "+te+";}}")}if("oxy_pricing_box"==e.name)"vertical"==x.pricing_box_price_layout?(p="column","left"==x.pricing_box_price_alignment?g="flex-start":"center"==x.pricing_box_price_alignment?g="center":"right"==x.pricing_box_price_alignment&&(g="flex-end")):"horizontal"==x.pricing_box_price_layout&&(p="row"),"horizontal"==x.pricing_box_price_layout&&("left"==x.pricing_box_price_alignment?u="flex-start":"center"==x.pricing_box_price_alignment?u="center":"right"==x.pricing_box_price_alignment&&(u="flex-end")),"left"==x.pricing_box_global_alignment?_="flex-start":"center"==x.pricing_box_global_alignment?_="center":"right"==x.pricing_box_global_alignment&&(_="flex-end"),"left"==x.pricing_box_graphic_alignment?m="flex-start":"center"==x.pricing_box_graphic_alignment?m="center":"right"==x.pricing_box_graphic_alignment?m="flex-end":_&&(iamge_justify_content=_),"left"==x.pricing_box_cta_alignment?y="flex-start":"center"==x.pricing_box_cta_alignment?y="center":"right"==x.pricing_box_cta_alignment?y="flex-end":_&&(y=_),r+="#"+e.selector+" .oxy-pricing-box-section {"+Ke.generateArrayOptionsCSS(x,"pricing_box_global")+"text-align:"+x.pricing_box_global_alignment+";}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-price {justify-content:"+_+";}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-graphic {"+Ke.generateArrayOptionsCSS(x,"pricing_box_graphic")+"background-color:"+Ke.getGlobalColorValue(x.pricing_box_graphic_background)+";text-align:"+x.pricing_box_graphic_alignment+";justify-content:"+m+";}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-title {"+Ke.generateArrayOptionsCSS(x,"pricing_box_title")+"text-align:"+x.pricing_box_title_alignment+";background-color:"+Ke.getGlobalColorValue(x.pricing_box_title_background)+";}",r+="#"+e.selector+" .oxy-pricing-box-title-title {"+Ke.generateTypographyCSS(x,"pricing_box_title_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-title-subtitle {"+Ke.generateTypographyCSS(x,"pricing_box_subtitle_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-price {"+Ke.generateArrayOptionsCSS(x,"pricing_box_price")+"text-align:"+x.pricing_box_price_alignment+";background-color:"+Ke.getGlobalColorValue(x.pricing_box_price_background)+";flex-direction:"+p+";justify-content:"+u+";align-items:"+g+";}",r+="#"+e.selector+" .oxy-pricing-box-currency {"+Ke.generateTypographyCSS(x,"pricing_box_price_amount_currency_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-amount-main {"+Ke.generateTypographyCSS(x,"pricing_box_price_amount_main_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-amount-decimal {"+Ke.generateTypographyCSS(x,"pricing_box_price_amount_decimal_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-term {"+Ke.generateTypographyCSS(x,"pricing_box_price_amount_term_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-sale-price {"+Ke.generateTypographyCSS(x,"pricing_box_price_sale_typography")+"margin-bottom:"+x.pricing_box_price_sale_space_below+";}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-content {"+Ke.generateArrayOptionsCSS(x,"pricing_box_content")+"background-color:"+Ke.getGlobalColorValue(x.pricing_box_content_background)+";text-align:"+x.pricing_box_content_alignment+";"+Ke.generateTypographyCSS(x,"pricing_box_content_typography")+"}",r+="#"+e.selector+" .oxy-pricing-box-section.oxy-pricing-box-cta {"+Ke.generateArrayOptionsCSS(x,"pricing_box_cta")+"background-color:"+Ke.getGlobalColorValue(x.pricing_box_cta_background)+";text-align:"+x.pricing_box_cta_alignment+";justify-content:"+y+";}";if("oxy_progress_bar"==e.name){var re="",ae=[];if("true"==x.progress_bar_stripes&&(re="background-image: linear-gradient(-45deg,rgba(255,255,255,.12) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.12) 50%,rgba(255,255,255,.12) 75%,transparent 75%,transparent);"),"false"==x.progress_bar_stripes&&(re="background-image:none;"),"true"==x.progress_bar_animation_stripes){var le=x.progress_bar_animation_stripes_duration||s.progress_bar_animation_stripes_duration;ae.stripes="oxy_progress_bar_stripes "+le+" linear infinite"}if("false"==x.progress_bar_animation_stripes&&(ae.stripes="none 0s paused"),"true"==x.progress_bar_animate_width){var se=x.progress_bar_animation_width_duration||s.progress_bar_animation_width_duration;ae.width="oxy_progress_bar_width "+se+" ease-out 1"}"false"==x.progress_bar_animate_width&&(ae.width="none 0s paused");var ce=[];for(var Y in ae)ce.push(ae[Y]);r+="#"+e.selector+l+" .oxy-progress-bar-background {background-color:"+Ke.getGlobalColorValue(x.progress_bar_background_color)+";"+re,ae.stripes&&(r+="animation:"+ae.stripes+";"),r+="}",r+="#"+e.selector+l+" .oxy-progress-bar-progress-wrap {width:"+x.progress_bar_progress+";}",r+="#"+e.selector+l+" .oxy-progress-bar-progress {background-color:"+Ke.getGlobalColorValue(x.progress_bar_bar_color)+";padding:"+x.progress_bar_bar_padding+";"+re+"animation:"+ce.join()+";}",r+="#"+e.selector+l+" .oxy-progress-bar-overlay-text {"+Ke.generateTypographyCSS(x,"progress_bar_left_text_typography")+"}",r+="#"+e.selector+l+" .oxy-progress-bar-overlay-percent {"+Ke.generateTypographyCSS(x,"progress_bar_right_text_typography")+"}"}if("oxy_toggle"==e.name&&(r+="#"+e.selector+l+" .oxy-expand-collapse-icon {font-size:"+x.toggle_icon_size+";}",r+="#"+e.selector+l+" .oxy-expand-collapse-icon::before,#"+e.selector+l+" .oxy-expand-collapse-icon::after {background-color:"+Ke.getGlobalColorValue(x.toggle_icon_color)+";}"),"oxy_superbox"==e.name){var de,ge,pe,ue,_e,me=x.superbox_secondary_scale_start,ye=x.superbox_secondary_scale_finish,be=x.superbox_primary_scale_start,xe=x.superbox_primary_scale_finish,fe="",he="",Se="",ve="",we=":hover";"as_hovered"==e.original.superbox_editing_mode&&(we=""),void 0!==me&&(ge="transform: scale("+me+");"),void 0!==ye&&(pe="transform: scale("+ye+");"),void 0!==be&&(ue="transform: scale("+be+");"),void 0!==xe&&(_e="transform: scale("+xe+");"),x.superbox_secondary_slide_direction&&(de=Ke.slide_position(x.superbox_secondary_slide_direction,(x.superbox_secondary_slide_distance||"")+"px"),"in"==x.superbox_secondary_slide_inorout?(fe=de.out_css,he=de.in_css):"out"==x.superbox_secondary_slide_inorout&&(fe=de.in_css,he=de.out_css)),x.superbox_primary_slide_direction&&(de=Ke.slide_position(x.superbox_primary_slide_direction,(x.superbox_primary_slide_distance||"")+"px"),"in"==x.superbox_primary_slide_inorout?(Se=de.out_css,ve=de.in_css):"out"==x.superbox_primary_slide_inorout&&(Se=de.in_css,ve=de.out_css));var Ce=x.superbox_transition_duration;r+="#"+e.selector+" .oxy-superbox-secondary, #"+e.selector+" .oxy-superbox-primary {transition-duration:"+Ce+";}",r+="#"+e.selector+" .oxy-superbox-secondary {opacity:"+x.superbox_secondary_opacity_start+";"+fe+ge+"}","as_not_hovered"!==e.original.superbox_editing_mode&&(r+="#"+e.selector+we+" .oxy-superbox-secondary {opacity:"+x.superbox_secondary_opacity_finish+";z-index: 2147483642;"+he+pe+"}"),r+="#"+e.selector+" .oxy-superbox-primary {opacity:"+x.superbox_primary_opacity_start+";"+Se+ue+"}","as_not_hovered"!==e.original.superbox_editing_mode&&(r+="#"+e.selector+we+" .oxy-superbox-primary {opacity:"+x.superbox_primary_opacity_finish+";"+ve+_e+"}")}if("oxy_nav_menu"==e.name){oxyNavMenuStyle="#"+e.selector+" .oxy-nav-menu-list"+l+"{",oxyNavMenuStyleItem="#"+e.selector+" .menu-item"+l+" a {",oxyNavMenuStyleActive="#"+e.selector+" .current-menu-item a"+l+"{",oxyNavMenuStyleDropdowns="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu"+l+"{",oxyNavMenuStyleDropdownsItem="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu .menu-item a"+l+"{",oxyNavMenuStyleNotOpenItem="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .menu-item a"+l+"{",oxyNavMenuStyleDropdownsItemHover="#"+e.selector+".oxy-nav-menu:not(.oxy-nav-menu-open) .oxy-nav-menu-list .sub-menu .menu-item a:hover{",e.original["menu_dropdowns_background-color"]||(oxyNavMenuStyleDropdowns+="background-color:"+Ke.getGlobalColorValue(e.original["menu_hover_background-color"])+";"),oxyNavMenuStyleDropdownsItem+="border: 0;","row"==e.original["menu_flex-direction"]?(oxyNavMenuStyleDropdownsItem+="padding-top:"+e.original["menu_padding-top"]+"px;",oxyNavMenuStyleDropdownsItem+="padding-bottom:"+e.original["menu_padding-bottom"]+"px;"):(oxyNavMenuStyleDropdownsItem+="padding-left:"+e.original["menu_padding-top"]+"px;",oxyNavMenuStyleDropdownsItem+="padding-rigth:"+e.original["menu_padding-bottom"]+"px;"),e.original["menu_justify-content"]&&(oxyNavMenuStyleNotOpenItem+="justify-content:"+e.original["menu_justify-content"]+";"),"never"!=e.original.menu_responsive&&("always"!=e.original.menu_responsive&&(r+="@media (max-width: "+Ke.getMediaMaxSize(e.original.menu_responsive)+") {"),r+="#"+e.selector+" .oxy-nav-menu-list {display: none;}",r+="#"+e.selector+" .oxy-menu-toggle {display: initial;}",r+="#"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .oxy-nav-menu-list {display: initial;}","always"!=e.original.menu_responsive&&(r+="}"));var ke=parseInt(e.original.menu_responsive_icon_size||40),Oe=parseInt(e.original.menu_responsive_icon_size||40)+2*parseInt(e.original.menu_responsive_padding_size||0),ze=parseInt(.8*ke),Te=parseInt(.15*ke),Ge=ze/2-Te/2;t||"id"!=c||(r+="#"+e.selector+".oxy-nav-menu.oxy-nav-menu-open {background-color:"+Ke.getGlobalColorValue(e.original.menu_responsive_background_color)+";margin-top: 0 !important;margin-right: 0 !important;margin-left: 0 !important;margin-bottom: 0 !important;} #"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .menu-item a {color:"+Ke.getGlobalColorValue(e.original.menu_responsive_link_color)+";padding-top:"+(e.original.menu_responsive_padding_top||e.original["menu_padding-top"])+"px;padding-right:"+(e.original.menu_responsive_padding_right||e.original["menu_padding-right"])+"px;padding-bottom:"+(e.original.menu_responsive_padding_bottom||e.original["menu_padding-bottom"])+"px;padding-left:"+(e.original.menu_responsive_padding_left||e.original["menu_padding-left"])+"px;} #"+e.selector+".oxy-nav-menu.oxy-nav-menu-open .menu-item a:hover {color:"+Ke.getGlobalColorValue(e.original.menu_responsive_hover_link_color)+"} #"+e.selector+".oxy-nav-menu .menu-item a:hover {text-decoration:"+e.original["menu_text-decoration"]+"} #"+e.selector+" .oxy-nav-menu-hamburger-wrap {width:"+Oe+"px;height:"+Oe+"px;margin-top:"+e.original.menu_responsive_icon_margin+"px;margin-bottom:"+e.original.menu_responsive_icon_margin+"px;background-color:"+Ke.getGlobalColorValue(e.original.menu_responsive_padding_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger-wrap:hover {background-color:"+Ke.getGlobalColorValue(e.original.menu_responsive_padding_hover_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger {width:"+ke+"px;height:"+ze+"px;} #"+e.selector+" .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line {height:"+Te+"px;background-color:"+Ke.getGlobalColorValue(e.original.menu_responsive_icon_color)+";} #"+e.selector+" .oxy-nav-menu-hamburger-wrap:hover  .oxy-nav-menu-hamburger-line {background-color:"+Ke.getGlobalColorValue(e.original.menu_responsive_icon_hover_color)+";} #"+e.selector+".oxy-nav-menu-open .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line:first-child {top:"+Ge+"px;} #"+e.selector+".oxy-nav-menu-open .oxy-nav-menu-hamburger .oxy-nav-menu-hamburger-line:last-child {top:-"+Ge+"px;}",r+="#"+e.selector+" .menu-item > .sub-menu {transition-duration:"+e.original["menu_transition-duration"]+"s; }")}if("oxy_nav_menu"==e.name&&e.original.menu_color&&(r+="#"+e.selector+" .oxy-nav-menu-hamburger-line{",r+="background-color:"+Ke.getGlobalColorValue(e.original.menu_color)+";",r+="}"),"oxy_header"!=e.name&&"oxy_header_row"!=e.name||!e.original["background-color"]||(r+="#"+e.selector+" .oxy-nav-menu-open,",r+="#"+e.selector+" .oxy-nav-menu:not(.oxy-nav-menu-open) .sub-menu{",r+="background-color:"+Ke.getGlobalColorValue(e.original["background-color"])+";",r+="}"),x["box-shadow-color"]){var Me="inset"==x["box-shadow-inset"]?x["box-shadow-inset"]+" ":"",Ve=x["box-shadow-horizontal-offset"]?x["box-shadow-horizontal-offset"]+"px ":"",Ae=x["box-shadow-vertical-offset"]?x["box-shadow-vertical-offset"]+"px ":"",Ie=x["box-shadow-blur"]?x["box-shadow-blur"]+"px ":"0px ",Pe=x["box-shadow-spread"]?x["box-shadow-spread"]+"px ":"";x["box-shadow"]=Me+Ve+Ae+Ie+Pe+Ke.getGlobalColorValue(x["box-shadow-color"])}if(x["text-shadow-color"]){Ve=x["text-shadow-horizontal-offset"]?x["text-shadow-horizontal-offset"]+"px ":"",Ae=x["text-shadow-vertical-offset"]?x["text-shadow-vertical-offset"]+"px ":"",Ie=x["text-shadow-blur"]?x["text-shadow-blur"]+"px ":"0px ";x["text-shadow"]=Ve+Ae+Ie+Ke.getGlobalColorValue(x["text-shadow-color"])}if(r+="#"+e.selector+a+l+"{",Ke.component.options[o]&&Ke.component.options[o].selector!==e.selector&&!e.original);else if("object"==typeof x)for(var Ne in r+=Ke.getBackgroundLayersCSS(x,e.name,"id",o,i,c)||"",r+=Ke.getTransformCSS(x)||"",x)if(!(0<=Ne.indexOf("hover_"))&&!(0<=Ne.indexOf("responsive"))&&!(0<=Ne.indexOf("slider"))&&!(0<=Ne.indexOf("icon"))&&!(0<=Ne.indexOf("soundcloud"))&&"background-size"!=Ne&&"background"!=Ne&&x.hasOwnProperty(Ne)){var Ee=x[Ne];if("custom-css"==Ne)continue;if("ct_fancy_icon"==e.name&&("background"==Ne||"icon-background-color"==Ne||"icon-color"==Ne||"padding"==Ne||"icon-size"==Ne))continue;if(0<=["display","flex-direction","flex-wrap","align-items","align-content","justify-content"].indexOf(Ne)&&"ct_section"==e.name)continue;if(("font-family"==Ne||-1<Ne.indexOf("font-family"))&&(Ke.loadWebFont(Ee),-1===Ee.indexOf(",")&&"inherit"!==Ee.toLowerCase()&&(Ee="'"+Ee+"'")),Ee=Ke.getGlobalColorValue(Ee),"content"==Ne.trim().toLowerCase()&&(Ee='"'+Ee.replace('"','\\"')+'"',Ke.contentAdded["#"+e.selector+a+l]=!0),"flex-direction"==Ne){r+=Ne+":"+Ee+(h="reverse"==x["flex-reverse"]?"-reverse":"")+";";continue}if("filter"==Ne&&x["filter-amount-"+Ee])Ee+="("+x["filter-amount-"+Ee]+")";else if("filter"==Ne)continue;if("oxy_nav_menu"==e.name&&0===Ne.indexOf("menu_dropdowns_"))"menu_dropdowns_background-color"==Ne&&"hover"!==c?oxyNavMenuStyleDropdowns+=Ne.replace("menu_dropdowns_","")+":"+Ee+";":Ee&&Ke.excludeProperties.indexOf(Ne)<0&&Ne&&(oxyNavMenuStyleDropdownsItem+=Ne.replace("menu_dropdowns_","")+":"+Ee+";"),0==Ne.indexOf("menu_dropdowns_padding")&&(oxyNavMenuStyleDropdownsItemHover+=Ne.replace("menu_dropdowns_","")+":"+Ee+";");else if("oxy_nav_menu"==e.name&&0===Ne.indexOf("menu_active_")){if("menu_active_border-bottom-width"==Ne&&void 0!==e.original["menu_padding-bottom"])je=0<(je=parseInt(e.original["menu_padding-bottom"])-parseInt(x["menu_active_border-bottom-width"]))?je:0,oxyNavMenuStyleActive+="padding-bottom:"+je+"px;";if("menu_active_border-top-width"==Ne&&void 0!==e.original["menu_padding-top"])je=0<(je=parseInt(e.original["menu_padding-top"])-parseInt(x["menu_active_border-top-width"]))?je:0,oxyNavMenuStyleActive+="padding-top:"+je+"px;";Ee&&Ke.excludeProperties.indexOf(Ne)<0&&Ne&&(oxyNavMenuStyleActive+=Ne.replace("menu_active_","")+":"+Ee+";")}else if("oxy_nav_menu"==e.name&&0===Ne.indexOf("menu_")){if("menu_flex-direction"==Ne){oxyNavMenuStyle+="flex-direction:"+Ee;continue}if("menu_justify-content"==Ne||"menu_dropdown_arrow"==Ne)continue;if("menu_border-bottom-width"==Ne&&"hover"==c&&void 0!==e.original["menu_padding-bottom"]){if(je=0<(je=parseInt(e.original["menu_padding-bottom"])-parseInt(x["menu_border-bottom-width"]))?je:0,"row"==e.original["menu_flex-direction"])var Fe="padding-bottom:";else{Fe="padding-right:";Ne="border-right-width"}oxyNavMenuStyleItem+=Fe+je+"px;"}if("menu_border-top-width"==Ne&&"hover"==c&&void 0!==e.original["menu_padding-top"]){var je;if(je=0<(je=parseInt(e.original["menu_padding-top"])-parseInt(x["menu_border-top-width"]))?je:0,"row"==e.original["menu_flex-direction"])Fe="padding-top:";else{Fe="padding-left:";Ne="border-left-width"}oxyNavMenuStyleItem+=Fe+je+"px;"}"menu_-webkit-font-smoothing"==Ne&&(oxyNavMenuStyleItem+="-moz-osx-font-smoothing:"+("antialiased"===Ee?"greyscale":"unset")+";"),"menu_transition-duration"==Ne&&(Ee+="s"),Ee&&Ke.excludeProperties.indexOf(Ne)<0&&Ne&&(oxyNavMenuStyleItem+=Ne.replace("menu_","")+":"+Ee+";")}else{if("background-image"==Ne)continue;Ee&&Ke.excludeProperties.indexOf(Ne)<0&&"background-layers"!==Ne&&(void 0===Ke.notCSSOptions[e.name]||Ke.notCSSOptions[e.name].indexOf(Ne)<0)&&(r+=Ne+":"+Ee+";"),"-webkit-font-smoothing"==Ne&&(r+="-moz-osx-font-smoothing:"+("antialiased"===Ee?"greyscale":"unset")+";")}}"before"!=c&&"after"!=c||Ke.contentAdded["#"+e.selector+a+l]||(r+='content:"";',Ke.contentAdded["#"+e.selector+a+l]=!0),x["custom-css"]&&(r+=Ke.replaceGlobalColors(x["custom-css"])),r+="}","oxy_nav_menu"==e.name&&(r+=oxyNavMenuStyle+"}"+oxyNavMenuStyleItem+"}"+oxyNavMenuStyleActive+"}"+oxyNavMenuStyleDropdowns+"}"+oxyNavMenuStyleNotOpenItem+"}"+oxyNavMenuStyleDropdownsItem+"}"+oxyNavMenuStyleDropdownsItemHover+"}")}}if(r+=Ke.getMappedCSS(e.selector,e.original),e.media){var Be=angular.copy(e.media),De=Ke.sortedMediaList();for(var Xe in De){var Ye=De[Xe];Be[Ye]&&(Be[Ye].name=e.name,Be[Ye].selector=e.selector,r+="@media (max-width: "+Ke.mediaList[Ye].maxSize+") {",r+=Ke.getSingleComponentCSS(Be[Ye],o,!0,Ye),r+="}")}}return Ke.functionEnd("getSingleComponentCSS()"),r},Ke.getTransformCSS=function(e){if(e.transform){var o=Ke.objectToArrayObject(e.transform),t="";for(var i in o)if(o.hasOwnProperty(i)){var n=o[i];"skew"==n["transform-type"]&&(n.skewX&&n.skewY?t+=n["transform-type"]+"("+n.skewX+"deg,"+n.skewY+"deg)":n.skewX&&(t+=n["transform-type"]+"("+n.skewX+"deg)")),"translate"==n["transform-type"]&&(n.translateX&&n.translateY&&n.translateZ?t+="translate3d("+n.translateX+(n["translateX-unit"]||Ke.defaultOptions.all["translateX-unit"])+","+n.translateY+(n["translateY-unit"]||Ke.defaultOptions.all["translateY-unit"])+","+n.translateZ+(n["translateZ-unit"]||Ke.defaultOptions.all["translateZ-unit"])+")":n.translateX&&n.translateY?t+=n["transform-type"]+"("+n.translateX+(n["translateX-unit"]||Ke.defaultOptions.all["translateX-unit"])+","+n.translateY+(n["translateY-unit"]||Ke.defaultOptions.all["translateY-unit"])+")":n.translateX?t+=n["transform-type"]+"("+n.translateX+(n["translateX-unit"]||Ke.defaultOptions.all["translateX-unit"])+")":n.translateY&&(t+="translateY("+n.translateY+(n["translateY-unit"]||Ke.defaultOptions.all["translateY-unit"])+")")),"rotate"==n["transform-type"]&&n.rotateAngle&&(t+=n["transform-type"]+"("+n.rotateAngle+"deg)"),"rotateX"==n["transform-type"]&&n.rotateXAngle&&(t+=n["transform-type"]+"("+n.rotateXAngle+"deg)"),"rotateY"==n["transform-type"]&&n.rotateYAngle&&(t+=n["transform-type"]+"("+n.rotateYAngle+"deg)"),"perspective"==n["transform-type"]&&n.perspective&&(t+=n["transform-type"]+"("+n.perspective+(n["perspective-unit"]||Ke.defaultOptions.all["perspective-unit"])+")"),"rotate3d"==n["transform-type"]&&n.rotate3dX&&n.rotate3dY&&n.rotate3dZ&&n.rotate3dAngle&&(t+=n["transform-type"]+"("+n.rotate3dX+","+n.rotate3dY+","+n.rotate3dZ+","+n.rotate3dAngle+"deg)"),"scale"==n["transform-type"]&&(n.scaleX&&n.scaleY&&n.scaleZ?t+="scale3d("+n.scaleX+","+n.scaleY+","+n.scaleZ+")":n.scaleX&&n.scaleY?t+=n["transform-type"]+"("+n.scaleX+","+n.scaleY+")":(n.scaleX&&(t+=" scaleX("+n.scaleX+")"),n.scaleY&&(t+=" scaleY("+n.scaleY+")"),n.scaleZ&&(t+=" scaleZ("+n.scaleZ+")"))),i<o.length-1?t+=" ":t+=";"}return""!==t&&(t="transform:"+t),t}},Ke.getBackgroundLayersCSS=function(e,o,t,i,n,r){Ke.getGlobalColorValue(e["background-color"]);var a=[],l=[],s=[];e.gradient&&e.gradient.colors&&(s=e.gradient.colors);var c="";if(s=_.map(s,function(e){return e}),s=_.filter(s,function(e){return e.value}),0<(s=_.map(s,function(e){return e.value=Ke.getGlobalColorValue(e.value),e})).length){if("radial"===e.gradient["gradient-type"]){c+=" radial-gradient(";var d="";e.gradient["radial-shape"]&&(d+=" "+e.gradient["radial-shape"]),e.gradient["radial-size"]&&(d+=" "+e.gradient["radial-size"]),e.gradient["radial-position-left"]&&(d+=" at "+e.gradient["radial-position-left"]+(e.gradient["radial-position-left-unit"]||"px"),e.gradient["radial-position-top"]&&(d+=" "+e.gradient["radial-position-top"]+(e.gradient["radial-position-top-unit"]||"px"))),0<d.length&&(c+=d+", ")}else c+=" linear-gradient(",e.gradient["linear-angle"]&&(c+=e.gradient["linear-angle"]+"deg, ");if(s){var g=_.filter(s,function(e){return e.value&&0<e.value.length}),p=_.map(g,function(e){return e.value+(e.position?" "+e.position+e["position-unit"]:"")});1===p.length&&p.push(p[0]),c+=p.join(", ")}0<(c+=")").length&&(a.push(c),l.push("auto"))}if(e["overlay-color"]&&(a.push("linear-gradient("+Ke.getGlobalColorValue(e["overlay-color"])+", "+Ke.getGlobalColorValue(e["overlay-color"])+")"),l.push("auto")),e["background-size"]&&0<e["background-size"].trim().length?(c="","manual"===e["background-size"]?(e["background-size-width"]&&0<e["background-size-width"].trim().length?c+=" "+e["background-size-width"].trim()+e["background-size-width-unit"].trim():c+=" 0%",e["background-size-height"]&&0<e["background-size-height"].trim().length?c+=" "+e["background-size-height"].trim()+e["background-size-height-unit"].trim():c+=" 0%"):c+=" "+e["background-size"],0<c.length&&l.push(c)):l=[],e.background&&a.push("url("+e.background+")"),e["background-image"]){var u=e["background-image"];-1<u.indexOf("[")&&Ke.dynamicBackgrounds&&(u=Ke.getDynamicBackground(t?"id"===t?"id":"selector":"class",{id:i,media:n,stateName:r})),a.push("url("+u+")")}var m=a.join(", ").trim(),y="";return""!==m&&(y="background-image:"+m+";"),0<l.length&&(y+="background-size:"+l.join(", ")+";"),y},Ke.generateTypographyCSS=function(e,o){var t="";for(var i in e)if(-1<i.indexOf(o)){var n=i.replace(o+"_",""),r=e[i];"color"==n&&(r=Ke.getGlobalColorValue(r)),t+=n+":"+r+";"}return t},Ke.generateArrayOptionsCSS=function(e,o){var t="";for(var i in e)-1<i.indexOf(o)&&(t+=i.replace(o+"_","")+":"+e[i]+";");return t},Ke.getSingleClassCSS=function(e,o){Ke.log&&(console.log("getSingleClassCSS()",e),Ke.functionStart("getSingleClassCSS()")),void 0===o&&(o=Ke.classes[e]),Ke.contentAdded=[];var t=Ke.getSelectorStyles(e,o);if(Ke.classes[e].media){var i=Ke.sortedMediaList(!1,!0);for(var n in i){var r=i[n];if(Ke.classes[e].media[r]){if("page-width"==r)var a=Ke.getPageWidth("global")+"px";else a=Ke.mediaList[r].maxSize;o=Ke.classes[e].media[r],t+="@media (max-width: "+a+") {",t+=Ke.getSelectorStyles(e,o,!1,r),t+="}"}}}return Ke.functionEnd("getSingleClassCSS()"),t},Ke.getSingleSelectorCSS=function(e,o){Ke.log&&(console.log("getSingleSelectorCSS()",e),Ke.functionStart("getSingleSelectorCSS()")),void 0===o&&(o=Ke.customSelectors[e]),Ke.contentAdded=[];var t=Ke.getSelectorStyles(e,o,!0);if(Ke.customSelectors[e].media){var i=Ke.sortedMediaList();for(var n in i){var r=i[n];Ke.customSelectors[e].media[r]&&(o=Ke.customSelectors[e].media[r],t+="@media (max-width: "+Ke.mediaList[r].maxSize+") {",t+=Ke.getSelectorStyles(e,o,!0,r),t+="}")}}return Ke.functionEnd("getSingleSelectorCSS()"),t},Ke.getSelectorStyles=function(e,o,t,i){if(""===e||!t&&void 0===Ke.classes[e]||t&&void 0===Ke.customSelectors[e])return"";var n,r="";for(var a in o)if(o.hasOwnProperty(a)){var l=o[a];if("media"==a||"set_name"==a||"key"==a||"parent"==a||"status"==a||"friendly_name"==a)continue;n=("original"==a||e==Ke.selectorToEdit&&a==Ke.currentState||e==Ke.currentClass&&a==Ke.currentState)&&("original"==a||"hover"==a||"active"==a||"focus"==a)?"":":"+a;var s=Ke.getCSSOptions(null,null,l);if((void 0!==s["icon-style"]||void 0!==s["icon-color"]||void 0!==s["icon-background-color"]||void 0!==s["icon-padding"]||void 0!==s["icon-size"])&&!t){if(i||"original"!=a)c=Ke.classes[e].original["icon-style"]||Ke.defaultOptions.ct_fancy_icon["icon-style"],d=Ke.getGlobalColorValue(s["icon-color"]),g=Ke.getGlobalColorValue(s["icon-background-color"]),p=s["icon-padding"],u=s["icon-size"];else var c=s["icon-style"]||Ke.defaultOptions.ct_fancy_icon["icon-style"],d=Ke.getGlobalColorValue(s["icon-color"])||Ke.defaultOptions.ct_fancy_icon["icon-color"],g=Ke.getGlobalColorValue(s["icon-background-color"])||Ke.defaultOptions.ct_fancy_icon["icon-background-color"],p=s["icon-padding"]||Ke.defaultOptions.ct_fancy_icon["icon-padding"]+Ke.defaultOptions.ct_fancy_icon["icon-padding-unit"],u=s["icon-size"]||Ke.defaultOptions.ct_fancy_icon["icon-size"]+Ke.defaultOptions.ct_fancy_icon["icon-size-unit"];r+="."+e+n+"{",1==c&&(r+="border: 1px solid;"),2==c&&g&&(r+="background-color: "+Ke.getGlobalColorValue(g)+";",r+="border: 1px solid "+Ke.getGlobalColorValue(g)+";"),1!=c&&2!=c||(r+="padding:"+p+";"),d&&(r+="color:"+Ke.getGlobalColorValue(d)+";"),r+="}",u&&(r+="."+e+n+">svg {",r+="width: "+u+";",r+="height: "+u+";",r+="}")}if((void 0!==s["button-style"]||void 0!==s["button-color"]||void 0!==s["button-size"]||void 0!==s["button-text-color"])&&!t){if(i||"original"!=a)_=Ke.classes[e].original["button-style"]||Ke.defaultOptions.ct_link_button["button-style"],m=Ke.getGlobalColorValue(s["button-color"]),y=s["button-size"],b=Ke.getGlobalColorValue(s["button-text-color"]);else var _=s["button-style"]||Ke.defaultOptions.ct_link_button["button-style"],m=Ke.getGlobalColorValue(s["button-color"])||Ke.defaultOptions.ct_link_button["button-color"],y=s["button-size"]||Ke.defaultOptions.ct_link_button["button-size"]+Ke.defaultOptions.ct_link_button["button-size-unit"],b=Ke.getGlobalColorValue(s["button-text-color"])||Ke.defaultOptions.ct_link_button["button-text-color"];if(r+="."+e+n+"{",1==_&&m&&(r+="background-color: "+Ke.getGlobalColorValue(m)+";",r+="border: 1px solid "+Ke.getGlobalColorValue(m)+";",b&&(r+="color: "+Ke.getGlobalColorValue(b)+";")),2==_&&(r+="background-color: transparent;",m&&(r+="border: 1px solid "+Ke.getGlobalColorValue(m)+";",r+="color: "+Ke.getGlobalColorValue(m)+";")),y){var x=2==_?1:0;r+="padding: "+(parseInt(y)-x)+"px "+(1.6*parseInt(y)-x)+"px;"}r+="}"}var f=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("testimonial_")&&(f=!0);if(!t&&f){f=!1;var h,S,v,w,C="",k=s.testimonial_image_spacing;if("vertical"==s.testimonial_layout?(C="margin:0;",k=s.testimonial_image_spacing||Ke.defaultOptions.oxy_testimonial.testimonial_image_spacing+Ke.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"],"bottom"==s.testimonial_image_position?C+="margin-top":C+="margin-bottom"):"bottom"==s.testimonial_image_position?(C="margin:0;",k=s.testimonial_image_spacing||Ke.defaultOptions.oxy_testimonial.testimonial_image_spacing+Ke.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"],C+="margin-left"):C+="margin-right",C+=": "+k+";","left"==s.testimonial_content_alignment?(h="flex-start",S="left"):"center"==s.testimonial_content_alignment?S=h="center":"right"==s.testimonial_content_alignment&&(h="flex-end",S="right"),"left"==Ke.classes[e].original.testimonial_mobile_content_alignment?(v="flex-start",w="left"):"center"==Ke.classes[e].original.testimonial_mobile_content_alignment?w=v="center":"right"==Ke.classes[e].original.testimonial_mobile_content_alignment&&(v="flex-end",w="right"),"vertical"==s.testimonial_layout?r+="."+e+n+" {flex-direction: column;}":"horizontal"==s.testimonial_layout&&(r+="."+e+n+" {flex-direction: row;align-items: center;}"),"top"==s.testimonial_image_position||""==s.testimonial_image_position?r+="."+e+n+" .oxy-testimonial-photo-wrap {order: 1;}":"bottom"==s.testimonial_image_position&&(r+="."+e+n+" .oxy-testimonial-photo-wrap {order: 3;}"),r+="."+e+n+" .oxy-testimonial-photo {width:"+s.testimonial_image_size+";height:"+s.testimonial_image_size+";"+C+"}",r+="."+e+n+" .oxy-testimonial-photo-wrap,."+e+n+" .oxy-testimonial-author-wrap,."+e+n+" .oxy-testimonial-content-wrap {align-items:"+h+";text-align:"+S+";}",r+="."+e+n+" .oxy-testimonial-text {margin-bottom:"+s.testimonial_text_space_below+";"+Ke.generateTypographyCSS(s,"testimonial_text_typography")+"}",r+="."+e+n+" .oxy-testimonial-author {margin-bottom:"+s.testimonial_author_space_below+";"+Ke.generateTypographyCSS(s,"testimonial_author_typography")+"}",r+="."+e+n+" .oxy-testimonial-author-info {margin-bottom:"+s.testimonial_author_info_space_below+";"+Ke.generateTypographyCSS(s,"testimonial_author_info_typography")+"}",I=Ke.getMediaMaxSize(Ke.classes[e].original.testimonial_vertical_layout_below)){var O=s.testimonial_image_spacing;O||(O=Ke.defaultOptions.oxy_testimonial.testimonial_image_spacing+Ke.defaultOptions.oxy_testimonial["testimonial_image_spacing-unit"]),r+="@media (max-width: "+I+"){."+e+n+" {flex-direction: column !important;}."+e+n+" .oxy-testimonial-photo {margin: 0;margin-"+("bottom"==s.testimonial_image_position?"top":"bottom")+":"+O+";}."+e+n+" .oxy-testimonial-photo-wrap, ."+e+n+" .oxy-testimonial-author-wrap, ."+e+n+" .oxy-testimonial-content-wrap {align-items:"+v+";text-align:"+w+";}}"}}var z=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("icon_box_")&&(z=!0);if(!t&&z){var T,G,M,V,A,I;if(z=!1,"top"==s.icon_box_icon_position?T="column":"left"==s.icon_box_icon_position?T="row":"right"==s.icon_box_icon_position?T="row-reverse":"bottom"==s.icon_box_icon_position&&(T="column-reverse"),"left"==s.icon_box_icon_position||"right"==s.icon_box_icon_position){var P=s.icon_box_icon_space_before||Ke.defaultOptions.oxy_icon_box.icon_box_icon_space_before+Ke.defaultOptions.oxy_icon_box["icon_box_icon_space_before-unit"];right=s.icon_box_icon_space_after||Ke.defaultOptions.oxy_icon_box.icon_box_icon_space_after+Ke.defaultOptions.oxy_icon_box["icon_box_icon_space_after-unit"],M="margin-left: "+P+";\n",M+="margin-right: "+right+";\n",M+="margin-bottom: 0; margin-top: 0;"}else M="margin-top: "+s.icon_box_icon_space_before+";\n",M+="margin-bottom: "+s.icon_box_icon_space_after+";\n";"left"==s.icon_box_icon_position||"right"==s.icon_box_icon_position?G=s.icon_box_icon_vertical_alignment:"left"==s.icon_box_content_alignment?G="flex-start":"center"==s.icon_box_content_alignment?G="center":"right"==s.icon_box_content_alignment&&(G="flex-end"),A="left"==s.icon_box_mobile_content_alignment?(V="flex-start","left"):"center"==s.icon_box_mobile_content_alignment?V="center":"right"==s.icon_box_mobile_content_alignment?(V="flex-end","right"):(V="flex-start","left"),r+="."+e+n+" {text-align: "+s.icon_box_content_alignment+";flex-direction: "+T+";}",r+="."+e+n+" .oxy-icon-box-icon {"+M+"align-self: "+G+";}",r+="."+e+n+" .oxy-icon-box-heading {"+Ke.generateTypographyCSS(s,"icon_box_heading_typography")+"margin-top: "+s.icon_box_heading_space_above+";margin-bottom: "+s.icon_box_heading_space_below+";}",r+="."+e+n+" .oxy-icon-box-text {"+Ke.generateTypographyCSS(s,"icon_box_text_typography")+"margin-top: "+s.icon_box_text_space_above+";margin-bottom: "+s.icon_box_text_space_below+";align-self: "+G+";}",r+="."+e+n+" .oxy-icon-box-link {margin-top: "+s.icon_box_link_space_above+";margin-bottom: "+s.icon_box_link_space_below+";}",(I=Ke.getMediaMaxSize(Ke.classes[e].original.icon_box_vertical_layout_below))&&!i&&(r+="@media (max-width: "+I+"){."+e+n+".oxy-icon-box {flex-direction: column !important;text-align: "+A+";}."+e+n+" .oxy-icon-box-icon {margin-left: 0;margin-right: 0;margin-top: "+s.icon_box_icon_space_before+";margin-bottom: "+s.icon_box_icon_space_after+";}."+e+n+" .oxy-icon-box-icon, .oxy-icon-box-text {align-self: "+V+";}}")}var N=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("progress_bar_")&&(N=!0);if(!t&&N){N=!1;var E="",F=[];if("true"==s.progress_bar_stripes&&(E="background-image: linear-gradient(-45deg,rgba(255,255,255,.12) 25%,transparent 25%,transparent 50%,rgba(255,255,255,.12) 50%,rgba(255,255,255,.12) 75%,transparent 75%,transparent);"),"false"==s.progress_bar_stripes&&(E="background-image:none;"),"true"==s.progress_bar_animation_stripes){var j=s.progress_bar_animation_stripes_duration||Ke.defaultOptions.oxy_progress_bar.progress_bar_animation_stripes_duration;F.stripes="oxy_progress_bar_stripes "+j+" linear infinite"}if("false"==s.progress_bar_animation_stripes&&(F.stripes="none 0s paused"),"true"==s.progress_bar_animate_width){var B=s.progress_bar_animation_width_duration||Ke.defaultOptions.oxy_progress_bar.progress_bar_animation_width_duration;F.width="oxy_progress_bar_width "+B+" ease-out 1"}"false"==s.progress_bar_animate_width&&(F.width="none 0s paused");var D=[];for(var X in F)D.push(F[X]);r+="."+e+n+" .oxy-progress-bar-background {background-color:"+Ke.getGlobalColorValue(s.progress_bar_background_color)+";"+E+"animation:"+F.stripes+";}",r+="."+e+n+" .oxy-progress-bar-progress-wrap {width:"+s.progress_bar_progress+";}",r+="."+e+n+" .oxy-progress-bar-progress {background-color:"+Ke.getGlobalColorValue(s.progress_bar_bar_color)+";padding:"+s.progress_bar_bar_padding+";"+E+"animation:"+D.join()+";}",r+="."+e+n+" .oxy-progress-bar-overlay-text {"+Ke.generateTypographyCSS(s,"progress_bar_left_text_typography")+"}",r+="."+e+n+" .oxy-progress-bar-overlay-percent {"+Ke.generateTypographyCSS(s,"progress_bar_right_text_typography")+"}"}var Y,K,H,U,W,L,$=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("pricing_box_")&&($=!0);if(!t&&$)$=!1,"vertical"==s.pricing_box_price_layout?(K="column","left"==s.pricing_box_price_alignment?Y="flex-start":"center"==s.pricing_box_price_alignment?Y="center":"right"==s.pricing_box_price_alignment&&(Y="flex-end")):"horizontal"==s.pricing_box_price_layout&&(K="row"),"horizontal"==s.pricing_box_price_layout&&("left"==s.pricing_box_price_alignment?H="flex-start":"center"==s.pricing_box_price_alignment?H="center":"right"==s.pricing_box_price_alignment&&(H="flex-end")),"left"==s.pricing_box_global_alignment?U="flex-start":"center"==s.pricing_box_global_alignment?U="center":"right"==s.pricing_box_global_alignment&&(U="flex-end"),"left"==s.pricing_box_graphic_alignment?W="flex-start":"center"==s.pricing_box_graphic_alignment?W="center":"right"==s.pricing_box_graphic_alignment?W="flex-end":U&&(W=U),"left"==s.pricing_box_cta_alignment?L="flex-start":"center"==s.pricing_box_cta_alignment?L="center":"right"==s.pricing_box_cta_alignment?L="flex-end":U&&(L=U),r+="."+e+n+" .oxy-pricing-box-section {"+Ke.generateArrayOptionsCSS(s,"pricing_box_global")+"text-align:"+s.pricing_box_global_alignment+";}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-price {justify-content:"+U+";}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-graphic {"+Ke.generateArrayOptionsCSS(s,"pricing_box_graphic")+"background-color:"+Ke.getGlobalColorValue(s.pricing_box_graphic_background)+";text-align:"+s.pricing_box_graphic_alignment+";justify-content:"+W+";}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-title {"+Ke.generateArrayOptionsCSS(s,"pricing_box_title")+"text-align:"+s.pricing_box_title_alignment+";background-color:"+Ke.getGlobalColorValue(s.pricing_box_title_background)+";}",r+="."+e+n+" .oxy-pricing-box-title-title {"+Ke.generateTypographyCSS(s,"pricing_box_title_typography")+"}",r+="."+e+n+" .oxy-pricing-box-title-subtitle {"+Ke.generateTypographyCSS(s,"pricing_box_subtitle_typography")+"}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-price {"+Ke.generateArrayOptionsCSS(s,"pricing_box_price")+"text-align:"+s.pricing_box_price_alignment+";background-color:"+Ke.getGlobalColorValue(s.pricing_box_price_background)+";flex-direction:"+K+";justify-content:"+H+";align-items:"+Y+";}",r+="."+e+n+" .oxy-pricing-box-currency {"+Ke.generateTypographyCSS(s,"pricing_box_price_amount_currency_typography")+"}",r+="."+e+n+" .oxy-pricing-box-amount-main {"+Ke.generateTypographyCSS(s,"pricing_box_price_amount_main_typography")+"}",r+="."+e+n+" .oxy-pricing-box-amount-decimal {"+Ke.generateTypographyCSS(s,"pricing_box_price_amount_decimal_typography")+"}",r+="."+e+n+" .oxy-pricing-box-term {"+Ke.generateTypographyCSS(s,"pricing_box_price_amount_term_typography")+"}",r+="."+e+n+" .oxy-pricing-box-sale-price {"+Ke.generateTypographyCSS(s,"pricing_box_price_sale_typography")+"margin-bottom:"+s.pricing_box_price_sale_space_below+";}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-content {"+Ke.generateArrayOptionsCSS(s,"pricing_box_content")+"background-color:"+Ke.getGlobalColorValue(s.pricing_box_content_background)+";text-align:"+s.pricing_box_content_alignment+";"+Ke.generateTypographyCSS(s,"pricing_box_content_typography")+"}",r+="."+e+n+" .oxy-pricing-box-section.oxy-pricing-box-cta {"+Ke.generateArrayOptionsCSS(s,"pricing_box_cta")+"background-color:"+Ke.getGlobalColorValue(s.pricing_box_cta_background)+";text-align:"+s.pricing_box_cta_alignment+";justify-content:"+L+";}";!t&&Ke.classHasOptions(e,"slider-")&&(i||"original"!=a||(s["slider-arrow-color"]&&"lighter"==s["slider-arrow-color"]&&(r+="."+e+" .unslider-arrow {",r+="background-color: rgba(255,255,255,0.2); ",r+="}"),s["slider-dot-color"]&&(r+="."+e+" .unslider-nav ol li {",r+="border-color: "+Ke.getGlobalColorValue(s["slider-dot-color"])+"; ",r+="}",r+="."+e+" .unslider-nav ol li.unslider-active {",r+="background-color: "+Ke.getGlobalColorValue(s["slider-dot-color"])+"; ",r+="}"),s["slider-remove-padding"]&&"yes"==s["slider-remove-padding"]&&(r+="."+e+" .unslider {",r+="padding: 0px; ",r+="}",r+="."+e+" .unslider-wrap.unslider-carousel > li {",r+="padding: 0px; ",r+="}",r+="."+e+" .unslider-arrow.next {",r+="right: 10px; ",r+="z-index: 100; ",r+="}",r+="."+e+" .unslider-arrow.prev {",r+="left: 10px; ",r+="z-index: 100; ",r+="}"),s["slider-dots-overlay"]&&"yes"==s["slider-dots-overlay"]&&(r+="."+e+" .unslider .unslider-nav {",r+="position: absolute; bottom: 0; left: 0; right: 0; z-index: 100",r+="}"),s["slider-stretch-slides"]&&"yes"==s["slider-stretch-slides"]&&(r+="."+e+" .unslider-wrap {",r+="display: flex;",r+="}",r+="."+e+" .ct-slide {",r+="height: 100%;",r+="}",r+="."+e+" .unslider,",r+="."+e+" .oxygen-unslider-container,",r+="."+e+" .unslider-wrap,",r+="."+e+" .unslider-wrap li {",r+="height: 100%;",r+="}"),s["slider-stretch-slides"]&&"yes"==s["slider-stretch-slides"]&&s["slider-animation"]&&"fade"==s["slider-animation"]&&(r+="."+e+" .unslider-fade ul li.unslider-active {",r+="width: 100%;",r+="}"),s["slider-slide-padding"]&&(r+="."+e+" .ct-slide {",r+="padding: "+s["slider-slide-padding"],r+="}")));var Z=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("toggle_")&&(Z=!0);!t&&Z&&(r+="."+e+n+" .oxy-expand-collapse-icon {font-size:"+s.toggle_icon_size+";}",r+="."+e+n+" .oxy-expand-collapse-icon::before,."+e+n+" .oxy-expand-collapse-icon::after {background-color:"+Ke.getGlobalColorValue(s.toggle_icon_color)+";}");var Q=!1;if(Ke.classes[e])for(paramName in Ke.classes[e].original)0===paramName.indexOf("superbox_")&&(Q=!0);if(!t&&Q){var q,R,J,ee,oe,te=s.superbox_secondary_scale_start,ie=s.superbox_secondary_scale_finish,ne=s.superbox_primary_scale_start,re=s.superbox_primary_scale_finish,ae="",le="",se="",ce="";void 0!==te&&(R="transform: scale("+te+");"),void 0!==ie&&(J="transform: scale("+ie+");"),void 0!==ne&&(ee="transform: scale("+ne+");"),void 0!==re&&(oe="transform: scale("+re+");"),s.superbox_secondary_slide_direction&&(q=Ke.slide_position(s.superbox_secondary_slide_direction,(s.superbox_secondary_slide_distance||"")+"px"),"in"==s.superbox_secondary_slide_inorout?(ae=q.out_css,le=q.in_css):"out"==s.superbox_secondary_slide_inorout&&(ae=q.in_css,le=q.out_css)),s.superbox_primary_slide_direction&&(q=Ke.slide_position(s.superbox_primary_slide_direction,(s.superbox_primary_slide_distance||"")+"px"),"in"==s.superbox_primary_slide_inorout?(se=q.out_css,ce=q.in_css):"out"==s.superbox_primary_slide_inorout&&(se=q.in_css,ce=q.out_css)),r+="."+e+" .oxy-superbox-secondary, ."+e+" .oxy-superbox-primary {transition-duration:"+s.superbox_transition_duration+";}",r+="."+e+" .oxy-superbox-secondary {opacity:"+s.superbox_secondary_opacity_start+";"+ae+R+"}",r+="."+e+":hover .oxy-superbox-secondary {opacity:"+s.superbox_secondary_opacity_finish+";z-index: 2147483642;"+le+J+"}",r+="."+e+" .oxy-superbox-primary {opacity:"+s.superbox_primary_opacity_start+";"+se+ee+"}",r+="."+e+":hover .oxy-superbox-primary {opacity:"+s.superbox_primary_opacity_finish+";"+ce+oe+"}"}if(s["box-shadow-color"]){var de="inset"==s["box-shadow-inset"]?s["box-shadow-inset"]+" ":"",ge=s["box-shadow-horizontal-offset"]?s["box-shadow-horizontal-offset"]+"px ":"",pe=s["box-shadow-vertical-offset"]?s["box-shadow-vertical-offset"]+"px ":"",ue=s["box-shadow-blur"]?s["box-shadow-blur"]+"px ":"0px ",_e=s["box-shadow-spread"]?s["box-shadow-spread"]+"px ":"";s["box-shadow"]=de+ge+pe+ue+_e+Ke.getGlobalColorValue(s["box-shadow-color"])}if(s["text-shadow-color"]){ge=s["text-shadow-horizontal-offset"]?s["text-shadow-horizontal-offset"]+"px ":"",pe=s["text-shadow-vertical-offset"]?s["text-shadow-vertical-offset"]+"px ":"",ue=s["text-shadow-blur"]?s["text-shadow-blur"]+"px ":"0px ";s["text-shadow"]=ge+pe+ue+Ke.getGlobalColorValue(s["text-shadow-color"])}for(var me in t?e.indexOf(".")<0&&e.indexOf("#")<0&&e.indexOf("body")<0?r+=".oxygen-body "+e+n:r+=e+n:r+="."+e+n,r+="{",r+=Ke.getBackgroundLayersCSS(s,null,t,e,i,a)||"",r+=Ke.getTransformCSS(s)||"",s)if(s.hasOwnProperty(me)){if("custom-css"==me)continue;if(0<=["display","flex-direction","flex-wrap","align-items","align-content","justify-content"].indexOf(me)&&!t)continue;var ye=s[me];if("flex-direction"==me){r+=me+":"+ye+(be="reverse"==s["flex-reverse"]?"-reverse":"")+";";continue}if("filter"==me&&s["filter-amount-"+ye])ye+="("+s["filter-amount-"+ye]+")";else if("filter"==me)continue;if("content"==me.trim().toLowerCase()&&(ye='"'+ye.replace('"','\\"')+'"',Ke.contentAdded[e+n]=!0),("font-family"==me||-1<me.indexOf("font-family"))&&void 0!==ye&&(Ke.loadWebFont(ye),-1===ye.indexOf(",")&&"inherit"!==ye.toLowerCase()&&(ye="'"+ye+"'")),"background-image"==me||"background-size"==me)continue;ye&&Ke.excludeProperties.indexOf(me)<0&&"background-layers"!==me&&(r+=me+":"+Ke.getGlobalColorValue(ye)+";"),"-webkit-font-smoothing"==me&&(r+="-moz-osx-font-smoothing:"+("antialiased"===ye?"greyscale":"unset")+";")}if("before"!=a&&"after"!=a||Ke.contentAdded[e+n]||(r+='content:"";',Ke.contentAdded[e+n]=!0),s["custom-css"]&&(r+=Ke.replaceGlobalColors(s["custom-css"])),r+="}",(s["container-padding-top"]||s["container-padding-right"]||s["container-padding-bottom"]||s["container-padding-left"])&&(r+="."+e+n+" .ct-section-inner-wrap {",s["container-padding-top"]&&(r+="padding-top:"+s["container-padding-top"]+";"),s["container-padding-right"]&&(r+="padding-right:"+s["container-padding-right"]+";"),s["container-padding-bottom"]&&(r+="padding-bottom:"+s["container-padding-bottom"]+";"),s["container-padding-left"]&&(r+="padding-left:"+s["container-padding-left"]+";"),r+="}"),(s.display||s["flex-direction"]||s["flex-wrap"]||s["align-items"]||s["align-content"]||s["justify-content"])&&!t){r+="."+e+":not(.ct-section)"+n,Ke.isPseudoElement(n)?r+=",."+e+".ct-section .ct-section-inner-wrap"+n:r+=",."+e+".ct-section"+n+" .ct-section-inner-wrap",r+="{",s.display&&(r+="display:"+s.display+";");var be="reverse"==s["flex-reverse"]?"-reverse":"";s["flex-direction"]&&(r+="flex-direction:"+s["flex-direction"]+be+";"),s["justify-content"]&&(r+="justify-content:"+s["justify-content"]+";"),s["align-content"]&&(r+="align-content:"+s["align-content"]+";"),s["align-items"]&&(r+="align-items:"+s["align-items"]+";"),s["flex-wrap"]&&(r+="flex-wrap:"+s["flex-wrap"]+";"),r+="}"}}return r},Ke.generateTreeCSS=function(o,t,i,n){if(n=0,n++,"[object Array]"!==Object.prototype.toString.call(o))return!1;Ke.log&&console.log("generateTreeCSS()",o,t),angular.forEach(o,function(e){e.options.name=e.name,e.options.original,e.options.id=e.options.original,Ke.generateDynamicBackgrounds(e.id,!1,"id",function(){t.styles+=Ke.getSingleComponentCSS(e.options,e.id),e.children?Ke.generateTreeCSS(e.children,t,i,n):n<=1&&i&&i()},{children:o})}),n--},Ke.classHasOptions=function(e,o){if(Ke.classes[e])for(paramName in Ke.classes[e].original)if(0===paramName.indexOf(o))return!0},Ke.applyComponentCSS=function(e,o){null==e&&(e=Ke.component.active.id),null==o&&(o=Ke.component.active.name),Ke.setOption(e,o,"custom-css",!1,!1)},Ke.applyStyleSheet=function(e){var o="\n"+Ke.replaceGlobalColors(e.css)+"\n",t=document.getElementById("ct-style-sheet-"+e.name);if(null===t){var i=document.getElementsByClassName("ct-css-location"),n=angular.element(i[i.length-1]);(t=angular.element("<style>").attr("id","ct-style-sheet-"+e.name).addClass("ct-css-location")).insertAfter(n)}else t=angular.element(t);if(t.empty(),t.append(o),bracket=Ke.bracketsFailed(o)){if("("==bracket||"{"==bracket)var r="closing";else r="opening";var a="Warning: there is no "+r+' bracket for "'+bracket+'" somewhere in your CSS. This may break page styling.';jQuery(".oxygen-code-error-container",l.oxygenUIElement).show().html(a)}else jQuery(".oxygen-code-error-container",l.oxygenUIElement).hide().html("");Ke.unsavedChanges()},Ke.addDesignSetStyleSheets=function(e){for(var o in e)if(e.hasOwnProperty(o)){var t=e[o];"object"==typeof t&&void 0===Ke.styleSheets[t.name]&&(Ke.styleSheets[t.name]=Ke.stripSlashes(t.content),Ke.applyStyleSheet(t.name))}},Ke.getWidth=function(e){if(!e)return{value:"",unit:""};var o=parseInt(e,10),t="";return o!==e&&(t=-1<e.indexOf("%")?"%":-1<e.indexOf("em")?"em":-1<e.indexOf("rem")?"rem":"px"),{value:o,unit:t}},Ke.outputPageSettingsCSS=function(){var e=".ct-section-inner-wrap, .oxy-header-container{";e+="max-width:"+Ke.getPageWidth()+"px;",e+="}",Ke.getPageSetting("overlay-header-above")&&"never"!=Ke.getPageSetting("overlay-header-above")&&("always"!=Ke.getPageSetting("overlay-header-above")&&(e+="@media (min-width: "+Ke.getMediaMinSize(Ke.getPageSetting("overlay-header-above"))+") {"),e+="body.oxy-overlay-header .oxy-header {position: absolute;left: 0;right: 0;z-index: 2147483640;}body.oxy-overlay-header .oxy-header:not(.oxy-sticky-header-active),body.oxy-overlay-header .oxy-header:not(.oxy-sticky-header-active) .oxy-header-row {background-color: initial !important;}body.oxy-overlay-header .oxy-header .oxygen-hide-in-overlay{display: none;}body.oxy-overlay-header .oxy-header .oxygen-only-show-in-overlay{display: block;}","always"!=Ke.getPageSetting("overlay-header-above")&&(e+="}")),Ke.outputCSSStyles("ct-page-settings-styles",e)},Ke.updateGlobalSettingsCSS=function(){var e="",o=Ke.getGlobalFont("Text"),t=Ke.getGlobalFont("Display");-1===o.indexOf(",")&&(o="'"+o+"'"),-1===t.indexOf(",")&&(t="'"+t+"'"),e+="body {",e+="font-family: "+o+";",e+="line-height: "+Ke.globalSettings.body_text["line-height"]+";",e+="font-size: "+Ke.globalSettings.body_text["font-size"]+Ke.globalSettings.body_text["font-size-unit"]+";",e+="font-weight: "+Ke.globalSettings.body_text["font-weight"]+";",e+="color: "+Ke.getGlobalColorValue(Ke.globalSettings.body_text.color)+";",e+="}",e+=".oxy-nav-menu-hamburger-line {",e+="background-color: "+Ke.getGlobalColorValue(Ke.globalSettings.body_text.color)+";",e+="}",e+="h1, h2, h3, h4, h5, h6 {",e+="font-family: "+t+";",""!==Ke.globalSettings.headings.H1["font-size"]&&(e+="font-size: "+Ke.globalSettings.headings.H1["font-size"]+Ke.globalSettings.headings.H1["font-size-unit"]+";"),""!==Ke.globalSettings.headings.H1["font-weight"]&&(e+="font-weight: "+Ke.globalSettings.headings.H1["font-weight"]+";"),""!==Ke.globalSettings.headings.H1.color&&(e+="color: "+Ke.getGlobalColorValue(Ke.globalSettings.headings.H1.color)+";"),e+="}";var i="h2, h3, h4, h5, h6";for(var n in Ke.globalSettings.headings)if(Ke.globalSettings.headings.hasOwnProperty(n)){var r="";if("H1"==n)continue;""!==Ke.globalSettings.headings[n]["font-size"]&&(r+="font-size: "+Ke.globalSettings.headings[n]["font-size"]+Ke.globalSettings.headings[n]["font-size-unit"]+";"),""!==Ke.globalSettings.headings[n]["font-weight"]&&(r+="font-weight: "+Ke.globalSettings.headings[n]["font-weight"]+";"),""!==Ke.globalSettings.headings[n].color&&(r+="color: "+Ke.getGlobalColorValue(Ke.globalSettings.headings[n].color)+";"),""!==r&&(e+=i+"{",e+=r,e+="}"),i=i.replace(n.toLowerCase()+", ","")}var a={all:"a",text_link:".ct-link-text",link_wrapper:".ct-link",button:".ct-link-button"};for(var l in a)if(a.hasOwnProperty(l)){var s="";i=a[l];Ke.globalSettings.links[l]=Ke.globalSettings.links[l]||{},""!==Ke.globalSettings.links[l].color&&(s+="color: "+Ke.getGlobalColorValue(Ke.globalSettings.links[l].color)+";"),""!==Ke.globalSettings.links[l]["font-weight"]&&(s+="font-weight: "+Ke.globalSettings.links[l]["font-weight"]+";"),Ke.globalSettings.links[l]["text-decoration"]&&(s+="text-decoration: "+Ke.globalSettings.links[l]["text-decoration"]+";"),Ke.globalSettings.links[l]["border-radius"]&&(s+="border-radius: "+Ke.globalSettings.links[l]["border-radius"]+Ke.globalSettings.links[l]["border-radius-unit"]+";"),""!==s&&(e+=i+" {",e+=s,e+="}"),(s="")!==Ke.globalSettings.links[l].hover_color&&(s+="color: "+Ke.getGlobalColorValue(Ke.globalSettings.links[l].hover_color)+";"),Ke.globalSettings.links[l]["hover_text-decoration"]&&(s+="text-decoration: "+Ke.globalSettings.links[l]["hover_text-decoration"]+";"),""!==s&&(e+=i+":hover {",e+=s,e+="}")}e+=".ct-section-inner-wrap {",e+="padding-top: "+Ke.globalSettings.sections["container-padding-top"]+Ke.globalSettings.sections["container-padding-top-unit"]+";",e+="padding-left: "+Ke.globalSettings.sections["container-padding-left"]+Ke.globalSettings.sections["container-padding-left-unit"]+";",e+="padding-right: "+Ke.globalSettings.sections["container-padding-right"]+Ke.globalSettings.sections["container-padding-right-unit"]+";",e+="padding-bottom: "+Ke.globalSettings.sections["container-padding-bottom"]+Ke.globalSettings.sections["container-padding-bottom-unit"]+";",e+="}",e+=".oxy-header-container {",e+="padding-left: "+Ke.globalSettings.sections["container-padding-left"]+Ke.globalSettings.sections["container-padding-left-unit"]+";",e+="padding-right: "+Ke.globalSettings.sections["container-padding-right"]+Ke.globalSettings.sections["container-padding-right-unit"]+";",e+="}",Ke.outputCSSStyles("oxygen-global-settings-styles",e)},Ke.$watch("globalSettings",function(e,o){Ke.updateGlobalSettingsCSS()},!0),Ke.$watch("globalSettings.sections",function(e,o){Ke.pageSettingsUpdate(),Ke.applyModelOptions()},!0),Ke.$watch("pageSettingsMeta",function(e,o){Ke.pageSettingsUpdate()},!0),Ke.$watch("pageSettingsMeta.aos",function(e,o){Ke.updateAOS()},!0),Ke.$watch("globalSettings.aos",function(e,o){Ke.updateAOS()},!0),Ke.updateAOS=function(){var e=angular.copy(Ke.pageSettingsMeta.aos);for(var o in e)""!==e[o]&&void 0!==e[o]||delete e[o];var t=angular.extend({},Ke.globalSettings.aos,e);for(var o in"false"===t.once&&(t.once=!1),e=t)""!==e[o]&&void 0!==e[o]||delete e[o];aosDefaults={offset:120,delay:0,easing:"ease",duration:400,disable:!1,once:!1},t=angular.extend({},aosDefaults,e),jQuery('[data-aos-enabled="true"]').each(function(){var e=jQuery(this).attr("ng-attr-component-id");Ke.setOption(e,Ke.component.options[e].name,"aos-type")}),AOS.init(t)},Ke.bracketsFailed=function(e){return e=(""+e).replace(/(\/[*][^*]*[*]\/)|(\/\/[^\n]*)/gm,""),function(e){for(var o={"}":"{",")":"("},t=[],i=0,n=(e=""+e).length;i<n;i++)o[e[i]]&&t.pop()===o[e[i]]||t.push(e[i]);return!!t.length&&t[0]}(e=(""+e).replace(/[^(){}]/g,""))},Ke.mapCSSProperty=function(e,o,t){Ke.mappedSelectors[t]||(Ke.mappedSelectors[t]={}),Ke.mappedSelectors[t][o]||(Ke.mappedSelectors[t][o]={}),Ke.mappedSelectors[t][o]=e},Ke.unmapCSSProperty=function(e,o){Ke.mappedSelectors[o][e]=null,delete Ke.mappedSelectors[o][e]},Ke.getMappedCSS=function(o,e){var t="";for(var i in Ke.mappedSelectors){var n=Ke.mappedSelectors[i];for(var r in t+=(i=i.split(",").map(function(e){return"#"+o+" "+e}).join(","))+"{",n){var a="";void 0!==e[n[r]+"-unit"]&&(a=e[n[r]+"-unit"]),t+=r+":"+Ke.getGlobalColorValue(e[n[r]])+a+";"}t+="}"}return t},Ke.position_css=function(e,o){var t;for(var i in e){var n=e[i];!0===o&&null!==n&&(n="0"),null!==n&&(t=i+":"+n+";")}return t},Ke.slide_position=function(e,o){var t="100%",i=[],n=[];switch(void 0!==o&&"px"!==o&&(t=o),e){case"left":i.left="-"+t;break;case"right":i.left=""+t;break;case"top":i.top="-"+t;break;case"bottom":i.top=""+t}return n.out_css=Ke.position_css(i),n.in_css=Ke.position_css(i,!0),n},Ke.SPECIFICITY=(t=function(e){var o,t,i,n,r=[];for(i=0,n=(o=e.split(",")).length;i<n;i+=1)0<(t=o[i]).length&&r.push(a(t));return r},a=function(s){var e,o,t,c=s,d={a:0,b:0,c:0},g=[];return e=function(e,o){var t,i,n,r,a,l;if(e.test(c))for(i=0,n=(t=c.match(e)).length;i<n;i+=1)d[o]+=1,r=t[i],a=c.indexOf(r),l=r.length,g.push({selector:s.substr(a,l),type:o,index:a,length:l}),c=c.replace(r,Array(l+1).join(" "))},(o=function(e){var o,t,i,n;if(e.test(c))for(t=0,i=(o=c.match(e)).length;t<i;t+=1)n=o[t],c=c.replace(n,Array(n.length+1).join("A"))})(/\\[0-9A-Fa-f]{6}\s?/g),o(/\\[0-9A-Fa-f]{1,5}\s/g),o(/\\./g),(t=/:not\(([^\)]*)\)/g).test(c)&&(c=c.replace(t,"     $1 ")),function(){var e,o,t,i,n=/{[^]*/gm;if(n.test(c))for(o=0,t=(e=c.match(n)).length;o<t;o+=1)i=e[o],c=c.replace(i,Array(i.length+1).join(" "))}(),e(/(\[[^\]]+\])/g,"b"),e(/(#[^\s\+>~\.\[:]+)/g,"a"),e(/(\.[^\s\+>~\.\[:]+)/g,"b"),e(/(::[^\s\+>~\.\[:]+|:first-line|:first-letter|:before|:after)/gi,"c"),e(/(:[\w-]+\([^\)]*\))/gi,"b"),e(/(:[^\s\+>~\.\[:]+)/g,"b"),c=(c=c.replace(/[\*\s\+>~]/g," ")).replace(/[#\.]/g," "),e(/([^\s\+>~\.\[:]+)/g,"c"),g.sort(function(e,o){return e.index-o.index}),{selector:s,specificity:"0,"+d.a.toString()+","+d.b.toString()+","+d.c.toString(),specificityArray:[0,d.a,d.b,d.c],parts:g}},{calculate:t,compare:function(e,o){var t,i,n;if("string"==typeof e){if(-1!==e.indexOf(","))throw"Invalid CSS selector";t=a(e).specificityArray}else{if(!Array.isArray(e))throw"Invalid CSS selector or specificity array";if(4!==e.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";t=e}if("string"==typeof o){if(-1!==o.indexOf(","))throw"Invalid CSS selector";i=a(o).specificityArray}else{if(!Array.isArray(o))throw"Invalid CSS selector or specificity array";if(4!==o.filter(function(e){return"number"==typeof e}).length)throw"Invalid specificity array";i=o}for(n=0;n<4;n+=1){if(t[n]<i[n])return-1;if(t[n]>i[n])return 1}return 0}})}]);
CTFrontendBuilder.controller("ControllerTemplates",["$scope","$parentScope","$timeout","$interval",function(m,u,f,C){m.replaceAfterReusable=!1,m.template={},m.template.postData={},m.componentizeOptions={},m.componentizeOptions.name="Re-usable component",m.componentizeOptions.pageName="Re-usable page",m.componentizeOptions.setName="My Design Set",m.componentizeOptions.status="public",m.previewType="",m.separatorAdded=!1,m.loadTemplatesTerm=function(e,o){m.previewType=o,m.loadTemplateData(m.setTemplateData,e)},m.setTemplateData=function(e){if(m.log&&console.log("setTemplateData()",e),void 0!==e.bodyClass&&jQuery("body").addClass(e.bodyClass).addClass("oxygen-builder-body"),void 0!==e.postData&&(m.template.postData=e.postData),void 0!==e.edit_link&&(m.template.postData.edit_link=e.edit_link),void 0!==e.postsList||void 0!==e.termsList){var o=!1;if(void 0!==e.postsList&&(null===e.postsList||(m.template.postsList=e.postsList,e.default?m.loadTemplatesTerm(e.default.id,"post"):e.postsList[0]&&m.loadTemplatesTerm(e.postsList[0].id,"post"),o=!0)),void 0!==e.termsList&&e.termsList[0]&&(m.template.termsList=e.termsList,o||(m.loadTemplatesTerm(e.termsList[0].id,"term"),o=!0)),o)return}e.meta_keys&&(u.current_post_meta_keys=e.meta_keys),m.rebuildDOM(0),m.updateDOMTreeNavigator(),m.outputCSSOptions()},m.loadReusablePart=function(e,o){void 0!==o?m.loadComponentsTree(m.addReusableChildren,e,o):m.loadComponentsTree(m.addReusable,e,o)},m.addReusable=function(e,o){var t={};t=void 0!==e[0]&&void 0!==e[0].content?e[0].content:e,m.log&&console.log("addReusable()",o);var n=m.component.active.id,i={id:0,name:"ct_reusable",options:{view_id:o}},a=m.getClosestPossibleInsert(n,t,m.replaceAfterReusable);m.componentBuffer=i,m.componentInsertId=a.id,0<=a.index&&(m.newComponentKey=a.index);var s=m.component.id;m.updateNewComponentIds(m.componentBuffer,a),m.findComponentItem(m.componentsTree.children,a.id,m.pasteComponentToTree),m.replaceAfterReusable&&(m.removeComponentById(m.replaceAfterReusable),m.replaceAfterReusable=!1),m.cancelDeleteUndo(),m.rebuildDOM(s),m.updateDOMTreeNavigator(s),m.activateComponent(s);var r=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),C.cancel(r)},0,!1);if(void 0!==oxygenVSBInitTabs)var c=f(function(){oxygenVSBInitTabs("#"+m.component.options[s].selector),C.cancel(c)},500,!1),l=f(function(){oxygenVSBInitTabs("#"+m.component.options[s].selector),C.cancel(l)},1500,!1);m.unsavedChanges()},m.recursively_find_reusable=function(e){_.forEach(e,function(e){if("ct_reusable"==e.name)e.options.view_id;e.children&&m.recursively_find_reusable(e.children)})},m.addPageFromSource=function(e,o,n){var i=m.component.active.id;i<0&&(iframeScope.activateComponent(0,"root"),i=0,iframeScope.currentClass=!1);var t=JSON.parse(e);if(!t||!t.components||t.components.length<1)m.showErrorModal(0,"Could not load the page. "+(t.error?t.error:"Try again!"));else{var a=!1,s=!1;if(t.components&&(a=t.components),a){t.classes&&(s=t.classes);var r={};t.colors&&(r=m.mergeIncomingSourceColors(t.colors,n));var c={};if(t.lookuptable&&(c=t.lookuptable),s){for(key in 0<Object.keys(r).length&&(s=m.ctMapSourceColors(s,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(s=m.ctCreateVariableColors(s,n,c)),m.styleFolders.hasOwnProperty(n)||(m.styleFolders[n]={status:1,key:n}),s)s[key].parent=n;m.classes=Object.assign(s,m.classes),m.classesCached=!1}var l=m.component.id;_.each(a,function(e){var o=m.component.id;0<Object.keys(r).length&&(e=m.ctMapSourceColors(e,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(e=m.ctCreateVariableColors(e,n,c));var t={id:0,index:iframeScope.getComponentById(i).index()+1};m.componentBuffer=e,0<=t.index&&(m.newComponentKey=t.index),m.updateNewComponentIds(m.componentBuffer,t),m.findComponentItem(m.componentsTree.children,t.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(o),m.updateDOMTreeNavigator(),m.updateComponentCacheStyles(o,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),i=o}),m.rebuildDOM(0),m.outputCSSOptions(),m.activateComponent(l);var d=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),C.cancel(d)},0,!1)}else m.showErrorModal(0,"Page not loaded, try again")}},m.ctMapSourceColors=function(e,t){for(key in e)"string"==typeof e[key]?e[key]=e[key].replace(/color\((\d*)\)/g,function(e,o){return"color("+t[parseInt(o)]+")"}):(e[key]instanceof Array||e[key]instanceof Object)&&(e[key]=m.ctMapSourceColors(e[key],t));return e},m.ctCreateVariableColorsCallback=function(e,o,t){var n=_.findWhere(iframeScope.globalColorSets.sets,{name:o});void 0===n&&(n={id:++iframeScope.globalColorSets.setsIncrement,name:o},iframeScope.globalColorSets.sets.push(n));var i,a=e.toLowerCase(),s=!1;t[a]?s=t[a]:t[a.replace(/ /g,"")]&&(s=t[a.replace(/ /g,"")]),4===a.length&&(a="#"+a.substr(1).repeat(2),!1===s&&t[a]&&(s=t[a]));var r=!1;if(!1!==s&&(_.each(t,function(e,o){!1===r&&e==s&&(r=o),4===r.length&&(r="#"+r.substr(1).repeat(2))}),void 0!==(i=_.findWhere(iframeScope.globalColorSets.colors,{name:s,set:n.id}))&&r!==a&&(a=r,i.value=r)),void 0===i&&(i=_.findWhere(iframeScope.globalColorSets.colors,{sourceVal:a,set:n.id})),void 0===i){if("IGNORE"==s)return a;i={id:++iframeScope.globalColorSets.colorsIncrement,name:s||"color #"+iframeScope.globalColorSets.colorsIncrement,value:a,sourceVal:a,set:n.id},iframeScope.globalColorSets.colors.push(i)}return"color("+i.id+")"},m.ctCreateVariableColors=function(e,o,t){for(key in e)"string"==typeof e[key]?e[key]=e[key].replace(/#[0-9|a-f]{3,6}|rgba\([\d|\s]*\,[\d|\s]*\,[\d|\s]*\,[^\)]*\)/gi,function(e){return m.ctCreateVariableColorsCallback(e,o,t)}):(e[key]instanceof Array||e[key]instanceof Object)&&(e[key]=m.ctCreateVariableColors(e[key],o,t));var n=_.find(iframeScope.globalColorSets.sets,{name:o});if(void 0===n)return e;var i=[];return _.each(t,function(e){var o,t=_.find(iframeScope.globalColorSets.colors,{set:n.id,name:e});t&&(o=iframeScope.globalColorSets.colors.indexOf(t)),void 0!==o&&(i.push(t),iframeScope.globalColorSets.colors.splice(o,1))}),iframeScope.globalColorSets.colors=i.concat(iframeScope.globalColorSets.colors),e},m.mergeIncomingSourceColors=function(e,o){var t={},n=_.findWhere(iframeScope.globalColorSets.sets,{name:o});for(key in void 0===n&&(n={id:++iframeScope.globalColorSets.setsIncrement,name:o},iframeScope.globalColorSets.sets.push(n)),e){var i=_.findWhere(iframeScope.globalColorSets.colors,{name:e[key].name,set:n.id});t[parseInt(key)]=void 0!==i?parseInt(i.id):(iframeScope.globalColorSets.colors.push({id:++iframeScope.globalColorSets.colorsIncrement,name:e[key].name,value:e[key].value,set:n.id}),parseInt(iframeScope.globalColorSets.colorsIncrement))}return t},m.addComponentFromSource=function(e,o,t,n){null!=o&&o||(o=m.component.active.id),o<0&&(iframeScope.activateComponent(0,"root"),o=0,iframeScope.currentClass=!1);var i=JSON.parse(e);if(!i||!i.component||i.component.length<1)m.showErrorModal(0,"Could not load the component. "+(i.error?i.error:"Try again!"));else{var a=!1,s=!1;if(i.component&&(a=i.component),a){i.classes&&(s=i.classes);var r={};i.colors&&(r=m.mergeIncomingSourceColors(i.colors,n));var c={};i.lookuptable&&(c=i.lookuptable),0<Object.keys(r).length&&(a=m.ctMapSourceColors(a,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(a=m.ctCreateVariableColors(a,n,c));var l=m.component.id,d=m.getClosestPossibleInsert(o,a);if(m.componentBuffer=a,0<=d.index&&(m.newComponentKey=d.index),s){for(key in 0<Object.keys(r).length&&(s=m.ctMapSourceColors(s,r)),CtBuilderAjax.classicDesignsets.find(function(e){return e==n})&&(s=m.ctCreateVariableColors(s,n,c)),m.styleFolders.hasOwnProperty(n)||(m.styleFolders[n]={status:1,key:n}),s)s[key].parent=n;m.classes=Object.assign(s,m.classes),m.classesCached=!1}m.updateNewComponentIds(m.componentBuffer,d),m.findComponentItem(m.componentsTree.children,d.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(l),m.updateDOMTreeNavigator(),m.updateComponentCacheStyles(l,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),m.outputCSSOptions(),m.activateComponent(l);var p=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),C.cancel(p)},0,!1)}else m.showErrorModal(0,"Component not loaded, try again")}},m.addReusableChildren=function(e,o,t){null==t&&(t=m.component.active.id),m.log&&console.log("addReusableChildren()",e,o,t);var n={};void 0!==e[0]&&void 0!==e[0].content||(n=e);var a=m.getClosestPossibleInsert(t,n),s=-1;angular.forEach(n.children,function(e,o){var t=m.component.id;if(s<0&&(s=t),m.componentBuffer=e,0<=a.index&&(m.newComponentKey=a.index+o),m.updateNewComponentIds(m.componentBuffer,a),m.findComponentItem(m.componentsTree.children,a.id,m.pasteComponentToTree),m.cancelDeleteUndo(),m.rebuildDOM(t),m.updateDOMTreeNavigator(),m.updateComponentCacheStyles(t,function(){m.cache.idCSS="",Object.keys(m.cache.idStyles).map(function(e,o){m.cache.idCSS+=m.cache.idStyles[e]}),m.outputCSSStylesAfterWait("id",m.cache.idCSS)}),void 0!==oxygenVSBInitTabs)var n=f(function(){oxygenVSBInitTabs("#"+m.component.options[t].selector),C.cancel(n)},500,!1),i=f(function(){oxygenVSBInitTabs("#"+m.component.options[t].selector),C.cancel(i)},1500,!1)}),m.activateComponent(s);var i=f(function(){u.scrollToComponent(m.getActiveComponent().attr("id")),C.cancel(i)},0,!1);m.outputCSSOptions(),u.hideDialogWindow()},m.addReusableContent=function(e,o){if(e){m.log&&console.log("addReusableContent()",e),e.edit_link&&(m.reusableEditLinks[o]=e.edit_link);var t=m.getComponentById(o);if(t){t.append(e.post_content);var n=jQuery(e.post_content);if(n){var a=[];for(n.attr("class")&&(a=n.attr("class").split(/\s+/)),i=0;i<a.length;++i)if(0<=a[i].indexOf("ct-")){var s=a[i].replace(/\-/g,"_");m.component.options[o].dndtype=s;break}}}m.reusableCSS={},m.reusableCSS.styles="",e.post_tree&&m.generateTreeCSS(e.post_tree,m.reusableCSS,function(){m.outputCSSStyles("ct-re-usable-styles-"+e.ID,m.reusableCSS.styles)})}},m.getClosestPossibleInsert=function(e,o,t){if(m.log&&console.log("getClosestPossibleInsert()",e,o),null==e)return{};var n=m.getComponentById(e);insertData={componentToInsertIn:n,componentInsertId:0,parentId:0,index:0<e?n.index()+1:-1},i=0;var a=insertData.componentToInsertIn[0].attributes["is-nestable"],s=insertData.componentToInsertIn[0].classList.contains("ct_reusable"),r=JSON.stringify(o),c=-1<r.indexOf('"name":"ct_section"'),l=-1<r.indexOf('"name":"ct_link"')||-1<r.indexOf('"name":"ct_link_text"');function d(e,o){for(var t=e.componentToInsertIn,n=e.parentId;!t.hasClass(o)&&!t.hasClass("ct-builder");)t=t.parent();e.parentId=t[0].getAttribute("ng-attr-component-id"),0!=e.parentId?(e.index=t.index()+1,e.componentToInsertIn=jQuery(t).parent().closest("[is-nestable]"),e.componentInsertId=e.componentToInsertIn[0].getAttribute("ng-attr-component-id")):e.parentId=n}if(c&&d(insertData,"ct_section"),l&&d(insertData,"ct_link"),0==insertData.parentId)if(!a||s||t)for(;(!a||t||s)&&i<10;)insertData.componentToInsertIn=jQuery(insertData.componentToInsertIn).parent().closest("[is-nestable]"),insertData.componentToInsertIn&&(a=insertData.componentToInsertIn[0].attributes["is-nestable"],s=insertData.componentToInsertIn[0].classList.contains("ct_reusable"),insertData.componentInsertId=insertData.componentToInsertIn[0].getAttribute("ng-attr-component-id")),a&&(t=!1),i++;else insertData.componentInsertId=e,insertData.index=-1;return{id:insertData.componentInsertId,index:insertData.index}},m.isCanComponentize=function(e,o){return!(-1<["ct_reusable","oxy_header_row","ct_slide","oxy_tab","oxy_tab_content"].indexOf(o))&&0<e},m.saveReusable=function(e){m.cancelDeleteUndo(),void 0===e&&(e=m.component.active.id);var o=prompt("Componentize name",m.componentizeOptions.name);if(null!=o)if(u.showLoadingOverlay("saveReusable()"),m.componentizeOptions.name=o,m.isSelectableEnabled&&m.isDOMNodesSelected){var t=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent().children(".ct-dom-tree-node").has(".ct-selected-dom-node"),n=[];t.each(function(){n.push(jQuery(this).attr("ng-attr-tree-id"))}),m.selectedComponents=[];for(var i=0;e=n[i],i<=n.length-1;i++)m.findComponentItem(m.componentsTree.children,e,m.addSelectedComponent);m.saveComponentAsView(null,m.selectedComponents)}else m.findComponentItem(m.componentsTree.children,e,m.saveComponentAsView);else alert("Name can't be empty")},m.replaceReusablePart=function(e,o){m.replaceAfterReusable=e,m.loadReusablePart(o)},m.showComponentize=function(e){u.showDialogWindow(),m.componentizeOptions.id=e,u.dialogForms.showComponentizeForm=!0},m.componentize=function(){if(m.isSelectableEnabled&&m.isDOMNodesSelected){var e=jQuery("#ct-dom-tree").find(".ct-selected-dom-node").first().parent().parent().children(".ct-dom-tree-node").has(".ct-selected-dom-node"),o=[];e.each(function(){o.push(jQuery(this).attr("ng-attr-tree-id"))}),m.selectedComponents=[];for(var t,n=0;t=o[n],n<=o.length-1;n++)m.findComponentItem(m.componentsTree.children,t,m.addSelectedComponent);m.postComponentize(null,m.selectedComponents)}else 0<m.componentizeOptions.idToUpdate?(m.componentizeOptions.assetId=null,m.findComponentItem(m.componentsTree.children,m.componentizeOptions.id,m.postComponentize),m.componentizeOptions.id=null):m.postAsset(m.componentizeOptions.screenshot,function(){m.findComponentItem(m.componentsTree.children,m.componentizeOptions.id,m.postComponentize),m.componentizeOptions.id=null});u.hideDialogWindow()},m.showPageComponentize=function(e){u.showDialogWindow(),u.dialogForms.showPageComponentizeForm=!0},m.tryPageComponentize=function(){m.postAsset(m.componentizeOptions.screenshot,function(){m.pageComponentize()}),u.hideDialogWindow()},m.addSelectedComponent=function(e,o){m.selectedComponents.push(o)},m.addWidget=function(e,o,t){var n=m.component.id;m.addComponent("ct_widget","widget"),m.component.options[n].model.class_name=e,m.setOption(n,"ct_widget","class_name"),m.component.options[n].model.id_base=o,m.setOption(n,"ct_widget","id_base"),m.component.options[n].model.pretty_name=t,m.setOption(n,"ct_widget","pretty_name"),m.component.options[n].nicename=t+" (#"+n+")",m.updateFriendlyName(n)},m.addSidebar=function(e){var o=m.component.id;m.addComponent("ct_sidebar","sidebar"),m.setOptionModel("sidebar_id",e,o,"ct_sidebar"),m.rebuildDOM(o)},m.loadWidgetForm=function(){m.renderWidget(m.component.active.id,!0)},m.applyWidgetInstance=function(e){m.log&&console.log("applyWidgetInstance()",e),e||(e=m.component.active.id);var o=m.component.options[e];if("ct_widget"!=o.name)return!1;var c={},t=jQuery("#ct-widget-form",window.parent.document).serializeArray(),l=o.original.id_base,n=jQuery("#ct-widget-form input:checkbox",window.parent.document).map(function(){if(!this.checked)return{name:this.name,value:!!this.checked&&this.value}});for(i=0;i<n.length;i++)t.push(n[i]);jQuery.each(t,function(e,o){var t=o.name.replace(l,"");if(-1<(t=(t=t.replace(/widget-\[\d\]\[/,"")).replace("]","")).indexOf("[")){var n=t.replace(/\[(.*)\]/,""),i=[],a=t.replace(n,"").match(/\[[^\]]*\]/g),s=function(e,o,t,n){0==n.length?e[t]=o:(void 0===e[t]&&(e[t]={}),s(e[t],o,n.shift(),n))};for(j=0;j<a.length;j++)"[]"!=a[j]&&i.push(a[j].replace(/\[|\]/g,""));if(0<i.length){var r=i.slice();void 0===c[n]&&(c[n]={}),s(c[n],o.value,r.shift(),r)}else void 0===c[n]&&(c[n]=[]),c[n].push(o.value)}else""!==t&&(c[t]=o.value)}),m.component.options[m.component.active.id].model.instance=c,m.setOption(m.component.active.id,"ct_widget","instance"),m.renderWidget(m.component.active.id)},m.loadHTMLForm=function(){u.showDialogWindow(),angular.element("#ct-html-component-form").val(m.component.options[m.component.active.id].model.html)},m.applyCodeBlock=function(e,o){m.log&&console.log("applyCodeBlock()",e,o),m.applyCodeBlockPHP(e,o),m.applyCodeBlockJS(e,o),m.applyCodeBlockCSS(e,o)},m.applyCodeBlockPHP=function(e,o){void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockPHP()",e),o&&m.setOption(e,"ct_code_block","code-php",!1,!1);var t="#"+m.component.options[e].selector,n=m.getOption("code-php",e);m.execCode(n,t,m.insertElementContent)},m.applyCodeBlockJS=function(e,o){m.applyingComponentJS=!0,jQuery(".oxygen-code-error-container",u.oxygenUIElement).hide().html(""),void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockJS()",e,o),o&&m.setOption(e,"ct_code_block","code-js",!1,!1),code=m.getOption("code-js",e),m.outputJSScript("js-code-",e,code),m.applyingComponentJS=!1},m.applyCodeBlockCSS=function(e,o){void 0===e&&(e=m.component.active.id),void 0===o&&(o=!0),m.log&&console.log("applyCodeBlockCSS()",e,o),o&&m.setOption(e,"ct_code_block","code-css",!1,!1),code=m.getOption("code-css",e);var t=m.component.options[e].selector;code=code.replace(new RegExp("%%ELEMENT_ID%%","g"),t),code=m.replaceGlobalColors(code),m.outputCSSStyles("ct_code_block_css_"+e,code)},m.outputJSScript=function(e,o,t){m.log&&console.log("outputJSScript()",e,o);var n=m.component.options[o].selector;t=t.replace(new RegExp("%%ELEMENT_ID%%","g"),n);var i=document.getElementById(e+o);i&&document.body.removeChild(i);var a=document.createElement("script");a.type="text/javascript",a.setAttribute("id",e+o);try{a.appendChild(document.createTextNode(t)),document.body.appendChild(a)}catch(e){a.text=t,document.body.appendChild(a)}},m.setupJSErrorNotice=function(){window.onerror=function(e,o,t){if(m.applyingComponentJS)jQuery(".oxygen-code-error-container",u.oxygenUIElement).show().html(e+" on line #"+t);else{if(-1<o.indexOf("/component-framework/vendor/aos/aos.js"))return;m.showNoticeModal("<div>"+e+" on line #"+t+" in "+o+"</div>")}}},m.insertElementContent=function(e,o,t){m.log&&console.log("insertElementContent()",e,o);var n=angular.element(o);n.html(""),m.cleanInsert("<span class='removeOnInsert'>"+e+"</span>",n),m.adjustResizeBox()},m.getLinkId=function(e){void 0===e&&(e=m.component.active.id);var o=jQuery("[ng-attr-component-id='"+e+"']","#ct-builder").closest(".ct-links");return 0<o.length&&o.attr("ng-attr-component-id")},m.addSeparator=function(e){m.separatorAdded=!0},m.addComponentClassesStyles=function(e){if(e.options&&void 0!==e.options.classes)for(var o in m.classes)if(e.options&&-1<e.options.classes.indexOf(o)){var t=e.options.classes.indexOf(o);e.options.classes.splice(t,1),e.options.classes.push({name:o,styles:m.classes[o]})}for(var n in e.children)if(e.children.hasOwnProperty(n)){var i=e.children[n];m.addComponentClassesStyles(i)}},m.parseTreeClassesStyles=function(e){if(e.options&&void 0!==e.options.classes){for(var o in e.options.classes)if(e.options.classes.hasOwnProperty(o)&&null!=e.options.classes[o].name){var t=e.options.classes[o].name,n=e.options.classes[o].styles;e.options.classes[o]=t,void 0!==m.classes[t]||(m.classes[t]=n)}m.classesCached=!1,m.outputCSSOptions()}for(var o in e.children)if(e.children.hasOwnProperty(o)){var i=e.children[o];m.parseTreeClassesStyles(i)}}}]),function(e,t){if("function"==typeof define&&define.amd)define(["exports","jquery"],function(e,o){return t(e,o)});else if("undefined"!=typeof exports){var o=require("jquery");t(exports,o)}else t(e,e.jQuery||e.Zepto||e.ender||e.$)}(this,function(e,r){function o(n,t){function a(e,o,t){return e[o]=t,e}function e(){return i}var i={},s={};this.addPair=function(e){if(!c.validate.test(e.name))return this;var o=function(e,o){for(var t,n=e.match(c.key);void 0!==(t=n.pop());)c.push.test(t)?o=a([],(i=e.replace(/\[\]$/,""),void 0===s[i]&&(s[i]=0),s[i]++),o):c.fixed.test(t)?o=a([],t,o):c.named.test(t)&&(o=a({},t,o));var i;return o}(e.name,function(e){switch(r('[name="'+e.name+'"]',t).attr("type")){case"checkbox":return"on"===e.value||e.value;default:return e.value}}(e));return i=n.extend(!0,i,o),this},this.addPairs=function(e){if(!n.isArray(e))throw new Error("formSerializer.addPairs expects an Array");for(var o=0,t=e.length;o<t;o++)this.addPair(e[o]);return this},this.serialize=e,this.serializeJSON=function(){return JSON.stringify(e())}}var c={validate:/^[a-z_][a-z0-9_]*(?:\[(?:\d*|[a-z0-9_]+)\])*$/i,key:/[a-z0-9_]+|(?=\[\])/gi,push:/^$/,fixed:/^\d+$/,named:/^[a-z0-9_]+$/i};return o.patterns=c,o.serializeObject=function(){return new o(r,this).addPairs(this.serializeArray()).serialize()},o.serializeJSON=function(){return new o(r,this).addPairs(this.serializeArray()).serializeJSON()},void 0!==r.fn&&(r.fn.serializeObject=o.serializeObject,r.fn.serializeJSON=o.serializeJSON),e.FormSerializer=o});
CTFrontendBuilder.controller("ControllerMediaQueries",["$scope","$parentScope","$http","$timeout","$interval",function(r,o,e,s,d){r.currentMedia="default",r.initMedia=function(){r.mediaList={default:{maxSize:"100%",title:"All devices"},"page-width":{maxSize:r.getPageWidth()+"px",title:"Page container ("+r.getPageWidth()+"px) and below"},tablet:{maxSize:"992px",title:"Less than 992px"},"phone-landscape":{maxSize:"768px",title:"Less than 768px"},"phone-portrait":{maxSize:"480px",title:"Less than 480px"}};var e=parseInt(r.getPageWidth())+1;r.mediaListAbove={default:{minSize:"100%",title:"All devices"},"page-width":{minSize:e+"px",title:"Above Page container ("+r.getPageWidth()+"px)"},tablet:{minSize:"993px",title:"Above 992px"},"phone-landscape":{minSize:"769px",title:"Above 768px"},"phone-portrait":{minSize:"481px",title:"Above 480px"}}},r.setCurrentMedia=function(e,t,i){if(r.getCurrentMedia()!=e){if(r.currentMedia=e,void 0===t||t){var a=r.getMediaPreviewSize(e,i);o.adjustViewport(a),"default"==e?o.hideViewportRuller():o.showViewportRuller()}o.adjustViewportContainer(),o.disableContentEdit(),o.disableSelectable(),o.closeAllTabs(["advancedSettings","componentBrowser"]),r.applyModelOptions(),o.checkTabs(),r.parentScope.activeForEditBgLayer=!1;var n=s(function(){o.scrollToComponent(r.getActiveComponent().attr("id")),d.cancel(n)},0,!1)}},r.getCurrentMedia=function(){return r.currentMedia},r.getMediaTitle=function(e,t,i){return e?"never"==e?"Never":"always"==e?"Always":void 0!==r.mediaListAbove&&!0===t?i&&"page-width"==e?"Page container ("+r.getPageWidth("global")+"px) and above":r.mediaListAbove[e].title:void 0!==r.mediaList?i&&"page-width"==e?"Page container ("+r.getPageWidth("global")+"px) and below":r.mediaList[e].title:"":""},r.getMediaMaxSize=function(e){return void 0!==r.mediaList[e]&&r.mediaList[e].maxSize},r.getMediaMinSize=function(e){return void 0!==r.mediaList[e]&&r.mediaListAbove[e].minSize},r.getMediaPreviewSize=function(e,t){if("default"==e)return"100%";var i=r.sortedMediaList(!1,t);for(var a in i){if(i[a]==e){if(void 0===(e=i[parseInt(a)+1]))return"360px";if("page-width"==e&&t)var n=parseInt(r.getPageWidth(!0))+1;else n=parseInt(r.mediaList[e].maxSize)+1;return n+"px"}}},r.getMediaNameBySize=function(e){var t=[];for(var i in r.mediaList)r.mediaList.hasOwnProperty(i)&&e<parseInt(r.mediaList[i].maxSize)&&t.push(i);return 0<t.length?t[t.length-1]:"default"},r.getAllMediaNames=function(e){if("default"==e)return[];var t=[];for(var i in r.mediaList)r.mediaList.hasOwnProperty(i)&&parseInt(r.mediaList[e].maxSize)<parseInt(r.mediaList[i].maxSize)&&t.push(i);return t.push(e),t},r.setMediaParameter=function(e,t,i,a){r.component.options[e].media||(r.component.options[e].media={}),r.component.options[e].media[r.currentMedia]||(r.component.options[e].media[r.currentMedia]={}),r.component.options[e].media[r.currentMedia][a]||(r.component.options[e].media[r.currentMedia][a]={}),r.component.options[e].media[r.currentMedia][a][t]=i},r.isHasMedia=function(e,t){if(null==t&&(t=r.component.active.id),r.isEditing("id")){if("ct_reusable"!=r.component.active.name)return!!(r.component.options[t].media&&r.component.options[t].media[e]&&r.component.options[t].media[e][r.currentState]);var i=r.component.options[t].original.view_id;if(!r.postsData[i])return!1;var a=r.postsData[i].post_tree;return!!r.findMedia(a,e)}return r.isEditing("class")?!!(r.classes[r.currentClass]&&r.classes[r.currentClass].media&&r.classes[r.currentClass].media[e]&&r.classes[r.currentClass].media[e][r.currentState]):r.isEditing("custom-selector")&&!r.isEditing("class")?!!(r.customSelectors[r.selectorToEdit]&&r.customSelectors[r.selectorToEdit].media&&r.customSelectors[r.selectorToEdit].media[e]&&r.customSelectors[r.selectorToEdit].media[e][r.currentState]):void 0},r.isHasMedias=function(){for(var e in r.mediaList)if(r.mediaList.hasOwnProperty(e)){if("default"===e)continue;if(!0===r.isHasMedia(e))return!0}return!1},r.removeComponentMedia=function(e,t){r.cancelDeleteUndo(),r.isEditing("id")&&(null==t&&(t=r.component.active.id),r.component.options[t].media&&r.component.options[t].media[e]&&r.component.options[t].media[e][r.currentState]&&(r.component.options[t].media[e][r.currentState]={},delete r.component.options[t].media[e][r.currentState],r.outputCSSOptions(t),r.applyModelOptions(),r.findComponentItem(r.componentsTree.children,t,r.removeMediaFromTree,e))),r.isEditing("class")&&r.classes[r.currentClass]&&r.classes[r.currentClass].media&&r.classes[r.currentClass].media[e]&&r.classes[r.currentClass].media[e][r.currentState]&&(r.classes[r.currentClass].media[e][r.currentState]={},delete r.classes[r.currentClass].media[e][r.currentState],r.outputCSSOptions(),r.applyModelOptions()),r.unsavedChanges(),r.adjustResizeBox()},r.removeMediaFromTree=function(e,t,i){delete t.options.media[i]},r.sortedMediaList=function(e,t){if(!0===e){var i=r.mediaListAbove;size="minSize"}else{i=r.mediaList;size="maxSize"}var a=["default"],n=!1;if(i)if(!0===t)var o=r.globalSettings["max-width"];else o=i["page-width"][size];for(var s in i)if(i.hasOwnProperty(s)){if("default"==s||"page-width"==s)continue;parseInt(i[s][size])>=parseInt(o)||n?a.push(s):(a.push("page-width"),a.push(s),n=!0)}return n||a.push("page-width"),a}}]);
CTFrontendBuilder.controller("ControllerAPI",["$scope","$parentScope","$http","$timeout",function(d,c,e,t){d.itemOptions={},d.showAddItemDialog=function(e,t,o,n,i,r,a,m,p){var s;if(void 0!==m){if("component"===t){var l=[];l=p?d.experimental_components[p].items[m].contents:d.libraryCategories[m].contents,s=_.findWhere(l,{id:e,name:a,page:r,source:i})}else if("page"===t||"template"===t){l=[];l=p?"template"===t?d.experimental_components[p].templates:d.experimental_components[p].pages:d.libraryPages[m].contents,s=_.findWhere(l,{id:e,name:a,source:i})}if(void 0!==s.firstFew&&0===s.firstFew)return c.showDialogWindow(),void(c.dialogForms.showProComponentPageAddDialog=!0)}else s=void 0!==a&&void 0!==r?d.getSourceComponent(e,a,r):d.getAPIItem(e,t);"template"===t&&(t="page"),d.itemOptions={id:e,type:t,termId:o,termType:n,currentItem:s},void 0!==i&&(d.itemOptions.source=i),void 0!==r&&(d.itemOptions.page=r),void 0!==p&&(d.itemOptions.designSet=p),d.addItem()},d.addItem=function(e,t,o,n,i,r){switch(d.cancelDeleteUndo(),null==e&&(e=d.itemOptions.id),null==t&&(t=d.itemOptions.type),null==n&&null!=d.itemOptions.source&&(n=d.itemOptions.source),null==i&&null!=d.itemOptions.page&&(i=d.itemOptions.page),null==r&&null!=d.itemOptions.designSet&&(r=d.itemOptions.designSet),void 0!==o&&o.stopPropagation(),d.itemOptions={},t){case"component":void 0!==n&&void 0!==i?d.getComponentFromSource(e,n,r,i,d.addComponentFromSource):d.makeAPICall("get_components",{id:e},d.addReusableChildren);break;case"page":void 0!==n?d.getPageFromSource(e,n,r,d.addPageFromSource):d.makeAPICall("get_pages",{id:e},d.addReusableChildren)}c.hideDialogWindow()},d.getSourceComponent=function(t,e,o){var n=d.experimental_components[e].items.filter(function(e){return e.id==t&&e.page==o});return n[0]?n[0]:null}}]);
CTFrontendBuilder.controller("ControllerDragnDropLists",["$scope","$timeout","$parentScope","$interval",function(u,o,e,t){u.isHorizontal=!1,u.ghostElementForImg=new Image,u.ghostElementForImg.src=CtBuilderAjax.oxyFrameworkURI+"/toolbar/UI/images/ghost_img.png",u.dragoverCallback=function(e,t,n,r){if(u.hideResizeBox(),jQuery("body").addClass("oxygen-dragging"),u.currentDragoverElement=angular.element(document.querySelector("#"+e)),u.selectedDragElement.closest(".oxy-dynamic-list > *").length&&angular.element(t.target).closest(".oxy-dynamic-list > *").length&&u.selectedDragElement.closest(".oxy-dynamic-list > *").attr("id")==angular.element(t.target).closest(".oxy-dynamic-list > *").attr("id")&&u.selectedDragElement.closest(".oxy-dynamic-list > *").get(0)!==angular.element(t.target).closest(".oxy-dynamic-list > *").get(0))return!1;if(null!==u.dynamicListActivatedIndex&&1<u.selectedDragElement.length&&(u.currentDragoverElement=angular.element(u.currentDragoverElement.get(u.dynamicListActivatedIndex))),"'ct_div_block'"==u.currentDragoverElement.attr("dnd-type")&&"'ct_section'"==u.selectedDragElement.attr("dnd-type")&&"ct-builder"!=u.currentDragoverElement.parent().attr("id"))return!1;if("'ct_div_block'"==u.selectedDragElement.attr("dnd-type")&&"'ct_new_columns'"==u.selectedDragElement.parent().attr("dnd-type")&&"'ct_new_columns'"!=u.currentDragoverElement.attr("dnd-type"))return!1;if("'ct_div_block'"==u.selectedDragElement.attr("dnd-type")&&"'oxy_tabs'"==u.selectedDragElement.parent().attr("dnd-type")&&"'oxy_tabs'"!=u.currentDragoverElement.attr("dnd-type"))return!1;if("'ct_div_block'"==u.selectedDragElement.attr("dnd-type")&&"'oxy_tabs_contents'"==u.selectedDragElement.parent().attr("dnd-type")&&"'oxy_tabs_contents'"!=u.currentDragoverElement.attr("dnd-type"))return!1;if(u.currentDragoverElement.is("[dnd-horizontal-list]")?"column"==u.currentDragoverElement.css("flex-direction")?u.isHorizontal=!1:u.isHorizontal=!0:u.currentDragoverElement.children().eq(0).is("[dnd-horizontal-list]")&&("column"==u.currentDragoverElement.children().eq(0).css("flex-direction")?u.isHorizontal=!1:u.isHorizontal=!0),("'ct_div_block'"!=u.currentDragoverElement.attr("dnd-type")||"'ct_new_columns'"!=u.currentDragoverElement.parent().attr("dnd-type"))&&u.onCheckEdgeOfContainer(u.currentDragoverElement,t))return!1;angular.element(document.querySelectorAll(".dndDragover")).removeClass("dndDragover"),"'ct_section'"==u.currentDragoverElement.attr("dnd-type")?u.currentDragoverElement.children(".ct-inner-wrap").addClass("dndDragover"):u.currentDragoverElement.addClass("dndDragover");var a=u.selectedDragElementClone,l=angular.element(document.querySelector(".dndPlaceholder"));if(void 0!==u.selectedDragElement||0==l.children().length){l.parent(".oxy-icon-box").length&&l.prependTo(l.parent(".oxy-icon-box").children(".oxy-icon-box-content").children(".oxy-icon-box-link")),l.parent(".oxy-pricing-box").length&&l.prependTo(l.parent(".oxy-pricing-box").children(".oxy-pricing-box-cta")),l.after(a),u.selectedDragElement.addClass("hide");var d=angular.element(document.querySelector(".dndDraggingContainer"));"'ct_div_block'"==d.attr("dnd-type")&&0==d.children(":not(.dndDraggingSource)").length&&d.addClass("emptyDefaultSize")}return void 0!==l&&(angular.element(document.querySelectorAll(".dndTempEmptyHeight")).removeClass("dndTempEmptyHeight"),l.parent().addClass("dndTempEmptyHeight")),angular.element(document.querySelectorAll(".dndAvailableDragTarget")).removeClass("dndAvailableDragTarget"),"'ct_section'"==u.currentDragoverElement.attr("dnd-type")?(u.currentDragoverElement.children(".ct-inner-wrap").children(".ct-div-block").addClass("dndAvailableDragTarget"),u.currentDragoverElement.children(".ct-inner-wrap").children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),u.currentDragoverElement.children(".ct-inner-wrap").children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget")):(u.currentDragoverElement.children(".ct-div-block").addClass("dndAvailableDragTarget"),u.currentDragoverElement.children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),u.currentDragoverElement.children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget")),u.currentDragoverElement.parent().addClass("dndAvailableDragTarget").children(".ct-div-block").addClass("dndAvailableDragTarget"),u.currentDragoverElement.parent().children(".ct-section").children(".ct-section-inner-wrap").addClass("dndAvailableDragTarget"),u.currentDragoverElement.parent().children(".ct-new-columns").children(".ct-div-block").addClass("dndAvailableDragTarget"),!0},u.dragstartCallback=function(e,t,n){u.selectedDragElement=u.getComponentById(e),u.dragSrcOxyList=u.selectedDragElement.closest(".oxy-dynamic-list"),null!==u.dynamicListActivatedIndex&&1<u.selectedDragElement.length&&(u.selectedDragElement=angular.element(u.selectedDragElement.get(u.dynamicListActivatedIndex))),u.selectedDragElement.parent().addClass("dndDraggingContainer"),"'ct_div_block'"!=u.selectedDragElement.attr("dnd-type")&&"'ct_link'"!=u.selectedDragElement.attr("dnd-type")||""==u.selectedDragElement.html()&&u.selectedDragElement.addClass("emptyDefaultSize"),"'ct_inner_content'"==u.selectedDragElement.attr("dnd-type")&&""==u.selectedDragElement.html()&&u.selectedDragElement.css({height:u.selectedDragElement.height()}),u.selectedDragElement.find("iframe").each(function(e){var t=angular.element(document.createElement("div"));t.css({background:"rgba(0,0,0,0.5)",width:jQuery(this).outerWidth()+"px",height:jQuery(this).outerHeight()+"px"}),"'ct_video'"==u.selectedDragElement.attr("dnd-type")&&t.css({position:"absolute"}),jQuery(this).replaceWith(t)}),u.selectedDragElementClone=u.selectedDragElement.clone().removeClass("dndDraggingSource dndDragging ct-active").addClass("dndDraggingCloneSource"),u.selectedDragElementId=u.selectedDragElement.attr("id");"'ct_image'"==u.selectedDragElement.attr("dnd-type")?n.dataTransfer.setDragImage(u.ghostElementForImg,-0,-0):u.changeGhostImage(e,t,n,0,0)},u.dragendCallback=function(e,t,n){u.selectedDragElement.removeClass("hide").parent().removeClass("dndDraggingContainer").removeClass("emptyDefaultSize"),angular.element(document.querySelectorAll(".dndDragover")).removeClass("dndDragover"),angular.element(document.querySelectorAll(".dndAvailableDragTarget")).removeClass("dndAvailableDragTarget");var r,a,l,d,o,c,i=u.selectedDragElementClone;if(a=u.selectedDragElement.attr("ng-attr-component-id"),r=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+a+'"]')),1e5<(c=u.selectedDragElement.parent().closest("[ng-attr-component-id]").attr("ng-attr-component-id"))&&(c=u.innerContentRoot&&u.innerContentRoot.id?u.innerContentRoot.id:0),o=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+c+'"]')),null!=(d=i.parent().closest("[ng-attr-component-id]").attr("ng-attr-component-id"))){1e5<d&&(d=u.innerContentRoot&&u.innerContentRoot.id?u.innerContentRoot.id:0),l=angular.element(parent.document.querySelector('[ng-attr-tree-id="'+d+'"]'));var g=i.parent().children(":not(.dndDraggingSource)").index(i),s=u.findComponentItem(u.componentsTree.children,d,u.calculateBuiltInOffset);i.parent().removeClass("dndTempEmptyHeight"),i.remove(),u.updateDomTreeNBuilder(r,l,o,g+s);var m=u.getComponentById(a).closest(".oxy-dynamic-list");0<m.length&&setTimeout(function(){u.rebuildDOM(parseInt(m.attr("ng-attr-component-id")))},100),0<u.dragSrcOxyList.length&&(m.length<1||u.dragSrcOxyList.attr("ng-attr-component-id")!=m.attr("ng-attr-component-id"))&&setTimeout(function(){u.rebuildDOM(parseInt(u.dragSrcOxyList.attr("ng-attr-component-id")))},100),u.activateComponent(e),u.updateBreadcrumbs(e),u.adjustResizeBox()}else console.log("Drag failed: not created DNDPlaceholder");jQuery("body").removeClass("oxygen-dragging")},u.changeGhostImage=function(e,t,n,r,a){var l=document.createElement("div");l.className="dndGhostWrapper";var d=document.createElement("div");d.className+="dndGhostSource",d.innerHTML=u.component.options[e].nicename.replace(" (#"+e+")",""),l.appendChild(d),document.querySelector("#"+t).appendChild(l),n.dataTransfer.setDragImage(l,-r,-a),o(function(){l.parentNode.removeChild(l)},500,!1)},u.updateDomTreeNBuilder=function(e,t,n,r){var a=n[0].attributes["ng-attr-tree-id"].value,l=t[0].attributes["ng-attr-tree-id"].value,d=t.parent().attr("ng-attr-tree-id"),o=e[0].attributes["ng-attr-tree-id"].value;u.componentInsertId=l,u.newComponentKey=r,u.reorderSameParent=a==l,u.findParentComponentItem(u.componentsTree,o,u.cutComponentFromTree),u.findComponentItem(u.componentsTree.children,u.componentInsertId,u.pasteComponentToTree);var c=u.getComponentById(l);c.hasClass("ct-columns")&&(u.columns[a]--,u.columns[l]++),u.findComponentItem(u.componentsTree.children,o,u.updateComponentParentId),u.findParentComponentItem(u.componentsTree,o,u.updateCurrentActiveParent),c.hasClass("ct-new-columns")&&a==l?u.rebuildDOM(l):c.hasClass("ct-new-columns")?(u.rebuildDOM(a),u.rebuildDOM(o,!0)):c.hasClass("oxy-icon-box")?(u.rebuildDOM(o,!0),u.updateDOMTreeNavigator(o),0!=d?u.updateDOMTreeNavigator(d):u.updateDOMTreeNavigator()):u.rebuildDOM(o,!0),c.hasClass("oxy-icon-box")||u.updateDOMTreeNavigator(o),u.cancelDeleteUndo(),jQuery(t).removeClass("ct-dom-tree-no-children"),jQuery(n).children().length<=3&&jQuery(n).addClass("ct-dom-tree-no-children")},u.onCheckEdgeOfContainer=function(e,t){var n=e[0].getBoundingClientRect();return t.clientY<=n.top+n.height&&t.clientY>=n.top+n.height-3||t.clientY>=n.top&&t.clientY<=n.top+3||t.clientX<=n.left+n.width&&t.clientX>=n.left+n.width-3||t.clientX>=n.left&&t.clientX<=n.left+3},u.dragstartResizeBoxCallback=function(e,t){void 0===t&&(t=u.component.active.id);var n=u.component.options[t].selector;angular.element(document.querySelector("#oxygen-resize-box-drag-handler")).removeClass("dndDraggingSource dndDragging");var r=u.getComponentById(t);null!==u.dynamicListActivatedIndex&&1<r.length&&(r=angular.element(r.get(u.dynamicListActivatedIndex))),r.addClass("dndDraggingSource dndDragging"),u.dragstartCallback(t,n,e)},u.dragendResizeBoxCallback=function(e,t){var n=t||u.component.active.id;u.dragendCallback(n,u.selectedDragElementDNDType,e)}}]);
function oxygenMD5(t){function a(t,e){var n=t[0],o=t[1],i=t[2],a=t[3];o=s(o=s(o=s(o=s(o=p(o=p(o=p(o=p(o=d(o=d(o=d(o=d(o=r(o=r(o=r(o=r(o,i=r(i,a=r(a,n=r(n,o,i,a,e[0],7,-680876936),o,i,e[1],12,-389564586),n,o,e[2],17,606105819),a,n,e[3],22,-1044525330),i=r(i,a=r(a,n=r(n,o,i,a,e[4],7,-176418897),o,i,e[5],12,1200080426),n,o,e[6],17,-1473231341),a,n,e[7],22,-45705983),i=r(i,a=r(a,n=r(n,o,i,a,e[8],7,1770035416),o,i,e[9],12,-1958414417),n,o,e[10],17,-42063),a,n,e[11],22,-1990404162),i=r(i,a=r(a,n=r(n,o,i,a,e[12],7,1804603682),o,i,e[13],12,-40341101),n,o,e[14],17,-1502002290),a,n,e[15],22,1236535329),i=d(i,a=d(a,n=d(n,o,i,a,e[1],5,-165796510),o,i,e[6],9,-1069501632),n,o,e[11],14,643717713),a,n,e[0],20,-373897302),i=d(i,a=d(a,n=d(n,o,i,a,e[5],5,-701558691),o,i,e[10],9,38016083),n,o,e[15],14,-660478335),a,n,e[4],20,-405537848),i=d(i,a=d(a,n=d(n,o,i,a,e[9],5,568446438),o,i,e[14],9,-1019803690),n,o,e[3],14,-187363961),a,n,e[8],20,1163531501),i=d(i,a=d(a,n=d(n,o,i,a,e[13],5,-1444681467),o,i,e[2],9,-51403784),n,o,e[7],14,1735328473),a,n,e[12],20,-1926607734),i=p(i,a=p(a,n=p(n,o,i,a,e[5],4,-378558),o,i,e[8],11,-2022574463),n,o,e[11],16,1839030562),a,n,e[14],23,-35309556),i=p(i,a=p(a,n=p(n,o,i,a,e[1],4,-1530992060),o,i,e[4],11,1272893353),n,o,e[7],16,-155497632),a,n,e[10],23,-1094730640),i=p(i,a=p(a,n=p(n,o,i,a,e[13],4,681279174),o,i,e[0],11,-358537222),n,o,e[3],16,-722521979),a,n,e[6],23,76029189),i=p(i,a=p(a,n=p(n,o,i,a,e[9],4,-640364487),o,i,e[12],11,-421815835),n,o,e[15],16,530742520),a,n,e[2],23,-995338651),i=s(i,a=s(a,n=s(n,o,i,a,e[0],6,-198630844),o,i,e[7],10,1126891415),n,o,e[14],15,-1416354905),a,n,e[5],21,-57434055),i=s(i,a=s(a,n=s(n,o,i,a,e[12],6,1700485571),o,i,e[3],10,-1894986606),n,o,e[10],15,-1051523),a,n,e[1],21,-2054922799),i=s(i,a=s(a,n=s(n,o,i,a,e[8],6,1873313359),o,i,e[15],10,-30611744),n,o,e[6],15,-1560198380),a,n,e[13],21,1309151649),i=s(i,a=s(a,n=s(n,o,i,a,e[4],6,-145523070),o,i,e[11],10,-1120210379),n,o,e[2],15,718787259),a,n,e[9],21,-343485551),t[0]=g(n,t[0]),t[1]=g(o,t[1]),t[2]=g(i,t[2]),t[3]=g(a,t[3])}function c(t,e,n,o,i,a){return e=g(g(e,t),g(o,a)),g(e<<i|e>>>32-i,n)}function r(t,e,n,o,i,a,r){return c(e&n|~e&o,t,e,i,a,r)}function d(t,e,n,o,i,a,r){return c(e&o|n&~o,t,e,i,a,r)}function p(t,e,n,o,i,a,r){return c(e^n^o,t,e,i,a,r)}function s(t,e,n,o,i,a,r){return c(n^(e|~o),t,e,i,a,r)}function l(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var o="0123456789abcdef".split("");function n(t){for(var e="",n=0;n<4;n++)e+=o[t>>8*n+4&15]+o[t>>8*n&15];return e}function e(t){return function(t){for(var e=0;e<t.length;e++)t[e]=n(t[e]);return t.join("")}(function(t){txt="";var e,n=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)a(o,l(t.substring(e-64,e)));t=t.substring(e-64);var i=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)i[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(i[e>>2]|=128<<(e%4<<3),55<e)for(a(o,i),e=0;e<16;e++)i[e]=0;return i[14]=8*n,a(o,i),o}(t))}function g(t,e){return t+e&4294967295}if("5d41402abc4b2a76b9719d911017c592"!=e("hello"))function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return e(t)}CTFrontendBuilder.directive("ngBuilderWrap",["$parentScope","$compile","$timeout","$interval",function(I,t,Q,B){return{restrict:"A",link:function(j,t){j.insertBeforeComponent=function(t,e){for(var n=e.activeComponent;!n.is(t)&&!n.hasClass("ct-builder");)n=n.parent();0!=n[0].getAttribute("ng-attr-component-id")&&(e.index=n.index()+1,n=jQuery(n).parent().closest("[is-nestable]"),e.idToInsert=n[0].getAttribute("ng-attr-component-id"),j.activateComponent(e.idToInsert),e.activeComponent=j.getActiveComponent())},j.addComponents=function(t,e){if(j.addComponent(t),"ct_columns"==t)var n=Q(function(){j.addComponent(e,!1,!0),B.cancel(n)},0,!1),o=Q(function(){j.addColumn(j.component.active.id),j.columns[j.component.active.id]=2,B.cancel(o)},500,!1);else n=Q(function(){j.addComponent(e),B.cancel(n)},0,!1)},j.addTab=function(){var n=j.component.active.id,o=j.component.active.name;if("oxy_tabs"==j.component.active.name){var t=j.getOption("tabs_contents_wrapper"),e=jQuery("#"+t).attr("ng-attr-component-id"),i=j.addComponent("oxy_tab",!1,!0),a=j.getOption("active_tab_class",n);j.addClassToComponentSafe(i,a.replace("-active","")),j.addClassToComponentSafe(i,a),j.activeSelectors[i]=a.replace("-active","");var r=Q(function(){j.activateComponent(i,"oxy_tab");var t=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Another Tab",t,"ct_text_block"),B.cancel(r)},0,!1);j.activateComponent(e,"oxy_tabs_contents"),addedComponentIDTwo=j.addComponent("oxy_tab_content",!1,!0),j.addClassToComponentSafe(addedComponentIDTwo,a.replace("tabs-","tabs-contents-").replace("-active","")),j.activeSelectors[addedComponentIDTwo]=a.replace("tabs-","tabs-contents-").replace("-active","");r=Q(function(){j.activateComponent(addedComponentIDTwo,"oxy_tab_content");var t=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Another Tab Contents",t,"ct_text_block");var e=Q(function(){jQuery(j.getComponentById(i)).trigger("click"),j.activateComponent(n,o),j.adjustResizeBox(),B.cancel(e)},100,!1);B.cancel(r)},0,!1)}else if("oxy_tabs_contents"==j.component.active.name){t=j.getOption("tabs_wrapper"),e=jQuery("#"+t).attr("ng-attr-component-id"),i=j.addComponent("oxy_tab_content",!1,!0),a=j.getOption("active_tab_class",e);j.addClassToComponentSafe(i,a.replace("tabs-","tabs-contents-").replace("-active","")),j.activeSelectors[i]=a.replace("tabs-","tabs-contents-").replace("-active","");r=Q(function(){j.activateComponent(i,"oxy_tab_content");var t=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Another Tab Contents",t,"ct_text_block"),B.cancel(r)},0,!1);j.activateComponent(e,"oxy_tabs"),addedComponentIDTwo=j.addComponent("oxy_tab",!1,!0),j.addClassToComponentSafe(addedComponentIDTwo,a.replace("-active","")),j.addClassToComponentSafe(addedComponentIDTwo,a),j.activeSelectors[addedComponentIDTwo]=a.replace("-active","");r=Q(function(){j.activateComponent(addedComponentIDTwo,"oxy_tab");var t=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Another Tab",t,"ct_text_block");var e=Q(function(){jQuery(j.getComponentById(addedComponentIDTwo)).trigger("click"),j.activateComponent(n,o),j.adjustResizeBox(),B.cancel(e)},100,!1);B.cancel(r)},0,!1)}},j.addComponent=function(t,e,n,o){j.cancelDeleteUndo(),j.log&&console.log("addComponent()",t,e,n);var i=jQuery("div.ct-component.ct-inner-content:not(.ct-inner-content-workarea)");if(!("ct_inner_content"===t&&0<i.length)){"ct_inner_content"===t&&(j.innerContentAdded=!0);var a=!1;j.applyComponentDefaultOptions(j.component.id,t);var r={},c=j.getComponentTemplate(t,j.component.id,e,null,o);if(r.idToInsert=j.component.active.id,r.activeComponent=j.getActiveComponent(),r.index=!1,r.activeComponent||(r.activeComponent=document.getElementsByClassName("ct-builder"),r.activeComponent=angular.element(r.activeComponent),r.idToInsert=0),"ct_section"==t&&j.insertBeforeComponent(".ct_section, .oxy_header, .ct_slider",r),"ct_modal"==t){j.insertBeforeComponent(".ct_section, .oxy_header, .ct_slider, .ct_modal",r);var d=Q(function(){j.setOptionModel("width",iframeScope.component.options[j.component.active.id].model.width,j.component.active.id,"ct_modal"),Q.cancel(d)},0,!1)}if("ct_new_columns"==t&&j.insertBeforeComponent(".ct_new_columns",r),"oxy_tabs"!=t&&"oxy_tabs_contents"!=t||j.insertBeforeComponent(".oxy_tabs, .oxy_tabs_contents",r),"ct_link"!=t&&"ct_link_text"!=t||j.insertBeforeComponent(".ct_link",r),"oxy_header"==t&&j.insertBeforeComponent(".oxy_header, .ct_section",r),"ct_inner_content"==t&&j.insertBeforeComponent(".oxy_header, .ct_section",r),"ct_slider"==t&&j.insertBeforeComponent(".ct_slider",r),"oxy_icon_box"==t&&j.insertBeforeComponent(".oxy_icon_box",r),"oxy_pricing_box"==t&&j.insertBeforeComponent(".oxy_pricing_box",r),"ct_inner_content"!=j.component.active.name||j.isTemplateInnerContent(j.component.active)||j.insertBeforeComponent(".ct_inner_content",r),"ct_link_button"!=t&&"ct_link_text"!=t&&"builtin"!==e&&j.insertBeforeComponent(".oxy_pricing_box, .oxy_icon_box",r),"ct_columns"==j.component.active.name&&"ct_column"==t)(p=j.getInnerWrap(r.activeComponent)).append(c),j.cleanInsert(r.activeComponent),callback=j.insertComponentToTree,j.setOptionModel("width","100",j.component.id,"ct_column");else if("oxy_header"==j.component.active.name&&"oxy_header_row"==t){var p=j.getInnerWrap(r.activeComponent);callback=j.insertComponentToTree,p.append(c),j.cleanInsert(r.activeComponent)}else if("ct_new_columns"==j.component.active.name&&"ct_div_block"==t){p=j.getInnerWrap(r.activeComponent);callback=j.insertComponentToTree,p.append(c),j.cleanInsert(r.activeComponent)}else if("ct_new_columns"==j.component.active.name&&"ct_div_block"!=t&&0<r.activeComponent.children(".ct_div_block").length){var s=r.activeComponent.children(".ct_div_block").first();r.idToInsert=parseInt(s.attr("ng-attr-component-id")),callback=j.insertComponentToTree,j.cleanInsert(c,s)}else if(("oxy_tabs"==j.component.active.name||"oxy_tabs_contents"==j.component.active.name)&&"ct_div_block"!=t&&0<r.activeComponent.children(".ct_div_block").length){var l=r.activeComponent.children(".ct_div_block").first();r.idToInsert=parseInt(l.attr("ng-attr-component-id")),callback=j.insertComponentToTree,j.cleanInsert(c,l)}else if("oxy_header_row"==j.component.active.name&&"oxy_header_row"==t)a=r.activeComponent.parent(),r.index=r.activeComponent.index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index);else if("oxy_header_row"==j.component.active.name&&"oxy_header_left"!==t&&"oxy_header_center"!==t&&"oxy_header_right"!==t){var g=r.activeComponent.find(".oxy-header-left");r.idToInsert=parseInt(g.attr("ng-attr-component-id")),callback=j.insertComponentToTree,j.cleanInsert(c,g)}else if("oxy_header"==j.component.active.name&&"oxy_header_left"!==t&&"oxy_header_center"!==t&&"oxy_header_right"!==t){g=r.activeComponent.find(".oxy-header-left");r.idToInsert=parseInt(g.attr("ng-attr-component-id")),callback=j.insertComponentToTree,j.cleanInsert(c,g)}else if("oxy_header_left"==t||"oxy_header_center"==t||"oxy_header_right"==t){p=j.getInnerWrap(r.activeComponent);callback=j.insertComponentToTree,p.append(c),j.cleanInsert(r.activeComponent)}else if("ct_ul"==j.component.active.name&&"ct_li"!=t)a=r.activeComponent.parent(),r.index=r.activeComponent.index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index);else if("ct_if_else_wrap"==j.component.active.name&&"ct_if_wrap"!=t&&"ct_else_wrap"!=t)a=r.activeComponent.parent(),r.index=r.activeComponent.index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index);else if("oxy_dynamic_list"==j.component.active.name&&("ct_div_block"!=t||0<r.activeComponent.children(".ct_div_block").length)){0<(p=r.activeComponent.children("div")).length?(j.cleanInsert(c,p,r.index),callback=j.insertComponentToChild):(a=r.activeComponent.parent(),r.index=r.activeComponent.index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index))}else if("ct_li"==j.component.active.name&&"ct_li"!=t)a=r.activeComponent.parent().parent(),r.index=r.activeComponent.parent().index()+1,callback=j.insertComponentToGrandParent,j.cleanInsert(c,a,r.index);else if("ct_slide"==j.component.active.name&&"ct_slide"==t)a=r.activeComponent.parent().parent(),r.index=r.activeComponent.parent().index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index);else if("ct_slider"==j.component.active.name&&"ct_slide"!=t&&0<r.activeComponent.find(".unslider-active").length){var m=r.activeComponent.find(".unslider-active").children(".ct_slide");r.idToInsert=parseInt(m.attr("ng-attr-component-id")),callback=j.insertComponentToTree,j.cleanInsert(c,m)}else if("ct_slider"==j.component.active.name&&"ct_slide"!=t&&0==r.activeComponent.find(".unslider-active").length)a=r.activeComponent.parent(),r.index=r.activeComponent.index()+1,callback=j.insertComponentToParent,j.cleanInsert(c,a,r.index);else if(r.activeComponent[0].attributes["is-nestable"]){if((jQuery("body").hasClass("ct_inner")||jQuery("body",window.parent.document).hasClass("ct_inner"))&&(0===parseInt(r.idToInsert)||1e5<parseInt(r.idToInsert))&&0<jQuery(".ct-inner-content.ct-component").length){var u=parseInt(jQuery(".ct-inner-content.ct-component").attr("ng-attr-component-id"));r.idToInsert!=u&&(r.idToInsert=u,r.index=!1,j.activateComponent(r.idToInsert),r.activeComponent=j.getActiveComponent(),callback=j.insertComponentToTree)}p=j.getInnerWrap(r.activeComponent);"builtin"==e&&(p=j.getBuiltInWrap(r.activeComponent)),j.cleanInsert(c,p,r.index),callback=j.insertComponentToTree}else if("builtin"==e)p=j.getBuiltInWrap(r.activeComponent),j.cleanInsert(c,p,r.index),callback=j.insertComponentToTree;else{if(a=r.activeComponent.parent(),callback=j.insertComponentToParent,!a[0].attributes["is-nestable"]&&!a.hasClass("ct-inner-wrap")){for(;!a[0].attributes["is-nestable"]&&!a.hasClass("ct-inner-wrap");)a=a.parent();callback=j.insertComponentToGrandParent}"true"==j.component.options[j.component.active.id].original.oxy_builtin&&(a=a.parent()),r.index=r.activeComponent.index()+1,j.cleanInsert(c,a,r.index)}if("shortcode"==e)var b=!0;if("widget"==e)var _=!0;if("data"==e)var v=!0;if("sidebar"==e)var f=!0;if("nav_menu"==e)var C=!0;if("builtin"==e){var y=!0;j.builtinComponents[j.component.id]=!0}var x={id:j.component.id,name:t,isShortcode:b,isWidget:_,isData:v,isSidebar:f,isNavMenu:C,isBuiltIn:y,index:r.index};if(j.findComponentItem(j.componentsTree.children,r.idToInsert,callback,x),n||j.activateComponent(j.component.id,t),j.justaddedcomponents=j.justaddedcomponents||[],j.justaddedcomponents.push(j.component.id),j.setOption(j.component.id,t),j.setFirstTimeOptions(j.component.id,t),"ct_slide"==t)d=Q(function(){j.rebuildDOM(r.idToInsert),B.cancel(d)},0,!1);j.component.id++,I.closeAllTabs(),j.unsavedChanges();var h=0;"ct_slide"!=t&&"oxy_social_icons"!=t||(h=1e3);d=Q(function(){I.scrollToComponent(j.getActiveComponent().attr("id")),B.cancel(d)},h,!1);if("oxy_header_row"==t)d=Q(function(){j.addComponent("oxy_header_left",!1,!0),j.addComponent("oxy_header_center",!1,!0),j.addComponent("oxy_header_right",!1,!0),B.cancel(d)},0,!1);if("ct_if_else_wrap"==t)d=Q(function(){j.addComponent("ct_if_wrap",!1,!0,x.id),j.addComponent("ct_else_wrap",!1,!0,x.id),B.cancel(d)},0,!1);if("oxy_dynamic_list"==t)d=Q(function(){j.addComponent("ct_div_block",!1,!0,x.id),B.cancel(d)},0,!1);if("oxy_icon_box"==t)d=Q(function(){var t=j.addComponent("ct_fancy_icon","builtin",!0);j.setOptionModel("icon-id","Lineariconsicon-rocket",t,"ct_fancy_icon"),B.cancel(d)},0,!1);if("oxy_superbox"==t)d=Q(function(){var t=j.addComponent("ct_div_block","builtin",!0),e=j.addComponent("ct_div_block","builtin",!0);j.component.options[t].nicename="Primary",j.component.options[e].nicename="Secondary",j.updateFriendlyName(t),j.updateFriendlyName(e),j.addClassToComponentSafe(t,"oxy-superbox-primary"),j.addClassToComponentSafe(e,"oxy-superbox-secondary"),j.setOptionModel("align-items","center",e,"ct_div_block"),j.setOptionModel("justify-content","center",e,"ct_div_block"),j.setOptionModel("background-color","rgba(0,0,0,0.3)",e,"ct_div_block"),j.setOptionModel("text-align","center",e,"ct_div_block"),j.activateComponent(t);var n=j.addComponent("ct_image",!1,!0);j.setOptionModel("src","https://source.unsplash.com/random/480x270",n,"ct_image"),j.setOptionModel("width","400",n,"ct_image"),j.activateComponent(e);var o=j.addComponent("ct_headline",!1,!0);j.setOptionModel("ct_content","Superbox",o,"ct_headline"),j.setOptionModel("font-size","36",o,"ct_headline"),j.setOptionModel("color","#ffffff",o,"ct_headline"),j.setOptionModel("tag","h2",o,"ct_headline"),j.activateComponent(x.id),B.cancel(d)},0,!1);if("oxy_pricing_box"==t)d=Q(function(){var t=j.addComponent("ct_image","builtin",!0);j.setOptionModel("src","http://placehold.it/300x150",t,"ct_image"),j.addComponent("ct_link_button",!1,!0),B.cancel(d)},0,!1);if("oxy_tabs"==t){for(var S,$=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),T=0;$.length<4&&T<1e5;)$=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),T++;d=Q(function(){S=j.addComponent("oxy_tab",!1,!0);var t=j.addComponent("oxy_tab",!1,!0),e=j.addComponent("oxy_tab",!1,!0);j.addClassToComponentSafe(S,"tabs-"+$+"-tab"),j.addClassToComponentSafe(t,"tabs-"+$+"-tab"),j.addClassToComponentSafe(e,"tabs-"+$+"-tab"),j.addClassToComponentSafe(S,"tabs-"+$+"-tab-active"),j.addClassToComponentSafe(t,"tabs-"+$+"-tab-active"),j.addClassToComponentSafe(e,"tabs-"+$+"-tab-active"),j.activeSelectors=j.activeSelectors||{},j.activeSelectors[S]="tabs-"+$+"-tab",j.activeSelectors[t]="tabs-"+$+"-tab",j.activeSelectors[e]="tabs-"+$+"-tab",j.activateComponent(S,"oxy_tab");var n=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab #1",n,"ct_text_block"),j.activateComponent(t,"oxy_tab");var o=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab #2",o,"ct_text_block"),j.activateComponent(e,"oxy_tab");var i=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab #3",i,"ct_text_block"),B.cancel(d)},0,!1),d=Q(function(){j.activateComponent(x.id,"oxy_tabs");var t=j.addComponent("oxy_tabs_contents",!1,!0);j.activateComponent(t,"oxy_tabs_contents");var e=j.addComponent("oxy_tab_content",!1,!0),n=j.addComponent("oxy_tab_content",!1,!0),o=j.addComponent("oxy_tab_content",!1,!0);j.addClassToComponentSafe(e,"tabs-contents-"+$+"-tab"),j.addClassToComponentSafe(n,"tabs-contents-"+$+"-tab"),j.addClassToComponentSafe(o,"tabs-contents-"+$+"-tab"),j.activeSelectors=j.activeSelectors||{},j.activeSelectors[e]="tabs-contents-"+$+"-tab",j.activeSelectors[n]="tabs-contents-"+$+"-tab",j.activeSelectors[o]="tabs-contents-"+$+"-tab",j.activateComponent(e,"oxy_tab_content");var i=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab Content #1",i,"ct_text_block"),j.activateComponent(n,"oxy_tab_content");var a=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab Content #2",a,"ct_text_block"),j.activateComponent(o,"oxy_tab_content");var r=j.addComponent("ct_text_block",!1,!0);j.setOptionModel("ct_content","Tab Content #3",r,"ct_text_block"),j.activateComponent(x.id,"oxy_tabs"),j.setOptionModel("tabs_wrapper",j.component.options[x.id].selector,t,"oxy_tabs_contents"),j.setOptionModel("tabs_contents_wrapper",j.component.options[t].selector,x.id,"oxy_tabs"),j.setOptionModel("active_tab_class","tabs-"+$+"-tab-active",x.id,"oxy_tabs");var c=Q(function(){jQuery(j.getComponentById(x.id)).children(".oxy-tabs-wrapper > div").eq(0).trigger("click"),j.activateComponent(S,"oxy_tab"),B.cancel(c)},100,!1);c=Q(function(){j.adjustResizeBox(),B.cancel(c)},200,!1);B.cancel(d)},100,!1)}if("oxy_toggle"==t){for($=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),T=0;$.length<4&&T<1e5;)$=oxygenMD5(Date.now().toString()).match(/\d+/)[0].substring(0,4),T++;var k=j.component.active.parent.id,O=j.component.active.parent.name;j.addClassToComponentSafe(x.id,"toggle-"+$),j.addClassToComponentSafe(x.id,"toggle-"+$+"-expanded"),j.activeSelectors[x.id]="toggle-"+$,j.setOptionModel("toggle_active_class","toggle-"+$+"-expanded",x.id,"oxy_toggle");d=Q(function(){j.addComponent("ct_headline",!1,!0),j.activateComponent(k,O),j.addComponent("ct_text_block",!1,!0),B.cancel(d)},10,!1)}if("oxy_posts_grid"==t&&j.setEasyPostsTemplate(j.easyPostsDefaultTemplates["grid-image-standard"],!1),"oxy_comments"==t&&j.setCommentsListTemplate(j.commentsListDefaultTemplates.default),"ct_span"!==t){var w=j.getComponentById(x.id).closest(".oxy-dynamic-list");0<w.length&&j.rebuildDOM(parseInt(w.attr("ng-attr-component-id")))}return x.id}alert("You cannot add more than one Inner Content component to a template.")}}}}]),CTFrontendBuilder.directive("ngModel",["$timeout","$interval",function(t,e){return{restrict:"A",priority:-1,link:function(t,e,n){t.$watch(n.ngModel,function(t){e.is(":radio")&&(e.next().addClass("ct-update-css"),e.next().removeClass("ct-update-css"))})}}}]),CTFrontendBuilder.directive("ctFloatEditor",function(){return{link:function(t,e,n,o){var i=angular.element("#oxygen-topbar").outerHeight(),a=t.getActiveComponent(),r=a.outerHeight(),c=a[0].getBoundingClientRect(),d=a.offset();n.draggable({handle:".ct-draggable-handle",containment:"document"});var p=n.outerHeight(),s=n.outerWidth(),l=xOffset=0;l=n.is(".ct-choose-selector")?110:i+p>c.top?r+8:-(p+8);var g=e.showSidePanel?330:0;c.left+s>document.documentElement.clientWidth-20-g&&(xOffset=document.documentElement.clientWidth-20-g-(c.left+s)),n.css({top:d.top+l,left:d.left+xOffset})}}}),CTFrontendBuilder.directive("oxygenResizeBox",["$timeout","$interval",function(_,t){return{restrict:"AE",scope:{rOptions:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rGrabber:"@",rDisabled:"@"},link:function(i,a,t){"flexBasis"in document.documentElement.style||"webkitFlexBasis"in document.documentElement.style||document.documentElement.style,window.getComputedStyle(a[0],null);var r,c,d,p,s,e=i.rOptions||["top","right","bottom","left","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],o=i.rCenteredX?2:1,l=i.rCenteredY?2:1,n=i.rGrabber?i.rGrabber:"<span></span>",g=function(t){return t.touches?t.touches[0].clientX:t.clientX},m=function(t){return t.touches?t.touches[0].clientY:t.clientY},u=function(t){var e="x"===d?r-g(t):r-m(t);switch(c){case"margin-top":if(s=0<marginTop-e*l?marginTop-e*l:0,i.$parent.parentScope.showStatusBar("margin-top:"+s+marginTopUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-top",s.toString()+marginTopUnit);else if(i.$parent.isEditing("class")){var n="."+i.$parent.currentClass+"{margin-top:"+s.toString()+marginTopUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-bottom":if(s=0<marginBottom-e*l?marginBottom-e*l:0,i.$parent.parentScope.showStatusBar("margin-bottom:"+s+marginBottomUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-bottom",s.toString()+marginBottomUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-bottom:"+s.toString()+marginBottomUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-right":if(s=0<marginRight-e*o?marginRight-e*o:0,i.$parent.parentScope.showStatusBar("margin-right:"+s+marginRightUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-right",s.toString()+marginRightUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-right:"+s.toString()+marginRightUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"margin-left":if(s=0<marginLeft-e*o?marginLeft-e*o:0,i.$parent.parentScope.showStatusBar("margin-left:"+s+marginLeftUnit),i.$parent.isEditing("id"))jQuery(p).css("margin-left",s.toString()+marginLeftUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{margin-left:"+s.toString()+marginLeftUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}break;case"padding-top":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingTop-e*l?containerPaddingTop-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-top",s.toString()+paddingTopUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-top:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingTop-e*l?paddingTop-e*l:0,i.$parent.isEditing("id"))jQuery(p).css("padding-top",s.toString()+paddingTopUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-top:"+s.toString()+paddingTopUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-top:"+s+paddingTopUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-bottom",s.toString()+paddingTopUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-bottom:"+s.toString()+paddingTopUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-bottom":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingBottom-e*l?containerPaddingBottom-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-bottom",s.toString()+paddingBottomUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-bottom:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingBottom-e*l?paddingBottom-e*l:0,i.$parent.isEditing("id"))jQuery(p).css("padding-bottom",s.toString()+paddingBottomUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-bottom:"+s.toString()+paddingBottomUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-bottom:"+s+paddingBottomUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-top",s.toString()+paddingBottomUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-top:"+s.toString()+paddingBottomUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-right":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingRight-e*l?containerPaddingRight-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-right",s.toString()+paddingRightUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-right:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingRight-e*o?paddingRight-e*o:0,i.$parent.isEditing("id"))jQuery(p).css("padding-right",s.toString()+paddingRightUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-right:"+s.toString()+paddingRightUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-right:"+s+paddingRightUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-left",s.toString()+paddingRightUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-left:"+s.toString()+paddingRightUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n);break;case"padding-left":if(i.$parent.parentScope.isActiveName("ct_section")){if(s=0<containerPaddingLeft-e*l?containerPaddingLeft-e*l:0,i.$parent.isEditing("id"))jQuery(".ct-section-inner-wrap",p).css("padding-left",s.toString()+paddingLeftUnit);else if(i.$parent.isEditing("class"))n="."+i.$parent.currentClass+" .ct-section-inner-wrap{padding-left:"+s.toString()+paddingTopUnit+"}"}else if(s=0<paddingLeft-e*o?paddingLeft-e*o:0,i.$parent.isEditing("id"))jQuery(p).css("padding-left",s.toString()+paddingLeftUnit);else if(i.$parent.isEditing("class")){n="."+i.$parent.currentClass+"{padding-left:"+s.toString()+paddingLeftUnit+"}";i.$parent.outputCSSStyles("oxy-dragging-styles",n)}i.$parent.parentScope.showStatusBar("padding-left:"+s+paddingLeftUnit),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.isEditing("id")?jQuery(p).css("padding-right",s.toString()+paddingLeftUnit):i.$parent.isEditing("class")&&(n+="."+i.$parent.currentClass+"{padding-right:"+s.toString()+paddingLeftUnit+"}")),i.$parent.outputCSSStyles("oxy-dragging-styles",n)}0<s&&(jQuery("#rb-"+c+"-button").css("display","none"),jQuery("#rb-"+c).addClass("rb-currently-editing")),0==s&&jQuery("#rb-"+c).removeClass("rb-currently-editing"),i.$parent.adjustResizeBox(),i.$apply()},b=function(t){if(i.$parent.outputCSSStyles("oxy-dragging-styles",""),i.$apply(),document.removeEventListener("mouseup",b,!1),document.removeEventListener("mousemove",u,!1),document.removeEventListener("touchend",b,!1),document.removeEventListener("touchmove",u,!1),window.parent.document.removeEventListener("mouseup",b,!1),window.parent.document.removeEventListener("touchend",b,!1),void 0!==s)switch(c){case"margin-top":i.$parent.setOptionModel("margin-top",s.toString()),jQuery(p).css("margin-top","");break;case"margin-bottom":i.$parent.setOptionModel("margin-bottom",s.toString()),jQuery(p).css("margin-bottom","");break;case"margin-right":i.$parent.setOptionModel("margin-right",s.toString()),jQuery(p).css("margin-right","");break;case"margin-left":i.$parent.setOptionModel("margin-left",s.toString()),jQuery(p).css("margin-left","");break;case"padding-top":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-top",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-top","")):(i.$parent.setOptionModel("padding-top",s.toString()),jQuery(p).css("padding-top","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-bottom",s.toString()),jQuery(p).css("padding-bottom",""));break;case"padding-bottom":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-bottom",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-bottom","")):(i.$parent.setOptionModel("padding-bottom",s.toString()),jQuery(p).css("padding-bottom","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-top",s.toString()),jQuery(p).css("padding-top",""));break;case"padding-right":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-right",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-right","")):(i.$parent.setOptionModel("padding-right",s.toString()),jQuery(p).css("padding-right","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-left",s.toString()),jQuery(p).css("padding-left",""));break;case"padding-left":i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-padding-left",s.toString()),jQuery(".ct-section-inner-wrap",p).css("padding-left","")):(i.$parent.setOptionModel("padding-left",s.toString()),jQuery(p).css("padding-left","")),i.$parent.parentScope.isActiveName("ct_link_button")&&(i.$parent.setOptionModel("padding-right",s.toString()),jQuery(p).css("padding-right",""))}a.removeClass("oxygen-no-transition"),jQuery(".rb-currently-editing").removeClass("rb-currently-editing"),i.$parent.parentScope.hideStatusBar(),i.$parent.parentScope.$apply();var e=_(function(){jQuery("body").removeClass("oxy-dragging-resize-box"),_.cancel(e)},0,!1)};e.forEach(function(o){var t=document.createElement("div");t.setAttribute("class","rb"),t.setAttribute("id","rb-"+o),t.innerHTML=n,a.append(t),t.ondragstart=function(){return!1};var e=function(t){var e,n;"true"===i.rDisabled||1!==t.which&&!t.touches||(e=t,n=o,jQuery("body").addClass("oxy-dragging-resize-box"),c=n,jQuery("#rb-"+c),d=0<=c.indexOf("left")||0<=c.indexOf("right")?"x":"y",r="x"===d?g(e):m(e),s=void 0,p=i.$parent.getActiveComponent(),containerPaddingBottom=parseInt(i.$parent.getOption("container-padding-bottom")),containerPaddingBottomUnit=i.$parent.getOptionUnit("container-padding-bottom"),containerPaddingTop=parseInt(i.$parent.getOption("container-padding-top")),containerPaddingTopUnit=i.$parent.getOptionUnit("container-padding-top"),containerPaddingLeft=parseInt(i.$parent.getOption("container-padding-left")),containerPaddingLeftUnit=i.$parent.getOptionUnit("container-padding-left"),containerPaddingRight=parseInt(i.$parent.getOption("container-padding-right")),containerPaddingRightUnit=i.$parent.getOptionUnit("container-padding-right"),paddingTop=parseInt(i.$parent.getOption("padding-top"))||0,paddingTopUnit=i.$parent.getOptionUnit("padding-top"),paddingRight=parseInt(i.$parent.getOption("padding-right"))||0,paddingRightUnit=i.$parent.getOptionUnit("padding-right"),paddingBottom=parseInt(i.$parent.getOption("padding-bottom"))||0,paddingBottomUnit=i.$parent.getOptionUnit("padding-bottom"),paddingLeft=parseInt(i.$parent.getOption("padding-left"))||0,paddingLeftUnit=i.$parent.getOptionUnit("padding-left"),marginTop=parseInt(i.$parent.getOption("margin-top"))||0,marginTopUnit=i.$parent.getOptionUnit("margin-top"),marginRight=parseInt(i.$parent.getOption("margin-right"))||0,marginRightUnit=i.$parent.getOptionUnit("margin-right"),marginBottom=parseInt(i.$parent.getOption("margin-bottom"))||0,marginBottomUnit=i.$parent.getOptionUnit("margin-bottom"),marginLeft=parseInt(i.$parent.getOption("margin-left"))||0,marginLeftUnit=i.$parent.getOptionUnit("margin-left"),a.addClass("oxygen-no-transition"),document.addEventListener("mouseup",b,!1),document.addEventListener("mousemove",u,!1),document.addEventListener("touchend",b,!1),document.addEventListener("touchmove",u,!1),window.parent.document.addEventListener("mouseup",b,!1),window.parent.document.addEventListener("touchend",b,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,i.$apply())};t.addEventListener("mousedown",e,!1),t.addEventListener("touchstart",e,!1),-1==["top","right","left","bottom"].indexOf(o)?(jQuery(t).mouseenter(function(){jQuery(this).addClass("rb-currently-editing")}).mouseleave(function(){jQuery(this).removeClass("rb-currently-editing")}),jQuery(t).dblclick(function(){p=i.$parent.getActiveComponent(),i.$parent.parentScope.isActiveName("ct_section")?(i.$parent.setOptionModel("container-"+o,""),jQuery(".ct-section-inner-wrap",p).css(o,"")):(i.$parent.setOptionModel(o,""),jQuery(p).css(o,"")),i.$parent.outputCSSStyles("oxy-dragging-styles",""),i.$apply()}),jQuery(t).addClass("rb-overlay")):(t.addEventListener("mouseover",function(t){var e;if(i.$parent.parentScope.isActiveName("ct_section"))jQuery("#rb-margin-"+o+"-button").css("display","none"),e=parseInt(i.$parent.getOption("container-padding-"+o));else{var n=parseInt(i.$parent.getOption("margin-"+o));e=parseInt(i.$parent.getOption("padding-"+o)),0<n?jQuery("#rb-margin-"+o+"-button").css("display","none"):jQuery("#rb-margin-"+o+"-button").css("display","")}0<e?jQuery("#rb-padding-"+o+"-button").css("display","none"):jQuery("#rb-padding-"+o+"-button").css("display","")},!1),t.addEventListener("mouseout",function(t){jQuery("#rb-margin-"+o+"-button").css("display",""),jQuery("#rb-padding-"+o+"-button").css("display","")},!1),jQuery(t).addClass("rb-border"))}),i.$parent.rbMarginTop=jQuery("#rb-margin-top"),i.$parent.rbMarginLeft=jQuery("#rb-margin-left"),i.$parent.rbMarginRight=jQuery("#rb-margin-right"),i.$parent.rbMarginBottom=jQuery("#rb-margin-bottom"),i.$parent.rbPaddingTop=jQuery("#rb-padding-top"),i.$parent.rbPaddingLeft=jQuery("#rb-padding-left"),i.$parent.rbPaddingRight=jQuery("#rb-padding-right"),i.$parent.rbPaddingBottom=jQuery("#rb-padding-bottom"),i.$parent.rbTop=jQuery("#rb-top"),i.$parent.rbLeft=jQuery("#rb-left"),i.$parent.rbRight=jQuery("#rb-right"),i.$parent.rbBottom=jQuery("#rb-bottom"),i.$parent.rbTitleBar=jQuery("#oxygen-resize-box-titlebar"),i.$parent.rbParentTitleBar=jQuery("#oxygen-resize-box-parent-titlebar")}}}]),CTFrontendBuilder.directive("oxygenResizeFlex",["$timeout","$interval",function(b,_){return{restrict:"AE",scope:{rOptions:"=",rCenteredX:"=",rCenteredY:"=",rWidth:"=",rHeight:"=",rFlex:"=",rId:"=",rGrabber:"@",rDisabled:"@"},link:function(o,i,t){"flexBasis"in document.documentElement.style||"webkitFlexBasis"in document.documentElement.style||document.documentElement.style;var a,r,c,e=b(function(){var t=i.css("position");""!=t&&"static"!=t||i.addClass("oxygen-resizable-relative"),_.cancel(e)},0,!1),d=window.getComputedStyle(i[0],null),n=o.rOptions||["right"],p=o.rCenteredX?2:1,s=(o.rCenteredY,o.rGrabber?o.rGrabber:"<span></span>"),l=function(t){return t.touches?t.touches[0].clientX:t.clientX},g=function(t){return t.touches?t.touches[0].clientY:t.clientY},m=function(t){var e="x"===c?a-l(t):a-g(t);switch(r){case"right":var n=0<width-e*p?width-e*p:0;o.$parent.setOptionModel("flex-basis",n+"px",o.rId),console.log(width,n)}},u=function(t){o.$apply(),document.removeEventListener("mouseup",u,!1),document.removeEventListener("mousemove",m,!1),document.removeEventListener("touchend",u,!1),document.removeEventListener("touchmove",m,!1),i.removeClass("oxygen-no-transition")};n.forEach(function(n){var t=document.createElement("div");t.setAttribute("class","rg rg-"+n),t.innerHTML=s,i.append(t),t.ondragstart=function(){return!1};var e=function(t){var e;"true"===o.rDisabled||1!==t.which&&!t.touches||(e=t,c=0<=(r=n).indexOf("left")||0<=r.indexOf("right")?"x":"y",a="x"===c?l(e):g(e),width=parseInt(o.$parent.getOption("width"))||parseInt(d.getPropertyValue("width")),i.addClass("oxygen-no-transition"),document.addEventListener("mouseup",u,!1),document.addEventListener("mousemove",m,!1),document.addEventListener("touchend",u,!1),document.addEventListener("touchmove",m,!1),e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1,o.$apply())};t.addEventListener("mousedown",e,!1),t.addEventListener("touchstart",e,!1)})}}}]),CTFrontendBuilder.directive("oxyimageonload",function(){return{restrict:"A",link:function(t,e,n){e.bind("load",function(){t.adjustResizeBox()})}}});
CTFrontendBuilder.directive("oxygenSlider",["$timeout","$interval",function(i,n){return{link:function(a,t,n){i(function(){var n=t.parent().attr("ng-attr-component-id");if(a.$parent){void 0===a.$parent.sliders&&(a.$parent.sliders={});var r=a.component.options[n].id;a.$parent.sliders[n]=t.on("unslider.ready",function(){a.$parent.adjustResizeBox()}).unslider({autoplay:"yes"==r["slider-autoplay"],delay:parseInt(r["slider-autoplay-delay"]),animation:r["slider-animation"],speed:parseInt(r["slider-animation-speed"]),arrows:"yes"==r["slider-show-arrows"],nav:"yes"==r["slider-show-dots"],infinite:!1}).on("unslider.change",function(n,i,e){if("no"==r["slider-autoplay"]){a.$parent.titleBarsVisibility("hidden");var t=e.children().attr("ng-attr-component-id");a.$parent.activateComponent(t)}}).on("unslider.moved",function(){a.$parent.adjustResizeBox(),a.$parent.titleBarsVisibility("visible","visible")});var i=a.$parent.getActiveComponent();if(0<i.parents(".ct-slider").length){var e=i.closest("li").index();a.$parent.sliders[n].unslider("animate:"+e)}t.siblings(".unslider-arrow").mousedown(function(n){n.stopPropagation()}),t.siblings(".unslider-nav").find("li").mousedown(function(n){n.stopPropagation()})}},0,!1)}}}]);